var Rk=t=>{throw TypeError(t)};var ex=(t,e,n)=>e.has(t)||Rk("Cannot "+n);var P=(t,e,n)=>(ex(t,e,"read from private field"),n?n.call(t):e.get(t)),Se=(t,e,n)=>e.has(t)?Rk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,r)=>(ex(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Fe=(t,e,n)=>(ex(t,e,"access private method"),n);var gp=(t,e,n,r)=>({set _(s){de(t,e,s,n)},get _(){return P(t,e,r)}});function Hz(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Wz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var $M={exports:{}},Av={},zM={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=Symbol.for("react.element"),qz=Symbol.for("react.portal"),Kz=Symbol.for("react.fragment"),Gz=Symbol.for("react.strict_mode"),Yz=Symbol.for("react.profiler"),Qz=Symbol.for("react.provider"),Jz=Symbol.for("react.context"),Xz=Symbol.for("react.forward_ref"),Zz=Symbol.for("react.suspense"),eB=Symbol.for("react.memo"),tB=Symbol.for("react.lazy"),Ok=Symbol.iterator;function nB(t){return t===null||typeof t!="object"?null:(t=Ok&&t[Ok]||t["@@iterator"],typeof t=="function"?t:null)}var BM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VM=Object.assign,UM={};function td(t,e,n){this.props=t,this.context=e,this.refs=UM,this.updater=n||BM}td.prototype.isReactComponent={};td.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};td.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HM(){}HM.prototype=td.prototype;function Q1(t,e,n){this.props=t,this.context=e,this.refs=UM,this.updater=n||BM}var J1=Q1.prototype=new HM;J1.constructor=Q1;VM(J1,td.prototype);J1.isPureReactComponent=!0;var Ik=Array.isArray,WM=Object.prototype.hasOwnProperty,X1={current:null},qM={key:!0,ref:!0,__self:!0,__source:!0};function KM(t,e,n){var r,s={},o=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)WM.call(e,r)&&!qM.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Dh,type:t,key:o,ref:i,props:s,_owner:X1.current}}function rB(t,e){return{$$typeof:Dh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Z1(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dh}function sB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Lk=/\/+/g;function tx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sB(""+t.key):e.toString(36)}function dm(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Dh:case qz:i=!0}}if(i)return i=t,s=s(i),t=r===""?"."+tx(i,0):r,Ik(s)?(n="",t!=null&&(n=t.replace(Lk,"$&/")+"/"),dm(s,e,n,"",function(u){return u})):s!=null&&(Z1(s)&&(s=rB(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Lk,"$&/")+"/")+t)),e.push(s)),1;if(i=0,r=r===""?".":r+":",Ik(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+tx(o,a);i+=dm(o,e,n,c,s)}else if(c=nB(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+tx(o,a++),i+=dm(o,e,n,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function vp(t,e,n){if(t==null)return t;var r=[],s=0;return dm(t,r,"","",function(o){return e.call(n,o,s++)}),r}function oB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var er={current:null},fm={transition:null},iB={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:fm,ReactCurrentOwner:X1};function GM(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:vp,forEach:function(t,e,n){vp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vp(t,function(){e++}),e},toArray:function(t){return vp(t,function(e){return e})||[]},only:function(t){if(!Z1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=td;He.Fragment=Kz;He.Profiler=Yz;He.PureComponent=Q1;He.StrictMode=Gz;He.Suspense=Zz;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iB;He.act=GM;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VM({},t.props),s=t.key,o=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=X1.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)WM.call(e,c)&&!qM.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Dh,type:t.type,key:s,ref:o,props:r,_owner:i}};He.createContext=function(t){return t={$$typeof:Jz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qz,_context:t},t.Consumer=t};He.createElement=KM;He.createFactory=function(t){var e=KM.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:Xz,render:t}};He.isValidElement=Z1;He.lazy=function(t){return{$$typeof:tB,_payload:{_status:-1,_result:t},_init:oB}};He.memo=function(t,e){return{$$typeof:eB,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=fm.transition;fm.transition={};try{t()}finally{fm.transition=e}};He.unstable_act=GM;He.useCallback=function(t,e){return er.current.useCallback(t,e)};He.useContext=function(t){return er.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return er.current.useDeferredValue(t)};He.useEffect=function(t,e){return er.current.useEffect(t,e)};He.useId=function(){return er.current.useId()};He.useImperativeHandle=function(t,e,n){return er.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return er.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return er.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return er.current.useMemo(t,e)};He.useReducer=function(t,e,n){return er.current.useReducer(t,e,n)};He.useRef=function(t){return er.current.useRef(t)};He.useState=function(t){return er.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return er.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return er.current.useTransition()};He.version="18.3.1";zM.exports=He;var g=zM.exports;const J=Y1(g),eS=Hz({__proto__:null,default:J},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aB=g,lB=Symbol.for("react.element"),cB=Symbol.for("react.fragment"),uB=Object.prototype.hasOwnProperty,dB=aB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fB={key:!0,ref:!0,__self:!0,__source:!0};function YM(t,e,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)uB.call(e,r)&&!fB.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lB,type:t,key:o,ref:i,props:s,_owner:dB.current}}Av.Fragment=cB;Av.jsx=YM;Av.jsxs=YM;$M.exports=Av;var l=$M.exports,QM={exports:{}},Dr={},JM={exports:{}},XM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,D){var L=T.length;T.push(D);e:for(;0<L;){var X=L-1>>>1,I=T[X];if(0<s(I,D))T[X]=D,T[L]=I,L=X;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],L=T.pop();if(L!==D){T[0]=L;e:for(var X=0,I=T.length,W=I>>>1;X<W;){var _=2*(X+1)-1,ee=T[_],M=_+1,F=T[M];if(0>s(ee,L))M<I&&0>s(F,ee)?(T[X]=F,T[M]=L,X=M):(T[X]=ee,T[_]=L,X=_);else if(M<I&&0>s(F,L))T[X]=F,T[M]=L,X=M;else break e}}return D}function s(T,D){var L=T.sortIndex-D.sortIndex;return L!==0?L:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=T)r(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(u)}}function S(T){if(v=!1,w(T),!m)if(n(c)!==null)m=!0,K(j);else{var D=n(u);D!==null&&R(S,D.startTime-T)}}function j(T,D){m=!1,v&&(v=!1,x(N),N=-1),p=!0;var L=h;try{for(w(D),f=n(c);f!==null&&(!(f.expirationTime>D)||T&&!$());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var I=X(f.expirationTime<=D);D=t.unstable_now(),typeof I=="function"?f.callback=I:f===n(c)&&r(c),w(D)}else r(c);f=n(c)}if(f!==null)var W=!0;else{var _=n(u);_!==null&&R(S,_.startTime-D),W=!1}return W}finally{f=null,h=L,p=!1}}var C=!1,k=null,N=-1,E=5,A=-1;function $(){return!(t.unstable_now()-A<E)}function H(){if(k!==null){var T=t.unstable_now();A=T;var D=!0;try{D=k(!0,T)}finally{D?O():(C=!1,k=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(H)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,B=V.port2;V.port1.onmessage=H,O=function(){B.postMessage(null)}}else O=function(){b(H,0)};function K(T){k=T,C||(C=!0,O())}function R(T,D){N=b(function(){T(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,K(j))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(T){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var L=h;h=D;try{return T()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=h;h=T;try{return D()}finally{h=L}},t.unstable_scheduleCallback=function(T,D,L){var X=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?X+L:X):L=X,T){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=L+I,T={id:d++,callback:D,priorityLevel:T,startTime:L,expirationTime:I,sortIndex:-1},L>X?(T.sortIndex=L,e(u,T),n(c)===null&&T===n(u)&&(v?(x(N),N=-1):v=!0,R(S,L-X))):(T.sortIndex=I,e(c,T),m||p||(m=!0,K(j))),T},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(T){var D=h;return function(){var L=h;h=D;try{return T.apply(this,arguments)}finally{h=L}}}})(XM);JM.exports=XM;var hB=JM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pB=g,Mr=hB;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZM=new Set,Af={};function Zl(t,e){Au(t,e),Au(t+"Capture",e)}function Au(t,e){for(Af[t]=e,t=0;t<e.length;t++)ZM.add(e[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Q0=Object.prototype.hasOwnProperty,mB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fk={},$k={};function gB(t){return Q0.call($k,t)?!0:Q0.call(Fk,t)?!1:mB.test(t)?$k[t]=!0:(Fk[t]=!0,!1)}function vB(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yB(t,e,n,r){if(e===null||typeof e>"u"||vB(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tr(t,e,n,r,s,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cn[t]=new tr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cn[e]=new tr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cn[t]=new tr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cn[t]=new tr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cn[t]=new tr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cn[t]=new tr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cn[t]=new tr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cn[t]=new tr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cn[t]=new tr(t,5,!1,t.toLowerCase(),null,!1,!1)});var tS=/[\-:]([a-z])/g;function nS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tS,nS);Cn[e]=new tr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tS,nS);Cn[e]=new tr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tS,nS);Cn[e]=new tr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cn[t]=new tr(t,1,!1,t.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cn[t]=new tr(t,1,!1,t.toLowerCase(),null,!0,!0)});function rS(t,e,n,r){var s=Cn.hasOwnProperty(e)?Cn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yB(e,n,s,r)&&(n=null),r||s===null?gB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var li=pB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yp=Symbol.for("react.element"),Ic=Symbol.for("react.portal"),Lc=Symbol.for("react.fragment"),sS=Symbol.for("react.strict_mode"),J0=Symbol.for("react.profiler"),eA=Symbol.for("react.provider"),tA=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),Z0=Symbol.for("react.suspense_list"),iS=Symbol.for("react.memo"),Ai=Symbol.for("react.lazy"),nA=Symbol.for("react.offscreen"),zk=Symbol.iterator;function kd(t){return t===null||typeof t!="object"?null:(t=zk&&t[zk]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,nx;function Bd(t){if(nx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nx=e&&e[1]||""}return`
`+nx+t}var rx=!1;function sx(t,e){if(!t||rx)return"";rx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var c=`
`+s[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=a);break}}}finally{rx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bd(t):""}function xB(t){switch(t.tag){case 5:return Bd(t.type);case 16:return Bd("Lazy");case 13:return Bd("Suspense");case 19:return Bd("SuspenseList");case 0:case 2:case 15:return t=sx(t.type,!1),t;case 11:return t=sx(t.type.render,!1),t;case 1:return t=sx(t.type,!0),t;default:return""}}function eb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lc:return"Fragment";case Ic:return"Portal";case J0:return"Profiler";case sS:return"StrictMode";case X0:return"Suspense";case Z0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tA:return(t.displayName||"Context")+".Consumer";case eA:return(t._context.displayName||"Context")+".Provider";case oS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iS:return e=t.displayName||null,e!==null?e:eb(t.type)||"Memo";case Ai:e=t._payload,t=t._init;try{return eb(t(e))}catch{}}return null}function bB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eb(e);case 8:return e===sS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wB(t){var e=rA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xp(t){t._valueTracker||(t._valueTracker=wB(t))}function sA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tb(t,e){var n=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ba(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oA(t,e){e=e.checked,e!=null&&rS(t,"checked",e,!1)}function nb(t,e){oA(t,e);var n=ba(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rb(t,e.type,n):e.hasOwnProperty("defaultValue")&&rb(t,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rb(t,e,n){(e!=="number"||Fm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vd=Array.isArray;function eu(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ba(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(Vd(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ba(n)}}function iA(t,e){var n=ba(e.value),r=ba(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function aA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ob(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?aA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bp,lA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bp=bp||document.createElement("div"),bp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ef={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SB=["Webkit","ms","Moz","O"];Object.keys(ef).forEach(function(t){SB.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ef[e]=ef[t]})});function cA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ef.hasOwnProperty(t)&&ef[t]?(""+e).trim():e+"px"}function uA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CB=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ib(t,e){if(e){if(CB[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function ab(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lb=null;function aS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cb=null,tu=null,nu=null;function Wk(t){if(t=Ih(t)){if(typeof cb!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Iv(e),cb(t.stateNode,t.type,e))}}function dA(t){tu?nu?nu.push(t):nu=[t]:tu=t}function fA(){if(tu){var t=tu,e=nu;if(nu=tu=null,Wk(t),e)for(t=0;t<e.length;t++)Wk(e[t])}}function hA(t,e){return t(e)}function pA(){}var ox=!1;function mA(t,e,n){if(ox)return t(e,n);ox=!0;try{return hA(t,e,n)}finally{ox=!1,(tu!==null||nu!==null)&&(pA(),fA())}}function Df(t,e){var n=t.stateNode;if(n===null)return null;var r=Iv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var ub=!1;if(Qo)try{var Nd={};Object.defineProperty(Nd,"passive",{get:function(){ub=!0}}),window.addEventListener("test",Nd,Nd),window.removeEventListener("test",Nd,Nd)}catch{ub=!1}function jB(t,e,n,r,s,o,i,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var tf=!1,$m=null,zm=!1,db=null,kB={onError:function(t){tf=!0,$m=t}};function NB(t,e,n,r,s,o,i,a,c){tf=!1,$m=null,jB.apply(kB,arguments)}function EB(t,e,n,r,s,o,i,a,c){if(NB.apply(this,arguments),tf){if(tf){var u=$m;tf=!1,$m=null}else throw Error(ne(198));zm||(zm=!0,db=u)}}function ec(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qk(t){if(ec(t)!==t)throw Error(ne(188))}function _B(t){var e=t.alternate;if(!e){if(e=ec(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return qk(s),t;if(o===r)return qk(s),e;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function vA(t){return t=_B(t),t!==null?yA(t):null}function yA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yA(t);if(e!==null)return e;t=t.sibling}return null}var xA=Mr.unstable_scheduleCallback,Kk=Mr.unstable_cancelCallback,TB=Mr.unstable_shouldYield,MB=Mr.unstable_requestPaint,Rt=Mr.unstable_now,AB=Mr.unstable_getCurrentPriorityLevel,lS=Mr.unstable_ImmediatePriority,bA=Mr.unstable_UserBlockingPriority,Bm=Mr.unstable_NormalPriority,PB=Mr.unstable_LowPriority,wA=Mr.unstable_IdlePriority,Pv=null,no=null;function DB(t){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(Pv,t,void 0,(t.current.flags&128)===128)}catch{}}var ks=Math.clz32?Math.clz32:IB,RB=Math.log,OB=Math.LN2;function IB(t){return t>>>=0,t===0?32:31-(RB(t)/OB|0)|0}var wp=64,Sp=4194304;function Ud(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Ud(a):(o&=i,o!==0&&(r=Ud(o)))}else i=n&~s,i!==0?r=Ud(i):o!==0&&(r=Ud(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ks(e),s=1<<n,r|=t[n],e&=~s;return r}function LB(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FB(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var i=31-ks(o),a=1<<i,c=s[i];c===-1?(!(a&n)||a&r)&&(s[i]=LB(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function fb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function SA(){var t=wp;return wp<<=1,!(wp&4194240)&&(wp=64),t}function ix(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Rh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ks(e),t[e]=n}function $B(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ks(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function cS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ks(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var st=0;function CA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jA,uS,kA,NA,EA,hb=!1,Cp=[],sa=null,oa=null,ia=null,Rf=new Map,Of=new Map,Li=[],zB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gk(t,e){switch(t){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":ia=null;break;case"pointerover":case"pointerout":Rf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Of.delete(e.pointerId)}}function Ed(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Ih(e),e!==null&&uS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BB(t,e,n,r,s){switch(e){case"focusin":return sa=Ed(sa,t,e,n,r,s),!0;case"dragenter":return oa=Ed(oa,t,e,n,r,s),!0;case"mouseover":return ia=Ed(ia,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return Rf.set(o,Ed(Rf.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Of.set(o,Ed(Of.get(o)||null,t,e,n,r,s)),!0}return!1}function _A(t){var e=il(t.target);if(e!==null){var n=ec(e);if(n!==null){if(e=n.tag,e===13){if(e=gA(n),e!==null){t.blockedOn=e,EA(t.priority,function(){kA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lb=r,n.target.dispatchEvent(r),lb=null}else return e=Ih(n),e!==null&&uS(e),t.blockedOn=n,!1;e.shift()}return!0}function Yk(t,e,n){hm(t)&&n.delete(e)}function VB(){hb=!1,sa!==null&&hm(sa)&&(sa=null),oa!==null&&hm(oa)&&(oa=null),ia!==null&&hm(ia)&&(ia=null),Rf.forEach(Yk),Of.forEach(Yk)}function _d(t,e){t.blockedOn===e&&(t.blockedOn=null,hb||(hb=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,VB)))}function If(t){function e(s){return _d(s,t)}if(0<Cp.length){_d(Cp[0],t);for(var n=1;n<Cp.length;n++){var r=Cp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sa!==null&&_d(sa,t),oa!==null&&_d(oa,t),ia!==null&&_d(ia,t),Rf.forEach(e),Of.forEach(e),n=0;n<Li.length;n++)r=Li[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)_A(n),n.blockedOn===null&&Li.shift()}var ru=li.ReactCurrentBatchConfig,Um=!0;function UB(t,e,n,r){var s=st,o=ru.transition;ru.transition=null;try{st=1,dS(t,e,n,r)}finally{st=s,ru.transition=o}}function HB(t,e,n,r){var s=st,o=ru.transition;ru.transition=null;try{st=4,dS(t,e,n,r)}finally{st=s,ru.transition=o}}function dS(t,e,n,r){if(Um){var s=pb(t,e,n,r);if(s===null)gx(t,e,r,Hm,n),Gk(t,r);else if(BB(s,t,e,n,r))r.stopPropagation();else if(Gk(t,r),e&4&&-1<zB.indexOf(t)){for(;s!==null;){var o=Ih(s);if(o!==null&&jA(o),o=pb(t,e,n,r),o===null&&gx(t,e,r,Hm,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else gx(t,e,r,null,n)}}var Hm=null;function pb(t,e,n,r){if(Hm=null,t=aS(r),t=il(t),t!==null)if(e=ec(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hm=t,null}function TA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AB()){case lS:return 1;case bA:return 4;case Bm:case PB:return 16;case wA:return 536870912;default:return 16}default:return 16}}var Xi=null,fS=null,pm=null;function MA(){if(pm)return pm;var t,e=fS,n=e.length,r,s="value"in Xi?Xi.value:Xi.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===s[o-r];r++);return pm=s.slice(t,1<r?1-r:void 0)}function mm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jp(){return!0}function Qk(){return!1}function Rr(t){function e(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jp:Qk,this.isPropagationStopped=Qk,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jp)},persist:function(){},isPersistent:jp}),e}var nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hS=Rr(nd),Oh=Ct({},nd,{view:0,detail:0}),WB=Rr(Oh),ax,lx,Td,Dv=Ct({},Oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Td&&(Td&&t.type==="mousemove"?(ax=t.screenX-Td.screenX,lx=t.screenY-Td.screenY):lx=ax=0,Td=t),ax)},movementY:function(t){return"movementY"in t?t.movementY:lx}}),Jk=Rr(Dv),qB=Ct({},Dv,{dataTransfer:0}),KB=Rr(qB),GB=Ct({},Oh,{relatedTarget:0}),cx=Rr(GB),YB=Ct({},nd,{animationName:0,elapsedTime:0,pseudoElement:0}),QB=Rr(YB),JB=Ct({},nd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XB=Rr(JB),ZB=Ct({},nd,{data:0}),Xk=Rr(ZB),e6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=n6[t])?!!e[t]:!1}function pS(){return r6}var s6=Ct({},Oh,{key:function(t){if(t.key){var e=e6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?t6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pS,charCode:function(t){return t.type==="keypress"?mm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),o6=Rr(s6),i6=Ct({},Dv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zk=Rr(i6),a6=Ct({},Oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pS}),l6=Rr(a6),c6=Ct({},nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),u6=Rr(c6),d6=Ct({},Dv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f6=Rr(d6),h6=[9,13,27,32],mS=Qo&&"CompositionEvent"in window,nf=null;Qo&&"documentMode"in document&&(nf=document.documentMode);var p6=Qo&&"TextEvent"in window&&!nf,AA=Qo&&(!mS||nf&&8<nf&&11>=nf),eN=" ",tN=!1;function PA(t,e){switch(t){case"keyup":return h6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fc=!1;function m6(t,e){switch(t){case"compositionend":return DA(e);case"keypress":return e.which!==32?null:(tN=!0,eN);case"textInput":return t=e.data,t===eN&&tN?null:t;default:return null}}function g6(t,e){if(Fc)return t==="compositionend"||!mS&&PA(t,e)?(t=MA(),pm=fS=Xi=null,Fc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AA&&e.locale!=="ko"?null:e.data;default:return null}}var v6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!v6[t.type]:e==="textarea"}function RA(t,e,n,r){dA(r),e=Wm(e,"onChange"),0<e.length&&(n=new hS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rf=null,Lf=null;function y6(t){WA(t,0)}function Rv(t){var e=Bc(t);if(sA(e))return t}function x6(t,e){if(t==="change")return e}var OA=!1;if(Qo){var ux;if(Qo){var dx="oninput"in document;if(!dx){var rN=document.createElement("div");rN.setAttribute("oninput","return;"),dx=typeof rN.oninput=="function"}ux=dx}else ux=!1;OA=ux&&(!document.documentMode||9<document.documentMode)}function sN(){rf&&(rf.detachEvent("onpropertychange",IA),Lf=rf=null)}function IA(t){if(t.propertyName==="value"&&Rv(Lf)){var e=[];RA(e,Lf,t,aS(t)),mA(y6,e)}}function b6(t,e,n){t==="focusin"?(sN(),rf=e,Lf=n,rf.attachEvent("onpropertychange",IA)):t==="focusout"&&sN()}function w6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rv(Lf)}function S6(t,e){if(t==="click")return Rv(e)}function C6(t,e){if(t==="input"||t==="change")return Rv(e)}function j6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _s=typeof Object.is=="function"?Object.is:j6;function Ff(t,e){if(_s(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Q0.call(e,s)||!_s(t[s],e[s]))return!1}return!0}function oN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iN(t,e){var n=oN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oN(n)}}function LA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?LA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FA(){for(var t=window,e=Fm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fm(t.document)}return e}function gS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function k6(t){var e=FA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&LA(n.ownerDocument.documentElement,n)){if(r!==null&&gS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=iN(n,o);var i=iN(n,r);s&&i&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N6=Qo&&"documentMode"in document&&11>=document.documentMode,$c=null,mb=null,sf=null,gb=!1;function aN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gb||$c==null||$c!==Fm(r)||(r=$c,"selectionStart"in r&&gS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sf&&Ff(sf,r)||(sf=r,r=Wm(mb,"onSelect"),0<r.length&&(e=new hS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$c)))}function kp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zc={animationend:kp("Animation","AnimationEnd"),animationiteration:kp("Animation","AnimationIteration"),animationstart:kp("Animation","AnimationStart"),transitionend:kp("Transition","TransitionEnd")},fx={},$A={};Qo&&($A=document.createElement("div").style,"AnimationEvent"in window||(delete zc.animationend.animation,delete zc.animationiteration.animation,delete zc.animationstart.animation),"TransitionEvent"in window||delete zc.transitionend.transition);function Ov(t){if(fx[t])return fx[t];if(!zc[t])return t;var e=zc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $A)return fx[t]=e[n];return t}var zA=Ov("animationend"),BA=Ov("animationiteration"),VA=Ov("animationstart"),UA=Ov("transitionend"),HA=new Map,lN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(t,e){HA.set(t,e),Zl(e,[t])}for(var hx=0;hx<lN.length;hx++){var px=lN[hx],E6=px.toLowerCase(),_6=px[0].toUpperCase()+px.slice(1);Ma(E6,"on"+_6)}Ma(zA,"onAnimationEnd");Ma(BA,"onAnimationIteration");Ma(VA,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(UA,"onTransitionEnd");Au("onMouseEnter",["mouseout","mouseover"]);Au("onMouseLeave",["mouseout","mouseover"]);Au("onPointerEnter",["pointerout","pointerover"]);Au("onPointerLeave",["pointerout","pointerover"]);Zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hd));function cN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EB(r,e,void 0,t),t.currentTarget=null}function WA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&s.isPropagationStopped())break e;cN(s,a,u),o=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==o&&s.isPropagationStopped())break e;cN(s,a,u),o=c}}}if(zm)throw t=db,zm=!1,db=null,t}function dt(t,e){var n=e[wb];n===void 0&&(n=e[wb]=new Set);var r=t+"__bubble";n.has(r)||(qA(e,t,2,!1),n.add(r))}function mx(t,e,n){var r=0;e&&(r|=4),qA(n,t,r,e)}var Np="_reactListening"+Math.random().toString(36).slice(2);function $f(t){if(!t[Np]){t[Np]=!0,ZM.forEach(function(n){n!=="selectionchange"&&(T6.has(n)||mx(n,!1,t),mx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Np]||(e[Np]=!0,mx("selectionchange",!1,e))}}function qA(t,e,n,r){switch(TA(e)){case 1:var s=UB;break;case 4:s=HB;break;default:s=dS}n=s.bind(null,e,n,t),s=void 0,!ub||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function gx(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;a!==null;){if(i=il(a),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}a=a.parentNode}}r=r.return}mA(function(){var u=o,d=aS(n),f=[];e:{var h=HA.get(t);if(h!==void 0){var p=hS,m=t;switch(t){case"keypress":if(mm(n)===0)break e;case"keydown":case"keyup":p=o6;break;case"focusin":m="focus",p=cx;break;case"focusout":m="blur",p=cx;break;case"beforeblur":case"afterblur":p=cx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Jk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=KB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=l6;break;case zA:case BA:case VA:p=QB;break;case UA:p=u6;break;case"scroll":p=WB;break;case"wheel":p=f6;break;case"copy":case"cut":case"paste":p=XB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Zk}var v=(e&4)!==0,b=!v&&t==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var y=u,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,x!==null&&(S=Df(y,x),S!=null&&v.push(zf(y,S,w)))),b)break;y=y.return}0<v.length&&(h=new p(h,m,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==lb&&(m=n.relatedTarget||n.fromElement)&&(il(m)||m[Jo]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?il(m):null,m!==null&&(b=ec(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(v=Jk,S="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Zk,S="onPointerLeave",x="onPointerEnter",y="pointer"),b=p==null?h:Bc(p),w=m==null?h:Bc(m),h=new v(S,y+"leave",p,n,d),h.target=b,h.relatedTarget=w,S=null,il(d)===u&&(v=new v(x,y+"enter",m,n,d),v.target=w,v.relatedTarget=b,S=v),b=S,p&&m)t:{for(v=p,x=m,y=0,w=v;w;w=pc(w))y++;for(w=0,S=x;S;S=pc(S))w++;for(;0<y-w;)v=pc(v),y--;for(;0<w-y;)x=pc(x),w--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=pc(v),x=pc(x)}v=null}else v=null;p!==null&&uN(f,h,p,v,!1),m!==null&&b!==null&&uN(f,b,m,v,!0)}}e:{if(h=u?Bc(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var j=x6;else if(nN(h))if(OA)j=C6;else{j=w6;var C=b6}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=S6);if(j&&(j=j(t,u))){RA(f,j,n,d);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&rb(h,"number",h.value)}switch(C=u?Bc(u):window,t){case"focusin":(nN(C)||C.contentEditable==="true")&&($c=C,mb=u,sf=null);break;case"focusout":sf=mb=$c=null;break;case"mousedown":gb=!0;break;case"contextmenu":case"mouseup":case"dragend":gb=!1,aN(f,n,d);break;case"selectionchange":if(N6)break;case"keydown":case"keyup":aN(f,n,d)}var k;if(mS)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Fc?PA(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(AA&&n.locale!=="ko"&&(Fc||N!=="onCompositionStart"?N==="onCompositionEnd"&&Fc&&(k=MA()):(Xi=d,fS="value"in Xi?Xi.value:Xi.textContent,Fc=!0)),C=Wm(u,N),0<C.length&&(N=new Xk(N,t,null,n,d),f.push({event:N,listeners:C}),k?N.data=k:(k=DA(n),k!==null&&(N.data=k)))),(k=p6?m6(t,n):g6(t,n))&&(u=Wm(u,"onBeforeInput"),0<u.length&&(d=new Xk("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=k))}WA(f,e)})}function zf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wm(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Df(t,n),o!=null&&r.unshift(zf(t,o,s)),o=Df(t,e),o!=null&&r.push(zf(t,o,s))),t=t.return}return r}function pc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uN(t,e,n,r,s){for(var o=e._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Df(n,o),c!=null&&i.unshift(zf(n,c,a))):s||(c=Df(n,o),c!=null&&i.push(zf(n,c,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var M6=/\r\n?/g,A6=/\u0000|\uFFFD/g;function dN(t){return(typeof t=="string"?t:""+t).replace(M6,`
`).replace(A6,"")}function Ep(t,e,n){if(e=dN(e),dN(t)!==e&&n)throw Error(ne(425))}function qm(){}var vb=null,yb=null;function xb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bb=typeof setTimeout=="function"?setTimeout:void 0,P6=typeof clearTimeout=="function"?clearTimeout:void 0,fN=typeof Promise=="function"?Promise:void 0,D6=typeof queueMicrotask=="function"?queueMicrotask:typeof fN<"u"?function(t){return fN.resolve(null).then(t).catch(R6)}:bb;function R6(t){setTimeout(function(){throw t})}function vx(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),If(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);If(e)}function aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rd=Math.random().toString(36).slice(2),Ys="__reactFiber$"+rd,Bf="__reactProps$"+rd,Jo="__reactContainer$"+rd,wb="__reactEvents$"+rd,O6="__reactListeners$"+rd,I6="__reactHandles$"+rd;function il(t){var e=t[Ys];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[Ys]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hN(t);t!==null;){if(n=t[Ys])return n;t=hN(t)}return e}t=n,n=t.parentNode}return null}function Ih(t){return t=t[Ys]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Iv(t){return t[Bf]||null}var Sb=[],Vc=-1;function Aa(t){return{current:t}}function pt(t){0>Vc||(t.current=Sb[Vc],Sb[Vc]=null,Vc--)}function at(t,e){Vc++,Sb[Vc]=t.current,t.current=e}var wa={},Dn=Aa(wa),mr=Aa(!1),Dl=wa;function Pu(t,e){var n=t.type.contextTypes;if(!n)return wa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gr(t){return t=t.childContextTypes,t!=null}function Km(){pt(mr),pt(Dn)}function pN(t,e,n){if(Dn.current!==wa)throw Error(ne(168));at(Dn,e),at(mr,n)}function KA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ne(108,bB(t)||"Unknown",s));return Ct({},n,r)}function Gm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wa,Dl=Dn.current,at(Dn,t),at(mr,mr.current),!0}function mN(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=KA(t,e,Dl),r.__reactInternalMemoizedMergedChildContext=t,pt(mr),pt(Dn),at(Dn,t)):pt(mr),at(mr,n)}var Bo=null,Lv=!1,yx=!1;function GA(t){Bo===null?Bo=[t]:Bo.push(t)}function L6(t){Lv=!0,GA(t)}function Pa(){if(!yx&&Bo!==null){yx=!0;var t=0,e=st;try{var n=Bo;for(st=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bo=null,Lv=!1}catch(s){throw Bo!==null&&(Bo=Bo.slice(t+1)),xA(lS,Pa),s}finally{st=e,yx=!1}}return null}var Uc=[],Hc=0,Ym=null,Qm=0,Gr=[],Yr=0,Rl=null,Ho=1,Wo="";function Za(t,e){Uc[Hc++]=Qm,Uc[Hc++]=Ym,Ym=t,Qm=e}function YA(t,e,n){Gr[Yr++]=Ho,Gr[Yr++]=Wo,Gr[Yr++]=Rl,Rl=t;var r=Ho;t=Wo;var s=32-ks(r)-1;r&=~(1<<s),n+=1;var o=32-ks(e)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Ho=1<<32-ks(e)+s|n<<s|r,Wo=o+t}else Ho=1<<o|n<<s|r,Wo=t}function vS(t){t.return!==null&&(Za(t,1),YA(t,1,0))}function yS(t){for(;t===Ym;)Ym=Uc[--Hc],Uc[Hc]=null,Qm=Uc[--Hc],Uc[Hc]=null;for(;t===Rl;)Rl=Gr[--Yr],Gr[Yr]=null,Wo=Gr[--Yr],Gr[Yr]=null,Ho=Gr[--Yr],Gr[Yr]=null}var _r=null,kr=null,yt=!1,ws=null;function QA(t,e){var n=Jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_r=t,kr=aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_r=t,kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rl!==null?{id:Ho,overflow:Wo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_r=t,kr=null,!0):!1;default:return!1}}function Cb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jb(t){if(yt){var e=kr;if(e){var n=e;if(!gN(t,e)){if(Cb(t))throw Error(ne(418));e=aa(n.nextSibling);var r=_r;e&&gN(t,e)?QA(r,n):(t.flags=t.flags&-4097|2,yt=!1,_r=t)}}else{if(Cb(t))throw Error(ne(418));t.flags=t.flags&-4097|2,yt=!1,_r=t}}}function vN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_r=t}function _p(t){if(t!==_r)return!1;if(!yt)return vN(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xb(t.type,t.memoizedProps)),e&&(e=kr)){if(Cb(t))throw JA(),Error(ne(418));for(;e;)QA(t,e),e=aa(e.nextSibling)}if(vN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kr=aa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kr=null}}else kr=_r?aa(t.stateNode.nextSibling):null;return!0}function JA(){for(var t=kr;t;)t=aa(t.nextSibling)}function Du(){kr=_r=null,yt=!1}function xS(t){ws===null?ws=[t]:ws.push(t)}var F6=li.ReactCurrentBatchConfig;function Md(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Tp(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yN(t){var e=t._init;return e(t._payload)}function XA(t){function e(x,y){if(t){var w=x.deletions;w===null?(x.deletions=[y],x.flags|=16):w.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=da(x,y),x.index=0,x.sibling=null,x}function o(x,y,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<y?(x.flags|=2,y):w):(x.flags|=2,y)):(x.flags|=1048576,y)}function i(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,y,w,S){return y===null||y.tag!==6?(y=kx(w,x.mode,S),y.return=x,y):(y=s(y,w),y.return=x,y)}function c(x,y,w,S){var j=w.type;return j===Lc?d(x,y,w.props.children,S,w.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ai&&yN(j)===y.type)?(S=s(y,w.props),S.ref=Md(x,y,w),S.return=x,S):(S=Sm(w.type,w.key,w.props,null,x.mode,S),S.ref=Md(x,y,w),S.return=x,S)}function u(x,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Nx(w,x.mode,S),y.return=x,y):(y=s(y,w.children||[]),y.return=x,y)}function d(x,y,w,S,j){return y===null||y.tag!==7?(y=kl(w,x.mode,S,j),y.return=x,y):(y=s(y,w),y.return=x,y)}function f(x,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=kx(""+y,x.mode,w),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case yp:return w=Sm(y.type,y.key,y.props,null,x.mode,w),w.ref=Md(x,null,y),w.return=x,w;case Ic:return y=Nx(y,x.mode,w),y.return=x,y;case Ai:var S=y._init;return f(x,S(y._payload),w)}if(Vd(y)||kd(y))return y=kl(y,x.mode,w,null),y.return=x,y;Tp(x,y)}return null}function h(x,y,w,S){var j=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:a(x,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case yp:return w.key===j?c(x,y,w,S):null;case Ic:return w.key===j?u(x,y,w,S):null;case Ai:return j=w._init,h(x,y,j(w._payload),S)}if(Vd(w)||kd(w))return j!==null?null:d(x,y,w,S,null);Tp(x,w)}return null}function p(x,y,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(w)||null,a(y,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yp:return x=x.get(S.key===null?w:S.key)||null,c(y,x,S,j);case Ic:return x=x.get(S.key===null?w:S.key)||null,u(y,x,S,j);case Ai:var C=S._init;return p(x,y,w,C(S._payload),j)}if(Vd(S)||kd(S))return x=x.get(w)||null,d(y,x,S,j,null);Tp(y,S)}return null}function m(x,y,w,S){for(var j=null,C=null,k=y,N=y=0,E=null;k!==null&&N<w.length;N++){k.index>N?(E=k,k=null):E=k.sibling;var A=h(x,k,w[N],S);if(A===null){k===null&&(k=E);break}t&&k&&A.alternate===null&&e(x,k),y=o(A,y,N),C===null?j=A:C.sibling=A,C=A,k=E}if(N===w.length)return n(x,k),yt&&Za(x,N),j;if(k===null){for(;N<w.length;N++)k=f(x,w[N],S),k!==null&&(y=o(k,y,N),C===null?j=k:C.sibling=k,C=k);return yt&&Za(x,N),j}for(k=r(x,k);N<w.length;N++)E=p(k,x,N,w[N],S),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?N:E.key),y=o(E,y,N),C===null?j=E:C.sibling=E,C=E);return t&&k.forEach(function($){return e(x,$)}),yt&&Za(x,N),j}function v(x,y,w,S){var j=kd(w);if(typeof j!="function")throw Error(ne(150));if(w=j.call(w),w==null)throw Error(ne(151));for(var C=j=null,k=y,N=y=0,E=null,A=w.next();k!==null&&!A.done;N++,A=w.next()){k.index>N?(E=k,k=null):E=k.sibling;var $=h(x,k,A.value,S);if($===null){k===null&&(k=E);break}t&&k&&$.alternate===null&&e(x,k),y=o($,y,N),C===null?j=$:C.sibling=$,C=$,k=E}if(A.done)return n(x,k),yt&&Za(x,N),j;if(k===null){for(;!A.done;N++,A=w.next())A=f(x,A.value,S),A!==null&&(y=o(A,y,N),C===null?j=A:C.sibling=A,C=A);return yt&&Za(x,N),j}for(k=r(x,k);!A.done;N++,A=w.next())A=p(k,x,N,A.value,S),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?N:A.key),y=o(A,y,N),C===null?j=A:C.sibling=A,C=A);return t&&k.forEach(function(H){return e(x,H)}),yt&&Za(x,N),j}function b(x,y,w,S){if(typeof w=="object"&&w!==null&&w.type===Lc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case yp:e:{for(var j=w.key,C=y;C!==null;){if(C.key===j){if(j=w.type,j===Lc){if(C.tag===7){n(x,C.sibling),y=s(C,w.props.children),y.return=x,x=y;break e}}else if(C.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ai&&yN(j)===C.type){n(x,C.sibling),y=s(C,w.props),y.ref=Md(x,C,w),y.return=x,x=y;break e}n(x,C);break}else e(x,C);C=C.sibling}w.type===Lc?(y=kl(w.props.children,x.mode,S,w.key),y.return=x,x=y):(S=Sm(w.type,w.key,w.props,null,x.mode,S),S.ref=Md(x,y,w),S.return=x,x=S)}return i(x);case Ic:e:{for(C=w.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(x,y.sibling),y=s(y,w.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=Nx(w,x.mode,S),y.return=x,x=y}return i(x);case Ai:return C=w._init,b(x,y,C(w._payload),S)}if(Vd(w))return m(x,y,w,S);if(kd(w))return v(x,y,w,S);Tp(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,w),y.return=x,x=y):(n(x,y),y=kx(w,x.mode,S),y.return=x,x=y),i(x)):n(x,y)}return b}var Ru=XA(!0),ZA=XA(!1),Jm=Aa(null),Xm=null,Wc=null,bS=null;function wS(){bS=Wc=Xm=null}function SS(t){var e=Jm.current;pt(Jm),t._currentValue=e}function kb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function su(t,e){Xm=t,bS=Wc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function is(t){var e=t._currentValue;if(bS!==t)if(t={context:t,memoizedValue:e,next:null},Wc===null){if(Xm===null)throw Error(ne(308));Wc=t,Xm.dependencies={lanes:0,firstContext:t}}else Wc=Wc.next=t;return e}var al=null;function CS(t){al===null?al=[t]:al.push(t)}function eP(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,CS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Xo(t,r)}function Xo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pi=!1;function jS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ko(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function la(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xo(t,n)}return s=r.interleaved,s===null?(e.next=e,CS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xo(t,n)}function gm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cS(t,n)}}function xN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zm(t,e,n,r){var s=t.updateQueue;Pi=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==i&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;i=0,d=u=c=null,a=o;do{var h=a.lane,p=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(h=e,p=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=Ct({},f,h);break e;case 2:Pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do i|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Il|=i,t.lanes=i,t.memoizedState=f}}function bN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ne(191,s));s.call(r)}}}var Lh={},ro=Aa(Lh),Vf=Aa(Lh),Uf=Aa(Lh);function ll(t){if(t===Lh)throw Error(ne(174));return t}function kS(t,e){switch(at(Uf,e),at(Vf,t),at(ro,Lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ob(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ob(e,t)}pt(ro),at(ro,e)}function Ou(){pt(ro),pt(Vf),pt(Uf)}function nP(t){ll(Uf.current);var e=ll(ro.current),n=ob(e,t.type);e!==n&&(at(Vf,t),at(ro,n))}function NS(t){Vf.current===t&&(pt(ro),pt(Vf))}var xt=Aa(0);function eg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xx=[];function ES(){for(var t=0;t<xx.length;t++)xx[t]._workInProgressVersionPrimary=null;xx.length=0}var vm=li.ReactCurrentDispatcher,bx=li.ReactCurrentBatchConfig,Ol=0,St=null,Ht=null,Xt=null,tg=!1,of=!1,Hf=0,$6=0;function kn(){throw Error(ne(321))}function _S(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_s(t[n],e[n]))return!1;return!0}function TS(t,e,n,r,s,o){if(Ol=o,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vm.current=t===null||t.memoizedState===null?U6:H6,t=n(r,s),of){o=0;do{if(of=!1,Hf=0,25<=o)throw Error(ne(301));o+=1,Xt=Ht=null,e.updateQueue=null,vm.current=W6,t=n(r,s)}while(of)}if(vm.current=ng,e=Ht!==null&&Ht.next!==null,Ol=0,Xt=Ht=St=null,tg=!1,e)throw Error(ne(300));return t}function MS(){var t=Hf!==0;return Hf=0,t}function Bs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?St.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function as(){if(Ht===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=Xt===null?St.memoizedState:Xt.next;if(e!==null)Xt=e,Ht=t;else{if(t===null)throw Error(ne(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Xt===null?St.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Wf(t,e){return typeof e=="function"?e(t):e}function wx(t){var e=as(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Ht,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,c=null,u=o;do{var d=u.lane;if((Ol&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,i=r):c=c.next=f,St.lanes|=d,Il|=d}u=u.next}while(u!==null&&u!==o);c===null?i=r:c.next=a,_s(r,e.memoizedState)||(fr=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,St.lanes|=o,Il|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sx(t){var e=as(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=t(o,i.action),i=i.next;while(i!==s);_s(o,e.memoizedState)||(fr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function rP(){}function sP(t,e){var n=St,r=as(),s=e(),o=!_s(r.memoizedState,s);if(o&&(r.memoizedState=s,fr=!0),r=r.queue,AS(aP.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,qf(9,iP.bind(null,n,r,s,e),void 0,null),nn===null)throw Error(ne(349));Ol&30||oP(n,e,s)}return s}function oP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iP(t,e,n,r){e.value=n,e.getSnapshot=r,lP(e)&&cP(t)}function aP(t,e,n){return n(function(){lP(e)&&cP(t)})}function lP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_s(t,n)}catch{return!0}}function cP(t){var e=Xo(t,1);e!==null&&Ns(e,t,1,-1)}function wN(t){var e=Bs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:t},e.queue=t,t=t.dispatch=V6.bind(null,St,t),[e.memoizedState,t]}function qf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function uP(){return as().memoizedState}function ym(t,e,n,r){var s=Bs();St.flags|=t,s.memoizedState=qf(1|e,n,void 0,r===void 0?null:r)}function Fv(t,e,n,r){var s=as();r=r===void 0?null:r;var o=void 0;if(Ht!==null){var i=Ht.memoizedState;if(o=i.destroy,r!==null&&_S(r,i.deps)){s.memoizedState=qf(e,n,o,r);return}}St.flags|=t,s.memoizedState=qf(1|e,n,o,r)}function SN(t,e){return ym(8390656,8,t,e)}function AS(t,e){return Fv(2048,8,t,e)}function dP(t,e){return Fv(4,2,t,e)}function fP(t,e){return Fv(4,4,t,e)}function hP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pP(t,e,n){return n=n!=null?n.concat([t]):null,Fv(4,4,hP.bind(null,e,t),n)}function PS(){}function mP(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_S(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gP(t,e){var n=as();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_S(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vP(t,e,n){return Ol&21?(_s(n,e)||(n=SA(),St.lanes|=n,Il|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function z6(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var r=bx.transition;bx.transition={};try{t(!1),e()}finally{st=n,bx.transition=r}}function yP(){return as().memoizedState}function B6(t,e,n){var r=ua(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xP(t))bP(e,n);else if(n=eP(t,e,n,r),n!==null){var s=Qn();Ns(n,t,r,s),wP(n,e,r)}}function V6(t,e,n){var r=ua(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xP(t))bP(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,_s(a,i)){var c=e.interleaved;c===null?(s.next=s,CS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=eP(t,e,s,r),n!==null&&(s=Qn(),Ns(n,t,r,s),wP(n,e,r))}}function xP(t){var e=t.alternate;return t===St||e!==null&&e===St}function bP(t,e){of=tg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cS(t,n)}}var ng={readContext:is,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},U6={readContext:is,useCallback:function(t,e){return Bs().memoizedState=[t,e===void 0?null:e],t},useContext:is,useEffect:SN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ym(4194308,4,hP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ym(4194308,4,t,e)},useInsertionEffect:function(t,e){return ym(4,2,t,e)},useMemo:function(t,e){var n=Bs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Bs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B6.bind(null,St,t),[r.memoizedState,t]},useRef:function(t){var e=Bs();return t={current:t},e.memoizedState=t},useState:wN,useDebugValue:PS,useDeferredValue:function(t){return Bs().memoizedState=t},useTransition:function(){var t=wN(!1),e=t[0];return t=z6.bind(null,t[1]),Bs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=St,s=Bs();if(yt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),nn===null)throw Error(ne(349));Ol&30||oP(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,SN(aP.bind(null,r,o,t),[t]),r.flags|=2048,qf(9,iP.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Bs(),e=nn.identifierPrefix;if(yt){var n=Wo,r=Ho;n=(r&~(1<<32-ks(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H6={readContext:is,useCallback:mP,useContext:is,useEffect:AS,useImperativeHandle:pP,useInsertionEffect:dP,useLayoutEffect:fP,useMemo:gP,useReducer:wx,useRef:uP,useState:function(){return wx(Wf)},useDebugValue:PS,useDeferredValue:function(t){var e=as();return vP(e,Ht.memoizedState,t)},useTransition:function(){var t=wx(Wf)[0],e=as().memoizedState;return[t,e]},useMutableSource:rP,useSyncExternalStore:sP,useId:yP,unstable_isNewReconciler:!1},W6={readContext:is,useCallback:mP,useContext:is,useEffect:AS,useImperativeHandle:pP,useInsertionEffect:dP,useLayoutEffect:fP,useMemo:gP,useReducer:Sx,useRef:uP,useState:function(){return Sx(Wf)},useDebugValue:PS,useDeferredValue:function(t){var e=as();return Ht===null?e.memoizedState=t:vP(e,Ht.memoizedState,t)},useTransition:function(){var t=Sx(Wf)[0],e=as().memoizedState;return[t,e]},useMutableSource:rP,useSyncExternalStore:sP,useId:yP,unstable_isNewReconciler:!1};function gs(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $v={isMounted:function(t){return(t=t._reactInternals)?ec(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qn(),s=ua(t),o=Ko(r,s);o.payload=e,n!=null&&(o.callback=n),e=la(t,o,s),e!==null&&(Ns(e,t,s,r),gm(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qn(),s=ua(t),o=Ko(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=la(t,o,s),e!==null&&(Ns(e,t,s,r),gm(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qn(),r=ua(t),s=Ko(n,r);s.tag=2,e!=null&&(s.callback=e),e=la(t,s,r),e!==null&&(Ns(e,t,r,n),gm(e,t,r))}};function CN(t,e,n,r,s,o,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,i):e.prototype&&e.prototype.isPureReactComponent?!Ff(n,r)||!Ff(s,o):!0}function SP(t,e,n){var r=!1,s=wa,o=e.contextType;return typeof o=="object"&&o!==null?o=is(o):(s=gr(e)?Dl:Dn.current,r=e.contextTypes,o=(r=r!=null)?Pu(t,s):wa),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$v,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function jN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$v.enqueueReplaceState(e,e.state,null)}function Eb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jS(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=is(o):(o=gr(e)?Dl:Dn.current,s.context=Pu(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Nb(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$v.enqueueReplaceState(s,s.state,null),Zm(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Iu(t,e){try{var n="",r=e;do n+=xB(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Cx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _b(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var q6=typeof WeakMap=="function"?WeakMap:Map;function CP(t,e,n){n=Ko(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sg||(sg=!0,Fb=r),_b(t,e)},n}function jP(t,e,n){n=Ko(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_b(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){_b(t,e),typeof r!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function kN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new q6;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iV.bind(null,t,e,n),e.then(t,t))}function NN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function EN(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ko(-1,1),e.tag=2,la(n,e,1))),n.lanes|=1),t)}var K6=li.ReactCurrentOwner,fr=!1;function Wn(t,e,n,r){e.child=t===null?ZA(e,null,n,r):Ru(e,t.child,n,r)}function _N(t,e,n,r,s){n=n.render;var o=e.ref;return su(e,s),r=TS(t,e,n,r,o,s),n=MS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zo(t,e,s)):(yt&&n&&vS(e),e.flags|=1,Wn(t,e,r,s),e.child)}function TN(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!zS(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,kP(t,e,o,r,s)):(t=Sm(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ff,n(i,r)&&t.ref===e.ref)return Zo(t,e,s)}return e.flags|=1,t=da(o,r),t.ref=e.ref,t.return=e,e.child=t}function kP(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Ff(o,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Zo(t,e,s)}return Tb(t,e,n,r,s)}function NP(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Kc,wr),wr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(Kc,wr),wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,at(Kc,wr),wr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,at(Kc,wr),wr|=r;return Wn(t,e,s,n),e.child}function EP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tb(t,e,n,r,s){var o=gr(n)?Dl:Dn.current;return o=Pu(e,o),su(e,s),n=TS(t,e,n,r,o,s),r=MS(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Zo(t,e,s)):(yt&&r&&vS(e),e.flags|=1,Wn(t,e,n,s),e.child)}function MN(t,e,n,r,s){if(gr(n)){var o=!0;Gm(e)}else o=!1;if(su(e,s),e.stateNode===null)xm(t,e),SP(e,n,r),Eb(e,n,r,s),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=is(u):(u=gr(n)?Dl:Dn.current,u=Pu(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==u)&&jN(e,i,r,u),Pi=!1;var h=e.memoizedState;i.state=h,Zm(e,r,i,s),c=e.memoizedState,a!==r||h!==c||mr.current||Pi?(typeof d=="function"&&(Nb(e,n,d,r),c=e.memoizedState),(a=Pi||CN(e,n,a,r,h,c,u))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),i.props=r,i.state=c,i.context=u,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,tP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:gs(e.type,a),i.props=u,f=e.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=is(c):(c=gr(n)?Dl:Dn.current,c=Pu(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==c)&&jN(e,i,r,c),Pi=!1,h=e.memoizedState,i.state=h,Zm(e,r,i,s);var m=e.memoizedState;a!==f||h!==m||mr.current||Pi?(typeof p=="function"&&(Nb(e,n,p,r),m=e.memoizedState),(u=Pi||CN(e,n,u,r,h,m,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),i.props=r,i.state=m,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Mb(t,e,n,r,o,s)}function Mb(t,e,n,r,s,o){EP(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return s&&mN(e,n,!1),Zo(t,e,o);r=e.stateNode,K6.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Ru(e,t.child,null,o),e.child=Ru(e,null,a,o)):Wn(t,e,a,o),e.memoizedState=r.state,s&&mN(e,n,!0),e.child}function _P(t){var e=t.stateNode;e.pendingContext?pN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pN(t,e.context,!1),kS(t,e.containerInfo)}function AN(t,e,n,r,s){return Du(),xS(s),e.flags|=256,Wn(t,e,n,r),e.child}var Ab={dehydrated:null,treeContext:null,retryLane:0};function Pb(t){return{baseLanes:t,cachePool:null,transitions:null}}function TP(t,e,n){var r=e.pendingProps,s=xt.current,o=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),at(xt,s&1),t===null)return jb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,o?(r=e.mode,o=e.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Vv(i,r,0,null),t=kl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Pb(n),e.memoizedState=Ab,t):DS(e,i));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return G6(t,e,i,r,a,s,n);if(o){o=r.fallback,i=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=da(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=da(a,o):(o=kl(o,i,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,i=t.child.memoizedState,i=i===null?Pb(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=t.childLanes&~n,e.memoizedState=Ab,r}return o=t.child,t=o.sibling,r=da(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function DS(t,e){return e=Vv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mp(t,e,n,r){return r!==null&&xS(r),Ru(e,t.child,null,n),t=DS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function G6(t,e,n,r,s,o,i){if(n)return e.flags&256?(e.flags&=-257,r=Cx(Error(ne(422))),Mp(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Vv({mode:"visible",children:r.children},s,0,null),o=kl(o,s,i,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ru(e,t.child,null,i),e.child.memoizedState=Pb(i),e.memoizedState=Ab,o);if(!(e.mode&1))return Mp(t,e,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=Cx(o,r,void 0),Mp(t,e,i,r)}if(a=(i&t.childLanes)!==0,fr||a){if(r=nn,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Xo(t,s),Ns(r,t,s,-1))}return $S(),r=Cx(Error(ne(421))),Mp(t,e,i,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=aV.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,kr=aa(s.nextSibling),_r=e,yt=!0,ws=null,t!==null&&(Gr[Yr++]=Ho,Gr[Yr++]=Wo,Gr[Yr++]=Rl,Ho=t.id,Wo=t.overflow,Rl=e),e=DS(e,r.children),e.flags|=4096,e)}function PN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kb(t.return,e,n)}function jx(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function MP(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(Wn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PN(t,n,e);else if(t.tag===19)PN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(at(xt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&eg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jx(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&eg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jx(e,!0,n,null,o);break;case"together":jx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Il|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=da(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=da(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y6(t,e,n){switch(e.tag){case 3:_P(e),Du();break;case 5:nP(e);break;case 1:gr(e.type)&&Gm(e);break;case 4:kS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;at(Jm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(at(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?TP(t,e,n):(at(xt,xt.current&1),t=Zo(t,e,n),t!==null?t.sibling:null);at(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return MP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,NP(t,e,n)}return Zo(t,e,n)}var AP,Db,PP,DP;AP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Db=function(){};PP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ll(ro.current);var o=null;switch(n){case"input":s=tb(t,s),r=tb(t,r),o=[];break;case"select":s=Ct({},s,{value:void 0}),r=Ct({},r,{value:void 0}),o=[];break;case"textarea":s=sb(t,s),r=sb(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qm)}ib(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Af.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Af.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&dt("scroll",t),o||a===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};DP=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ad(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q6(t,e,n){var r=e.pendingProps;switch(yS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return gr(e.type)&&Km(),Nn(e),null;case 3:return r=e.stateNode,Ou(),pt(mr),pt(Dn),ES(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_p(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ws!==null&&(Bb(ws),ws=null))),Db(t,e),Nn(e),null;case 5:NS(e);var s=ll(Uf.current);if(n=e.type,t!==null&&e.stateNode!=null)PP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Nn(e),null}if(t=ll(ro.current),_p(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ys]=e,r[Bf]=o,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(s=0;s<Hd.length;s++)dt(Hd[s],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":Bk(r,o),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},dt("invalid",r);break;case"textarea":Uk(r,o),dt("invalid",r)}ib(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Ep(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Ep(r.textContent,a,t),s=["children",""+a]):Af.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&dt("scroll",r)}switch(n){case"input":xp(r),Vk(r,o,!0);break;case"textarea":xp(r),Hk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=qm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=aA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Ys]=e,t[Bf]=r,AP(t,e,!1,!1),e.stateNode=t;e:{switch(i=ab(n,r),n){case"dialog":dt("cancel",t),dt("close",t),s=r;break;case"iframe":case"object":case"embed":dt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hd.length;s++)dt(Hd[s],t);s=r;break;case"source":dt("error",t),s=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),s=r;break;case"details":dt("toggle",t),s=r;break;case"input":Bk(t,r),s=tb(t,r),dt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ct({},r,{value:void 0}),dt("invalid",t);break;case"textarea":Uk(t,r),s=sb(t,r),dt("invalid",t);break;default:s=r}ib(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?uA(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lA(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pf(t,c):typeof c=="number"&&Pf(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Af.hasOwnProperty(o)?c!=null&&o==="onScroll"&&dt("scroll",t):c!=null&&rS(t,o,c,i))}switch(n){case"input":xp(t),Vk(t,r,!1);break;case"textarea":xp(t),Hk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ba(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?eu(t,!!r.multiple,o,!1):r.defaultValue!=null&&eu(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)DP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=ll(Uf.current),ll(ro.current),_p(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ys]=e,(o=r.nodeValue!==n)&&(t=_r,t!==null))switch(t.tag){case 3:Ep(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ep(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ys]=e,e.stateNode=r}return Nn(e),null;case 13:if(pt(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&kr!==null&&e.mode&1&&!(e.flags&128))JA(),Du(),e.flags|=98560,o=!1;else if(o=_p(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Ys]=e}else Du(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),o=!1}else ws!==null&&(Bb(ws),ws=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Kt===0&&(Kt=3):$S())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return Ou(),Db(t,e),t===null&&$f(e.stateNode.containerInfo),Nn(e),null;case 10:return SS(e.type._context),Nn(e),null;case 17:return gr(e.type)&&Km(),Nn(e),null;case 19:if(pt(xt),o=e.memoizedState,o===null)return Nn(e),null;if(r=(e.flags&128)!==0,i=o.rendering,i===null)if(r)Ad(o,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=eg(t),i!==null){for(e.flags|=128,Ad(o,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,t=i.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return at(xt,xt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Rt()>Lu&&(e.flags|=128,r=!0,Ad(o,!1),e.lanes=4194304)}else{if(!r)if(t=eg(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ad(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!yt)return Nn(e),null}else 2*Rt()-o.renderingStartTime>Lu&&n!==1073741824&&(e.flags|=128,r=!0,Ad(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(n=o.last,n!==null?n.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Rt(),e.sibling=null,n=xt.current,at(xt,r?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return FS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function J6(t,e){switch(yS(e),e.tag){case 1:return gr(e.type)&&Km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ou(),pt(mr),pt(Dn),ES(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return NS(e),null;case 13:if(pt(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));Du()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(xt),null;case 4:return Ou(),null;case 10:return SS(e.type._context),null;case 22:case 23:return FS(),null;case 24:return null;default:return null}}var Ap=!1,An=!1,X6=typeof WeakSet=="function"?WeakSet:Set,he=null;function qc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tt(t,e,r)}else n.current=null}function Rb(t,e,n){try{n()}catch(r){Tt(t,e,r)}}var DN=!1;function Z6(t,e){if(vb=Um,t=FA(),gS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||s!==0&&f.nodeType!==3||(a=i+s),f!==o||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++u===s&&(a=i),h===o&&++d===r&&(c=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yb={focusedElem:t,selectionRange:n},Um=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,b=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:gs(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(S){Tt(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return m=DN,DN=!1,m}function af(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Rb(e,n,o)}s=s.next}while(s!==r)}}function zv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ob(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RP(t){var e=t.alternate;e!==null&&(t.alternate=null,RP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ys],delete e[Bf],delete e[wb],delete e[O6],delete e[I6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OP(t){return t.tag===5||t.tag===3||t.tag===4}function RN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ib(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qm));else if(r!==4&&(t=t.child,t!==null))for(Ib(t,e,n),t=t.sibling;t!==null;)Ib(t,e,n),t=t.sibling}function Lb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lb(t,e,n),t=t.sibling;t!==null;)Lb(t,e,n),t=t.sibling}var mn=null,xs=!1;function hi(t,e,n){for(n=n.child;n!==null;)IP(t,e,n),n=n.sibling}function IP(t,e,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(Pv,n)}catch{}switch(n.tag){case 5:An||qc(n,e);case 6:var r=mn,s=xs;mn=null,hi(t,e,n),mn=r,xs=s,mn!==null&&(xs?(t=mn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mn.removeChild(n.stateNode));break;case 18:mn!==null&&(xs?(t=mn,n=n.stateNode,t.nodeType===8?vx(t.parentNode,n):t.nodeType===1&&vx(t,n),If(t)):vx(mn,n.stateNode));break;case 4:r=mn,s=xs,mn=n.stateNode.containerInfo,xs=!0,hi(t,e,n),mn=r,xs=s;break;case 0:case 11:case 14:case 15:if(!An&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Rb(n,e,i),s=s.next}while(s!==r)}hi(t,e,n);break;case 1:if(!An&&(qc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tt(n,e,a)}hi(t,e,n);break;case 21:hi(t,e,n);break;case 22:n.mode&1?(An=(r=An)||n.memoizedState!==null,hi(t,e,n),An=r):hi(t,e,n);break;default:hi(t,e,n)}}function ON(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new X6),e.forEach(function(r){var s=lV.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function us(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:mn=a.stateNode,xs=!1;break e;case 3:mn=a.stateNode.containerInfo,xs=!0;break e;case 4:mn=a.stateNode.containerInfo,xs=!0;break e}a=a.return}if(mn===null)throw Error(ne(160));IP(o,i,s),mn=null,xs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LP(e,t),e=e.sibling}function LP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(us(e,t),$s(t),r&4){try{af(3,t,t.return),zv(3,t)}catch(v){Tt(t,t.return,v)}try{af(5,t,t.return)}catch(v){Tt(t,t.return,v)}}break;case 1:us(e,t),$s(t),r&512&&n!==null&&qc(n,n.return);break;case 5:if(us(e,t),$s(t),r&512&&n!==null&&qc(n,n.return),t.flags&32){var s=t.stateNode;try{Pf(s,"")}catch(v){Tt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,i=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&oA(s,o),ab(a,i);var u=ab(a,o);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?uA(s,f):d==="dangerouslySetInnerHTML"?lA(s,f):d==="children"?Pf(s,f):rS(s,d,f,u)}switch(a){case"input":nb(s,o);break;case"textarea":iA(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?eu(s,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?eu(s,!!o.multiple,o.defaultValue,!0):eu(s,!!o.multiple,o.multiple?[]:"",!1))}s[Bf]=o}catch(v){Tt(t,t.return,v)}}break;case 6:if(us(e,t),$s(t),r&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(v){Tt(t,t.return,v)}}break;case 3:if(us(e,t),$s(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{If(e.containerInfo)}catch(v){Tt(t,t.return,v)}break;case 4:us(e,t),$s(t);break;case 13:us(e,t),$s(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(IS=Rt())),r&4&&ON(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(An=(u=An)||d,us(e,t),An=u):us(e,t),$s(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(he=t,d=t.child;d!==null;){for(f=he=d;he!==null;){switch(h=he,p=h.child,h.tag){case 0:case 11:case 14:case 15:af(4,h,h.return);break;case 1:qc(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Tt(r,n,v)}}break;case 5:qc(h,h.return);break;case 22:if(h.memoizedState!==null){LN(f);continue}}p!==null?(p.return=h,he=p):LN(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=cA("display",i))}catch(v){Tt(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Tt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:us(e,t),$s(t),r&4&&ON(t);break;case 21:break;default:us(e,t),$s(t)}}function $s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OP(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Pf(s,""),r.flags&=-33);var o=RN(t);Lb(t,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=RN(t);Ib(t,a,i);break;default:throw Error(ne(161))}}catch(c){Tt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eV(t,e,n){he=t,FP(t)}function FP(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var s=he,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Ap;if(!i){var a=s.alternate,c=a!==null&&a.memoizedState!==null||An;a=Ap;var u=An;if(Ap=i,(An=c)&&!u)for(he=s;he!==null;)i=he,c=i.child,i.tag===22&&i.memoizedState!==null?FN(s):c!==null?(c.return=i,he=c):FN(s);for(;o!==null;)he=o,FP(o),o=o.sibling;he=s,Ap=a,An=u}IN(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,he=o):IN(t)}}function IN(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:An||zv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!An)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:gs(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&bN(e,o,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bN(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&If(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}An||e.flags&512&&Ob(e)}catch(h){Tt(e,e.return,h)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function LN(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function FN(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zv(4,e)}catch(c){Tt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Tt(e,s,c)}}var o=e.return;try{Ob(e)}catch(c){Tt(e,o,c)}break;case 5:var i=e.return;try{Ob(e)}catch(c){Tt(e,i,c)}}}catch(c){Tt(e,e.return,c)}if(e===t){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var tV=Math.ceil,rg=li.ReactCurrentDispatcher,RS=li.ReactCurrentOwner,Xr=li.ReactCurrentBatchConfig,Ye=0,nn=null,Lt=null,Sn=0,wr=0,Kc=Aa(0),Kt=0,Kf=null,Il=0,Bv=0,OS=0,lf=null,cr=null,IS=0,Lu=1/0,Fo=null,sg=!1,Fb=null,ca=null,Pp=!1,Zi=null,og=0,cf=0,$b=null,bm=-1,wm=0;function Qn(){return Ye&6?Rt():bm!==-1?bm:bm=Rt()}function ua(t){return t.mode&1?Ye&2&&Sn!==0?Sn&-Sn:F6.transition!==null?(wm===0&&(wm=SA()),wm):(t=st,t!==0||(t=window.event,t=t===void 0?16:TA(t.type)),t):1}function Ns(t,e,n,r){if(50<cf)throw cf=0,$b=null,Error(ne(185));Rh(t,n,r),(!(Ye&2)||t!==nn)&&(t===nn&&(!(Ye&2)&&(Bv|=n),Kt===4&&Fi(t,Sn)),vr(t,r),n===1&&Ye===0&&!(e.mode&1)&&(Lu=Rt()+500,Lv&&Pa()))}function vr(t,e){var n=t.callbackNode;FB(t,e);var r=Vm(t,t===nn?Sn:0);if(r===0)n!==null&&Kk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kk(n),e===1)t.tag===0?L6($N.bind(null,t)):GA($N.bind(null,t)),D6(function(){!(Ye&6)&&Pa()}),n=null;else{switch(CA(r)){case 1:n=lS;break;case 4:n=bA;break;case 16:n=Bm;break;case 536870912:n=wA;break;default:n=Bm}n=qP(n,$P.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $P(t,e){if(bm=-1,wm=0,Ye&6)throw Error(ne(327));var n=t.callbackNode;if(ou()&&t.callbackNode!==n)return null;var r=Vm(t,t===nn?Sn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ig(t,r);else{e=r;var s=Ye;Ye|=2;var o=BP();(nn!==t||Sn!==e)&&(Fo=null,Lu=Rt()+500,jl(t,e));do try{sV();break}catch(a){zP(t,a)}while(!0);wS(),rg.current=o,Ye=s,Lt!==null?e=0:(nn=null,Sn=0,e=Kt)}if(e!==0){if(e===2&&(s=fb(t),s!==0&&(r=s,e=zb(t,s))),e===1)throw n=Kf,jl(t,0),Fi(t,r),vr(t,Rt()),n;if(e===6)Fi(t,r);else{if(s=t.current.alternate,!(r&30)&&!nV(s)&&(e=ig(t,r),e===2&&(o=fb(t),o!==0&&(r=o,e=zb(t,o))),e===1))throw n=Kf,jl(t,0),Fi(t,r),vr(t,Rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:el(t,cr,Fo);break;case 3:if(Fi(t,r),(r&130023424)===r&&(e=IS+500-Rt(),10<e)){if(Vm(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bb(el.bind(null,t,cr,Fo),e);break}el(t,cr,Fo);break;case 4:if(Fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var i=31-ks(r);o=1<<i,i=e[i],i>s&&(s=i),r&=~o}if(r=s,r=Rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tV(r/1960))-r,10<r){t.timeoutHandle=bb(el.bind(null,t,cr,Fo),r);break}el(t,cr,Fo);break;case 5:el(t,cr,Fo);break;default:throw Error(ne(329))}}}return vr(t,Rt()),t.callbackNode===n?$P.bind(null,t):null}function zb(t,e){var n=lf;return t.current.memoizedState.isDehydrated&&(jl(t,e).flags|=256),t=ig(t,e),t!==2&&(e=cr,cr=n,e!==null&&Bb(e)),t}function Bb(t){cr===null?cr=t:cr.push.apply(cr,t)}function nV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!_s(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fi(t,e){for(e&=~OS,e&=~Bv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ks(e),r=1<<n;t[n]=-1,e&=~r}}function $N(t){if(Ye&6)throw Error(ne(327));ou();var e=Vm(t,0);if(!(e&1))return vr(t,Rt()),null;var n=ig(t,e);if(t.tag!==0&&n===2){var r=fb(t);r!==0&&(e=r,n=zb(t,r))}if(n===1)throw n=Kf,jl(t,0),Fi(t,e),vr(t,Rt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,el(t,cr,Fo),vr(t,Rt()),null}function LS(t,e){var n=Ye;Ye|=1;try{return t(e)}finally{Ye=n,Ye===0&&(Lu=Rt()+500,Lv&&Pa())}}function Ll(t){Zi!==null&&Zi.tag===0&&!(Ye&6)&&ou();var e=Ye;Ye|=1;var n=Xr.transition,r=st;try{if(Xr.transition=null,st=1,t)return t()}finally{st=r,Xr.transition=n,Ye=e,!(Ye&6)&&Pa()}}function FS(){wr=Kc.current,pt(Kc)}function jl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,P6(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(yS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Km();break;case 3:Ou(),pt(mr),pt(Dn),ES();break;case 5:NS(r);break;case 4:Ou();break;case 13:pt(xt);break;case 19:pt(xt);break;case 10:SS(r.type._context);break;case 22:case 23:FS()}n=n.return}if(nn=t,Lt=t=da(t.current,null),Sn=wr=e,Kt=0,Kf=null,OS=Bv=Il=0,cr=lf=null,al!==null){for(e=0;e<al.length;e++)if(n=al[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}al=null}return t}function zP(t,e){do{var n=Lt;try{if(wS(),vm.current=ng,tg){for(var r=St.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tg=!1}if(Ol=0,Xt=Ht=St=null,of=!1,Hf=0,RS.current=null,n===null||n.return===null){Kt=1,Kf=e,Lt=null;break}e:{var o=t,i=n.return,a=n,c=e;if(e=Sn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=NN(i);if(p!==null){p.flags&=-257,EN(p,i,a,o,e),p.mode&1&&kN(o,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(c),e.updateQueue=v}else m.add(c);break e}else{if(!(e&1)){kN(o,u,e),$S();break e}c=Error(ne(426))}}else if(yt&&a.mode&1){var b=NN(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),EN(b,i,a,o,e),xS(Iu(c,a));break e}}o=c=Iu(c,a),Kt!==4&&(Kt=2),lf===null?lf=[o]:lf.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=CP(o,c,e);xN(o,x);break e;case 1:a=c;var y=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ca===null||!ca.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=jP(o,a,e);xN(o,S);break e}}o=o.return}while(o!==null)}UP(n)}catch(j){e=j,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function BP(){var t=rg.current;return rg.current=ng,t===null?ng:t}function $S(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),nn===null||!(Il&268435455)&&!(Bv&268435455)||Fi(nn,Sn)}function ig(t,e){var n=Ye;Ye|=2;var r=BP();(nn!==t||Sn!==e)&&(Fo=null,jl(t,e));do try{rV();break}catch(s){zP(t,s)}while(!0);if(wS(),Ye=n,rg.current=r,Lt!==null)throw Error(ne(261));return nn=null,Sn=0,Kt}function rV(){for(;Lt!==null;)VP(Lt)}function sV(){for(;Lt!==null&&!TB();)VP(Lt)}function VP(t){var e=WP(t.alternate,t,wr);t.memoizedProps=t.pendingProps,e===null?UP(t):Lt=e,RS.current=null}function UP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J6(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,Lt=null;return}}else if(n=Q6(n,e,wr),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);Kt===0&&(Kt=5)}function el(t,e,n){var r=st,s=Xr.transition;try{Xr.transition=null,st=1,oV(t,e,n,r)}finally{Xr.transition=s,st=r}return null}function oV(t,e,n,r){do ou();while(Zi!==null);if(Ye&6)throw Error(ne(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($B(t,o),t===nn&&(Lt=nn=null,Sn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pp||(Pp=!0,qP(Bm,function(){return ou(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Xr.transition,Xr.transition=null;var i=st;st=1;var a=Ye;Ye|=4,RS.current=null,Z6(t,n),LP(n,t),k6(yb),Um=!!vb,yb=vb=null,t.current=n,eV(n),MB(),Ye=a,st=i,Xr.transition=o}else t.current=n;if(Pp&&(Pp=!1,Zi=t,og=s),o=t.pendingLanes,o===0&&(ca=null),DB(n.stateNode),vr(t,Rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sg)throw sg=!1,t=Fb,Fb=null,t;return og&1&&t.tag!==0&&ou(),o=t.pendingLanes,o&1?t===$b?cf++:(cf=0,$b=t):cf=0,Pa(),null}function ou(){if(Zi!==null){var t=CA(og),e=Xr.transition,n=st;try{if(Xr.transition=null,st=16>t?16:t,Zi===null)var r=!1;else{if(t=Zi,Zi=null,og=0,Ye&6)throw Error(ne(331));var s=Ye;for(Ye|=4,he=t.current;he!==null;){var o=he,i=o.child;if(he.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(he=u;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:af(8,d,o)}var f=d.child;if(f!==null)f.return=d,he=f;else for(;he!==null;){d=he;var h=d.sibling,p=d.return;if(RP(d),d===u){he=null;break}if(h!==null){h.return=p,he=h;break}he=p}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}he=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,he=i;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:af(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,he=x;break e}he=o.return}}var y=t.current;for(he=y;he!==null;){i=he;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,he=w;else e:for(i=y;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zv(9,a)}}catch(j){Tt(a,a.return,j)}if(a===i){he=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,he=S;break e}he=a.return}}if(Ye=s,Pa(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(Pv,t)}catch{}r=!0}return r}finally{st=n,Xr.transition=e}}return!1}function zN(t,e,n){e=Iu(n,e),e=CP(t,e,1),t=la(t,e,1),e=Qn(),t!==null&&(Rh(t,1,e),vr(t,e))}function Tt(t,e,n){if(t.tag===3)zN(t,t,n);else for(;e!==null;){if(e.tag===3){zN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ca===null||!ca.has(r))){t=Iu(n,t),t=jP(e,t,1),e=la(e,t,1),t=Qn(),e!==null&&(Rh(e,1,t),vr(e,t));break}}e=e.return}}function iV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(Sn&n)===n&&(Kt===4||Kt===3&&(Sn&130023424)===Sn&&500>Rt()-IS?jl(t,0):OS|=n),vr(t,e)}function HP(t,e){e===0&&(t.mode&1?(e=Sp,Sp<<=1,!(Sp&130023424)&&(Sp=4194304)):e=1);var n=Qn();t=Xo(t,e),t!==null&&(Rh(t,e,n),vr(t,n))}function aV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HP(t,n)}function lV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),HP(t,n)}var WP;WP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||mr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,Y6(t,e,n);fr=!!(t.flags&131072)}else fr=!1,yt&&e.flags&1048576&&YA(e,Qm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xm(t,e),t=e.pendingProps;var s=Pu(e,Dn.current);su(e,n),s=TS(null,e,r,t,s,n);var o=MS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gr(r)?(o=!0,Gm(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jS(e),s.updater=$v,e.stateNode=s,s._reactInternals=e,Eb(e,r,t,n),e=Mb(null,e,r,!0,o,n)):(e.tag=0,yt&&o&&vS(e),Wn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xm(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uV(r),t=gs(r,t),s){case 0:e=Tb(null,e,r,t,n);break e;case 1:e=MN(null,e,r,t,n);break e;case 11:e=_N(null,e,r,t,n);break e;case 14:e=TN(null,e,r,gs(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gs(r,s),Tb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gs(r,s),MN(t,e,r,s,n);case 3:e:{if(_P(e),t===null)throw Error(ne(387));r=e.pendingProps,o=e.memoizedState,s=o.element,tP(t,e),Zm(e,r,null,n);var i=e.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Iu(Error(ne(423)),e),e=AN(t,e,r,n,s);break e}else if(r!==s){s=Iu(Error(ne(424)),e),e=AN(t,e,r,n,s);break e}else for(kr=aa(e.stateNode.containerInfo.firstChild),_r=e,yt=!0,ws=null,n=ZA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Du(),r===s){e=Zo(t,e,n);break e}Wn(t,e,r,n)}e=e.child}return e;case 5:return nP(e),t===null&&jb(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,i=s.children,xb(r,s)?i=null:o!==null&&xb(r,o)&&(e.flags|=32),EP(t,e),Wn(t,e,i,n),e.child;case 6:return t===null&&jb(e),null;case 13:return TP(t,e,n);case 4:return kS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ru(e,null,r,n):Wn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gs(r,s),_N(t,e,r,s,n);case 7:return Wn(t,e,e.pendingProps,n),e.child;case 8:return Wn(t,e,e.pendingProps.children,n),e.child;case 12:return Wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,i=s.value,at(Jm,r._currentValue),r._currentValue=i,o!==null)if(_s(o.value,i)){if(o.children===s.children&&!mr.current){e=Zo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Ko(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),kb(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(ne(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),kb(i,n,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Wn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,su(e,n),s=is(s),r=r(s),e.flags|=1,Wn(t,e,r,n),e.child;case 14:return r=e.type,s=gs(r,e.pendingProps),s=gs(r.type,s),TN(t,e,r,s,n);case 15:return kP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gs(r,s),xm(t,e),e.tag=1,gr(r)?(t=!0,Gm(e)):t=!1,su(e,n),SP(e,r,s),Eb(e,r,s,n),Mb(null,e,r,!0,t,n);case 19:return MP(t,e,n);case 22:return NP(t,e,n)}throw Error(ne(156,e.tag))};function qP(t,e){return xA(t,e)}function cV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(t,e,n,r){return new cV(t,e,n,r)}function zS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uV(t){if(typeof t=="function")return zS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oS)return 11;if(t===iS)return 14}return 2}function da(t,e){var n=t.alternate;return n===null?(n=Jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sm(t,e,n,r,s,o){var i=2;if(r=t,typeof t=="function")zS(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Lc:return kl(n.children,s,o,e);case sS:i=8,s|=8;break;case J0:return t=Jr(12,n,e,s|2),t.elementType=J0,t.lanes=o,t;case X0:return t=Jr(13,n,e,s),t.elementType=X0,t.lanes=o,t;case Z0:return t=Jr(19,n,e,s),t.elementType=Z0,t.lanes=o,t;case nA:return Vv(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eA:i=10;break e;case tA:i=9;break e;case oS:i=11;break e;case iS:i=14;break e;case Ai:i=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Jr(i,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function kl(t,e,n,r){return t=Jr(7,t,r,e),t.lanes=n,t}function Vv(t,e,n,r){return t=Jr(22,t,r,e),t.elementType=nA,t.lanes=n,t.stateNode={isHidden:!1},t}function kx(t,e,n){return t=Jr(6,t,null,e),t.lanes=n,t}function Nx(t,e,n){return e=Jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dV(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ix(0),this.expirationTimes=ix(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ix(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function BS(t,e,n,r,s,o,i,a,c){return t=new dV(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Jr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jS(o),t}function fV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ic,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KP(t){if(!t)return wa;t=t._reactInternals;e:{if(ec(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(gr(n))return KA(t,n,e)}return e}function GP(t,e,n,r,s,o,i,a,c){return t=BS(n,r,!0,t,s,o,i,a,c),t.context=KP(null),n=t.current,r=Qn(),s=ua(n),o=Ko(r,s),o.callback=e??null,la(n,o,s),t.current.lanes=s,Rh(t,s,r),vr(t,r),t}function Uv(t,e,n,r){var s=e.current,o=Qn(),i=ua(s);return n=KP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ko(o,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=la(s,e,i),t!==null&&(Ns(t,s,i,o),gm(t,s,i)),i}function ag(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function BN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function VS(t,e){BN(t,e),(t=t.alternate)&&BN(t,e)}function hV(){return null}var YP=typeof reportError=="function"?reportError:function(t){console.error(t)};function US(t){this._internalRoot=t}Hv.prototype.render=US.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Uv(t,e,null,null)};Hv.prototype.unmount=US.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ll(function(){Uv(null,t,null,null)}),e[Jo]=null}};function Hv(t){this._internalRoot=t}Hv.prototype.unstable_scheduleHydration=function(t){if(t){var e=NA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Li.length&&e!==0&&e<Li[n].priority;n++);Li.splice(n,0,t),n===0&&_A(t)}};function HS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function VN(){}function pV(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=ag(i);o.call(u)}}var i=GP(e,r,t,0,null,!1,!1,"",VN);return t._reactRootContainer=i,t[Jo]=i.current,$f(t.nodeType===8?t.parentNode:t),Ll(),i}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ag(c);a.call(u)}}var c=BS(t,0,!1,null,null,!1,!1,"",VN);return t._reactRootContainer=c,t[Jo]=c.current,$f(t.nodeType===8?t.parentNode:t),Ll(function(){Uv(e,c,n,r)}),c}function qv(t,e,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var c=ag(i);a.call(c)}}Uv(e,i,t,s)}else i=pV(n,e,t,s,r);return ag(i)}jA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ud(e.pendingLanes);n!==0&&(cS(e,n|1),vr(e,Rt()),!(Ye&6)&&(Lu=Rt()+500,Pa()))}break;case 13:Ll(function(){var r=Xo(t,1);if(r!==null){var s=Qn();Ns(r,t,1,s)}}),VS(t,1)}};uS=function(t){if(t.tag===13){var e=Xo(t,134217728);if(e!==null){var n=Qn();Ns(e,t,134217728,n)}VS(t,134217728)}};kA=function(t){if(t.tag===13){var e=ua(t),n=Xo(t,e);if(n!==null){var r=Qn();Ns(n,t,e,r)}VS(t,e)}};NA=function(){return st};EA=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};cb=function(t,e,n){switch(e){case"input":if(nb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Iv(r);if(!s)throw Error(ne(90));sA(r),nb(r,s)}}}break;case"textarea":iA(t,n);break;case"select":e=n.value,e!=null&&eu(t,!!n.multiple,e,!1)}};hA=LS;pA=Ll;var mV={usingClientEntryPoint:!1,Events:[Ih,Bc,Iv,dA,fA,LS]},Pd={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gV={bundleType:Pd.bundleType,version:Pd.version,rendererPackageName:Pd.rendererPackageName,rendererConfig:Pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:li.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vA(t),t===null?null:t.stateNode},findFiberByHostInstance:Pd.findFiberByHostInstance||hV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dp.isDisabled&&Dp.supportsFiber)try{Pv=Dp.inject(gV),no=Dp}catch{}}Dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mV;Dr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HS(e))throw Error(ne(200));return fV(t,e,null,n)};Dr.createRoot=function(t,e){if(!HS(t))throw Error(ne(299));var n=!1,r="",s=YP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=BS(t,1,!1,null,null,n,!1,r,s),t[Jo]=e.current,$f(t.nodeType===8?t.parentNode:t),new US(e)};Dr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=vA(e),t=t===null?null:t.stateNode,t};Dr.flushSync=function(t){return Ll(t)};Dr.hydrate=function(t,e,n){if(!Wv(e))throw Error(ne(200));return qv(null,t,e,!0,n)};Dr.hydrateRoot=function(t,e,n){if(!HS(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=YP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=GP(e,null,t,1,n??null,s,!1,o,i),t[Jo]=e.current,$f(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Hv(e)};Dr.render=function(t,e,n){if(!Wv(e))throw Error(ne(200));return qv(null,t,e,!1,n)};Dr.unmountComponentAtNode=function(t){if(!Wv(t))throw Error(ne(40));return t._reactRootContainer?(Ll(function(){qv(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};Dr.unstable_batchedUpdates=LS;Dr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wv(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return qv(t,e,n,!1,r)};Dr.version="18.3.1-next-f1338f8080-20240426";function QP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QP)}catch(t){console.error(t)}}QP(),QM.exports=Dr;var Cs=QM.exports;const WS=Y1(Cs);var JP,UN=Cs;JP=UN.createRoot,UN.hydrateRoot;var HN=["light","dark"],vV="(prefers-color-scheme: dark)",yV=g.createContext(void 0),xV={setTheme:t=>{},themes:[]},bV=()=>{var t;return(t=g.useContext(yV))!=null?t:xV};g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:i,attrs:a,nonce:c})=>{let u=o==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?HN.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(m,v=!1,b=!0)=>{let x=i?i[m]:m,y=v?m+"|| ''":`'${x}'`,w="";return s&&b&&!v&&HN.includes(m)&&(w+=`d.style.colorScheme = '${m}';`),n==="class"?v||x?w+=`c.add(${y})`:w+="null":x&&(w+=`d[s](n,${y})`),w},p=t?`!function(){${d}${h(t)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${vV}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${u?"":"else{"+h(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${f}}catch(t){}}();`;return g.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var wV=t=>{switch(t){case"success":return jV;case"info":return NV;case"warning":return kV;case"error":return EV;default:return null}},SV=Array(12).fill(0),CV=({visible:t,className:e})=>J.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},J.createElement("div",{className:"sonner-spinner"},SV.map((n,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),jV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),NV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EV=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_V=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),TV=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Vb=1,MV=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Vb++,o=this.toasts.find(a=>a.id===s),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),o?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:i,title:n}):a):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,o,i=r.then(async c=>{if(o=["resolve",c],J.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(PV(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>i.then(()=>o[0]==="reject"?u(o[1]):c(o[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Vb++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},lr=new MV,AV=(t,e)=>{let n=(e==null?void 0:e.id)||Vb++;return lr.addToast({title:t,...e,id:n}),n},PV=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",DV=AV,RV=()=>lr.toasts,OV=()=>lr.getActiveToasts(),q=Object.assign(DV,{success:lr.success,info:lr.info,warning:lr.warning,error:lr.error,custom:lr.custom,message:lr.message,promise:lr.promise,dismiss:lr.dismiss,loading:lr.loading},{getHistory:RV,getToasts:OV});function IV(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}IV(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Rp(t){return t.label!==void 0}var LV=3,FV="32px",$V="16px",WN=4e3,zV=356,BV=14,VV=20,UV=200;function ds(...t){return t.filter(Boolean).join(" ")}function HV(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var WV=t=>{var e,n,r,s,o,i,a,c,u,d,f;let{invert:h,toast:p,unstyled:m,interacting:v,setHeights:b,visibleToasts:x,heights:y,index:w,toasts:S,expanded:j,removeToast:C,defaultRichColors:k,closeButton:N,style:E,cancelButtonStyle:A,actionButtonStyle:$,className:H="",descriptionClassName:O="",duration:V,position:B,gap:K,loadingIcon:R,expandByDefault:T,classNames:D,icons:L,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:I}=t,[W,_]=J.useState(null),[ee,M]=J.useState(null),[F,Y]=J.useState(!1),[oe,se]=J.useState(!1),[pe,ke]=J.useState(!1),[ct,gt]=J.useState(!1),[dn,fn]=J.useState(!1),[hn,ko]=J.useState(0),[Lr,or]=J.useState(0),Fr=J.useRef(p.duration||V||WN),No=J.useRef(null),$r=J.useRef(null),Ha=w===0,dc=w+1<=x,pn=p.type,Xe=p.dismissible!==!1,Yt=p.className||"",Eo=p.descriptionClassName||"",Is=J.useMemo(()=>y.findIndex(ae=>ae.toastId===p.id)||0,[y,p.id]),zn=J.useMemo(()=>{var ae;return(ae=p.closeButton)!=null?ae:N},[p.closeButton,N]),_o=J.useMemo(()=>p.duration||V||WN,[p.duration,V]),di=J.useRef(0),Ls=J.useRef(0),fi=J.useRef(0),cs=J.useRef(null),[Cd,fc]=B.split("-"),Wa=J.useMemo(()=>y.reduce((ae,ie,me)=>me>=Is?ae:ae+ie.height,0),[y,Is]),hc=TV(),U=p.invert||h,ce=pn==="loading";Ls.current=J.useMemo(()=>Is*K+Wa,[Is,Wa]),J.useEffect(()=>{Fr.current=_o},[_o]),J.useEffect(()=>{Y(!0)},[]),J.useEffect(()=>{let ae=$r.current;if(ae){let ie=ae.getBoundingClientRect().height;return or(ie),b(me=>[{toastId:p.id,height:ie,position:p.position},...me]),()=>b(me=>me.filter(We=>We.toastId!==p.id))}},[b,p.id]),J.useLayoutEffect(()=>{if(!F)return;let ae=$r.current,ie=ae.style.height;ae.style.height="auto";let me=ae.getBoundingClientRect().height;ae.style.height=ie,or(me),b(We=>We.find(ge=>ge.toastId===p.id)?We.map(ge=>ge.toastId===p.id?{...ge,height:me}:ge):[{toastId:p.id,height:me,position:p.position},...We])},[F,p.title,p.description,b,p.id]);let ye=J.useCallback(()=>{se(!0),ko(Ls.current),b(ae=>ae.filter(ie=>ie.toastId!==p.id)),setTimeout(()=>{C(p)},UV)},[p,C,b,Ls]);J.useEffect(()=>{if(p.promise&&pn==="loading"||p.duration===1/0||p.type==="loading")return;let ae;return j||v||I&&hc?(()=>{if(fi.current<di.current){let ie=new Date().getTime()-di.current;Fr.current=Fr.current-ie}fi.current=new Date().getTime()})():Fr.current!==1/0&&(di.current=new Date().getTime(),ae=setTimeout(()=>{var ie;(ie=p.onAutoClose)==null||ie.call(p,p),ye()},Fr.current)),()=>clearTimeout(ae)},[j,v,p,pn,I,hc,ye]),J.useEffect(()=>{p.delete&&ye()},[ye,p.delete]);function Te(){var ae,ie,me;return L!=null&&L.loading?J.createElement("div",{className:ds(D==null?void 0:D.loader,(ae=p==null?void 0:p.classNames)==null?void 0:ae.loader,"sonner-loader"),"data-visible":pn==="loading"},L.loading):R?J.createElement("div",{className:ds(D==null?void 0:D.loader,(ie=p==null?void 0:p.classNames)==null?void 0:ie.loader,"sonner-loader"),"data-visible":pn==="loading"},R):J.createElement(CV,{className:ds(D==null?void 0:D.loader,(me=p==null?void 0:p.classNames)==null?void 0:me.loader),visible:pn==="loading"})}return J.createElement("li",{tabIndex:0,ref:$r,className:ds(H,Yt,D==null?void 0:D.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,D==null?void 0:D.default,D==null?void 0:D[pn],(n=p==null?void 0:p.classNames)==null?void 0:n[pn]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:k,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":F,"data-promise":!!p.promise,"data-swiped":dn,"data-removed":oe,"data-visible":dc,"data-y-position":Cd,"data-x-position":fc,"data-index":w,"data-front":Ha,"data-swiping":pe,"data-dismissible":Xe,"data-type":pn,"data-invert":U,"data-swipe-out":ct,"data-swipe-direction":ee,"data-expanded":!!(j||T&&F),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${oe?hn:Ls.current}px`,"--initial-height":T?"auto":`${Lr}px`,...E,...p.style},onDragEnd:()=>{ke(!1),_(null),cs.current=null},onPointerDown:ae=>{ce||!Xe||(No.current=new Date,ko(Ls.current),ae.target.setPointerCapture(ae.pointerId),ae.target.tagName!=="BUTTON"&&(ke(!0),cs.current={x:ae.clientX,y:ae.clientY}))},onPointerUp:()=>{var ae,ie,me,We;if(ct||!Xe)return;cs.current=null;let ge=Number(((ae=$r.current)==null?void 0:ae.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ve=Number(((ie=$r.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),kt=new Date().getTime()-((me=No.current)==null?void 0:me.getTime()),vt=W==="x"?ge:ve,Ot=Math.abs(vt)/kt;if(Math.abs(vt)>=VV||Ot>.11){ko(Ls.current),(We=p.onDismiss)==null||We.call(p,p),M(W==="x"?ge>0?"right":"left":ve>0?"down":"up"),ye(),gt(!0),fn(!1);return}ke(!1),_(null)},onPointerMove:ae=>{var ie,me,We,ge;if(!cs.current||!Xe||((ie=window.getSelection())==null?void 0:ie.toString().length)>0)return;let ve=ae.clientY-cs.current.y,kt=ae.clientX-cs.current.x,vt=(me=t.swipeDirections)!=null?me:HV(B);!W&&(Math.abs(kt)>1||Math.abs(ve)>1)&&_(Math.abs(kt)>Math.abs(ve)?"x":"y");let Ot={x:0,y:0};W==="y"?(vt.includes("top")||vt.includes("bottom"))&&(vt.includes("top")&&ve<0||vt.includes("bottom")&&ve>0)&&(Ot.y=ve):W==="x"&&(vt.includes("left")||vt.includes("right"))&&(vt.includes("left")&&kt<0||vt.includes("right")&&kt>0)&&(Ot.x=kt),(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&fn(!0),(We=$r.current)==null||We.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(ge=$r.current)==null||ge.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},zn&&!p.jsx?J.createElement("button",{"aria-label":X,"data-disabled":ce,"data-close-button":!0,onClick:ce||!Xe?()=>{}:()=>{var ae;ye(),(ae=p.onDismiss)==null||ae.call(p,p)},className:ds(D==null?void 0:D.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(o=L==null?void 0:L.close)!=null?o:_V):null,p.jsx||g.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:J.createElement(J.Fragment,null,pn||p.icon||p.promise?J.createElement("div",{"data-icon":"",className:ds(D==null?void 0:D.icon,(i=p==null?void 0:p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Te():null,p.type!=="loading"?p.icon||(L==null?void 0:L[pn])||wV(pn):null):null,J.createElement("div",{"data-content":"",className:ds(D==null?void 0:D.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},J.createElement("div",{"data-title":"",className:ds(D==null?void 0:D.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?J.createElement("div",{"data-description":"",className:ds(O,Eo,D==null?void 0:D.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),g.isValidElement(p.cancel)?p.cancel:p.cancel&&Rp(p.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||A,onClick:ae=>{var ie,me;Rp(p.cancel)&&Xe&&((me=(ie=p.cancel).onClick)==null||me.call(ie,ae),ye())},className:ds(D==null?void 0:D.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,g.isValidElement(p.action)?p.action:p.action&&Rp(p.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||$,onClick:ae=>{var ie,me;Rp(p.action)&&((me=(ie=p.action).onClick)==null||me.call(ie,ae),!ae.defaultPrevented&&ye())},className:ds(D==null?void 0:D.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function qN(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function qV(t,e){let n={};return[t,e].forEach((r,s)=>{let o=s===1,i=o?"--mobile-offset":"--offset",a=o?$V:FV;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=a:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),n}var KV=g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:i,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:p,visibleToasts:m=LV,toastOptions:v,dir:b=qN(),gap:x=BV,loadingIcon:y,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:j}=t,[C,k]=J.useState([]),N=J.useMemo(()=>Array.from(new Set([r].concat(C.filter(I=>I.position).map(I=>I.position)))),[C,r]),[E,A]=J.useState([]),[$,H]=J.useState(!1),[O,V]=J.useState(!1),[B,K]=J.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=J.useRef(null),T=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=J.useRef(null),L=J.useRef(!1),X=J.useCallback(I=>{k(W=>{var _;return(_=W.find(ee=>ee.id===I.id))!=null&&_.delete||lr.dismiss(I.id),W.filter(({id:ee})=>ee!==I.id)})},[]);return J.useEffect(()=>lr.subscribe(I=>{if(I.dismiss){k(W=>W.map(_=>_.id===I.id?{..._,delete:!0}:_));return}setTimeout(()=>{WS.flushSync(()=>{k(W=>{let _=W.findIndex(ee=>ee.id===I.id);return _!==-1?[...W.slice(0,_),{...W[_],...I},...W.slice(_+1)]:[I,...W]})})})}),[]),J.useEffect(()=>{if(d!=="system"){K(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:W})=>{K(W?"dark":"light")})}catch{I.addListener(({matches:_})=>{try{K(_?"dark":"light")}catch(ee){console.error(ee)}})}},[d]),J.useEffect(()=>{C.length<=1&&H(!1)},[C]),J.useEffect(()=>{let I=W=>{var _,ee;s.every(M=>W[M]||W.code===M)&&(H(!0),(_=R.current)==null||_.focus()),W.code==="Escape"&&(document.activeElement===R.current||(ee=R.current)!=null&&ee.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[s]),J.useEffect(()=>{if(R.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,L.current=!1)}},[R.current]),J.createElement("section",{ref:e,"aria-label":`${S} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((I,W)=>{var _;let[ee,M]=I.split("-");return C.length?J.createElement("ol",{key:I,dir:b==="auto"?qN():b,tabIndex:-1,ref:R,className:a,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":ee,"data-lifted":$&&C.length>1&&!o,"data-x-position":M,style:{"--front-toast-height":`${((_=E[0])==null?void 0:_.height)||0}px`,"--width":`${zV}px`,"--gap":`${x}px`,...p,...qV(c,u)},onBlur:F=>{L.current&&!F.currentTarget.contains(F.relatedTarget)&&(L.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||L.current||(L.current=!0,D.current=F.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{O||H(!1)},onDragEnd:()=>H(!1),onPointerDown:F=>{F.target instanceof HTMLElement&&F.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},C.filter(F=>!F.position&&W===0||F.position===I).map((F,Y)=>{var oe,se;return J.createElement(WV,{key:F.id,icons:w,index:Y,toast:F,defaultRichColors:f,duration:(oe=v==null?void 0:v.duration)!=null?oe:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:m,closeButton:(se=v==null?void 0:v.closeButton)!=null?se:i,interacting:O,position:I,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:X,toasts:C.filter(pe=>pe.position==F.position),heights:E.filter(pe=>pe.position==F.position),setHeights:A,expandByDefault:o,gap:x,loadingIcon:y,expanded:$,pauseWhenPageIsHidden:j,swipeDirections:t.swipeDirections})})):null}))});const GV=({...t})=>{const{theme:e="system"}=bV();return l.jsx(KV,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function KN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kv(...t){return e=>{let n=!1;const r=t.map(s=>{const o=KN(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():KN(t[s],null)}}}}function Ue(...t){return g.useCallback(Kv(...t),t)}function YV(t,e){const n=g.createContext(e),r=o=>{const{children:i,...a}=o,c=g.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:i})};r.displayName=t+"Provider";function s(o){const i=g.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function nr(t,e=[]){let n=[];function r(o,i){const a=g.createContext(i),c=n.length;n=[...n,i];const u=f=>{var x;const{scope:h,children:p,...m}=f,v=((x=h==null?void 0:h[t])==null?void 0:x[c])||a,b=g.useMemo(()=>m,Object.values(m));return l.jsx(v.Provider,{value:b,children:p})};u.displayName=o+"Provider";function d(f,h){var v;const p=((v=h==null?void 0:h[t])==null?void 0:v[c])||a,m=g.useContext(p);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(i=>g.createContext(i));return function(a){const c=(a==null?void 0:a[t])||o;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,QV(s,...e)]}function QV(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const i=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Sa(t){const e=XV(t),n=g.forwardRef((r,s)=>{const{children:o,...i}=r,a=g.Children.toArray(o),c=a.find(ZV);if(c){const u=c.props.children,d=a.map(f=>f===c?g.Children.count(u)>1?g.Children.only(null):g.isValidElement(u)?u.props.children:null:f);return l.jsx(e,{...i,ref:s,children:g.isValidElement(u)?g.cloneElement(u,void 0,d):null})}return l.jsx(e,{...i,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var JV=Sa("Slot");function XV(t){const e=g.forwardRef((n,r)=>{const{children:s,...o}=n;if(g.isValidElement(s)){const i=t8(s),a=e8(o,s.props);return s.type!==g.Fragment&&(a.ref=r?Kv(r,i):i),g.cloneElement(s,a)}return g.Children.count(s)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var XP=Symbol("radix.slottable");function ZP(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=XP,e}function ZV(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===XP}function e8(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...a)=>{const c=o(...a);return s(...a),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function t8(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var n8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=n8.reduce((t,e)=>{const n=Sa(`Primitive.${e}`),r=g.forwardRef((s,o)=>{const{asChild:i,...a}=s,c=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function eD(t,e){t&&Cs.flushSync(()=>t.dispatchEvent(e))}function Ts(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function r8(t,e=globalThis==null?void 0:globalThis.document){const n=Ts(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var s8="DismissableLayer",Ub="dismissableLayer.update",o8="dismissableLayer.pointerDownOutside",i8="dismissableLayer.focusOutside",GN,tD=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sd=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:a,...c}=t,u=g.useContext(tD),[d,f]=g.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),m=Ue(e,k=>f(k)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(b),y=d?v.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=y>=x,j=c8(k=>{const N=k.target,E=[...u.branches].some(A=>A.contains(N));!S||E||(s==null||s(k),i==null||i(k),k.defaultPrevented||a==null||a())},h),C=u8(k=>{const N=k.target;[...u.branches].some(A=>A.contains(N))||(o==null||o(k),i==null||i(k),k.defaultPrevented||a==null||a())},h);return r8(k=>{y===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(GN=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),YN(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=GN)}},[d,h,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),YN())},[d,u]),g.useEffect(()=>{const k=()=>p({});return document.addEventListener(Ub,k),()=>document.removeEventListener(Ub,k)},[]),l.jsx(je.div,{...c,ref:m,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,C.onFocusCapture),onBlurCapture:le(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,j.onPointerDownCapture)})});sd.displayName=s8;var a8="DismissableLayerBranch",l8=g.forwardRef((t,e)=>{const n=g.useContext(tD),r=g.useRef(null),s=Ue(e,r);return g.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),l.jsx(je.div,{...t,ref:s})});l8.displayName=a8;function c8(t,e=globalThis==null?void 0:globalThis.document){const n=Ts(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let c=function(){nD(o8,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function u8(t,e=globalThis==null?void 0:globalThis.document){const n=Ts(t),r=g.useRef(!1);return g.useEffect(()=>{const s=o=>{o.target&&!r.current&&nD(i8,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YN(){const t=new CustomEvent(Ub);document.dispatchEvent(t)}function nD(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?eD(s,o):s.dispatchEvent(o)}var Gt=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},d8=eS[" useId ".trim().toString()]||(()=>{}),f8=0;function Es(t){const[e,n]=g.useState(d8());return Gt(()=>{n(r=>r??String(f8++))},[t]),e?`radix-${e}`:""}const h8=["top","right","bottom","left"],Ca=Math.min,Cr=Math.max,lg=Math.round,Op=Math.floor,so=t=>({x:t,y:t}),p8={left:"right",right:"left",bottom:"top",top:"bottom"},m8={start:"end",end:"start"};function Hb(t,e,n){return Cr(t,Ca(e,n))}function ei(t,e){return typeof t=="function"?t(e):t}function ti(t){return t.split("-")[0]}function od(t){return t.split("-")[1]}function qS(t){return t==="x"?"y":"x"}function KS(t){return t==="y"?"height":"width"}const g8=new Set(["top","bottom"]);function Zs(t){return g8.has(ti(t))?"y":"x"}function GS(t){return qS(Zs(t))}function v8(t,e,n){n===void 0&&(n=!1);const r=od(t),s=GS(t),o=KS(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=cg(i)),[i,cg(i)]}function y8(t){const e=cg(t);return[Wb(t),e,Wb(e)]}function Wb(t){return t.replace(/start|end/g,e=>m8[e])}const QN=["left","right"],JN=["right","left"],x8=["top","bottom"],b8=["bottom","top"];function w8(t,e,n){switch(t){case"top":case"bottom":return n?e?JN:QN:e?QN:JN;case"left":case"right":return e?x8:b8;default:return[]}}function S8(t,e,n,r){const s=od(t);let o=w8(ti(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(Wb)))),o}function cg(t){return t.replace(/left|right|bottom|top/g,e=>p8[e])}function C8(t){return{top:0,right:0,bottom:0,left:0,...t}}function rD(t){return typeof t!="number"?C8(t):{top:t,right:t,bottom:t,left:t}}function ug(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function XN(t,e,n){let{reference:r,floating:s}=t;const o=Zs(e),i=GS(e),a=KS(i),c=ti(e),u=o==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,h=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-s.width,y:f};break;default:p={x:r.x,y:r.y}}switch(od(e)){case"start":p[i]-=h*(n&&u?-1:1);break;case"end":p[i]+=h*(n&&u?-1:1);break}return p}const j8=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:f}=XN(u,r,c),h=r,p={},m=0;for(let v=0;v<a.length;v++){const{name:b,fn:x}=a[v],{x:y,y:w,data:S,reset:j}=await x({x:d,y:f,initialPlacement:r,placement:h,strategy:s,middlewareData:p,rects:u,platform:i,elements:{reference:t,floating:e}});d=y??d,f=w??f,p={...p,[b]:{...p[b],...S}},j&&m<=50&&(m++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:d,y:f}=XN(u,h,c)),v=-1)}return{x:d,y:f,placement:h,strategy:s,middlewareData:p}};async function Gf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=ei(e,t),m=rD(p),b=a[h?f==="floating"?"reference":"floating":f],x=ug(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),y=f==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),S=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},j=ug(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:c}):y);return{top:(x.top-j.top+m.top)/S.y,bottom:(j.bottom-x.bottom+m.bottom)/S.y,left:(x.left-j.left+m.left)/S.x,right:(j.right-x.right+m.right)/S.x}}const k8=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=ei(t,e)||{};if(u==null)return{};const f=rD(d),h={x:n,y:r},p=GS(s),m=KS(p),v=await i.getDimensions(u),b=p==="y",x=b?"top":"left",y=b?"bottom":"right",w=b?"clientHeight":"clientWidth",S=o.reference[m]+o.reference[p]-h[p]-o.floating[m],j=h[p]-o.reference[p],C=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=C?C[w]:0;(!k||!await(i.isElement==null?void 0:i.isElement(C)))&&(k=a.floating[w]||o.floating[m]);const N=S/2-j/2,E=k/2-v[m]/2-1,A=Ca(f[x],E),$=Ca(f[y],E),H=A,O=k-v[m]-$,V=k/2-v[m]/2+N,B=Hb(H,V,O),K=!c.arrow&&od(s)!=null&&V!==B&&o.reference[m]/2-(V<H?A:$)-v[m]/2<0,R=K?V<H?V-H:V-O:0;return{[p]:h[p]+R,data:{[p]:B,centerOffset:V-B-R,...K&&{alignmentOffset:R}},reset:K}}}),N8=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...b}=ei(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=ti(s),y=Zs(a),w=ti(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!v?[cg(a)]:y8(a)),C=m!=="none";!h&&C&&j.push(...S8(a,v,m,S));const k=[a,...j],N=await Gf(e,b),E=[];let A=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&E.push(N[x]),f){const V=v8(s,i,S);E.push(N[V[0]],N[V[1]])}if(A=[...A,{placement:s,overflows:E}],!E.every(V=>V<=0)){var $,H;const V=((($=o.flip)==null?void 0:$.index)||0)+1,B=k[V];if(B&&(!(f==="alignment"?y!==Zs(B):!1)||A.every(T=>T.overflows[0]>0&&Zs(T.placement)===y)))return{data:{index:V,overflows:A},reset:{placement:B}};let K=(H=A.filter(R=>R.overflows[0]<=0).sort((R,T)=>R.overflows[1]-T.overflows[1])[0])==null?void 0:H.placement;if(!K)switch(p){case"bestFit":{var O;const R=(O=A.filter(T=>{if(C){const D=Zs(T.placement);return D===y||D==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(D=>D>0).reduce((D,L)=>D+L,0)]).sort((T,D)=>T[1]-D[1])[0])==null?void 0:O[0];R&&(K=R);break}case"initialPlacement":K=a;break}if(s!==K)return{reset:{placement:K}}}return{}}}};function ZN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function eE(t){return h8.some(e=>t[e]>=0)}const E8=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ei(t,e);switch(r){case"referenceHidden":{const o=await Gf(e,{...s,elementContext:"reference"}),i=ZN(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:eE(i)}}}case"escaped":{const o=await Gf(e,{...s,altBoundary:!0}),i=ZN(o,n.floating);return{data:{escapedOffsets:i,escaped:eE(i)}}}default:return{}}}}},sD=new Set(["left","top"]);async function _8(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=ti(n),a=od(n),c=Zs(n)==="y",u=sD.has(i)?-1:1,d=o&&c?-1:1,f=ei(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),c?{x:p*d,y:h*u}:{x:h*u,y:p*d}}const T8=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=e,c=await _8(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},M8=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:b=>{let{x,y}=b;return{x,y}}},...c}=ei(t,e),u={x:n,y:r},d=await Gf(e,c),f=Zs(ti(s)),h=qS(f);let p=u[h],m=u[f];if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=p+d[b],w=p-d[x];p=Hb(y,p,w)}if(i){const b=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=m+d[b],w=m-d[x];m=Hb(y,m,w)}const v=a.fn({...e,[h]:p,[f]:m});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:o,[f]:i}}}}}},A8=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=ei(t,e),d={x:n,y:r},f=Zs(s),h=qS(f);let p=d[h],m=d[f];const v=ei(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",S=o.reference[h]-o.floating[w]+b.mainAxis,j=o.reference[h]+o.reference[w]-b.mainAxis;p<S?p=S:p>j&&(p=j)}if(u){var x,y;const w=h==="y"?"width":"height",S=sD.has(ti(s)),j=o.reference[f]-o.floating[w]+(S&&((x=i.offset)==null?void 0:x[f])||0)+(S?0:b.crossAxis),C=o.reference[f]+o.reference[w]+(S?0:((y=i.offset)==null?void 0:y[f])||0)-(S?b.crossAxis:0);m<j?m=j:m>C&&(m=C)}return{[h]:p,[f]:m}}}},P8=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:i,elements:a}=e,{apply:c=()=>{},...u}=ei(t,e),d=await Gf(e,u),f=ti(s),h=od(s),p=Zs(s)==="y",{width:m,height:v}=o.floating;let b,x;f==="top"||f==="bottom"?(b=f,x=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,b=h==="end"?"top":"bottom");const y=v-d.top-d.bottom,w=m-d.left-d.right,S=Ca(v-d[b],y),j=Ca(m-d[x],w),C=!e.middlewareData.shift;let k=S,N=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=y),C&&!h){const A=Cr(d.left,0),$=Cr(d.right,0),H=Cr(d.top,0),O=Cr(d.bottom,0);p?N=m-2*(A!==0||$!==0?A+$:Cr(d.left,d.right)):k=v-2*(H!==0||O!==0?H+O:Cr(d.top,d.bottom))}await c({...e,availableWidth:N,availableHeight:k});const E=await i.getDimensions(a.floating);return m!==E.width||v!==E.height?{reset:{rects:!0}}:{}}}};function Gv(){return typeof window<"u"}function id(t){return oD(t)?(t.nodeName||"").toLowerCase():"#document"}function Tr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Co(t){var e;return(e=(oD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oD(t){return Gv()?t instanceof Node||t instanceof Tr(t).Node:!1}function Ms(t){return Gv()?t instanceof Element||t instanceof Tr(t).Element:!1}function lo(t){return Gv()?t instanceof HTMLElement||t instanceof Tr(t).HTMLElement:!1}function tE(t){return!Gv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tr(t).ShadowRoot}const D8=new Set(["inline","contents"]);function Fh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=As(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!D8.has(s)}const R8=new Set(["table","td","th"]);function O8(t){return R8.has(id(t))}const I8=[":popover-open",":modal"];function Yv(t){return I8.some(e=>{try{return t.matches(e)}catch{return!1}})}const L8=["transform","translate","scale","rotate","perspective"],F8=["transform","translate","scale","rotate","perspective","filter"],$8=["paint","layout","strict","content"];function YS(t){const e=QS(),n=Ms(t)?As(t):t;return L8.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||F8.some(r=>(n.willChange||"").includes(r))||$8.some(r=>(n.contain||"").includes(r))}function z8(t){let e=ja(t);for(;lo(e)&&!Fu(e);){if(YS(e))return e;if(Yv(e))return null;e=ja(e)}return null}function QS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const B8=new Set(["html","body","#document"]);function Fu(t){return B8.has(id(t))}function As(t){return Tr(t).getComputedStyle(t)}function Qv(t){return Ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ja(t){if(id(t)==="html")return t;const e=t.assignedSlot||t.parentNode||tE(t)&&t.host||Co(t);return tE(e)?e.host:e}function iD(t){const e=ja(t);return Fu(e)?t.ownerDocument?t.ownerDocument.body:t.body:lo(e)&&Fh(e)?e:iD(e)}function Yf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=iD(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=Tr(s);if(o){const a=qb(i);return e.concat(i,i.visualViewport||[],Fh(s)?s:[],a&&n?Yf(a):[])}return e.concat(s,Yf(s,[],n))}function qb(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aD(t){const e=As(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=lo(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,a=lg(n)!==o||lg(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function JS(t){return Ms(t)?t:t.contextElement}function iu(t){const e=JS(t);if(!lo(e))return so(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=aD(e);let i=(o?lg(n.width):n.width)/r,a=(o?lg(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const V8=so(0);function lD(t){const e=Tr(t);return!QS()||!e.visualViewport?V8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function U8(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tr(t)?!1:e}function Fl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=JS(t);let i=so(1);e&&(r?Ms(r)&&(i=iu(r)):i=iu(t));const a=U8(o,n,r)?lD(o):so(0);let c=(s.left+a.x)/i.x,u=(s.top+a.y)/i.y,d=s.width/i.x,f=s.height/i.y;if(o){const h=Tr(o),p=r&&Ms(r)?Tr(r):r;let m=h,v=qb(m);for(;v&&r&&p!==m;){const b=iu(v),x=v.getBoundingClientRect(),y=As(v),w=x.left+(v.clientLeft+parseFloat(y.paddingLeft))*b.x,S=x.top+(v.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,f*=b.y,c+=w,u+=S,m=Tr(v),v=qb(m)}}return ug({width:d,height:f,x:c,y:u})}function XS(t,e){const n=Qv(t).scrollLeft;return e?e.left+n:Fl(Co(t)).left+n}function cD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:XS(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function H8(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=Co(r),a=e?Yv(e.floating):!1;if(r===i||a&&o)return n;let c={scrollLeft:0,scrollTop:0},u=so(1);const d=so(0),f=lo(r);if((f||!f&&!o)&&((id(r)!=="body"||Fh(i))&&(c=Qv(r)),lo(r))){const p=Fl(r);u=iu(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const h=i&&!f&&!o?cD(i,c,!0):so(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-c.scrollTop*u.y+d.y+h.y}}function W8(t){return Array.from(t.getClientRects())}function q8(t){const e=Co(t),n=Qv(t),r=t.ownerDocument.body,s=Cr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Cr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+XS(t);const a=-n.scrollTop;return As(r).direction==="rtl"&&(i+=Cr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function K8(t,e){const n=Tr(t),r=Co(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,c=0;if(s){o=s.width,i=s.height;const u=QS();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:a,y:c}}const G8=new Set(["absolute","fixed"]);function Y8(t,e){const n=Fl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=lo(t)?iu(t):so(1),i=t.clientWidth*o.x,a=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:i,height:a,x:c,y:u}}function nE(t,e,n){let r;if(e==="viewport")r=K8(t,n);else if(e==="document")r=q8(Co(t));else if(Ms(e))r=Y8(e,n);else{const s=lD(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ug(r)}function uD(t,e){const n=ja(t);return n===e||!Ms(n)||Fu(n)?!1:As(n).position==="fixed"||uD(n,e)}function Q8(t,e){const n=e.get(t);if(n)return n;let r=Yf(t,[],!1).filter(a=>Ms(a)&&id(a)!=="body"),s=null;const o=As(t).position==="fixed";let i=o?ja(t):t;for(;Ms(i)&&!Fu(i);){const a=As(i),c=YS(i);!c&&a.position==="fixed"&&(s=null),(o?!c&&!s:!c&&a.position==="static"&&!!s&&G8.has(s.position)||Fh(i)&&!c&&uD(t,i))?r=r.filter(d=>d!==i):s=a,i=ja(i)}return e.set(t,r),r}function J8(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?Yv(e)?[]:Q8(e,this._c):[].concat(n),r],a=i[0],c=i.reduce((u,d)=>{const f=nE(e,d,s);return u.top=Cr(f.top,u.top),u.right=Ca(f.right,u.right),u.bottom=Ca(f.bottom,u.bottom),u.left=Cr(f.left,u.left),u},nE(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function X8(t){const{width:e,height:n}=aD(t);return{width:e,height:n}}function Z8(t,e,n){const r=lo(e),s=Co(e),o=n==="fixed",i=Fl(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=so(0);function u(){c.x=XS(s)}if(r||!r&&!o)if((id(e)!=="body"||Fh(s))&&(a=Qv(e)),r){const p=Fl(e,!0,o,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();o&&!r&&s&&u();const d=s&&!r&&!o?cD(s,a):so(0),f=i.left+a.scrollLeft-c.x-d.x,h=i.top+a.scrollTop-c.y-d.y;return{x:f,y:h,width:i.width,height:i.height}}function Ex(t){return As(t).position==="static"}function rE(t,e){if(!lo(t)||As(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Co(t)===n&&(n=n.ownerDocument.body),n}function dD(t,e){const n=Tr(t);if(Yv(t))return n;if(!lo(t)){let s=ja(t);for(;s&&!Fu(s);){if(Ms(s)&&!Ex(s))return s;s=ja(s)}return n}let r=rE(t,e);for(;r&&O8(r)&&Ex(r);)r=rE(r,e);return r&&Fu(r)&&Ex(r)&&!YS(r)?n:r||z8(t)||n}const eU=async function(t){const e=this.getOffsetParent||dD,n=this.getDimensions,r=await n(t.floating);return{reference:Z8(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tU(t){return As(t).direction==="rtl"}const nU={convertOffsetParentRelativeRectToViewportRelativeRect:H8,getDocumentElement:Co,getClippingRect:J8,getOffsetParent:dD,getElementRects:eU,getClientRects:W8,getDimensions:X8,getScale:iu,isElement:Ms,isRTL:tU};function fD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function rU(t,e){let n=null,r;const s=Co(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:p}=u;if(a||e(),!h||!p)return;const m=Op(f),v=Op(s.clientWidth-(d+h)),b=Op(s.clientHeight-(f+p)),x=Op(d),w={rootMargin:-m+"px "+-v+"px "+-b+"px "+-x+"px",threshold:Cr(0,Ca(1,c))||1};let S=!0;function j(C){const k=C[0].intersectionRatio;if(k!==c){if(!S)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!fD(u,t.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(j,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,w)}n.observe(t)}return i(!0),o}function sU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=JS(t),d=s||o?[...u?Yf(u):[],...Yf(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const f=u&&a?rU(u,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),u&&!c&&p.observe(u),p.observe(e));let m,v=c?Fl(t):null;c&&b();function b(){const x=Fl(t);v&&!fD(v,x)&&n(),v=x,m=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(y=>{s&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),f==null||f(),(x=p)==null||x.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const oU=T8,iU=M8,aU=N8,lU=P8,cU=E8,sE=k8,uU=A8,dU=(t,e,n)=>{const r=new Map,s={platform:nU,...n},o={...s.platform,_c:r};return j8(t,e,{...s,platform:o})};var fU=typeof document<"u",hU=function(){},Cm=fU?g.useLayoutEffect:hU;function dg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!dg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!dg(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function hD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function oE(t,e){const n=hD(t);return Math.round(e*n)/n}function _x(t){const e=g.useRef(t);return Cm(()=>{e.current=t}),e}function pU(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[d,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=g.useState(r);dg(h,r)||p(r);const[m,v]=g.useState(null),[b,x]=g.useState(null),y=g.useCallback(T=>{T!==C.current&&(C.current=T,v(T))},[]),w=g.useCallback(T=>{T!==k.current&&(k.current=T,x(T))},[]),S=o||m,j=i||b,C=g.useRef(null),k=g.useRef(null),N=g.useRef(d),E=c!=null,A=_x(c),$=_x(s),H=_x(u),O=g.useCallback(()=>{if(!C.current||!k.current)return;const T={placement:e,strategy:n,middleware:h};$.current&&(T.platform=$.current),dU(C.current,k.current,T).then(D=>{const L={...D,isPositioned:H.current!==!1};V.current&&!dg(N.current,L)&&(N.current=L,Cs.flushSync(()=>{f(L)}))})},[h,e,n,$,H]);Cm(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(T=>({...T,isPositioned:!1})))},[u]);const V=g.useRef(!1);Cm(()=>(V.current=!0,()=>{V.current=!1}),[]),Cm(()=>{if(S&&(C.current=S),j&&(k.current=j),S&&j){if(A.current)return A.current(S,j,O);O()}},[S,j,O,A,E]);const B=g.useMemo(()=>({reference:C,floating:k,setReference:y,setFloating:w}),[y,w]),K=g.useMemo(()=>({reference:S,floating:j}),[S,j]),R=g.useMemo(()=>{const T={position:n,left:0,top:0};if(!K.floating)return T;const D=oE(K.floating,d.x),L=oE(K.floating,d.y);return a?{...T,transform:"translate("+D+"px, "+L+"px)",...hD(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:L}},[n,a,K.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:O,refs:B,elements:K,floatingStyles:R}),[d,O,B,K,R])}const mU=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?sE({element:r.current,padding:s}).fn(n):{}:r?sE({element:r,padding:s}).fn(n):{}}}},gU=(t,e)=>({...oU(t),options:[t,e]}),vU=(t,e)=>({...iU(t),options:[t,e]}),yU=(t,e)=>({...uU(t),options:[t,e]}),xU=(t,e)=>({...aU(t),options:[t,e]}),bU=(t,e)=>({...lU(t),options:[t,e]}),wU=(t,e)=>({...cU(t),options:[t,e]}),SU=(t,e)=>({...mU(t),options:[t,e]});var CU="Arrow",pD=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return l.jsx(je.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});pD.displayName=CU;var jU=pD;function ZS(t){const[e,n]=g.useState(void 0);return Gt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,a=u.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var eC="Popper",[mD,Da]=nr(eC),[kU,gD]=mD(eC),vD=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return l.jsx(kU,{scope:e,anchor:r,onAnchorChange:s,children:n})};vD.displayName=eC;var yD="PopperAnchor",xD=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=gD(yD,n),i=g.useRef(null),a=Ue(e,i);return g.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:l.jsx(je.div,{...s,ref:a})});xD.displayName=yD;var tC="PopperContent",[NU,EU]=mD(tC),bD=g.forwardRef((t,e)=>{var F,Y,oe,se,pe,ke;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...v}=t,b=gD(tC,n),[x,y]=g.useState(null),w=Ue(e,ct=>y(ct)),[S,j]=g.useState(null),C=ZS(S),k=(C==null?void 0:C.width)??0,N=(C==null?void 0:C.height)??0,E=r+(o!=="center"?"-"+o:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],H=$.length>0,O={padding:A,boundary:$.filter(TU),altBoundary:H},{refs:V,floatingStyles:B,placement:K,isPositioned:R,middlewareData:T}=pU({strategy:"fixed",placement:E,whileElementsMounted:(...ct)=>sU(...ct,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[gU({mainAxis:s+N,alignmentAxis:i}),c&&vU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?yU():void 0,...O}),c&&xU({...O}),bU({...O,apply:({elements:ct,rects:gt,availableWidth:dn,availableHeight:fn})=>{const{width:hn,height:ko}=gt.reference,Lr=ct.floating.style;Lr.setProperty("--radix-popper-available-width",`${dn}px`),Lr.setProperty("--radix-popper-available-height",`${fn}px`),Lr.setProperty("--radix-popper-anchor-width",`${hn}px`),Lr.setProperty("--radix-popper-anchor-height",`${ko}px`)}}),S&&SU({element:S,padding:a}),MU({arrowWidth:k,arrowHeight:N}),h&&wU({strategy:"referenceHidden",...O})]}),[D,L]=CD(K),X=Ts(m);Gt(()=>{R&&(X==null||X())},[R,X]);const I=(F=T.arrow)==null?void 0:F.x,W=(Y=T.arrow)==null?void 0:Y.y,_=((oe=T.arrow)==null?void 0:oe.centerOffset)!==0,[ee,M]=g.useState();return Gt(()=>{x&&M(window.getComputedStyle(x).zIndex)},[x]),l.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:R?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(se=T.transformOrigin)==null?void 0:se.x,(pe=T.transformOrigin)==null?void 0:pe.y].join(" "),...((ke=T.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(NU,{scope:n,placedSide:D,onArrowChange:j,arrowX:I,arrowY:W,shouldHideArrow:_,children:l.jsx(je.div,{"data-side":D,"data-align":L,...v,ref:w,style:{...v.style,animation:R?void 0:"none"}})})})});bD.displayName=tC;var wD="PopperArrow",_U={top:"bottom",right:"left",bottom:"top",left:"right"},SD=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=EU(wD,r),i=_U[o.placedSide];return l.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:l.jsx(jU,{...s,ref:n,style:{...s.style,display:"block"}})})});SD.displayName=wD;function TU(t){return t!==null}var MU=t=>({name:"transformOrigin",options:t,fn(e){var b,x,y;const{placement:n,rects:r,middlewareData:s}=e,i=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,d]=CD(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,p=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let m="",v="";return u==="bottom"?(m=i?f:`${h}px`,v=`${-c}px`):u==="top"?(m=i?f:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(m=`${-c}px`,v=i?f:`${p}px`):u==="left"&&(m=`${r.floating.width+c}px`,v=i?f:`${p}px`),{data:{x:m,y:v}}}});function CD(t){const[e,n="center"]=t.split("-");return[e,n]}var nC=vD,$h=xD,Jv=bD,Xv=SD,AU="Portal",zh=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,o]=g.useState(!1);Gt(()=>o(!0),[]);const i=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?WS.createPortal(l.jsx(je.div,{...r,ref:e}),i):null});zh.displayName=AU;function PU(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Or=t=>{const{present:e,children:n}=t,r=DU(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),o=Ue(r.ref,RU(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:o}):null};Or.displayName="Presence";function DU(t){const[e,n]=g.useState(),r=g.useRef(null),s=g.useRef(t),o=g.useRef("none"),i=t?"mounted":"unmounted",[a,c]=PU(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Ip(r.current);o.current=a==="mounted"?u:"none"},[a]),Gt(()=>{const u=r.current,d=s.current;if(d!==t){const h=o.current,p=Ip(u);t?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Gt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=p=>{const v=Ip(r.current).includes(p.animationName);if(p.target===e&&v&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},h=p=>{p.target===e&&(o.current=Ip(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Ip(t){return(t==null?void 0:t.animationName)||"none"}function RU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var OU=eS[" useInsertionEffect ".trim().toString()]||Gt;function ni({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,o,i]=IU({defaultProp:e,onChange:n}),a=t!==void 0,c=a?t:s;{const d=g.useRef(t!==void 0);g.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=g.useCallback(d=>{var f;if(a){const h=LU(d)?d(t):d;h!==t&&((f=i.current)==null||f.call(i,h))}else o(d)},[a,t,o,i]);return[c,u]}function IU({defaultProp:t,onChange:e}){const[n,r]=g.useState(t),s=g.useRef(n),o=g.useRef(e);return OU(()=>{o.current=e},[e]),g.useEffect(()=>{var i;s.current!==n&&((i=o.current)==null||i.call(o,n),s.current=n)},[n,s]),[n,r,o]}function LU(t){return typeof t=="function"}var jD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),FU="VisuallyHidden",kD=g.forwardRef((t,e)=>l.jsx(je.span,{...t,ref:e,style:{...jD,...t.style}}));kD.displayName=FU;var $U=kD,[Zv,age]=nr("Tooltip",[Da]),rC=Da(),ND="TooltipProvider",zU=700,iE="tooltip.open",[BU,ED]=Zv(ND),_D=t=>{const{__scopeTooltip:e,delayDuration:n=zU,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,i=g.useRef(!0),a=g.useRef(!1),c=g.useRef(0);return g.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(BU,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:g.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:o})};_D.displayName=ND;var TD="Tooltip",[lge,ey]=Zv(TD),Kb="TooltipTrigger",VU=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=ey(Kb,n),o=ED(Kb,n),i=rC(n),a=g.useRef(null),c=Ue(e,a,s.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),f=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx($h,{asChild:!0,...i,children:l.jsx(je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:le(t.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:le(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:le(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:le(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:le(t.onBlur,s.onClose),onClick:le(t.onClick,s.onClose)})})});VU.displayName=Kb;var UU="TooltipPortal",[cge,HU]=Zv(UU,{forceMount:void 0}),$u="TooltipContent",MD=g.forwardRef((t,e)=>{const n=HU($u,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,i=ey($u,t.__scopeTooltip);return l.jsx(Or,{present:r||i.open,children:i.disableHoverableContent?l.jsx(AD,{side:s,...o,ref:e}):l.jsx(WU,{side:s,...o,ref:e})})}),WU=g.forwardRef((t,e)=>{const n=ey($u,t.__scopeTooltip),r=ED($u,t.__scopeTooltip),s=g.useRef(null),o=Ue(e,s),[i,a]=g.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,h=g.useCallback(()=>{a(null),f(!1)},[f]),p=g.useCallback((m,v)=>{const b=m.currentTarget,x={x:m.clientX,y:m.clientY},y=QU(x,b.getBoundingClientRect()),w=JU(x,y),S=XU(v.getBoundingClientRect()),j=eH([...w,...S]);a(j),f(!0)},[f]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(c&&d){const m=b=>p(b,d),v=b=>p(b,c);return c.addEventListener("pointerleave",m),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",v)}}},[c,d,p,h]),g.useEffect(()=>{if(i){const m=v=>{const b=v.target,x={x:v.clientX,y:v.clientY},y=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),w=!ZU(x,i);y?h():w&&(h(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,d,i,u,h]),l.jsx(AD,{...t,ref:o})}),[qU,KU]=Zv(TD,{isInside:!1}),GU=ZP("TooltipContent"),AD=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=t,c=ey($u,n),u=rC(n),{onClose:d}=c;return g.useEffect(()=>(document.addEventListener(iE,d),()=>document.removeEventListener(iE,d)),[d]),g.useEffect(()=>{if(c.trigger){const f=h=>{const p=h.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),l.jsx(sd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:l.jsxs(Jv,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(GU,{children:r}),l.jsx(qU,{scope:n,isInside:!0,children:l.jsx($U,{id:c.contentId,role:"tooltip",children:s||r})})]})})});MD.displayName=$u;var PD="TooltipArrow",YU=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=rC(n);return KU(PD,n).isInside?null:l.jsx(Xv,{...s,...r,ref:e})});YU.displayName=PD;function QU(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function JU(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function XU(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function ZU(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o],c=e[i],u=a.x,d=a.y,f=c.x,h=c.y;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(s=!s)}return s}function eH(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),tH(e)}function tH(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var nH=_D,DD=MD;function RD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=RD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function OD(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=RD(t))&&(r&&(r+=" "),r+=e);return r}const sC="-",rH=t=>{const e=oH(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(sC);return a[0]===""&&a.length!==1&&a.shift(),ID(a,e)||sH(i)},getConflictingClassGroupIds:(i,a)=>{const c=n[i]||[];return a&&r[i]?[...c,...r[i]]:c}}},ID=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?ID(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(sC);return(i=e.validators.find(({validator:a})=>a(o)))==null?void 0:i.classGroupId},aE=/^\[(.+)\]$/,sH=t=>{if(aE.test(t)){const e=aE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},oH=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return aH(Object.entries(t.classGroups),n).forEach(([o,i])=>{Gb(i,r,o,e)}),r},Gb=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:lE(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(iH(s)){Gb(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{Gb(i,lE(e,o),n,r)})})},lE=(t,e)=>{let n=t;return e.split(sC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},iH=t=>t.isThemeGetter,aH=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[e+i,a])):o);return[n,s]}):t,lH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},LD="!",cH=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,i=a=>{const c=[];let u=0,d=0,f;for(let b=0;b<a.length;b++){let x=a[b];if(u===0){if(x===s&&(r||a.slice(b,b+o)===e)){c.push(a.slice(d,b)),d=b+o;continue}if(x==="/"){f=b;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?a:a.substring(d),p=h.startsWith(LD),m=p?h.substring(1):h,v=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:i}):i},uH=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},dH=t=>({cache:lH(t.cacheSize),parseClassName:cH(t),...rH(t)}),fH=/\s+/,hH=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],i=t.trim().split(fH);let a="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(u);let m=!!p,v=r(m?h.substring(0,p):h);if(!v){if(!m){a=u+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=u+(a.length>0?" "+a:a);continue}m=!1}const b=uH(d).join(":"),x=f?b+LD:b,y=x+v;if(o.includes(y))continue;o.push(y);const w=s(v,m);for(let S=0;S<w.length;++S){const j=w[S];o.push(x+j)}a=u+(a.length>0?" "+a:a)}return a};function pH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FD(e))&&(r&&(r+=" "),r+=n);return r}const FD=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FD(t[r]))&&(n&&(n+=" "),n+=e);return n};function mH(t,...e){let n,r,s,o=i;function i(c){const u=e.reduce((d,f)=>f(d),t());return n=dH(u),r=n.cache.get,s=n.cache.set,o=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=hH(c,n);return s(c,d),d}return function(){return o(pH.apply(null,arguments))}}const ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$D=/^\[(?:([a-z-]+):)?(.+)\]$/i,gH=/^\d+\/\d+$/,vH=new Set(["px","full","screen"]),yH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=t=>au(t)||vH.has(t)||gH.test(t),pi=t=>ad(t,"length",MH),au=t=>!!t&&!Number.isNaN(Number(t)),Tx=t=>ad(t,"number",au),Dd=t=>!!t&&Number.isInteger(Number(t)),CH=t=>t.endsWith("%")&&au(t.slice(0,-1)),Le=t=>$D.test(t),mi=t=>yH.test(t),jH=new Set(["length","size","percentage"]),kH=t=>ad(t,jH,zD),NH=t=>ad(t,"position",zD),EH=new Set(["image","url"]),_H=t=>ad(t,EH,PH),TH=t=>ad(t,"",AH),Rd=()=>!0,ad=(t,e,n)=>{const r=$D.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},MH=t=>xH.test(t)&&!bH.test(t),zD=()=>!1,AH=t=>wH.test(t),PH=t=>SH.test(t),DH=()=>{const t=ut("colors"),e=ut("spacing"),n=ut("blur"),r=ut("brightness"),s=ut("borderColor"),o=ut("borderRadius"),i=ut("borderSpacing"),a=ut("borderWidth"),c=ut("contrast"),u=ut("grayscale"),d=ut("hueRotate"),f=ut("invert"),h=ut("gap"),p=ut("gradientColorStops"),m=ut("gradientColorStopPositions"),v=ut("inset"),b=ut("margin"),x=ut("opacity"),y=ut("padding"),w=ut("saturate"),S=ut("scale"),j=ut("sepia"),C=ut("skew"),k=ut("space"),N=ut("translate"),E=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",Le,e],H=()=>[Le,e],O=()=>["",To,pi],V=()=>["auto",au,Le],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",Le],L=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[au,Le];return{cacheSize:500,separator:":",theme:{colors:[Rd],spacing:[To,pi],blur:["none","",mi,Le],brightness:X(),borderColor:[t],borderRadius:["none","","full",mi,Le],borderSpacing:H(),borderWidth:O(),contrast:X(),grayscale:D(),hueRotate:X(),invert:D(),gap:H(),gradientColorStops:[t],gradientColorStopPositions:[CH,pi],inset:$(),margin:$(),opacity:X(),padding:H(),saturate:X(),scale:X(),sepia:D(),skew:X(),space:H(),translate:H()},classGroups:{aspect:[{aspect:["auto","square","video",Le]}],container:["container"],columns:[{columns:[mi]}],"break-after":[{"break-after":L()}],"break-before":[{"break-before":L()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Le]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dd,Le]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Le]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Dd,Le]}],"grid-cols":[{"grid-cols":[Rd]}],"col-start-end":[{col:["auto",{span:["full",Dd,Le]},Le]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Rd]}],"row-start-end":[{row:["auto",{span:[Dd,Le]},Le]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Le]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Le]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Le,e]}],"min-w":[{"min-w":[Le,e,"min","max","fit"]}],"max-w":[{"max-w":[Le,e,"none","full","min","max","fit","prose",{screen:[mi]},mi]}],h:[{h:[Le,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Le,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Le,e,"auto","min","max","fit"]}],"font-size":[{text:["base",mi,pi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tx]}],"font-family":[{font:[Rd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Le]}],"line-clamp":[{"line-clamp":["none",au,Tx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",To,Le]}],"list-image":[{"list-image":["none",Le]}],"list-style-type":[{list:["none","disc","decimal",Le]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",To,pi]}],"underline-offset":[{"underline-offset":["auto",To,Le]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),NH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},_H]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:K()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[To,Le]}],"outline-w":[{outline:[To,pi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[To,pi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",mi,TH]}],"shadow-color":[{shadow:[Rd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",mi,Le]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Le]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Le]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Le]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Dd,Le]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Le]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[To,pi,Tx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},RH=mH(DH);function ue(...t){return RH(OD(t))}const OH=nH,IH=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(DD,{ref:r,sideOffset:e,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));IH.displayName=DD.displayName;var ld=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$l=typeof window>"u"||"Deno"in globalThis;function qn(){}function LH(t,e){return typeof t=="function"?t(e):t}function Yb(t){return typeof t=="number"&&t>=0&&t!==1/0}function BD(t,e){return Math.max(t+(e||0)-Date.now(),0)}function fa(t,e){return typeof t=="function"?t(e):t}function Wr(t,e){return typeof t=="function"?t(e):t}function cE(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:a}=t;if(i){if(r){if(e.queryHash!==oC(i,e.options))return!1}else if(!Qf(e.queryKey,i))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||o&&!o(e))}function uE(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(zl(e.options.mutationKey)!==zl(o))return!1}else if(!Qf(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function oC(t,e){return((e==null?void 0:e.queryKeyHashFn)||zl)(t)}function zl(t){return JSON.stringify(t,(e,n)=>Qb(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Qf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Qf(t[n],e[n])):!1}function VD(t,e){if(t===e)return t;const n=dE(t)&&dE(e);if(n||Qb(t)&&Qb(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),i=o.length,a=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<i;d++){const f=n?d:o[d];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(a[f]=void 0,u++):(a[f]=VD(t[f],e[f]),a[f]===t[f]&&t[f]!==void 0&&u++)}return s===i&&u===s?t:a}return e}function fg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function dE(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qb(t){if(!fE(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!fE(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function fE(t){return Object.prototype.toString.call(t)==="[object Object]"}function FH(t){return new Promise(e=>{setTimeout(e,t)})}function Jb(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?VD(t,e):e}function $H(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function zH(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var iC=Symbol();function UD(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===iC?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function HD(t,e){return typeof t=="function"?t(...e):!!t}var ml,Vi,xu,TM,BH=(TM=class extends ld{constructor(){super();Se(this,ml);Se(this,Vi);Se(this,xu);de(this,xu,e=>{if(!$l&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){P(this,Vi)||this.setEventListener(P(this,xu))}onUnsubscribe(){var e;this.hasListeners()||((e=P(this,Vi))==null||e.call(this),de(this,Vi,void 0))}setEventListener(e){var n;de(this,xu,e),(n=P(this,Vi))==null||n.call(this),de(this,Vi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){P(this,ml)!==e&&(de(this,ml,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof P(this,ml)=="boolean"?P(this,ml):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ml=new WeakMap,Vi=new WeakMap,xu=new WeakMap,TM),aC=new BH,bu,Ui,wu,MM,VH=(MM=class extends ld{constructor(){super();Se(this,bu,!0);Se(this,Ui);Se(this,wu);de(this,wu,e=>{if(!$l&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){P(this,Ui)||this.setEventListener(P(this,wu))}onUnsubscribe(){var e;this.hasListeners()||((e=P(this,Ui))==null||e.call(this),de(this,Ui,void 0))}setEventListener(e){var n;de(this,wu,e),(n=P(this,Ui))==null||n.call(this),de(this,Ui,e(this.setOnline.bind(this)))}setOnline(e){P(this,bu)!==e&&(de(this,bu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return P(this,bu)}},bu=new WeakMap,Ui=new WeakMap,wu=new WeakMap,MM),hg=new VH;function Xb(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function UH(t){return Math.min(1e3*2**t,3e4)}function WD(t){return(t??"online")==="online"?hg.isOnline():!0}var qD=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Mx(t){return t instanceof qD}function KD(t){let e=!1,n=0,r=!1,s;const o=Xb(),i=v=>{var b;r||(h(new qD(v)),(b=t.abort)==null||b.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>aC.isFocused()&&(t.networkMode==="always"||hg.isOnline())&&t.canRun(),d=()=>WD(t.networkMode)&&t.canRun(),f=v=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,v),s==null||s(),o.resolve(v))},h=v=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,v),s==null||s(),o.reject(v))},p=()=>new Promise(v=>{var b;s=x=>{(r||u())&&v(x)},(b=t.onPause)==null||b.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),m=()=>{if(r)return;let v;const b=n===0?t.initialPromise:void 0;try{v=b??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var C;if(r)return;const y=t.retry??($l?0:3),w=t.retryDelay??UH,S=typeof w=="function"?w(n,x):w,j=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,x);if(e||!j){h(x);return}n++,(C=t.onFail)==null||C.call(t,n,x),FH(S).then(()=>u()?void 0:p()).then(()=>{e?h(x):m()})})};return{promise:o,cancel:i,continue:()=>(s==null||s(),o),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?m():p().then(m),o)}}var HH=t=>setTimeout(t,0);function WH(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=HH;const o=a=>{e?t.push(a):s(()=>{n(a)})},i=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||i()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var qt=WH(),gl,AM,GD=(AM=class{constructor(){Se(this,gl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yb(this.gcTime)&&de(this,gl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($l?1/0:5*60*1e3))}clearGcTimeout(){P(this,gl)&&(clearTimeout(P(this,gl)),de(this,gl,void 0))}},gl=new WeakMap,AM),Su,vl,Hr,yl,Tn,Th,xl,vs,Oo,PM,qH=(PM=class extends GD{constructor(e){super();Se(this,vs);Se(this,Su);Se(this,vl);Se(this,Hr);Se(this,yl);Se(this,Tn);Se(this,Th);Se(this,xl);de(this,xl,!1),de(this,Th,e.defaultOptions),this.setOptions(e.options),this.observers=[],de(this,yl,e.client),de(this,Hr,P(this,yl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,de(this,Su,KH(this.options)),this.state=e.state??P(this,Su),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=P(this,Tn))==null?void 0:e.promise}setOptions(e){this.options={...P(this,Th),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&P(this,Hr).remove(this)}setData(e,n){const r=Jb(this.state.data,e,this.options);return Fe(this,vs,Oo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Fe(this,vs,Oo).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=P(this,Tn))==null?void 0:r.promise;return(s=P(this,Tn))==null||s.cancel(e),n?n.then(qn).catch(qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(P(this,Su))}isActive(){return this.observers.some(e=>Wr(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===iC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>fa(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!BD(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=P(this,Tn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=P(this,Tn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),P(this,Hr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(P(this,Tn)&&(P(this,xl)?P(this,Tn).cancel({revert:!0}):P(this,Tn).cancelRetry()),this.scheduleGc()),P(this,Hr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fe(this,vs,Oo).call(this,{type:"invalidate"})}fetch(e,n){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(P(this,Tn))return P(this,Tn).continueRetry(),P(this,Tn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(de(this,xl,!0),r.signal)})},o=()=>{const h=UD(this.options,n),m=(()=>{const v={client:P(this,yl),queryKey:this.queryKey,meta:this.meta};return s(v),v})();return de(this,xl,!1),this.options.persister?this.options.persister(h,m,this):h(m)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:P(this,yl),state:this.state,fetchFn:o};return s(h),h})();(u=this.options.behavior)==null||u.onFetch(a,this),de(this,vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Fe(this,vs,Oo).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=h=>{var p,m,v,b;Mx(h)&&h.silent||Fe(this,vs,Oo).call(this,{type:"error",error:h}),Mx(h)||((m=(p=P(this,Hr).config).onError)==null||m.call(p,h,this),(b=(v=P(this,Hr).config).onSettled)==null||b.call(v,this.state.data,h,this)),this.scheduleGc()};return de(this,Tn,KD({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var p,m,v,b;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){c(x);return}(m=(p=P(this,Hr).config).onSuccess)==null||m.call(p,h,this),(b=(v=P(this,Hr).config).onSettled)==null||b.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,p)=>{Fe(this,vs,Oo).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{Fe(this,vs,Oo).call(this,{type:"pause"})},onContinue:()=>{Fe(this,vs,Oo).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),P(this,Tn).start()}},Su=new WeakMap,vl=new WeakMap,Hr=new WeakMap,yl=new WeakMap,Tn=new WeakMap,Th=new WeakMap,xl=new WeakMap,vs=new WeakSet,Oo=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...YD(r.data,this.options),fetchMeta:e.meta??null};case"success":return de(this,vl,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Mx(s)&&s.revert&&P(this,vl)?{...P(this,vl),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),qt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),P(this,Hr).notify({query:this,type:"updated",action:e})})},PM);function YD(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:WD(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function KH(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var qs,DM,GH=(DM=class extends ld{constructor(e={}){super();Se(this,qs);this.config=e,de(this,qs,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??oC(s,n);let i=this.get(o);return i||(i=new qH({client:e,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(i)),i}add(e){P(this,qs).has(e.queryHash)||(P(this,qs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=P(this,qs).get(e.queryHash);n&&(e.destroy(),n===e&&P(this,qs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return P(this,qs).get(e)}getAll(){return[...P(this,qs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>cE(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>cE(e,r)):n}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){qt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qs=new WeakMap,DM),Ks,Un,bl,Gs,ki,RM,YH=(RM=class extends GD{constructor(e){super();Se(this,Gs);Se(this,Ks);Se(this,Un);Se(this,bl);this.mutationId=e.mutationId,de(this,Un,e.mutationCache),de(this,Ks,[]),this.state=e.state||QD(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){P(this,Ks).includes(e)||(P(this,Ks).push(e),this.clearGcTimeout(),P(this,Un).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){de(this,Ks,P(this,Ks).filter(n=>n!==e)),this.scheduleGc(),P(this,Un).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){P(this,Ks).length||(this.state.status==="pending"?this.scheduleGc():P(this,Un).remove(this))}continue(){var e;return((e=P(this,bl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,i,a,c,u,d,f,h,p,m,v,b,x,y,w,S,j,C,k,N;const n=()=>{Fe(this,Gs,ki).call(this,{type:"continue"})};de(this,bl,KD({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(E,A)=>{Fe(this,Gs,ki).call(this,{type:"failed",failureCount:E,error:A})},onPause:()=>{Fe(this,Gs,ki).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>P(this,Un).canRun(this)}));const r=this.state.status==="pending",s=!P(this,bl).canStart();try{if(r)n();else{Fe(this,Gs,ki).call(this,{type:"pending",variables:e,isPaused:s}),await((i=(o=P(this,Un).config).onMutate)==null?void 0:i.call(o,e,this));const A=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));A!==this.state.context&&Fe(this,Gs,ki).call(this,{type:"pending",context:A,variables:e,isPaused:s})}const E=await P(this,bl).start();return await((d=(u=P(this,Un).config).onSuccess)==null?void 0:d.call(u,E,e,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,E,e,this.state.context)),await((m=(p=P(this,Un).config).onSettled)==null?void 0:m.call(p,E,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,E,null,e,this.state.context)),Fe(this,Gs,ki).call(this,{type:"success",data:E}),E}catch(E){try{throw await((y=(x=P(this,Un).config).onError)==null?void 0:y.call(x,E,e,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,E,e,this.state.context)),await((C=(j=P(this,Un).config).onSettled)==null?void 0:C.call(j,void 0,E,this.state.variables,this.state.context,this)),await((N=(k=this.options).onSettled)==null?void 0:N.call(k,void 0,E,e,this.state.context)),E}finally{Fe(this,Gs,ki).call(this,{type:"error",error:E})}}finally{P(this,Un).runNext(this)}}},Ks=new WeakMap,Un=new WeakMap,bl=new WeakMap,Gs=new WeakSet,ki=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),qt.batch(()=>{P(this,Ks).forEach(r=>{r.onMutationUpdate(e)}),P(this,Un).notify({mutation:this,type:"updated",action:e})})},RM);function QD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vo,ys,Mh,OM,QH=(OM=class extends ld{constructor(e={}){super();Se(this,Vo);Se(this,ys);Se(this,Mh);this.config=e,de(this,Vo,new Set),de(this,ys,new Map),de(this,Mh,0)}build(e,n,r){const s=new YH({mutationCache:this,mutationId:++gp(this,Mh)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){P(this,Vo).add(e);const n=Lp(e);if(typeof n=="string"){const r=P(this,ys).get(n);r?r.push(e):P(this,ys).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(P(this,Vo).delete(e)){const n=Lp(e);if(typeof n=="string"){const r=P(this,ys).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&P(this,ys).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Lp(e);if(typeof n=="string"){const r=P(this,ys).get(n),s=r==null?void 0:r.find(o=>o.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Lp(e);if(typeof n=="string"){const s=(r=P(this,ys).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qt.batch(()=>{P(this,Vo).forEach(e=>{this.notify({type:"removed",mutation:e})}),P(this,Vo).clear(),P(this,ys).clear()})}getAll(){return Array.from(P(this,Vo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>uE(n,r))}findAll(e={}){return this.getAll().filter(n=>uE(e,n))}notify(e){qt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return qt.batch(()=>Promise.all(e.map(n=>n.continue().catch(qn))))}},Vo=new WeakMap,ys=new WeakMap,Mh=new WeakMap,OM);function Lp(t){var e;return(e=t.options.scope)==null?void 0:e.id}function hE(t){return{onFetch:(e,n)=>{var d,f,h,p,m;const r=e.options,s=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((p=e.state.data)==null?void 0:p.pages)||[],i=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=UD(e.options,e.fetchOptions),y=async(w,S,j)=>{if(v)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const k=(()=>{const $={client:e.client,queryKey:e.queryKey,pageParam:S,direction:j?"backward":"forward",meta:e.options.meta};return b($),$})(),N=await x(k),{maxPages:E}=e.options,A=j?zH:$H;return{pages:A(w.pages,N,E),pageParams:A(w.pageParams,S,E)}};if(s&&o.length){const w=s==="backward",S=w?JH:pE,j={pages:o,pageParams:i},C=S(r,j);a=await y(j,C,w)}else{const w=t??o.length;do{const S=c===0?i[0]??r.initialPageParam:pE(r,a);if(c>0&&S==null)break;a=await y(a,S),c++}while(c<w)}return a};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function pE(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function JH(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Et,Hi,Wi,Cu,ju,qi,ku,Nu,IM,XH=(IM=class{constructor(t={}){Se(this,Et);Se(this,Hi);Se(this,Wi);Se(this,Cu);Se(this,ju);Se(this,qi);Se(this,ku);Se(this,Nu);de(this,Et,t.queryCache||new GH),de(this,Hi,t.mutationCache||new QH),de(this,Wi,t.defaultOptions||{}),de(this,Cu,new Map),de(this,ju,new Map),de(this,qi,0)}mount(){gp(this,qi)._++,P(this,qi)===1&&(de(this,ku,aC.subscribe(async t=>{t&&(await this.resumePausedMutations(),P(this,Et).onFocus())})),de(this,Nu,hg.subscribe(async t=>{t&&(await this.resumePausedMutations(),P(this,Et).onOnline())})))}unmount(){var t,e;gp(this,qi)._--,P(this,qi)===0&&((t=P(this,ku))==null||t.call(this),de(this,ku,void 0),(e=P(this,Nu))==null||e.call(this),de(this,Nu,void 0))}isFetching(t){return P(this,Et).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return P(this,Hi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=P(this,Et).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=P(this,Et).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(fa(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return P(this,Et).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=P(this,Et).get(r.queryHash),o=s==null?void 0:s.state.data,i=LH(e,o);if(i!==void 0)return P(this,Et).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(t,e,n){return qt.batch(()=>P(this,Et).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=P(this,Et).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=P(this,Et);qt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=P(this,Et);return qt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=qt.batch(()=>P(this,Et).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(qn).catch(qn)}invalidateQueries(t,e={}){return qt.batch(()=>(P(this,Et).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=qt.batch(()=>P(this,Et).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(qn)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(qn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=P(this,Et).build(this,e);return n.isStaleByTime(fa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qn).catch(qn)}fetchInfiniteQuery(t){return t.behavior=hE(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qn).catch(qn)}ensureInfiniteQueryData(t){return t.behavior=hE(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hg.isOnline()?P(this,Hi).resumePausedMutations():Promise.resolve()}getQueryCache(){return P(this,Et)}getMutationCache(){return P(this,Hi)}getDefaultOptions(){return P(this,Wi)}setDefaultOptions(t){de(this,Wi,t)}setQueryDefaults(t,e){P(this,Cu).set(zl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...P(this,Cu).values()],n={};return e.forEach(r=>{Qf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){P(this,ju).set(zl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...P(this,ju).values()],n={};return e.forEach(r=>{Qf(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...P(this,Wi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=oC(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===iC&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...P(this,Wi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){P(this,Et).clear(),P(this,Hi).clear()}},Et=new WeakMap,Hi=new WeakMap,Wi=new WeakMap,Cu=new WeakMap,ju=new WeakMap,qi=new WeakMap,ku=new WeakMap,Nu=new WeakMap,IM),ir,qe,Ah,Hn,wl,Eu,Ki,Gi,Ph,_u,Tu,Sl,Cl,Yi,Mu,Ze,Wd,Zb,ew,tw,nw,rw,sw,ow,JD,LM,ZH=(LM=class extends ld{constructor(e,n){super();Se(this,Ze);Se(this,ir);Se(this,qe);Se(this,Ah);Se(this,Hn);Se(this,wl);Se(this,Eu);Se(this,Ki);Se(this,Gi);Se(this,Ph);Se(this,_u);Se(this,Tu);Se(this,Sl);Se(this,Cl);Se(this,Yi);Se(this,Mu,new Set);this.options=n,de(this,ir,e),de(this,Gi,null),de(this,Ki,Xb()),this.options.experimental_prefetchInRender||P(this,Ki).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(P(this,qe).addObserver(this),mE(P(this,qe),this.options)?Fe(this,Ze,Wd).call(this):this.updateResult(),Fe(this,Ze,nw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iw(P(this,qe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iw(P(this,qe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Fe(this,Ze,rw).call(this),Fe(this,Ze,sw).call(this),P(this,qe).removeObserver(this)}setOptions(e){const n=this.options,r=P(this,qe);if(this.options=P(this,ir).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Wr(this.options.enabled,P(this,qe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Fe(this,Ze,ow).call(this),P(this,qe).setOptions(this.options),n._defaulted&&!fg(this.options,n)&&P(this,ir).getQueryCache().notify({type:"observerOptionsUpdated",query:P(this,qe),observer:this});const s=this.hasListeners();s&&gE(P(this,qe),r,this.options,n)&&Fe(this,Ze,Wd).call(this),this.updateResult(),s&&(P(this,qe)!==r||Wr(this.options.enabled,P(this,qe))!==Wr(n.enabled,P(this,qe))||fa(this.options.staleTime,P(this,qe))!==fa(n.staleTime,P(this,qe)))&&Fe(this,Ze,Zb).call(this);const o=Fe(this,Ze,ew).call(this);s&&(P(this,qe)!==r||Wr(this.options.enabled,P(this,qe))!==Wr(n.enabled,P(this,qe))||o!==P(this,Yi))&&Fe(this,Ze,tw).call(this,o)}getOptimisticResult(e){const n=P(this,ir).getQueryCache().build(P(this,ir),e),r=this.createResult(n,e);return tW(this,r)&&(de(this,Hn,r),de(this,Eu,this.options),de(this,wl,P(this,qe).state)),r}getCurrentResult(){return P(this,Hn)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){P(this,Mu).add(e)}getCurrentQuery(){return P(this,qe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=P(this,ir).defaultQueryOptions(e),r=P(this,ir).getQueryCache().build(P(this,ir),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Fe(this,Ze,Wd).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),P(this,Hn)))}createResult(e,n){var E;const r=P(this,qe),s=this.options,o=P(this,Hn),i=P(this,wl),a=P(this,Eu),u=e!==r?e.state:P(this,Ah),{state:d}=e;let f={...d},h=!1,p;if(n._optimisticResults){const A=this.hasListeners(),$=!A&&mE(e,n),H=A&&gE(e,r,n,s);($||H)&&(f={...f,...YD(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:b}=f;p=f.data;let x=!1;if(n.placeholderData!==void 0&&p===void 0&&b==="pending"){let A;o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(A=o.data,x=!0):A=typeof n.placeholderData=="function"?n.placeholderData((E=P(this,Tu))==null?void 0:E.state.data,P(this,Tu)):n.placeholderData,A!==void 0&&(b="success",p=Jb(o==null?void 0:o.data,A,n),h=!0)}if(n.select&&p!==void 0&&!x)if(o&&p===(i==null?void 0:i.data)&&n.select===P(this,Ph))p=P(this,_u);else try{de(this,Ph,n.select),p=n.select(p),p=Jb(o==null?void 0:o.data,p,n),de(this,_u,p),de(this,Gi,null)}catch(A){de(this,Gi,A)}P(this,Gi)&&(m=P(this,Gi),p=P(this,_u),v=Date.now(),b="error");const y=f.fetchStatus==="fetching",w=b==="pending",S=b==="error",j=w&&y,C=p!==void 0,N={status:b,fetchStatus:f.fetchStatus,isPending:w,isSuccess:b==="success",isError:S,isInitialLoading:j,isLoading:j,data:p,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:S&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:S&&C,isStale:lC(e,n),refetch:this.refetch,promise:P(this,Ki),isEnabled:Wr(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const A=O=>{N.status==="error"?O.reject(N.error):N.data!==void 0&&O.resolve(N.data)},$=()=>{const O=de(this,Ki,N.promise=Xb());A(O)},H=P(this,Ki);switch(H.status){case"pending":e.queryHash===r.queryHash&&A(H);break;case"fulfilled":(N.status==="error"||N.data!==H.value)&&$();break;case"rejected":(N.status!=="error"||N.error!==H.reason)&&$();break}}return N}updateResult(){const e=P(this,Hn),n=this.createResult(P(this,qe),this.options);if(de(this,wl,P(this,qe).state),de(this,Eu,this.options),P(this,wl).data!==void 0&&de(this,Tu,P(this,qe)),fg(n,e))return;de(this,Hn,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!P(this,Mu).size)return!0;const i=new Set(o??P(this,Mu));return this.options.throwOnError&&i.add("error"),Object.keys(P(this,Hn)).some(a=>{const c=a;return P(this,Hn)[c]!==e[c]&&i.has(c)})};Fe(this,Ze,JD).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Fe(this,Ze,nw).call(this)}},ir=new WeakMap,qe=new WeakMap,Ah=new WeakMap,Hn=new WeakMap,wl=new WeakMap,Eu=new WeakMap,Ki=new WeakMap,Gi=new WeakMap,Ph=new WeakMap,_u=new WeakMap,Tu=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Yi=new WeakMap,Mu=new WeakMap,Ze=new WeakSet,Wd=function(e){Fe(this,Ze,ow).call(this);let n=P(this,qe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(qn)),n},Zb=function(){Fe(this,Ze,rw).call(this);const e=fa(this.options.staleTime,P(this,qe));if($l||P(this,Hn).isStale||!Yb(e))return;const r=BD(P(this,Hn).dataUpdatedAt,e)+1;de(this,Sl,setTimeout(()=>{P(this,Hn).isStale||this.updateResult()},r))},ew=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(P(this,qe)):this.options.refetchInterval)??!1},tw=function(e){Fe(this,Ze,sw).call(this),de(this,Yi,e),!($l||Wr(this.options.enabled,P(this,qe))===!1||!Yb(P(this,Yi))||P(this,Yi)===0)&&de(this,Cl,setInterval(()=>{(this.options.refetchIntervalInBackground||aC.isFocused())&&Fe(this,Ze,Wd).call(this)},P(this,Yi)))},nw=function(){Fe(this,Ze,Zb).call(this),Fe(this,Ze,tw).call(this,Fe(this,Ze,ew).call(this))},rw=function(){P(this,Sl)&&(clearTimeout(P(this,Sl)),de(this,Sl,void 0))},sw=function(){P(this,Cl)&&(clearInterval(P(this,Cl)),de(this,Cl,void 0))},ow=function(){const e=P(this,ir).getQueryCache().build(P(this,ir),this.options);if(e===P(this,qe))return;const n=P(this,qe);de(this,qe,e),de(this,Ah,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},JD=function(e){qt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(P(this,Hn))}),P(this,ir).getQueryCache().notify({query:P(this,qe),type:"observerResultsUpdated"})})},LM);function eW(t,e){return Wr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function mE(t,e){return eW(t,e)||t.state.data!==void 0&&iw(t,e,e.refetchOnMount)}function iw(t,e,n){if(Wr(e.enabled,t)!==!1&&fa(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&lC(t,e)}return!1}function gE(t,e,n,r){return(t!==e||Wr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&lC(t,n)}function lC(t,e){return Wr(e.enabled,t)!==!1&&t.isStaleByTime(fa(e.staleTime,t))}function tW(t,e){return!fg(t.getCurrentResult(),e)}var Qi,Ji,ar,Uo,Yo,jm,aw,FM,nW=(FM=class extends ld{constructor(n,r){super();Se(this,Yo);Se(this,Qi);Se(this,Ji);Se(this,ar);Se(this,Uo);de(this,Qi,n),this.setOptions(r),this.bindMethods(),Fe(this,Yo,jm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=P(this,Qi).defaultMutationOptions(n),fg(this.options,r)||P(this,Qi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:P(this,ar),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&zl(r.mutationKey)!==zl(this.options.mutationKey)?this.reset():((s=P(this,ar))==null?void 0:s.state.status)==="pending"&&P(this,ar).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=P(this,ar))==null||n.removeObserver(this)}onMutationUpdate(n){Fe(this,Yo,jm).call(this),Fe(this,Yo,aw).call(this,n)}getCurrentResult(){return P(this,Ji)}reset(){var n;(n=P(this,ar))==null||n.removeObserver(this),de(this,ar,void 0),Fe(this,Yo,jm).call(this),Fe(this,Yo,aw).call(this)}mutate(n,r){var s;return de(this,Uo,r),(s=P(this,ar))==null||s.removeObserver(this),de(this,ar,P(this,Qi).getMutationCache().build(P(this,Qi),this.options)),P(this,ar).addObserver(this),P(this,ar).execute(n)}},Qi=new WeakMap,Ji=new WeakMap,ar=new WeakMap,Uo=new WeakMap,Yo=new WeakSet,jm=function(){var r;const n=((r=P(this,ar))==null?void 0:r.state)??QD();de(this,Ji,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},aw=function(n){qt.batch(()=>{var r,s,o,i,a,c,u,d;if(P(this,Uo)&&this.hasListeners()){const f=P(this,Ji).variables,h=P(this,Ji).context;(n==null?void 0:n.type)==="success"?((s=(r=P(this,Uo)).onSuccess)==null||s.call(r,n.data,f,h),(i=(o=P(this,Uo)).onSettled)==null||i.call(o,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((c=(a=P(this,Uo)).onError)==null||c.call(a,n.error,f,h),(d=(u=P(this,Uo)).onSettled)==null||d.call(u,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(P(this,Ji))})})},FM),XD=g.createContext(void 0),ls=t=>{const e=g.useContext(XD);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},rW=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(XD.Provider,{value:t,children:e})),ZD=g.createContext(!1),sW=()=>g.useContext(ZD);ZD.Provider;function oW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var iW=g.createContext(oW()),aW=()=>g.useContext(iW),lW=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},cW=t=>{g.useEffect(()=>{t.clearReset()},[t])},uW=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||HD(n,[t.error,r])),dW=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},fW=(t,e)=>t.isLoading&&t.isFetching&&!e,hW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,vE=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function pW(t,e,n){var f,h,p,m,v;const r=sW(),s=aW(),o=ls(),i=o.defaultQueryOptions(t);(h=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",dW(i),lW(i,s),cW(s);const a=!o.getQueryCache().get(i.queryHash),[c]=g.useState(()=>new e(o,i)),u=c.getOptimisticResult(i),d=!r&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(b=>{const x=d?c.subscribe(qt.batchCalls(b)):qn;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),g.useEffect(()=>{c.setOptions(i)},[i,c]),hW(i,u))throw vE(i,c,s);if(uW({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((m=(p=o.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,i,u),i.experimental_prefetchInRender&&!$l&&fW(u,r)){const b=a?vE(i,c,s):(v=o.getQueryCache().get(i.queryHash))==null?void 0:v.promise;b==null||b.catch(qn).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function jn(t,e){return pW(t,ZH)}function Qe(t,e){const n=ls(),[r]=g.useState(()=>new nW(n,t));g.useEffect(()=>{r.setOptions(t)},[r,t]);const s=g.useSyncExternalStore(g.useCallback(i=>r.subscribe(qt.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=g.useCallback((i,a)=>{r.mutate(i,a).catch(qn)},[r]);if(s.error&&HD(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}var ea;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ea||(ea={}));const yE="popstate";function mW(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:i,hash:a}=r.location;return lw("",{pathname:o,search:i,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pg(s)}return vW(e,n,null,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gW(){return Math.random().toString(36).substr(2,8)}function xE(t,e){return{usr:t.state,key:t.key,idx:e}}function lw(t,e,n,r){return n===void 0&&(n=null),Jf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?cd(e):e,{state:n,key:e&&e.key||r||gW()})}function pg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function cd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vW(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=ea.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Jf({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){a=ea.Pop;let b=d(),x=b==null?null:b-u;u=b,c&&c({action:a,location:v.location,delta:x})}function h(b,x){a=ea.Push;let y=lw(v.location,b,x);u=d()+1;let w=xE(y,u),S=v.createHref(y);try{i.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}o&&c&&c({action:a,location:v.location,delta:1})}function p(b,x){a=ea.Replace;let y=lw(v.location,b,x);u=d();let w=xE(y,u),S=v.createHref(y);i.replaceState(w,"",S),o&&c&&c({action:a,location:v.location,delta:0})}function m(b){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof b=="string"?b:pg(b);return y=y.replace(/ $/,"%20"),At(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return a},get location(){return t(s,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yE,f),c=b,()=>{s.removeEventListener(yE,f),c=null}},createHref(b){return e(s,b)},createURL:m,encodeLocation(b){let x=m(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:p,go(b){return i.go(b)}};return v}var bE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bE||(bE={}));function yW(t,e,n){return n===void 0&&(n="/"),xW(t,e,n,!1)}function xW(t,e,n,r){let s=typeof e=="string"?cd(e):e,o=zu(s.pathname||"/",n);if(o==null)return null;let i=tR(t);bW(i);let a=null;for(let c=0;a==null&&c<i.length;++c){let u=AW(o);a=TW(i[c],u,r)}return a}function tR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(At(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=ha([r,c.relativePath]),d=n.concat(c);o.children&&o.children.length>0&&(At(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tR(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:EW(u,o.index),routesMeta:d})};return t.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let c of nR(o.path))s(o,i,c)}),e}function nR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=nR(r.join("/")),a=[];return a.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&a.push(...i),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function bW(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_W(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wW=/^:[\w-]+$/,SW=3,CW=2,jW=1,kW=10,NW=-2,wE=t=>t==="*";function EW(t,e){let n=t.split("/"),r=n.length;return n.some(wE)&&(r+=NW),e&&(r+=CW),n.filter(s=>!wE(s)).reduce((s,o)=>s+(wW.test(o)?SW:o===""?jW:kW),r)}function _W(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function TW(t,e,n){let{routesMeta:r}=t,s={},o="/",i=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=mg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:ha([o,f.pathname]),pathnameBase:OW(ha([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=ha([o,f.pathnameBase]))}return i}function mg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MW(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let v=a[f]||"";i=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[f];return p&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:i,pattern:t}}function MW(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function AW(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function PW(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?cd(t):t;return{pathname:n?n.startsWith("/")?n:DW(n,e):e,search:IW(r),hash:LW(s)}}function DW(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ax(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rR(t,e){let n=RW(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sR(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=cd(t):(s=Jf({},t),At(!s.pathname||!s.pathname.includes("?"),Ax("?","pathname","search",s)),At(!s.pathname||!s.pathname.includes("#"),Ax("#","pathname","hash",s)),At(!s.search||!s.search.includes("#"),Ax("#","search","hash",s)));let o=t===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}a=f>=0?e[f]:"/"}let c=PW(s,a),u=i&&i!=="/"&&i.endsWith("/"),d=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const ha=t=>t.join("/").replace(/\/\/+/g,"/"),OW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function FW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const oR=["post","put","patch","delete"];new Set(oR);const $W=["get",...oR];new Set($W);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xf(){return Xf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xf.apply(this,arguments)}const ty=g.createContext(null),iR=g.createContext(null),Ra=g.createContext(null),ny=g.createContext(null),tc=g.createContext({outlet:null,matches:[],isDataRoute:!1}),aR=g.createContext(null);function zW(t,e){let{relative:n}=e===void 0?{}:e;Bh()||At(!1);let{basename:r,navigator:s}=g.useContext(Ra),{hash:o,pathname:i,search:a}=ry(t,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:ha([r,i])),s.createHref({pathname:c,search:a,hash:o})}function Bh(){return g.useContext(ny)!=null}function nc(){return Bh()||At(!1),g.useContext(ny).location}function lR(t){g.useContext(Ra).static||g.useLayoutEffect(t)}function ud(){let{isDataRoute:t}=g.useContext(tc);return t?ZW():BW()}function BW(){Bh()||At(!1);let t=g.useContext(ty),{basename:e,future:n,navigator:r}=g.useContext(Ra),{matches:s}=g.useContext(tc),{pathname:o}=nc(),i=JSON.stringify(rR(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return lR(()=>{a.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=sR(u,JSON.parse(i),o,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ha([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,i,o,t])}function ry(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(Ra),{matches:s}=g.useContext(tc),{pathname:o}=nc(),i=JSON.stringify(rR(s,r.v7_relativeSplatPath));return g.useMemo(()=>sR(t,JSON.parse(i),o,n==="path"),[t,i,o,n])}function VW(t,e){return UW(t,e)}function UW(t,e,n,r){Bh()||At(!1);let{navigator:s}=g.useContext(Ra),{matches:o}=g.useContext(tc),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=nc(),d;if(e){var f;let b=typeof e=="string"?cd(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||At(!1),d=b}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=yW(t,{pathname:p}),v=GW(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:ha([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:ha([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return e&&v?g.createElement(ny.Provider,{value:{location:Xf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ea.Pop}},v):v}function HW(){let t=XW(),e=FW(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const WW=g.createElement(HW,null);class qW extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(tc.Provider,{value:this.props.routeContext},g.createElement(aR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KW(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(ty);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(tc.Provider,{value:e},r)}function GW(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=i.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||At(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=n,m=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||m){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let p,m=!1,v=null,b=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||WW,c&&(u<0&&h===0?(m=!0,b=null):u===h&&(m=!0,b=f.route.hydrateFallbackElement||null)));let x=e.concat(i.slice(0,h+1)),y=()=>{let w;return p?w=v:m?w=b:f.route.Component?w=g.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,g.createElement(KW,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?g.createElement(qW,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var cR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cR||{}),gg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gg||{});function YW(t){let e=g.useContext(ty);return e||At(!1),e}function QW(t){let e=g.useContext(iR);return e||At(!1),e}function JW(t){let e=g.useContext(tc);return e||At(!1),e}function uR(t){let e=JW(),n=e.matches[e.matches.length-1];return n.route.id||At(!1),n.route.id}function XW(){var t;let e=g.useContext(aR),n=QW(gg.UseRouteError),r=uR(gg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ZW(){let{router:t}=YW(cR.UseNavigateStable),e=uR(gg.UseNavigateStable),n=g.useRef(!1);return lR(()=>{n.current=!0}),g.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xf({fromRouteId:e},o)))},[t,e])}function e9(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vn(t){At(!1)}function t9(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ea.Pop,navigator:o,static:i=!1,future:a}=t;Bh()&&At(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:o,static:i,future:Xf({v7_relativeSplatPath:!1},a)}),[c,a,o,i]);typeof r=="string"&&(r=cd(r));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:m="default"}=r,v=g.useMemo(()=>{let b=zu(d,c);return b==null?null:{location:{pathname:b,search:f,hash:h,state:p,key:m},navigationType:s}},[c,d,f,h,p,m,s]);return v==null?null:g.createElement(Ra.Provider,{value:u},g.createElement(ny.Provider,{children:n,value:v}))}function n9(t){let{children:e,location:n}=t;return VW(cw(e),n)}new Promise(()=>{});function cw(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let o=[...e,s];if(r.type===g.Fragment){n.push.apply(n,cw(r.props.children,o));return}r.type!==Vn&&At(!1),!r.props.index||!r.props.children||At(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=cw(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vg.apply(this,arguments)}function dR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function r9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function s9(t,e){return t.button===0&&(!e||e==="_self")&&!r9(t)}const o9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i9=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],a9="6";try{window.__reactRouterVersion=a9}catch{}const l9=g.createContext({isTransitioning:!1}),c9="startTransition",SE=eS[c9];function u9(t){let{basename:e,children:n,future:r,window:s}=t,o=g.useRef();o.current==null&&(o.current=mW({window:s,v5Compat:!0}));let i=o.current,[a,c]=g.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=g.useCallback(f=>{u&&SE?SE(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>i.listen(d),[i,d]),g.useEffect(()=>e9(r),[r]),g.createElement(t9,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const d9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",f9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uw=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,h=dR(e,o9),{basename:p}=g.useContext(Ra),m,v=!1;if(typeof u=="string"&&f9.test(u)&&(m=u,d9))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=zu(S.pathname,p);S.origin===w.origin&&j!=null?u=j+S.search+S.hash:v=!0}catch{}let b=zW(u,{relative:s}),x=m9(u,{replace:i,state:a,target:c,preventScrollReset:d,relative:s,viewTransition:f});function y(w){r&&r(w),w.defaultPrevented||x(w)}return g.createElement("a",vg({},h,{href:m||b,onClick:v||o?r:y,ref:n,target:c}))}),h9=g.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:i=!1,style:a,to:c,viewTransition:u,children:d}=e,f=dR(e,i9),h=ry(c,{relative:f.relative}),p=nc(),m=g.useContext(iR),{navigator:v,basename:b}=g.useContext(Ra),x=m!=null&&g9(h)&&u===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,S=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(w=w.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&b&&(S=zu(S,b)||S);const j=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=w===y||!i&&w.startsWith(y)&&w.charAt(j)==="/",k=S!=null&&(S===y||!i&&S.startsWith(y)&&S.charAt(y.length)==="/"),N={isActive:C,isPending:k,isTransitioning:x},E=C?r:void 0,A;typeof o=="function"?A=o(N):A=[o,C?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let $=typeof a=="function"?a(N):a;return g.createElement(uw,vg({},f,{"aria-current":E,className:A,ref:n,style:$,to:c,viewTransition:u}),typeof d=="function"?d(N):d)});var dw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dw||(dw={}));var CE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(CE||(CE={}));function p9(t){let e=g.useContext(ty);return e||At(!1),e}function m9(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=e===void 0?{}:e,c=ud(),u=nc(),d=ry(t,{relative:i});return g.useCallback(f=>{if(s9(f,n)){f.preventDefault();let h=r!==void 0?r:pg(u)===pg(d);c(t,{replace:h,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[u,c,d,r,s,n,t,o,i,a])}function g9(t,e){e===void 0&&(e={});let n=g.useContext(l9);n==null&&At(!1);let{basename:r}=p9(dw.useViewTransitionState),s=ry(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=zu(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=zu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mg(s.pathname,i)!=null||mg(s.pathname,o)!=null}const v9="modulepreload",y9=function(t){return"/"+t},jE={},Oa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=y9(c),c in jE)return;jE[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":v9,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},x9=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Oa(async()=>{const{default:r}=await Promise.resolve().then(()=>dd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class cC extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class b9 extends cC{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kE extends cC{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class NE extends cC{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fw;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fw||(fw={}));var w9=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};class S9{constructor(e,{headers:n={},customFetch:r,region:s=fw.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=x9(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return w9(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=n;let a={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(a["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(a["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:d}).catch(v=>{throw new b9(v)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new kE(f);if(!f.ok)throw new NE(f);let p=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield f.json():p==="application/octet-stream"?m=yield f.blob():p==="text/event-stream"?m=f:p==="multipart/form-data"?m=yield f.formData():m=yield f.text(),{data:m,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof NE||s instanceof kE?s.context:void 0}}})}}var ur={},uC={},sy={},Vh={},oy={},iy={},C9=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bu=C9();const j9=Bu.fetch,fR=Bu.fetch.bind(Bu),hR=Bu.Headers,k9=Bu.Request,N9=Bu.Response,dd=Object.freeze(Object.defineProperty({__proto__:null,Headers:hR,Request:k9,Response:N9,default:fR,fetch:j9},Symbol.toStringTag,{value:"Module"})),E9=Wz(dd);var ay={};Object.defineProperty(ay,"__esModule",{value:!0});let _9=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ay.default=_9;var pR=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(iy,"__esModule",{value:!0});const T9=pR(E9),M9=pR(ay);let A9=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=T9.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,c,u;let d=null,f=null,h=null,p=o.status,m=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await o.text();try{d=JSON.parse(b),Array.isArray(d)&&o.status===404&&(f=[],d=null,p=200,m="OK")}catch{o.status===404&&b===""?(p=204,m="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,m="OK"),d&&this.shouldThrowOnError)throw new M9.default(d)}return{error:d,data:f,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};iy.default=A9;var P9=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oy,"__esModule",{value:!0});const D9=P9(iy);let R9=class extends D9.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};oy.default=R9;var O9=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vh,"__esModule",{value:!0});const I9=O9(oy);let L9=class extends I9.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Vh.default=L9;var F9=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sy,"__esModule",{value:!0});const Od=F9(Vh);let $9=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new Od.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const o="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(i.length>0){const a=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Od.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Od.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Od.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Od.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};sy.default=$9;var mR=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(uC,"__esModule",{value:!0});const z9=mR(sy),B9=mR(Vh);let V9=class gR{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new z9.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new gR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:o}={}){var i;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(a="POST",u=n);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new B9.default({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};uC.default=V9;var fd=ss&&ss.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ur,"__esModule",{value:!0});ur.PostgrestError=ur.PostgrestBuilder=ur.PostgrestTransformBuilder=ur.PostgrestFilterBuilder=ur.PostgrestQueryBuilder=ur.PostgrestClient=void 0;const vR=fd(uC);ur.PostgrestClient=vR.default;const yR=fd(sy);ur.PostgrestQueryBuilder=yR.default;const xR=fd(Vh);ur.PostgrestFilterBuilder=xR.default;const bR=fd(oy);ur.PostgrestTransformBuilder=bR.default;const wR=fd(iy);ur.PostgrestBuilder=wR.default;const SR=fd(ay);ur.PostgrestError=SR.default;var U9=ur.default={PostgrestClient:vR.default,PostgrestQueryBuilder:yR.default,PostgrestFilterBuilder:xR.default,PostgrestTransformBuilder:bR.default,PostgrestBuilder:wR.default,PostgrestError:SR.default};const{PostgrestClient:H9,PostgrestQueryBuilder:gge,PostgrestFilterBuilder:vge,PostgrestTransformBuilder:yge,PostgrestBuilder:xge,PostgrestError:bge}=U9;class W9{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const q9="2.15.4",K9=`realtime-js/${q9}`,G9="1.0.0",hw=1e4,Y9=1e3,Q9=100;var uf;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(uf||(uf={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var bs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(bs||(bs={}));var pw;(function(t){t.websocket="websocket"})(pw||(pw={}));var sl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(sl||(sl={}));class J9{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+s));i=i+s;const c=r.decode(e.slice(i,i+o));i=i+o;const u=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class CR{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(it||(it={}));const EE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=X9(i,t,e,s),o),{})},X9=(t,e,n,r)=>{const s=e.find(a=>a.name===t),o=s==null?void 0:s.type,i=n[t];return o&&!r.includes(o)?jR(o,i):mw(i)},jR=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return n7(e,n)}switch(t){case it.bool:return Z9(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return e7(e);case it.json:case it.jsonb:return t7(e);case it.timestamp:return r7(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return mw(e);default:return mw(e)}},mw=t=>t,Z9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},e7=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},t7=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n7=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const i=t.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>jR(e,a))}return t},r7=t=>typeof t=="string"?t.replace(" ","T"):t,kR=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Px{constructor(e,n,r={},s=hw){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _E;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_E||(_E={}));class df{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=df.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=df.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=df.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),i=this.transformState(n),a={},c={};return this.map(o,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const f=o[u];if(f){const h=d.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),m=d.filter(b=>p.indexOf(b.presence_ref)<0),v=f.filter(b=>h.indexOf(b.presence_ref)<0);m.length>0&&(a[u]=m),v.length>0&&(c[u]=v)}else a[u]=d}),this.syncDiff(o,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const f=e[a].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,d,c)}),this.map(i,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=u,s(a,u,c),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var TE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(TE||(TE={}));var ff;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ff||(ff={}));var $o;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})($o||($o={}));class dC{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Px(this,bs.join,this.params,this.timeout),this.rejoinTimer=new CR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bs.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new df(this),this.broadcastEndpointURL=kR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:i,presence:a,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[ff.PRESENCE]&&this.bindings[ff.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e($o.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e($o.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e($o.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<b;y++){const w=v[y],{filter:{event:S,schema:j,table:C,filter:k}}=w,N=p&&p[y];if(N&&N.event===S&&N.schema===j&&N.table===C&&N.filter===k)x.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=Vt.errored,e==null||e($o.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e($o.SUBSCRIBED);return}}).receive("error",p=>{this.state=Vt.errored,e==null||e($o.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($o.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Vt.joined&&e===ff.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Px(this,bs.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),i}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Px(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Q9){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=bs;if(r&&[a,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,v,b;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(p=>p.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(p=>{var m,v,b,x,y,w;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in p){const S=p.id,j=(m=p.filter)===null||m===void 0?void 0:m.event;return S&&((v=n.ids)===null||v===void 0?void 0:v.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const S=(y=(x=p==null?void 0:p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===i}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:v,table:b,commit_timestamp:x,type:y,errors:w}=m;h=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:x,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(h,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&dC.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(bs.close,{},e)}_onError(e){this._on(bs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=EE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=EE(e.columns,e.old_record)),n}}const Dx=()=>{},Fp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s7=[1e3,2e3,5e3,1e4],o7=1e4,i7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a7{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hw,this.transport=null,this.heartbeatIntervalMs=Fp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dx,this.ref=0,this.reconnectTimer=null,this.logger=Dx,this.conn=null,this.sendBuffer=[],this.serializer=new J9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>Oa(async()=>{const{default:a}=await Promise.resolve().then(()=>dd);return{default:a}},void 0).then(({default:a})=>a(...i)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${pw.websocket}`,this.httpEndpoint=kR(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=W9.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:G9}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case uf.connecting:return sl.Connecting;case uf.open:return sl.Open;case uf.closing:return sl.Closing;default:return sl.Closed}}isConnected(){return this.connectionState()===sl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new dC(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Y9,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Fp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:i}=n,a=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${a}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(bs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([i7],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:K9};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(bs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new CR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,i,a,c,u,d;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:hw,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Fp.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Dx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:f=>s7[f-1]||o7,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class fC extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ut(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class l7 extends fC{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gw extends fC{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var c7=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const NR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Oa(async()=>{const{default:r}=await Promise.resolve().then(()=>dd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},u7=()=>c7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Oa(()=>Promise.resolve().then(()=>dd),void 0)).Response:Response}),vw=t=>{if(Array.isArray(t))return t.map(n=>vw(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=vw(r)}),e},d7=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var rc=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const Rx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),f7=(t,e,n)=>rc(void 0,void 0,void 0,function*(){const r=yield u7();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new l7(Rx(s),o,i))}).catch(s=>{e(new gw(Rx(s),s))}):e(new gw(Rx(t),t))}),h7=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(d7(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Uh(t,e,n,r,s,o){return rc(this,void 0,void 0,function*(){return new Promise((i,a)=>{t(n,h7(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>f7(c,a,r))})})}function yg(t,e,n,r){return rc(this,void 0,void 0,function*(){return Uh(t,"GET",e,n,r)})}function Vs(t,e,n,r,s){return rc(this,void 0,void 0,function*(){return Uh(t,"POST",e,r,s,n)})}function yw(t,e,n,r,s){return rc(this,void 0,void 0,function*(){return Uh(t,"PUT",e,r,s,n)})}function p7(t,e,n,r){return rc(this,void 0,void 0,function*(){return Uh(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ER(t,e,n,r,s){return rc(this,void 0,void 0,function*(){return Uh(t,"DELETE",e,r,s,n)})}var Bn=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const m7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ME={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g7{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=NR(s)}uploadOrUpdate(e,n,r,s){return Bn(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},ME),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(e=="PUT"?yw:Vs)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(Ut(o))return{data:null,error:o};throw o}})}upload(e,n,r){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Bn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ME.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield yw(this.fetch,a.toString(),c,{headers:d});return{data:{path:o,fullPath:f.Key},error:null}}catch(c){if(Ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Bn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield Vs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new fC("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}update(e,n,r){return Bn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Bn(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Bn(this,void 0,void 0,function*(){try{return{data:{path:(yield Vs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Bn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Vs(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Bn(this,void 0,void 0,function*(){try{const s=yield Vs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}download(e,n){return Bn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield yg(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ut(a))return{data:null,error:a};throw a}})}info(e){return Bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield yg(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vw(r),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}exists(e){return Bn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield p7(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ut(r)&&r instanceof gw){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Bn(this,void 0,void 0,function*(){try{return{data:yield ER(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}list(e,n,r){return Bn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},m7),n),{prefix:e||""});return{data:yield Vs(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}listV2(e,n){return Bn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Vs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const v7="2.11.0",y7={"X-Client-Info":`storage-js/${v7}`};var mc=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};class x7{constructor(e,n={},r,s){const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},y7),n),this.fetch=NR(r)}listBuckets(){return mc(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ut(e))return{data:null,error:e};throw e}})}getBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield yg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return mc(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return mc(this,void 0,void 0,function*(){try{return{data:yield yw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield Vs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(e){return mc(this,void 0,void 0,function*(){try{return{data:yield ER(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}}class b7 extends x7{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new g7(this.url,this.headers,e,this.fetch)}}const w7="2.57.0";let qd="";typeof Deno<"u"?qd="deno":typeof document<"u"?qd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qd="react-native":qd="node";const S7={"X-Client-Info":`supabase-js-${qd}/${w7}`},C7={headers:S7},j7={schema:"public"},k7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N7={};var E7=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};const _7=t=>{let e;return t?e=t:typeof fetch>"u"?e=fR:e=fetch,(...n)=>e(...n)},T7=()=>typeof Headers>"u"?hR:Headers,M7=(t,e,n)=>{const r=_7(n),s=T7();return(o,i)=>E7(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:u}))})};var A7=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};function P7(t){return t.endsWith("/")?t:t+"/"}function D7(t,e){var n,r;const{db:s,auth:o,realtime:i,global:a}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>A7(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const _R="2.71.1",Mc=30*1e3,xw=3,Ox=xw*Mc,R7="http://localhost:9999",O7="supabase.auth.token",I7={"X-Client-Info":`gotrue-js/${_R}`},bw="X-Supabase-Api-Version",TR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},L7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,F7=10*60*1e3;class hC extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class $7 extends hC{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function z7(t){return Re(t)&&t.name==="AuthApiError"}class MR extends hC{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ia extends hC{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ni extends Ia{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function B7(t){return Re(t)&&t.name==="AuthSessionMissingError"}class $p extends Ia{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zp extends Ia{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bp extends Ia{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V7(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class AE extends Ia{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ww extends Ia{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ix(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class PE extends Ia{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Sw extends Ia{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),DE=` 	
\r=`.split(""),U7=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<DE.length;e+=1)t[DE[e].charCodeAt(0)]=-2;for(let e=0;e<xg.length;e+=1)t[xg[e].charCodeAt(0)]=e;return t})();function RE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(xg[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(xg[r]),e.queuedBits-=6}}function AR(t,e,n){const r=U7[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function OE(t){const e=[],n=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{q7(i,r,n)};for(let i=0;i<t.length;i+=1)AR(t.charCodeAt(i),s,o);return e.join("")}function H7(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function W7(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}H7(r,e)}}function q7(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function K7(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)AR(t.charCodeAt(s),n,r);return new Uint8Array(e)}function G7(t){const e=[];return W7(t,n=>e.push(n)),new Uint8Array(e)}function Y7(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>RE(s,n,r)),RE(null,n,r),e.join("")}function Q7(t){return Math.round(Date.now()/1e3)+t}function J7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hs=()=>typeof window<"u"&&typeof document<"u",Ya={tested:!1,writable:!1},PR=()=>{if(!hs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ya.tested)return Ya.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ya.tested=!0,Ya.writable=!0}catch{Ya.tested=!0,Ya.writable=!1}return Ya.writable};function X7(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const DR=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Oa(async()=>{const{default:r}=await Promise.resolve().then(()=>dd);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Z7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ac=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Qa=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gi=async(t,e)=>{await t.removeItem(e)};class ly{constructor(){this.promise=new ly.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ly.promiseConstructor=Promise;function Lx(t){const e=t.split(".");if(e.length!==3)throw new Sw("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!L7.test(e[r]))throw new Sw("JWT not in base64url format");return{header:JSON.parse(OE(e[0])),payload:JSON.parse(OE(e[1])),signature:K7(e[2]),raw:{header:e[0],payload:e[1]}}}async function eq(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function tq(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await t(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function nq(t){return("0"+t.toString(16)).substr(-2)}function rq(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,nq).join("")}async function sq(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function oq(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sq(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gc(t,e,n=!1){const r=rq();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ac(t,`${e}-code-verifier`,s);const o=await oq(r);return[o,r===o?"plain":"s256"]}const iq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aq(t){const e=t.headers.get(bw);if(!e||!e.match(iq))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lq(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function cq(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const uq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vc(t){if(!uq.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fx(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IE(t){return JSON.parse(JSON.stringify(t))}var dq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const tl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),fq=[502,503,504];async function LE(t){var e;if(!Z7(t))throw new ww(tl(t),0);if(fq.includes(t.status))throw new ww(tl(t),t.status);let n;try{n=await t.json()}catch(o){throw new MR(tl(o),o)}let r;const s=aq(t);if(s&&s.getTime()>=TR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new PE(tl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ni}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new PE(tl(n),t.status,n.weak_password.reasons);throw new $7(tl(n),t.status||500,r)}const hq=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ve(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[bw]||(o[bw]=TR["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await pq(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function pq(t,e,n,r,s,o){const i=hq(e,r,s,o);let a;try{a=await t(n,Object.assign({},i))}catch(c){throw console.error(c),new ww(tl(c),0)}if(a.ok||await LE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await LE(c)}}function Io(t){var e;let n=null;yq(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Q7(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function FE(t){const e=Io(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $i(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mq(t){return{data:t,error:null}}function gq(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,i=dq(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:a,user:c},error:null}}function vq(t){return t}function yq(t){return t.access_token&&t.refresh_token&&t.expires_in}const $x=["global","local","others"];var xq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class bq{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=DR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=$x[0]){if($x.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$x.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=xq(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gq,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,i,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:vq});if(d.error)throw d.error;const f=await d.json(),h=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,p=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);u[`${b}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){vc(e);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$i})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){vc(e);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){vc(e);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$i})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){vc(e.userId);try{const{data:n,error:r}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){vc(e.userId),vc(e.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function $E(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function wq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const yc={debug:!!(globalThis&&PR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sq extends RR{}async function Cq(t,e,n){yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),yc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw yc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Sq(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(yc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}wq();const jq={url:R7,storageKey:O7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:I7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zE(t,e,n){return await n()}const xc={};class Zf{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zf.nextInstanceID,Zf.nextInstanceID+=1,this.instanceID>0&&hs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},jq),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bq({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=DR(s.fetch),this.lock=s.lock||zE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:hs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Cq:this.lock=zE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:PR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$E(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=$E(this.memoryStorage)),hs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=xc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xc[this.storageKey]=Object.assign(Object.assign({},xc[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_R}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=X7(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),hs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),V7(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new MR("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Io}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(Re(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:d,password:f,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await gc(this.storage,this.storageKey)),o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:Io})}else if("phone"in e){const{phone:d,password:f,options:h}=e;o=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Io})}else throw new zp("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(Re(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:i,options:a}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:FE})}else if("phone"in e){const{phone:o,password:i,options:a}=e;n=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:FE})}else throw new zp("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new $p}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,o,i,a,c,u,d,f,h,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:b,wallet:x,statement:y,options:w}=e;let S;if(hs())if(typeof x=="object")S=x;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const j=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let k;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")k=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)k=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),v=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=C}}try{const{data:b,error:x}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Y7(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Io});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new $p}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(Re(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await Qa(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:i}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Io});if(await gi(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new $p}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(Re(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:i}=e,a=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Io}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new $p}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,i;try{if("email"in e){const{email:a,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await gc(this.storage,this.storageKey));const{error:f}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new zp("You must provide either an email or phone number.")}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Io});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Re(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await gc(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:mq})}catch(o){if(Re(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ni;const{error:s}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:i}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:i,error:a}=await Ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new zp("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Qa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ox:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Qa(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=Fx()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!i&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$i}):await this._useSession(async n=>{var r,s,o;const{data:i,error:a}=n;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ni}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:$i})})}catch(n){if(Re(n))return B7(n)&&(await this._removeSession(),await gi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Ni;const i=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await gc(this.storage,this.storageKey));const{data:u,error:d}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:i.access_token,xform:$i});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ni;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:i}=Lx(e.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:i,error:a}=n;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ni;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!hs())throw new Bp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AE("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:c,token_type:u}=e;if(!o||!a||!i||!u)throw new Bp("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const m=h-f;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,d);const{data:v,error:b}=await this._getUser(o);if(b)throw b;const x={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:h,refresh_token:i,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Qa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(z7(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await gi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=J7(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await gc(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Re(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,c,u,d;const{data:f,error:h}=o;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return hs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Re(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)throw i;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await tq(async s=>(s>0&&await eq(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Io})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Ix(o)&&Date.now()+i-r<Mc})}catch(r){if(this._debug(n,"error",r),Re(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),hs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Qa(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Qa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await Ac(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:Fx()}else if(s&&!s.user&&!s.user){const i=await Qa(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await gi(this.storage,this.storageKey+"-user"),await Ac(this.storage,this.storageKey,s)):s.user=Fx()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ox;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Ox}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Ix(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ni;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ly;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Ni;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),Re(o)){const i={session:null,error:o};return Ix(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ac(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=IE(s);await Ac(this.storage,this.storageKey,o)}else{const s=IE(n);await Ac(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await gi(this.storage,this.storageKey),await gi(this.storage,this.storageKey+"-code-verifier"),await gi(this.storage,this.storageKey+"-user"),this.userStorage&&await gi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mc}ms, refresh threshold is ${xw} ticks`),s<=xw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof RR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await gc(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:i}=n;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:a}=await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Lx(s.access_token);let a=null;i.aal&&(a=i.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+F7>s)return r;const{data:o,error:i}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};r=p.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:c}}=Lx(r);n!=null&&n.allowExpired||lq(o.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:o,header:s,signature:i},error:null}}const d=cq(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,G7(`${a}.${c}`)))throw new Sw("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}}Zf.nextInstanceID=0;const kq=Zf;class Nq extends kq{constructor(e){super(e)}}var Eq=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(d){try{u(r.next(d))}catch(f){i(f)}}function c(d){try{u(r.throw(d))}catch(f){i(f)}}function u(d){d.done?o(d.value):s(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})};class _q{constructor(e,n,r){var s,o,i;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=P7(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:j7,realtime:N7,auth:Object.assign(Object.assign({},k7),{storageKey:u}),global:C7},f=D7(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=M7(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new H9(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new b7(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new S9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Eq(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:i,flowType:a,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nq({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:a,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new a7(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tq=(t,e,n)=>new _q(t,e,n);function Mq(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Mq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Aq="https://fvyjusjyhyksyzxxqxik.supabase.co",Pq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ2eWp1c2p5aHlrc3l6eHhxeGlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzODc0MTgsImV4cCI6MjA3MTk2MzQxOH0.8iNIY2eaWGiQ2bIPJa4ebR7X4XsY34P1BN9k0eMzGGI",re=Tq(Aq,Pq,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),pC=Object.freeze(Object.defineProperty({__proto__:null,supabase:re},Symbol.toStringTag,{value:"Module"})),Dq=()=>{const[t,e]=g.useState({user:null,session:null,perfil:null,loading:!0});return g.useEffect(()=>{let r=!0;const s=async a=>{try{const{data:c}=await re.from("perfis").select("*").eq("email",a.email).single();return c||null}catch(c){return console.log("Erro ao buscar perfil:",c),null}},o=async a=>{if(r)if(a!=null&&a.user){const c=await s(a.user);r&&e({user:a.user,session:a,perfil:c,loading:!1})}else r&&e({user:null,session:null,perfil:null,loading:!1})};re.auth.getSession().then(({data:{session:a}})=>{o(a)});const{data:{subscription:i}}=re.auth.onAuthStateChange((a,c)=>{console.log("Auth event:",a),o(c)});return()=>{r=!1,i.unsubscribe()}},[]),{...t,signOut:async()=>{try{await re.auth.signOut()}catch(r){console.error("Erro ao fazer logout:",r)}}}},OR=g.createContext(void 0),Rq=({children:t})=>{const e=Dq();return l.jsx(OR.Provider,{value:e,children:t})},jt=()=>{const t=g.useContext(OR);if(t===void 0)throw new Error("useAuthContext deve ser usado dentro de um AuthProvider");return t},IR=g.createContext(void 0),LR=()=>{const t=g.useContext(IR);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Oq=({children:t})=>{const[e,n]=g.useState(!1);g.useEffect(()=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const r=()=>{n(!e)};return l.jsx(IR.Provider,{value:{isDark:e,toggleTheme:r},children:t})},fs=({children:t,requiredRole:e})=>{const{user:n,loading:r,perfil:s}=jt(),o=ud();return g.useEffect(()=>{if(r)return;if(!n){o("/login",{replace:!0});return}if(!e)return;const i=setTimeout(()=>{if(!s){e==="dmm"&&o("/dashboard-client",{replace:!0});return}const a=s.funcao==="dmm_admin"||s.funcao==="dmm_membro",c=s.funcao==="cliente_admin"||s.funcao==="cliente_membro";e==="dmm"&&!a?o("/dashboard-client",{replace:!0}):e==="client"&&!c&&o("/dashboard-team",{replace:!0})},500);return()=>clearTimeout(i)},[n,r,s,o,e]),r?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):n?l.jsx(l.Fragment,{children:t}):null},FR=g.createContext({});function mC(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const gC=typeof window<"u",vC=gC?g.useLayoutEffect:g.useEffect,yC=g.createContext(null);function xC(t,e){t.indexOf(e)===-1&&t.push(e)}function bC(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ri=(t,e,n)=>n>e?e:n<t?t:n;let bg=()=>{};const si={},$R=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function zR(t){return typeof t=="object"&&t!==null}const BR=t=>/^0[^.\s]+$/u.test(t);function wC(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zr=t=>t,Iq=(t,e)=>n=>e(t(n)),Hh=(...t)=>t.reduce(Iq),eh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class SC{constructor(){this.subscriptions=[]}add(e){return xC(this.subscriptions,e),()=>bC(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const i=this.subscriptions[o];i&&i(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const oo=t=>t*1e3,io=t=>t/1e3;function VR(t,e){return e?t*(1e3/e):0}const UR=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Lq=1e-7,Fq=12;function $q(t,e,n,r,s){let o,i,a=0;do i=e+(n-e)/2,o=UR(i,r,s)-t,o>0?n=i:e=i;while(Math.abs(o)>Lq&&++a<Fq);return i}function Wh(t,e,n,r){if(t===e&&n===r)return Zr;const s=o=>$q(o,0,1,t,n);return o=>o===0||o===1?o:UR(s(o),e,r)}const HR=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,WR=t=>e=>1-t(1-e),qR=Wh(.33,1.53,.69,.99),CC=WR(qR),KR=HR(CC),GR=t=>(t*=2)<1?.5*CC(t):.5*(2-Math.pow(2,-10*(t-1))),jC=t=>1-Math.sin(Math.acos(t)),YR=WR(jC),QR=HR(jC),zq=Wh(.42,0,1,1),Bq=Wh(0,0,.58,1),JR=Wh(.42,0,.58,1),Vq=t=>Array.isArray(t)&&typeof t[0]!="number",XR=t=>Array.isArray(t)&&typeof t[0]=="number",BE={linear:Zr,easeIn:zq,easeInOut:JR,easeOut:Bq,circIn:jC,circInOut:QR,circOut:YR,backIn:CC,backInOut:KR,backOut:qR,anticipate:GR},Uq=t=>typeof t=="string",VE=t=>{if(XR(t)){bg(t.length===4);const[e,n,r,s]=t;return Wh(e,n,r,s)}else if(Uq(t))return bg(BE[t]!==void 0),BE[t];return t},Vp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],UE={value:null,addProjectionMetrics:null};function Hq(t,e){let n=new Set,r=new Set,s=!1,o=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},c=0;function u(f){i.has(f)&&(d.schedule(f),t()),c++,f(a)}const d={schedule:(f,h=!1,p=!1)=>{const v=p&&s?n:r;return h&&i.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),i.delete(f)},process:f=>{if(a=f,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),e&&UE.value&&UE.value.frameloop[e].push(c),c=0,n.clear(),s=!1,o&&(o=!1,d.process(f))}};return d}const Wq=40;function ZR(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=Vp.reduce((w,S)=>(w[S]=Hq(o,e?S:void 0),w),{}),{setup:a,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:p,postRender:m}=i,v=()=>{const w=si.useManualTiming?s.timestamp:performance.now();n=!1,si.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(w-s.timestamp,Wq),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),c.process(s),u.process(s),d.process(s),f.process(s),h.process(s),p.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(v))},b=()=>{n=!0,r=!0,s.isProcessing||t(v)};return{schedule:Vp.reduce((w,S)=>{const j=i[S];return w[S]=(C,k=!1,N=!1)=>(n||b(),j.schedule(C,k,N)),w},{}),cancel:w=>{for(let S=0;S<Vp.length;S++)i[Vp[S]].cancel(w)},state:s,steps:i}}const{schedule:mt,cancel:oi,state:vn,steps:zx}=ZR(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zr,!0);let km;function qq(){km=void 0}const hr={now:()=>(km===void 0&&hr.set(vn.isProcessing||si.useManualTiming?vn.timestamp:performance.now()),km),set:t=>{km=t,queueMicrotask(qq)}},eO=t=>e=>typeof e=="string"&&e.startsWith(t),kC=eO("--"),Kq=eO("var(--"),NC=t=>Kq(t)?Gq.test(t.split("/*")[0].trim()):!1,Gq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},th={...hd,transform:t=>ri(0,1,t)},Up={...hd,default:1},hf=t=>Math.round(t*1e5)/1e5,EC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yq(t){return t==null}const Qq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_C=(t,e)=>n=>!!(typeof n=="string"&&Qq.test(n)&&n.startsWith(t)||e&&!Yq(n)&&Object.prototype.hasOwnProperty.call(n,e)),tO=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,i,a]=r.match(EC);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(i),alpha:a!==void 0?parseFloat(a):1}},Jq=t=>ri(0,255,t),Bx={...hd,transform:t=>Math.round(Jq(t))},cl={test:_C("rgb","red"),parse:tO("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Bx.transform(t)+", "+Bx.transform(e)+", "+Bx.transform(n)+", "+hf(th.transform(r))+")"};function Xq(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Cw={test:_C("#"),parse:Xq,transform:cl.transform},qh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ei=qh("deg"),ao=qh("%"),Ne=qh("px"),Zq=qh("vh"),eK=qh("vw"),HE={...ao,parse:t=>ao.parse(t)/100,transform:t=>ao.transform(t*100)},Gc={test:_C("hsl","hue"),parse:tO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ao.transform(hf(e))+", "+ao.transform(hf(n))+", "+hf(th.transform(r))+")"},It={test:t=>cl.test(t)||Cw.test(t)||Gc.test(t),parse:t=>cl.test(t)?cl.parse(t):Gc.test(t)?Gc.parse(t):Cw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cl.transform(t):Gc.transform(t),getAnimatableNone:t=>{const e=It.parse(t);return e.alpha=0,It.transform(e)}},tK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(EC))==null?void 0:e.length)||0)+(((n=t.match(tK))==null?void 0:n.length)||0)>0}const nO="number",rO="color",rK="var",sK="var(",WE="${}",oK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const a=e.replace(oK,c=>(It.test(c)?(r.color.push(o),s.push(rO),n.push(It.parse(c))):c.startsWith(sK)?(r.var.push(o),s.push(rK),n.push(c)):(r.number.push(o),s.push(nO),n.push(parseFloat(c))),++o,WE)).split(WE);return{values:n,split:a,indexes:r,types:s}}function sO(t){return nh(t).values}function oO(t){const{split:e,types:n}=nh(t),r=e.length;return s=>{let o="";for(let i=0;i<r;i++)if(o+=e[i],s[i]!==void 0){const a=n[i];a===nO?o+=hf(s[i]):a===rO?o+=It.transform(s[i]):o+=s[i]}return o}}const iK=t=>typeof t=="number"?0:It.test(t)?It.getAnimatableNone(t):t;function aK(t){const e=sO(t);return oO(t)(e.map(iK))}const ka={test:nK,parse:sO,createTransformer:oO,getAnimatableNone:aK};function Vx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,i=0;if(!e)s=o=i=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=Vx(c,a,t+1/3),o=Vx(c,a,t),i=Vx(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:r}}function wg(t,e){return n=>n>0?e:t}const wt=(t,e,n)=>t+(e-t)*n,Ux=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},cK=[Cw,cl,Gc],uK=t=>cK.find(e=>e.test(t));function qE(t){const e=uK(t);if(!e)return!1;let n=e.parse(t);return e===Gc&&(n=lK(n)),n}const KE=(t,e)=>{const n=qE(t),r=qE(e);if(!n||!r)return wg(t,e);const s={...n};return o=>(s.red=Ux(n.red,r.red,o),s.green=Ux(n.green,r.green,o),s.blue=Ux(n.blue,r.blue,o),s.alpha=wt(n.alpha,r.alpha,o),cl.transform(s))},jw=new Set(["none","hidden"]);function dK(t,e){return jw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fK(t,e){return n=>wt(t,e,n)}function TC(t){return typeof t=="number"?fK:typeof t=="string"?NC(t)?wg:It.test(t)?KE:mK:Array.isArray(t)?iO:typeof t=="object"?It.test(t)?KE:hK:wg}function iO(t,e){const n=[...t],r=n.length,s=t.map((o,i)=>TC(o)(o,e[i]));return o=>{for(let i=0;i<r;i++)n[i]=s[i](o);return n}}function hK(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=TC(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function pK(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],i=t.indexes[o][r[o]],a=t.values[i]??0;n[s]=a,r[o]++}return n}const mK=(t,e)=>{const n=ka.createTransformer(e),r=nh(t),s=nh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?jw.has(t)&&!s.values.length||jw.has(e)&&!r.values.length?dK(t,e):Hh(iO(pK(r,s),s.values),n):wg(t,e)};function aO(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?wt(t,e,n):TC(t)(t,e)}const gK=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>mt.update(e,n),stop:()=>oi(e),now:()=>vn.isProcessing?vn.timestamp:hr.now()}},lO=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=Math.round(t(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Sg=2e4;function MC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Sg;)e+=n,r=t.next(e);return e>=Sg?1/0:e}function vK(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(MC(r),Sg);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:io(s)}}const yK=5;function cO(t,e,n){const r=Math.max(e-yK,0);return VR(n-t(r),e-r)}const _t={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hx=.001;function xK({duration:t=_t.duration,bounce:e=_t.bounce,velocity:n=_t.velocity,mass:r=_t.mass}){let s,o,i=1-e;i=ri(_t.minDamping,_t.maxDamping,i),t=ri(_t.minDuration,_t.maxDuration,io(t)),i<1?(s=u=>{const d=u*i,f=d*t,h=d-n,p=kw(u,i),m=Math.exp(-f);return Hx-h/p*m},o=u=>{const f=u*i*t,h=f*n+n,p=Math.pow(i,2)*Math.pow(u,2)*t,m=Math.exp(-f),v=kw(Math.pow(u,2),i);return(-s(u)+Hx>0?-1:1)*((h-p)*m)/v}):(s=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-Hx+d*f},o=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const a=5/t,c=wK(s,o,a);if(t=oo(t),isNaN(c))return{stiffness:_t.stiffness,damping:_t.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:t}}}const bK=12;function wK(t,e,n){let r=n;for(let s=1;s<bK;s++)r=r-t(r)/e(r);return r}function kw(t,e){return t*Math.sqrt(1-e*e)}const SK=["duration","bounce"],CK=["stiffness","damping","mass"];function GE(t,e){return e.some(n=>t[n]!==void 0)}function jK(t){let e={velocity:_t.velocity,stiffness:_t.stiffness,damping:_t.damping,mass:_t.mass,isResolvedFromDuration:!1,...t};if(!GE(t,CK)&&GE(t,SK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*ri(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:_t.mass,stiffness:s,damping:o}}else{const n=xK(t);e={...e,...n,mass:_t.mass},e.isResolvedFromDuration=!0}return e}function Cg(t=_t.visualDuration,e=_t.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=jK({...n,velocity:-io(n.velocity||0)}),m=h||0,v=u/(2*Math.sqrt(c*d)),b=i-o,x=io(Math.sqrt(c/d)),y=Math.abs(b)<5;r||(r=y?_t.restSpeed.granular:_t.restSpeed.default),s||(s=y?_t.restDelta.granular:_t.restDelta.default);let w;if(v<1){const j=kw(x,v);w=C=>{const k=Math.exp(-v*x*C);return i-k*((m+v*x*b)/j*Math.sin(j*C)+b*Math.cos(j*C))}}else if(v===1)w=j=>i-Math.exp(-x*j)*(b+(m+x*b)*j);else{const j=x*Math.sqrt(v*v-1);w=C=>{const k=Math.exp(-v*x*C),N=Math.min(j*C,300);return i-k*((m+v*x*b)*Math.sinh(N)+j*b*Math.cosh(N))/j}}const S={calculatedDuration:p&&f||null,next:j=>{const C=w(j);if(p)a.done=j>=f;else{let k=j===0?m:0;v<1&&(k=j===0?oo(m):cO(w,j,C));const N=Math.abs(k)<=r,E=Math.abs(i-C)<=s;a.done=N&&E}return a.value=a.done?i:C,a},toString:()=>{const j=Math.min(MC(S),Sg),C=lO(k=>S.next(j*k).value,j,30);return j+"ms "+C},toTransition:()=>{}};return S}Cg.applyToOptions=t=>{const e=vK(t,100,Cg);return t.ease=e.ease,t.duration=oo(e.duration),t.type="keyframes",t};function Nw({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:i,min:a,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=N=>a!==void 0&&N<a||c!==void 0&&N>c,m=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let v=n*e;const b=f+v,x=i===void 0?b:i(b);x!==b&&(v=x-f);const y=N=>-v*Math.exp(-N/r),w=N=>x+y(N),S=N=>{const E=y(N),A=w(N);h.done=Math.abs(E)<=u,h.value=h.done?x:A};let j,C;const k=N=>{p(h.value)&&(j=N,C=Cg({keyframes:[h.value,m(h.value)],velocity:cO(w,N,h.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:N=>{let E=!1;return!C&&j===void 0&&(E=!0,S(N),k(N)),j!==void 0&&N>=j?C.next(N-j):(!E&&S(N),h)}}}function kK(t,e,n){const r=[],s=n||si.mix||aO,o=t.length-1;for(let i=0;i<o;i++){let a=s(t[i],t[i+1]);if(e){const c=Array.isArray(e)?e[i]||Zr:e;a=Hh(c,a)}r.push(a)}return r}function NK(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(bg(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const i=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=kK(e,r,s),c=a.length,u=d=>{if(i&&d<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=eh(t[f],t[f+1],d);return a[f](h)};return n?d=>u(ri(t[0],t[o-1],d)):u}function EK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=eh(0,e,r);t.push(wt(n,1,s))}}function _K(t){const e=[0];return EK(e,t.length-1),e}function TK(t,e){return t.map(n=>n*e)}function MK(t,e){return t.map(()=>e||JR).splice(0,t.length-1)}function pf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Vq(r)?r.map(VE):VE(r),o={done:!1,value:e[0]},i=TK(n&&n.length===e.length?n:_K(e),t),a=NK(i,e,{ease:Array.isArray(s)?s:MK(e,s)});return{calculatedDuration:t,next:c=>(o.value=a(c),o.done=c>=t,o)}}const AK=t=>t!==null;function AC(t,{repeat:e,repeatType:n="loop"},r,s=1){const o=t.filter(AK),a=s<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!a||r===void 0?o[a]:r}const PK={decay:Nw,inertia:Nw,tween:pf,keyframes:pf,spring:Cg};function uO(t){typeof t.type=="string"&&(t.type=PK[t.type])}class PC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const DK=t=>t/100;class DC extends PC{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==hr.now()&&this.tick(hr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;uO(e);const{type:n=pf,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:i=0}=e;let{keyframes:a}=e;const c=n||pf;c!==pf&&typeof a[0]!="number"&&(this.mixKeyframes=Hh(DK,aO(a[0],a[1])),a=[0,100]);const u=c({...e,keyframes:a});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=MC(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:i,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:p,type:m,onUpdate:v,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?x<0:x>s;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,S=r;if(f){const N=Math.min(this.currentTime,s)/a;let E=Math.floor(N),A=N%1;!A&&N>=1&&(A=1),A===1&&E--,E=Math.min(E,f+1),!!(E%2)&&(h==="reverse"?(A=1-A,p&&(A-=p/a)):h==="mirror"&&(S=i)),w=ri(0,1,A)*a}const j=y?{done:!1,value:d[0]}:S.next(w);o&&(j.value=o(j.value));let{done:C}=j;!y&&c!==null&&(C=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return k&&m!==Nw&&(j.value=AC(d,this.options,b,this.speed)),v&&v(j.value),k&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return io(this.calculatedDuration)}get time(){return io(this.currentTime)}set time(e){var n;e=oo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=io(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=gK,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function RK(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ul=t=>t*180/Math.PI,Ew=t=>{const e=ul(Math.atan2(t[1],t[0]));return _w(e)},OK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ew,rotateZ:Ew,skewX:t=>ul(Math.atan(t[1])),skewY:t=>ul(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_w=t=>(t=t%360,t<0&&(t+=360),t),YE=Ew,QE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),JE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),IK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:QE,scaleY:JE,scale:t=>(QE(t)+JE(t))/2,rotateX:t=>_w(ul(Math.atan2(t[6],t[5]))),rotateY:t=>_w(ul(Math.atan2(-t[2],t[0]))),rotateZ:YE,rotate:YE,skewX:t=>ul(Math.atan(t[4])),skewY:t=>ul(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Tw(t){return t.includes("scale")?1:0}function Mw(t,e){if(!t||t==="none")return Tw(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=IK,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=OK,s=a}if(!s)return Tw(e);const o=r[e],i=s[1].split(",").map(FK);return typeof o=="function"?o(i):i[o]}const LK=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Mw(n,e)};function FK(t){return parseFloat(t.trim())}const pd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],md=new Set(pd),XE=t=>t===hd||t===Ne,$K=new Set(["x","y","z"]),zK=pd.filter(t=>!$K.has(t));function BK(t){const e=[];return zK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Nl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Mw(e,"x"),y:(t,{transform:e})=>Mw(e,"y")};Nl.translateX=Nl.x;Nl.translateY=Nl.y;const El=new Set;let Aw=!1,Pw=!1,Dw=!1;function dO(){if(Pw){const t=Array.from(El).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=BK(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,i])=>{var a;(a=r.getValue(o))==null||a.set(i)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Pw=!1,Aw=!1,El.forEach(t=>t.complete(Dw)),El.clear()}function fO(){El.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Pw=!0)})}function VK(){Dw=!0,fO(),dO(),Dw=!1}class RC{constructor(e,n,r,s,o,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(El.add(this),Aw||(Aw=!0,mt.read(fO),mt.resolveKeyframes(dO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),i=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const a=r.readValue(n,i);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=i),s&&o===void 0&&s.set(e[0])}RK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),El.delete(this)}cancel(){this.state==="scheduled"&&(El.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const UK=t=>t.startsWith("--");function HK(t,e,n){UK(e)?t.style.setProperty(e,n):t.style[e]=n}const WK=wC(()=>window.ScrollTimeline!==void 0),qK={};function KK(t,e){const n=wC(t);return()=>qK[e]??n()}const hO=KK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Kd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ZE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kd([0,.65,.55,1]),circOut:Kd([.55,0,1,.45]),backIn:Kd([.31,.01,.66,-.59]),backOut:Kd([.33,1.53,.69,.99])};function pO(t,e){if(t)return typeof t=="function"?hO()?lO(t,e):"ease-out":XR(t)?Kd(t):Array.isArray(t)?t.map(n=>pO(n,e)||ZE.easeOut):ZE[t]}function GK(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:i="loop",ease:a="easeOut",times:c}={},u=void 0){const d={[e]:n};c&&(d.offset=c);const f=pO(a,s);Array.isArray(f)&&(d.easing=f);const h={delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),t.animate(d,h)}function mO(t){return typeof t=="function"&&"applyToOptions"in t}function YK({type:t,...e}){return mO(t)&&hO()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class QK extends PC{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:o,allowFlatten:i=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=i,this.options=e,bg(typeof e.type!="string");const u=YK(e);this.animation=GK(n,r,s,u,o),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=AC(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):HK(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return io(Number(e))}get time(){return io(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=oo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&WK()?(this.animation.timeline=e,Zr):n(this)}}const gO={anticipate:GR,backInOut:KR,circInOut:QR};function JK(t){return t in gO}function XK(t){typeof t.ease=="string"&&JK(t.ease)&&(t.ease=gO[t.ease])}const e_=10;class ZK extends QK{constructor(e){XK(e),uO(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:o,...i}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new DC({...i,autoplay:!1}),c=oo(this.finishedTime??this.time);n.setWithVelocity(a.sample(c-e_).value,a.sample(c).value,e_),a.stop()}}const t_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ka.test(t)||t==="0")&&!t.startsWith("url("));function eG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tG(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],i=t_(s,e),a=t_(o,e);return!i||!a?!1:eG(t)||(n==="spring"||mO(n))&&r}function Rw(t){t.duration=0,t.type}const nG=new Set(["opacity","clipPath","filter","transform"]),rG=wC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sG(t){var d;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:o,type:i}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return rG()&&n&&nG.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&o!==0&&i!=="inertia"}const oG=40;class iG extends PC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:i="loop",keyframes:a,name:c,motionValue:u,element:d,...f}){var m;super(),this.stop=()=>{var v,b;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=hr.now();const h={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:i,name:c,motionValue:u,element:d,...f},p=(d==null?void 0:d.KeyframeResolver)||RC;this.keyframeResolver=new p(a,(v,b,x)=>this.onKeyframesResolved(v,b,h,!x),c,u,d),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:o,type:i,velocity:a,delay:c,isHandoff:u,onUpdate:d}=r;this.resolvedAt=hr.now(),tG(e,o,i,a)||((si.instantAnimations||!c)&&(d==null||d(AC(e,r,n))),e[0]=e[e.length-1],Rw(r),r.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>oG?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&sG(h)?new ZK({...h,element:h.motionValue.owner.current}):new DC(h);p.finished.then(()=>this.notifyFinished()).catch(Zr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),VK()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const aG=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lG(t){const e=aG.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function vO(t,e,n=1){const[r,s]=lG(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const i=o.trim();return $R(i)?parseFloat(i):i}return NC(s)?vO(s,e,n+1):s}function OC(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const yO=new Set(["width","height","top","left","right","bottom",...pd]),cG={test:t=>t==="auto",parse:t=>t},xO=t=>e=>e.test(t),bO=[hd,Ne,ao,Ei,eK,Zq,cG],n_=t=>bO.find(xO(t));function uG(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||BR(t):!0}const dG=new Set(["brightness","contrast","saturate","opacity"]);function fG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(EC)||[];if(!r)return t;const s=n.replace(r,"");let o=dG.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const hG=/\b([a-z-]*)\(.*?\)/gu,Ow={...ka,getAnimatableNone:t=>{const e=t.match(hG);return e?e.map(fG).join(" "):t}},r_={...hd,transform:Math.round},pG={rotate:Ei,rotateX:Ei,rotateY:Ei,rotateZ:Ei,scale:Up,scaleX:Up,scaleY:Up,scaleZ:Up,skew:Ei,skewX:Ei,skewY:Ei,distance:Ne,translateX:Ne,translateY:Ne,translateZ:Ne,x:Ne,y:Ne,z:Ne,perspective:Ne,transformPerspective:Ne,opacity:th,originX:HE,originY:HE,originZ:Ne},IC={borderWidth:Ne,borderTopWidth:Ne,borderRightWidth:Ne,borderBottomWidth:Ne,borderLeftWidth:Ne,borderRadius:Ne,radius:Ne,borderTopLeftRadius:Ne,borderTopRightRadius:Ne,borderBottomRightRadius:Ne,borderBottomLeftRadius:Ne,width:Ne,maxWidth:Ne,height:Ne,maxHeight:Ne,top:Ne,right:Ne,bottom:Ne,left:Ne,padding:Ne,paddingTop:Ne,paddingRight:Ne,paddingBottom:Ne,paddingLeft:Ne,margin:Ne,marginTop:Ne,marginRight:Ne,marginBottom:Ne,marginLeft:Ne,backgroundPositionX:Ne,backgroundPositionY:Ne,...pG,zIndex:r_,fillOpacity:th,strokeOpacity:th,numOctaves:r_},mG={...IC,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:Ow,WebkitFilter:Ow},wO=t=>mG[t];function SO(t,e){let n=wO(t);return n!==Ow&&(n=ka),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gG=new Set(["auto","none","0"]);function vG(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!gG.has(o)&&nh(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=SO(n,s)}class yG extends RC{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),NC(u))){const d=vO(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!yO.has(r)||e.length!==2)return;const[s,o]=e,i=n_(s),a=n_(o);if(i!==a)if(XE(i)&&XE(a))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Nl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||uG(e[s]))&&r.push(s);r.length&&vG(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Nl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,i=r[o];r[o]=Nl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function CO(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const s=document.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const jO=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function xG(t){return zR(t)&&"offsetHeight"in t}const s_=30,bG=t=>!isNaN(parseFloat(t));class wG{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=hr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=hr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bG(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SC);const r=this.events[e].add(n);return e==="change"?()=>{r(),mt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>s_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,s_);return VR(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bl(t,e){return new wG(t,e)}const{schedule:LC,cancel:wge}=ZR(queueMicrotask,!1),ps={x:!1,y:!1};function kO(){return ps.x||ps.y}function SG(t){return t==="x"||t==="y"?ps[t]?null:(ps[t]=!0,()=>{ps[t]=!1}):ps.x||ps.y?null:(ps.x=ps.y=!0,()=>{ps.x=ps.y=!1})}function NO(t,e){const n=CO(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function o_(t){return!(t.pointerType==="touch"||kO())}function CG(t,e,n={}){const[r,s,o]=NO(t,n),i=a=>{if(!o_(a))return;const{target:c}=a,u=e(c,a);if(typeof u!="function"||!c)return;const d=f=>{o_(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return r.forEach(a=>{a.addEventListener("pointerenter",i,s)}),o}const EO=(t,e)=>e?t===e?!0:EO(t,e.parentElement):!1,FC=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jG=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kG(t){return jG.has(t.tagName)||t.tabIndex!==-1}const Nm=new WeakSet;function i_(t){return e=>{e.key==="Enter"&&t(e)}}function Wx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NG=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=i_(()=>{if(Nm.has(n))return;Wx(n,"down");const s=i_(()=>{Wx(n,"up")}),o=()=>Wx(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function a_(t){return FC(t)&&!kO()}function EG(t,e,n={}){const[r,s,o]=NO(t,n),i=a=>{const c=a.currentTarget;if(!a_(a))return;Nm.add(c);const u=e(c,a),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Nm.has(c)&&Nm.delete(c),a_(p)&&typeof u=="function"&&u(p,{success:m})},f=p=>{d(p,c===window||c===document||n.useGlobalTarget||EO(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",i,s),xG(a)&&(a.addEventListener("focus",u=>NG(u,s)),!kG(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),o}function _O(t){return zR(t)&&"ownerSVGElement"in t}function _G(t){return _O(t)&&t.tagName==="svg"}const tn=t=>!!(t&&t.getVelocity),TG=[...bO,It,ka],MG=t=>TG.find(xO(t)),$C=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function AG(t=!0){const e=g.useContext(yC);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=g.useId();g.useEffect(()=>{if(t)return s(o)},[t]);const i=g.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,i]:[!0]}const TO=g.createContext({strict:!1}),l_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vu={};for(const t in l_)Vu[t]={isEnabled:e=>l_[t].some(n=>!!e[n])};function PG(t){for(const e in t)Vu[e]={...Vu[e],...t[e]}}const DG=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jg(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||DG.has(t)}let MO=t=>!jg(t);function RG(t){typeof t=="function"&&(MO=e=>e.startsWith("on")?!jg(e):t(e))}try{RG(require("@emotion/is-prop-valid").default)}catch{}function OG(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(MO(s)||n===!0&&jg(s)||!e&&!jg(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const cy=g.createContext({});function uy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function rh(t){return typeof t=="string"||Array.isArray(t)}const zC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],BC=["initial",...zC];function dy(t){return uy(t.animate)||BC.some(e=>rh(t[e]))}function AO(t){return!!(dy(t)||t.variants)}function IG(t,e){if(dy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||rh(n)?n:void 0,animate:rh(r)?r:void 0}}return t.inherit!==!1?e:{}}function LG(t){const{initial:e,animate:n}=IG(t,g.useContext(cy));return g.useMemo(()=>({initial:e,animate:n}),[c_(e),c_(n)])}function c_(t){return Array.isArray(t)?t.join(" "):t}const sh={};function FG(t){for(const e in t)sh[e]=t[e],kC(e)&&(sh[e].isCSSVariable=!0)}function PO(t,{layout:e,layoutId:n}){return md.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sh[t]||t==="opacity")}const $G={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zG=pd.length;function BG(t,e,n){let r="",s=!0;for(let o=0;o<zG;o++){const i=pd[o],a=t[i];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(i.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||n){const u=jO(a,IC[i]);if(!c){s=!1;const d=$G[i]||i;r+=`${d}(${u}) `}n&&(e[i]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function VC(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let i=!1,a=!1;for(const c in e){const u=e[c];if(md.has(c)){i=!0;continue}else if(kC(c)){s[c]=u;continue}else{const d=jO(u,IC[c]);c.startsWith("origin")?(a=!0,o[c]=d):r[c]=d}}if(e.transform||(i||n?r.transform=BG(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:c="50%",originY:u="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${u} ${d}`}}const UC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function DO(t,e,n){for(const r in e)!tn(e[r])&&!PO(r,n)&&(t[r]=e[r])}function VG({transformTemplate:t},e){return g.useMemo(()=>{const n=UC();return VC(n,e,t),Object.assign({},n.vars,n.style)},[e])}function UG(t,e){const n=t.style||{},r={};return DO(r,n,t),Object.assign(r,VG(t,e)),r}function HG(t,e){const n={},r=UG(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const WG={offset:"stroke-dashoffset",array:"stroke-dasharray"},qG={offset:"strokeDashoffset",array:"strokeDasharray"};function KG(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?WG:qG;t[o.offset]=Ne.transform(-r);const i=Ne.transform(e),a=Ne.transform(n);t[o.array]=`${i} ${a}`}function RO(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:i=0,...a},c,u,d){if(VC(t,a,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),s!==void 0&&KG(f,s,o,i,!1)}const OO=()=>({...UC(),attrs:{}}),IO=t=>typeof t=="string"&&t.toLowerCase()==="svg";function GG(t,e,n,r){const s=g.useMemo(()=>{const o=OO();return RO(o,e,IO(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};DO(o,t.style,t),s.style={...o,...s.style}}return s}const YG=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function HC(t){return typeof t!="string"||t.includes("-")?!1:!!(YG.indexOf(t)>-1||/[A-Z]/u.test(t))}function QG(t,e,n,{latestValues:r},s,o=!1){const a=(HC(t)?GG:HG)(e,r,s,t),c=OG(e,typeof t=="string",o),u=t!==g.Fragment?{...c,...a,ref:n}:{},{children:d}=e,f=g.useMemo(()=>tn(d)?d.get():d,[d]);return g.createElement(t,{...u,children:f})}function u_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function WC(t,e,n,r){if(typeof e=="function"){const[s,o]=u_(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=u_(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function Em(t){return tn(t)?t.get():t}function JG({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:XG(n,r,s,t),renderState:e()}}function XG(t,e,n,r){const s={},o=r(t,{});for(const h in o)s[h]=Em(o[h]);let{initial:i,animate:a}=t;const c=dy(t),u=AO(t);e&&u&&!c&&t.inherit!==!1&&(i===void 0&&(i=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const f=d?a:i;if(f&&typeof f!="boolean"&&!uy(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const m=WC(t,h[p]);if(m){const{transitionEnd:v,transition:b,...x}=m;for(const y in x){let w=x[y];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(s[y]=w)}for(const y in v)s[y]=v[y]}}}return s}const LO=t=>(e,n)=>{const r=g.useContext(cy),s=g.useContext(yC),o=()=>JG(t,e,r,s);return n?o():mC(o)};function qC(t,e,n){var o;const{style:r}=t,s={};for(const i in r)(tn(r[i])||e.style&&tn(e.style[i])||PO(i,t)||((o=n==null?void 0:n.getValue(i))==null?void 0:o.liveStyle)!==void 0)&&(s[i]=r[i]);return s}const ZG=LO({scrapeMotionValuesFromProps:qC,createRenderState:UC});function FO(t,e,n){const r=qC(t,e,n);for(const s in t)if(tn(t[s])||tn(e[s])){const o=pd.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const eY=LO({scrapeMotionValuesFromProps:FO,createRenderState:OO}),tY=Symbol.for("motionComponentSymbol");function Yc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nY(t,e,n){return g.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Yc(n)&&(n.current=r))},[e])}const KC=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),rY="framerAppearId",$O="data-"+KC(rY),zO=g.createContext({});function sY(t,e,n,r,s){var v,b;const{visualElement:o}=g.useContext(cy),i=g.useContext(TO),a=g.useContext(yC),c=g.useContext($C).reducedMotion,u=g.useRef(null);r=r||i.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:o,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=g.useContext(zO);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&oY(u.current,n,s,f);const h=g.useRef(!1);g.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const p=n[$O],m=g.useRef(!!p&&!((v=window.MotionHandoffIsComplete)!=null&&v.call(window,p))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,p)));return vC(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),m.current&&d.animationState&&d.animationState.animateChanges())}),g.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,p)}),m.current=!1),d.enteringChildren=void 0)}),d}function oY(t,e,n,r){const{layoutId:s,layout:o,drag:i,dragConstraints:a,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BO(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!i||a&&Yc(a),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:u})}function BO(t){if(t)return t.options.allowProjection!==!1?t.projection:BO(t.parent)}function qx(t,{forwardMotionProps:e=!1}={},n,r){n&&PG(n);const s=HC(t)?eY:ZG;function o(a,c){let u;const d={...g.useContext($C),...a,layoutId:iY(a)},{isStatic:f}=d,h=LG(a),p=s(a,f);if(!f&&gC){aY();const m=lY(d);u=m.MeasureLayout,h.visualElement=sY(t,p,d,r,m.ProjectionNode)}return l.jsxs(cy.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,QG(t,a,nY(p,h.visualElement,c),p,f,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const i=g.forwardRef(o);return i[tY]=t,i}function iY({layoutId:t}){const e=g.useContext(FR).id;return e&&t!==void 0?e+"-"+t:t}function aY(t,e){g.useContext(TO).strict}function lY(t){const{drag:e,layout:n}=Vu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function cY(t,e){if(typeof Proxy>"u")return qx;const n=new Map,r=(o,i)=>qx(o,i,t,e),s=(o,i)=>r(o,i);return new Proxy(s,{get:(o,i)=>i==="create"?r:(n.has(i)||n.set(i,qx(i,void 0,t,e)),n.get(i))})}function VO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function uY({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function dY(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kx(t){return t===void 0||t===1}function Iw({scale:t,scaleX:e,scaleY:n}){return!Kx(t)||!Kx(e)||!Kx(n)}function nl(t){return Iw(t)||UO(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function UO(t){return d_(t.x)||d_(t.y)}function d_(t){return t&&t!=="0%"}function kg(t,e,n){const r=t-n,s=e*r;return n+s}function f_(t,e,n,r,s){return s!==void 0&&(t=kg(t,s,r)),kg(t,n,r)+e}function Lw(t,e=0,n=1,r,s){t.min=f_(t.min,e,n,r,s),t.max=f_(t.max,e,n,r,s)}function HO(t,{x:e,y:n}){Lw(t.x,e.translate,e.scale,e.originPoint),Lw(t.y,n.translate,n.scale,n.originPoint)}const h_=.999999999999,p_=1.0000000000001;function fY(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,i;for(let a=0;a<s;a++){o=n[a],i=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Jc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(e.x*=i.x.scale,e.y*=i.y.scale,HO(t,i)),r&&nl(o.latestValues)&&Jc(t,o.latestValues))}e.x<p_&&e.x>h_&&(e.x=1),e.y<p_&&e.y>h_&&(e.y=1)}function Qc(t,e){t.min=t.min+e,t.max=t.max+e}function m_(t,e,n,r,s=.5){const o=wt(t.min,t.max,s);Lw(t,e,n,o,r)}function Jc(t,e){m_(t.x,e.x,e.scaleX,e.scale,e.originX),m_(t.y,e.y,e.scaleY,e.scale,e.originY)}function WO(t,e){return VO(dY(t.getBoundingClientRect(),e))}function hY(t,e,n){const r=WO(t,n),{scroll:s}=e;return s&&(Qc(r.x,s.offset.x),Qc(r.y,s.offset.y)),r}const g_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xc=()=>({x:g_(),y:g_()}),v_=()=>({min:0,max:0}),Dt=()=>({x:v_(),y:v_()}),Fw={current:null},qO={current:!1};function pY(){if(qO.current=!0,!!gC)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fw.current=t.matches;t.addEventListener("change",e),e()}else Fw.current=!1}const mY=new WeakMap;function gY(t,e,n){for(const r in e){const s=e[r],o=n[r];if(tn(s))t.addValue(r,s);else if(tn(o))t.addValue(r,Bl(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const i=t.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=t.getStaticValue(r);t.addValue(r,Bl(i!==void 0?i:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const y_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vY{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=RC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=hr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,mt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!o,this.isControllingVariants=dy(n),this.isVariantNode=AO(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];c[h]!==void 0&&tn(p)&&p.set(c[h])}}mount(e){var n;this.current=e,mY.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),qO.current||pY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fw.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),oi(this.notifyUpdate),oi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=md.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[e]=i,this.props.onUpdate&&mt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vu){const n=Vu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<y_.length;r++){const s=y_[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,i=e[o];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=gY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($R(r)||BR(r))?r=parseFloat(r):!MG(r)&&ka.test(n)&&(r=SO(e,n)),this.setBaseTarget(e,tn(r)?r.get():r)),tn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=WC(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!tn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SC),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){LC.render(this.render)}}class KO extends vY{constructor(){super(...arguments),this.KeyframeResolver=yG}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function GO(t,{style:e,vars:n},r,s){const o=t.style;let i;for(i in e)o[i]=e[i];s==null||s.applyProjectionStyles(o,r);for(i in n)o.setProperty(i,n[i])}function yY(t){return window.getComputedStyle(t)}class xY extends KO{constructor(){super(...arguments),this.type="html",this.renderInstance=GO}readValueFromInstance(e,n){var r;if(md.has(n))return(r=this.projection)!=null&&r.isProjecting?Tw(n):LK(e,n);{const s=yY(e),o=(kC(n)?s.getPropertyValue(n):s[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return WO(e,n)}build(e,n,r){VC(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return qC(e,n,r)}}const YO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bY(t,e,n,r){GO(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(YO.has(s)?s:KC(s),e.attrs[s])}class wY extends KO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(md.has(n)){const r=wO(n);return r&&r.default||0}return n=YO.has(n)?n:KC(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return FO(e,n,r)}build(e,n,r){RO(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){bY(e,n,r,s)}mount(e){this.isSVGTag=IO(e.tagName),super.mount(e)}}const SY=(t,e)=>HC(t)?new wY(e):new xY(e,{allowProjection:t!==g.Fragment});function lu(t,e,n){const r=t.getProps();return WC(r,e,n!==void 0?n:r.custom,t)}const $w=t=>Array.isArray(t);function CY(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bl(n))}function jY(t){return $w(t)?t[t.length-1]||0:t}function GC(t,e){const n=lu(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const i in o){const a=jY(o[i]);CY(t,i,a)}}function kY(t){return!!(tn(t)&&t.add)}function zw(t,e){const n=t.getValue("willChange");if(kY(n))return n.add(e);if(!n&&si.WillChange){const r=new si.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function QO(t){return t.props[$O]}const NY=t=>t!==null;function EY(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(NY),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const _Y={type:"spring",stiffness:500,damping:25,restSpeed:10},TY=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),MY={type:"keyframes",duration:.8},AY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PY=(t,{keyframes:e})=>e.length>2?MY:md.has(t)?t.startsWith("scale")?TY(e[1]):_Y:AY;function DY({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:i,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const YC=(t,e,n,r={},s,o)=>i=>{const a=OC(r,t)||{},c=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-oo(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{i(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:o?void 0:s};DY(a)||Object.assign(d,PY(t,d)),d.duration&&(d.duration=oo(d.duration)),d.repeatDelay&&(d.repeatDelay=oo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Rw(d),d.delay===0&&(f=!0)),(si.instantAnimations||si.skipAnimations)&&(f=!0,Rw(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,f&&!o&&e.get()!==void 0){const h=EY(d.keyframes,a);if(h!==void 0){mt.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new DC(d):new iG(d)};function RY({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function JO(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:i,...a}=e;r&&(o=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const f=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||u&&RY(u,d))continue;const p={delay:n,...OC(o||{},d)},m=f.get();if(m!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===m&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const x=QO(t);if(x){const y=window.MotionHandoffAnimation(x,d,mt);y!==null&&(p.startTime=y,v=!0)}}zw(t,d),f.start(YC(d,f,h,t.shouldReduceMotion&&yO.has(d)?{type:!1}:p,t,v));const b=f.animation;b&&c.push(b)}return i&&Promise.all(c).then(()=>{mt.update(()=>{i&&GC(t,i)})}),c}function XO(t,e,n,r=0,s=1){const o=Array.from(t).sort((u,d)=>u.sortNodePosition(d)).indexOf(e),i=t.size,a=(i-1)*r;return typeof n=="function"?n(o,i):s===1?o*r:a-o*r}function Bw(t,e,n={}){var c;const r=lu(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(JO(t,r,n)):()=>Promise.resolve(),i=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=s;return OY(t,e,u,d,f,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,d]=a==="beforeChildren"?[o,i]:[i,o];return u().then(()=>d())}else return Promise.all([o(),i(n.delay)])}function OY(t,e,n=0,r=0,s=0,o=1,i){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Bw(c,e,{...i,delay:n+(typeof r=="function"?0:r)+XO(t.variantChildren,c,r,s,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function ZO(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Bw(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=Bw(t,e,n);else{const s=typeof e=="function"?lu(t,e,n.custom):e;r=Promise.all(JO(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function eI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const IY=BC.length;function tI(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?tI(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<IY;n++){const r=BC[n],s=t.props[r];(rh(s)||s===!1)&&(e[r]=s)}return e}const LY=[...zC].reverse(),FY=zC.length;function $Y(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ZO(t,n,r)))}function zY(t){let e=$Y(t),n=x_(),r=!0;const s=c=>(u,d)=>{var h;const f=lu(t,d,c==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:m,...v}=f;u={...u,...v,...m}}return u};function o(c){e=c(t)}function i(c){const{props:u}=t,d=tI(t.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let b=0;b<FY;b++){const x=LY[b],y=n[x],w=u[x]!==void 0?u[x]:d[x],S=rh(w),j=x===c?y.isActive:null;j===!1&&(m=b);let C=w===d[x]&&w!==u[x]&&S;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),y.protectedKeys={...p},!y.isActive&&j===null||!w&&!y.prevProp||uy(w)||typeof w=="boolean")continue;const k=BY(y.prevProp,w);let N=k||x===c&&y.isActive&&!C&&S||b>m&&S,E=!1;const A=Array.isArray(w)?w:[w];let $=A.reduce(s(x),{});j===!1&&($={});const{prevResolvedValues:H={}}=y,O={...H,...$},V=R=>{N=!0,h.has(R)&&(E=!0,h.delete(R)),y.needsAnimating[R]=!0;const T=t.getValue(R);T&&(T.liveStyle=!1)};for(const R in O){const T=$[R],D=H[R];if(p.hasOwnProperty(R))continue;let L=!1;$w(T)&&$w(D)?L=!eI(T,D):L=T!==D,L?T!=null?V(R):h.add(R):T!==void 0&&h.has(R)?V(R):y.protectedKeys[R]=!0}y.prevProp=w,y.prevResolvedValues=$,y.isActive&&(p={...p,...$}),r&&t.blockInitialAnimation&&(N=!1);const B=C&&k;N&&(!B||E)&&f.push(...A.map(R=>{const T={type:x};if(typeof R=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:D}=t,L=lu(D,R);if(D.enteringChildren&&L){const{delayChildren:X}=L.transition||{};T.delay=XO(D.enteringChildren,t,X)}}return{animation:R,options:T}}))}if(h.size){const b={};if(typeof u.initial!="boolean"){const x=lu(t,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(b.transition=x.transition)}h.forEach(x=>{const y=t.getBaseTarget(x),w=t.getValue(x);w&&(w.liveStyle=!0),b[x]=y??null}),f.push({animation:b})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function a(c,u){var f;if(n[c].isActive===u)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(c,u)}),n[c].isActive=u;const d=i(c);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:i,setActive:a,setAnimateFunction:o,getState:()=>n,reset:()=>{n=x_(),r=!0}}}function BY(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!eI(e,t):!1}function Ja(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x_(){return{animate:Ja(!0),whileInView:Ja(),whileHover:Ja(),whileTap:Ja(),whileDrag:Ja(),whileFocus:Ja(),exit:Ja()}}class La{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VY extends La{constructor(e){super(e),e.animationState||(e.animationState=zY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let UY=0;class HY extends La{constructor(){super(...arguments),this.id=UY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const WY={animation:{Feature:VY},exit:{Feature:HY}};function oh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Kh(t){return{point:{x:t.pageX,y:t.pageY}}}const qY=t=>e=>FC(e)&&t(e,Kh(e));function mf(t,e,n,r){return oh(t,e,qY(n),r)}const nI=1e-4,KY=1-nI,GY=1+nI,rI=.01,YY=0-rI,QY=0+rI;function Gn(t){return t.max-t.min}function JY(t,e,n){return Math.abs(t-e)<=n}function b_(t,e,n,r=.5){t.origin=r,t.originPoint=wt(e.min,e.max,t.origin),t.scale=Gn(n)/Gn(e),t.translate=wt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KY&&t.scale<=GY||isNaN(t.scale))&&(t.scale=1),(t.translate>=YY&&t.translate<=QY||isNaN(t.translate))&&(t.translate=0)}function gf(t,e,n,r){b_(t.x,e.x,n.x,r?r.originX:void 0),b_(t.y,e.y,n.y,r?r.originY:void 0)}function w_(t,e,n){t.min=n.min+e.min,t.max=t.min+Gn(e)}function XY(t,e,n){w_(t.x,e.x,n.x),w_(t.y,e.y,n.y)}function S_(t,e,n){t.min=e.min-n.min,t.max=t.min+Gn(e)}function vf(t,e,n){S_(t.x,e.x,n.x),S_(t.y,e.y,n.y)}function Vr(t){return[t("x"),t("y")]}const sI=({current:t})=>t?t.ownerDocument.defaultView:null,C_=(t,e)=>Math.abs(t-e);function ZY(t,e){const n=C_(t.x,e.x),r=C_(t.y,e.y);return Math.sqrt(n**2+r**2)}class oI{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Yx(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=ZY(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:v}=h,{timestamp:b}=vn;this.history.push({...v,timestamp:b});const{onStart:x,onMove:y}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Gx(p,this.transformPagePoint),mt.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Yx(h.type==="pointercancel"?this.lastMoveEventInfo:Gx(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),v&&v(h,x)},!FC(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const a=Kh(e),c=Gx(a,this.transformPagePoint),{point:u}=c,{timestamp:d}=vn;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,Yx(c,this.history)),this.removeListeners=Hh(mf(this.contextWindow,"pointermove",this.handlePointerMove),mf(this.contextWindow,"pointerup",this.handlePointerUp),mf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),oi(this.updatePoint)}}function Gx(t,e){return e?{point:e(t.point)}:t}function j_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yx({point:t},e){return{point:t,delta:j_(t,iI(e)),offset:j_(t,eQ(e)),velocity:tQ(e,.1)}}function eQ(t){return t[0]}function iI(t){return t[t.length-1]}function tQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=iI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>oo(e)));)n--;if(!r)return{x:0,y:0};const o=io(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const i={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function nQ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?wt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?wt(n,t,r.max):Math.min(t,n)),t}function k_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function rQ(t,{top:e,left:n,bottom:r,right:s}){return{x:k_(t.x,n,s),y:k_(t.y,e,r)}}function N_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function sQ(t,e){return{x:N_(t.x,e.x),y:N_(t.y,e.y)}}function oQ(t,e){let n=.5;const r=Gn(t),s=Gn(e);return s>r?n=eh(e.min,e.max-r,t.min):r>s&&(n=eh(t.min,t.max-s,e.min)),ri(0,1,n)}function iQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vw=.35;function aQ(t=Vw){return t===!1?t=0:t===!0&&(t=Vw),{x:E_(t,"left","right"),y:E_(t,"top","bottom")}}function E_(t,e,n){return{min:__(t,e),max:__(t,n)}}function __(t,e){return typeof t=="number"?t:t[e]||0}const lQ=new WeakMap;class cQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Kh(f).point)},i=(f,h)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SG(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vr(x=>{let y=this.getAxisMotionValue(x).get()||0;if(ao.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[x];S&&(y=Gn(S)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&mt.postRender(()=>v(f,h)),zw(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:b}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=uQ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),b&&b(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Vr(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new oI(e,{onSessionStart:o,onStart:i,onMove:a,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:sI(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&mt.postRender(()=>a(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Hp(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=nQ(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&Yc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=rQ(r.layoutBox,e):this.constraints=!1,this.elastic=aQ(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Vr(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=iQ(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Yc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=hY(r,s.root,this.visualElement.getTransformPagePoint());let i=sQ(s.layout.layoutBox,o);if(n){const a=n(uY(i));this.hasMutatedConstraints=!!a,a&&(i=VO(a))}return i}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Vr(d=>{if(!Hp(d,n,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return zw(this.visualElement,e),r.start(YC(e,r,0,n,this.visualElement,!1))}stopAnimation(){Vr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Vr(n=>{const{drag:r}=this.getProps();if(!Hp(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:a}=s.layout.layoutBox[n];o.set(e[n]-wt(i,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Yc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Vr(i=>{const a=this.getAxisMotionValue(i);if(a&&this.constraints!==!1){const c=a.get();s[i]=oQ({min:c,max:c},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Vr(i=>{if(!Hp(i,e,null))return;const a=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];a.set(wt(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;lQ.set(this.visualElement,this);const e=this.visualElement.current,n=mf(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Yc(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),mt.read(r);const i=oh(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vr(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:i=Vw,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function Hp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function uQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class dQ extends La{constructor(e){super(e),this.removeGroupControls=Zr,this.removeListeners=Zr,this.controls=new cQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const T_=t=>(e,n)=>{t&&mt.postRender(()=>t(e,n))};class fQ extends La{constructor(){super(...arguments),this.removePointerDownListener=Zr}onPointerDown(e){this.session=new oI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:T_(e),onStart:T_(n),onMove:r,onEnd:(o,i)=>{delete this.session,s&&mt.postRender(()=>s(o,i))}}}mount(){this.removePointerDownListener=mf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _m={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function M_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Id={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ne.test(t))t=parseFloat(t);else return t;const n=M_(t,e.target.x),r=M_(t,e.target.y);return`${n}% ${r}%`}},hQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ka.parse(t);if(s.length>5)return r;const o=ka.createTransformer(t),i=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+i]/=a,s[1+i]/=c;const u=wt(a,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),o(s)}};let Qx=!1;class pQ extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;FG(mQ),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),Qx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),_m.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,{projection:i}=r;return i&&(i.isPresent=o,Qx=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||mt.postRender(()=>{const a=i.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),LC.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;Qx=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function aI(t){const[e,n]=AG(),r=g.useContext(FR);return l.jsx(pQ,{...t,layoutGroup:r,switchLayoutGroup:g.useContext(zO),isPresent:e,safeToRemove:n})}const mQ={borderRadius:{...Id,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Id,borderTopRightRadius:Id,borderBottomLeftRadius:Id,borderBottomRightRadius:Id,boxShadow:hQ};function gQ(t,e,n){const r=tn(t)?t:Bl(t);return r.start(YC("",r,e,n)),r.animation}const vQ=(t,e)=>t.depth-e.depth;class yQ{constructor(){this.children=[],this.isDirty=!1}add(e){xC(this.children,e),this.isDirty=!0}remove(e){bC(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vQ),this.isDirty=!1,this.children.forEach(e)}}function xQ(t,e){const n=hr.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(oi(r),t(o-e))};return mt.setup(r,!0),()=>oi(r)}const lI=["TopLeft","TopRight","BottomLeft","BottomRight"],bQ=lI.length,A_=t=>typeof t=="string"?parseFloat(t):t,P_=t=>typeof t=="number"||Ne.test(t);function wQ(t,e,n,r,s,o){s?(t.opacity=wt(0,n.opacity??1,SQ(r)),t.opacityExit=wt(e.opacity??1,0,CQ(r))):o&&(t.opacity=wt(e.opacity??1,n.opacity??1,r));for(let i=0;i<bQ;i++){const a=`border${lI[i]}Radius`;let c=D_(e,a),u=D_(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||P_(c)===P_(u)?(t[a]=Math.max(wt(A_(c),A_(u),r),0),(ao.test(u)||ao.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=wt(e.rotate||0,n.rotate||0,r))}function D_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const SQ=cI(0,.5,YR),CQ=cI(.5,.95,Zr);function cI(t,e,n){return r=>r<t?0:r>e?1:n(eh(t,e,r))}function R_(t,e){t.min=e.min,t.max=e.max}function zr(t,e){R_(t.x,e.x),R_(t.y,e.y)}function O_(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function I_(t,e,n,r,s){return t-=e,t=kg(t,1/n,r),s!==void 0&&(t=kg(t,1/s,r)),t}function jQ(t,e=0,n=1,r=.5,s,o=t,i=t){if(ao.test(e)&&(e=parseFloat(e),e=wt(i.min,i.max,e/100)-i.min),typeof e!="number")return;let a=wt(o.min,o.max,r);t===o&&(a-=e),t.min=I_(t.min,e,n,a,s),t.max=I_(t.max,e,n,a,s)}function L_(t,e,[n,r,s],o,i){jQ(t,e[n],e[r],e[s],e.scale,o,i)}const kQ=["x","scaleX","originX"],NQ=["y","scaleY","originY"];function F_(t,e,n,r){L_(t.x,e,kQ,n?n.x:void 0,r?r.x:void 0),L_(t.y,e,NQ,n?n.y:void 0,r?r.y:void 0)}function $_(t){return t.translate===0&&t.scale===1}function uI(t){return $_(t.x)&&$_(t.y)}function z_(t,e){return t.min===e.min&&t.max===e.max}function EQ(t,e){return z_(t.x,e.x)&&z_(t.y,e.y)}function B_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dI(t,e){return B_(t.x,e.x)&&B_(t.y,e.y)}function V_(t){return Gn(t.x)/Gn(t.y)}function U_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class _Q{constructor(){this.members=[]}add(e){xC(this.members,e),e.scheduleRender()}remove(e){if(bC(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function TQ(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,i=(n==null?void 0:n.z)||0;if((s||o||i)&&(r=`translate3d(${s}px, ${o}px, ${i}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(r+=`scale(${a}, ${c})`),r||"none"}const Jx=["","X","Y","Z"],MQ=1e3;let AQ=0;function Xx(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function fI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=QO(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&fI(r)}function hI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},a=e==null?void 0:e()){this.id=AQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RQ),this.nodes.forEach(FQ),this.nodes.forEach($Q),this.nodes.forEach(OQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yQ)}addEventListener(i,a){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new SC),this.eventHandlers.get(i).add(a)}notifyListeners(i,...a){const c=this.eventHandlers.get(i);c&&c.notify(...a)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=_O(i)&&!_G(i),this.instance=i;const{layoutId:a,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;mt.read(()=>{f=window.innerWidth}),t(i,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=xQ(h,250),_m.hasAnimatedSinceResize&&(_m.hasAnimatedSinceResize=!1,this.nodes.forEach(q_)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||HQ,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),x=!this.targetLayout||!dI(this.targetLayout,p),y=!f&&h;if(this.options.layoutRoot||this.resumeFrom||y||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...OC(m,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,y)}else f||q_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),oi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(zQ),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(W_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(LQ),this.nodes.forEach(PQ),this.nodes.forEach(DQ)):this.nodes.forEach(W_),this.clearAllSnapshots();const a=hr.now();vn.delta=ri(0,1e3/60,a-vn.timestamp),vn.timestamp=a,vn.isProcessing=!0,zx.update.process(vn),zx.preRender.process(vn),zx.render.process(vn),vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,LC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IQ),this.sharedNodes.forEach(BQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Gn(this.snapshot.measuredBox.x)&&!Gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(a=!1),a&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!uI(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(a||nl(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return i&&(c=this.removeTransform(c)),WQ(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:i}=this.options;if(!i)return Dt();const a=i.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(qQ))){const{scroll:d}=this.root;d&&(Qc(a.x,d.offset.x),Qc(a.y,d.offset.y))}return a}removeElementScroll(i){var c;const a=Dt();if(zr(a,i),(c=this.scroll)!=null&&c.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&zr(a,i),Qc(a.x,f.offset.x),Qc(a.y,f.offset.y))}return a}applyTransform(i,a=!1){const c=Dt();zr(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Jc(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),nl(d.latestValues)&&Jc(c,d.latestValues)}return nl(this.latestValues)&&Jc(c,this.latestValues),c}removeTransform(i){const a=Dt();zr(a,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!nl(u.latestValues))continue;Iw(u.latestValues)&&u.updateSnapshot();const d=Dt(),f=u.measurePageBox();zr(d,f),F_(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return nl(this.latestValues)&&F_(a,this.latestValues),a}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=vn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),vf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zr(this.target,this.layout.layoutBox),HO(this.target,this.targetDelta)):zr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),vf(this.relativeTargetOrigin,this.target,p.target),zr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Iw(this.parent.latestValues)||UO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const i=this.getLead(),a=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===vn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;zr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;fY(this.layoutCorrected,this.treeScale,this.path,a),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Dt());const{target:p}=i;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(O_(this.prevProjectionDelta.x,this.projectionDelta.x),O_(this.prevProjectionDelta.y,this.projectionDelta.y)),gf(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!U_(this.projectionDelta.x,this.prevProjectionDelta.x)||!U_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xc(),this.projectionDelta=Xc(),this.projectionDeltaWithTransform=Xc()}setAnimationOrigin(i,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Xc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=Dt(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,v=p!==m,b=this.getStack(),x=!b||b.members.length<=1,y=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(UQ));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const j=S/1e3;K_(f.x,i.x,j),K_(f.y,i.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VQ(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&EQ(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Dt()),zr(w,this.relativeTarget)),v&&(this.animationValues=d,wQ(d,u,this.latestValues,j,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var a,c,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(oi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mt.update(()=>{_m.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Bl(0)),this.currentAnimation=gQ(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=i;if(!(!a||!c||!u)){if(this!==i&&this.layout&&u&&pI(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Dt();const f=Gn(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const h=Gn(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+h}zr(a,c),Jc(a,d),gf(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(i,a){this.sharedNodes.has(i)||this.sharedNodes.set(i,new _Q),this.sharedNodes.get(i).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var a;const{layoutId:i}=this.options;return i?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:i}=this.options;return i?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let a=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const u={};c.z&&Xx("z",i,u,this.animationValues);for(let d=0;d<Jx.length;d++)Xx(`rotate${Jx[d]}`,i,u,this.animationValues),Xx(`skew${Jx[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Em(a==null?void 0:a.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Em(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!nl(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=TQ(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:h,y:p}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const m in sh){if(d[m]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:x}=sh[m],y=f==="none"?d[m]:v(d[m],u);if(b){const w=b.length;for(let S=0;S<w;S++)i[b[S]]=y}else x?this.options.visualElement.renderState.vars[m]=y:i[m]=y}this.options.layoutId&&(i.pointerEvents=u===this?Em(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var a;return(a=i.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(H_),this.root.sharedNodes.clear()}}}function PQ(t){t.updateLayout()}function DQ(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,i=e.source!==t.layout.source;o==="size"?Vr(f=>{const h=i?e.measuredBox[f]:e.layoutBox[f],p=Gn(h);h.min=r[f].min,h.max=h.min+p}):pI(o,e.layoutBox,r)&&Vr(f=>{const h=i?e.measuredBox[f]:e.layoutBox[f],p=Gn(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const a=Xc();gf(a,r,e.layoutBox);const c=Xc();i?gf(c,t.applyTransform(s,!0),e.measuredBox):gf(c,r,e.layoutBox);const u=!uI(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=Dt();vf(m,e.layoutBox,h.layoutBox);const v=Dt();vf(v,r,p.layoutBox),dI(m,v)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function RQ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function OQ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function IQ(t){t.clearSnapshot()}function H_(t){t.clearMeasurements()}function W_(t){t.isLayoutDirty=!1}function LQ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function q_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function FQ(t){t.resolveTargetDelta()}function $Q(t){t.calcProjection()}function zQ(t){t.resetSkewAndRotation()}function BQ(t){t.removeLeadSnapshot()}function K_(t,e,n){t.translate=wt(e.translate,0,n),t.scale=wt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function G_(t,e,n,r){t.min=wt(e.min,n.min,r),t.max=wt(e.max,n.max,r)}function VQ(t,e,n,r){G_(t.x,e.x,n.x,r),G_(t.y,e.y,n.y,r)}function UQ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const HQ={duration:.45,ease:[.4,0,.1,1]},Y_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Q_=Y_("applewebkit/")&&!Y_("chrome/")?Math.round:Zr;function J_(t){t.min=Q_(t.min),t.max=Q_(t.max)}function WQ(t){J_(t.x),J_(t.y)}function pI(t,e,n){return t==="position"||t==="preserve-aspect"&&!JY(V_(e),V_(n),.2)}function qQ(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const KQ=hI({attachResizeListener:(t,e)=>oh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zx={current:void 0},mI=hI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zx.current){const t=new KQ({});t.mount(window),t.setOptions({layoutScroll:!0}),Zx.current=t}return Zx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),GQ={pan:{Feature:fQ},drag:{Feature:dQ,ProjectionNode:mI,MeasureLayout:aI}};function X_(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&mt.postRender(()=>o(e,Kh(e)))}class YQ extends La{mount(){const{current:e}=this.node;e&&(this.unmount=CG(e,(n,r)=>(X_(this.node,r,"Start"),s=>X_(this.node,s,"End"))))}unmount(){}}class QQ extends La{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hh(oh(this.node.current,"focus",()=>this.onFocus()),oh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Z_(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&mt.postRender(()=>o(e,Kh(e)))}class JQ extends La{mount(){const{current:e}=this.node;e&&(this.unmount=EG(e,(n,r)=>(Z_(this.node,r,"Start"),(s,{success:o})=>Z_(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Uw=new WeakMap,e0=new WeakMap,XQ=t=>{const e=Uw.get(t.target);e&&e(t)},ZQ=t=>{t.forEach(XQ)};function eJ({root:t,...e}){const n=t||document;e0.has(n)||e0.set(n,{});const r=e0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(ZQ,{root:t,...e})),r[s]}function tJ(t,e,n){const r=eJ(e);return Uw.set(t,n),r.observe(t),()=>{Uw.delete(t),r.unobserve(t)}}const nJ={some:0,all:1};class rJ extends La{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:nJ[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return tJ(this.node.current,i,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sJ(e,n))&&this.startObserver()}unmount(){}}function sJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const oJ={inView:{Feature:rJ},tap:{Feature:JQ},focus:{Feature:QQ},hover:{Feature:YQ}},iJ={layout:{ProjectionNode:mI,MeasureLayout:aI}},aJ={...WY,...oJ,...GQ,...iJ},Hw=cY(aJ,SY);function Ww(t){const e=mC(()=>Bl(t)),{isStatic:n}=g.useContext($C);if(n){const[,r]=g.useState(t);g.useEffect(()=>e.on("change",r),[])}return e}function lJ(t,e){const n=Ww(e()),r=()=>n.set(e());return r(),vC(()=>{const s=()=>mt.preRender(r,!1,!0),o=t.map(i=>i.on("change",s));return()=>{o.forEach(i=>i()),oi(r)}}),n}function cJ(t,...e){const n=t.length;function r(){let s="";for(let o=0;o<n;o++){s+=t[o];const i=e[o];i&&(s+=tn(i)?i.get():i)}return s}return lJ(e.filter(tn),r)}function uJ(t){t.values.forEach(e=>e.stop())}function qw(t,e){[...e].reverse().forEach(r=>{const s=t.getVariant(r);s&&GC(t,s),t.variantChildren&&t.variantChildren.forEach(o=>{qw(o,e)})})}function dJ(t,e){if(Array.isArray(e))return qw(t,e);if(typeof e=="string")return qw(t,[e]);GC(t,e)}function fJ(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const s=[];return t.forEach(o=>{s.push(ZO(o,n,{transitionOverride:r}))}),Promise.all(s)},set(n){return t.forEach(r=>{dJ(r,n)})},stop(){t.forEach(n=>{uJ(n)})},mount(){return()=>{e.stop()}}};return e}function hJ(){const t=mC(fJ);return vC(t.mount,[]),t}const eT=hJ,pJ={some:0,all:1};function mJ(t,e,{root:n,margin:r,amount:s="some"}={}){const o=CO(t),i=new WeakMap,a=u=>{u.forEach(d=>{const f=i.get(d.target);if(d.isIntersecting!==!!f)if(d.isIntersecting){const h=e(d.target,d);typeof h=="function"?i.set(d.target,h):c.unobserve(d.target)}else typeof f=="function"&&(f(d),i.delete(d.target))})},c=new IntersectionObserver(a,{root:n,rootMargin:r,threshold:typeof s=="number"?s:pJ[s]});return o.forEach(u=>c.observe(u)),()=>c.disconnect()}function gJ(t,{root:e,margin:n,amount:r,once:s=!1,initial:o=!1}={}){const[i,a]=g.useState(o);return g.useEffect(()=>{if(!t.current||s&&i)return;const c=()=>(a(!0),s?void 0:()=>a(!1)),u={root:e&&e.current||void 0,margin:n,amount:r};return mJ(t.current,c,u)},[e,t,n,s,r]),i}/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:i,...a},c)=>g.createElement("svg",{ref:c,...yJ,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gI("lucide",s),...a},[...i.map(([u,d])=>g.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(t,e)=>{const n=g.forwardRef(({className:r,...s},o)=>g.createElement(xJ,{ref:o,iconNode:e,className:gI(`lucide-${vJ(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=be("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=be("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=be("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=be("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=be("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=be("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=be("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=be("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=be("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=be("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EJ=be("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=be("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=be("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=be("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=be("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=be("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=be("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=be("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=be("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=be("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=be("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=be("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jI=g.memo(g.forwardRef(function({className:e,type:n,...r},s){const[i,a]=g.useState(!1),c=Ww(0),u=Ww(0);function d({currentTarget:f,clientX:h,clientY:p}){const{left:m,top:v}=f.getBoundingClientRect();c.set(h-m),u.set(p-v)}return l.jsx(Hw.div,{style:{background:cJ`
        radial-gradient(
          ${i?"100px":"0px"} circle at ${c}px ${u}px,
          #00b336,
          transparent 80%
        )
      `},onMouseMove:d,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),className:"group/input rounded-lg p-[2px] transition duration-300",children:l.jsx("input",{type:n,className:ue("shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600",e),ref:s,...r})})}));jI.displayName="Input";const bc=g.memo(function({children:e,width:n="fit-content",boxColor:r,duration:s,overflow:o="hidden",position:i="relative",className:a}){const c=eT(),u=eT(),d=g.useRef(null),f=gJ(d,{once:!0});return g.useEffect(()=>{f?(u.start("visible"),c.start("visible")):(u.start("hidden"),c.start("hidden"))},[f,c,u]),l.jsxs("section",{ref:d,style:{position:i,width:n,overflow:o},className:a,children:[l.jsx(Hw.div,{variants:{hidden:{opacity:0,y:75},visible:{opacity:1,y:0}},initial:"hidden",animate:c,transition:{duration:s??.5,delay:.25},children:e}),l.jsx(Hw.div,{variants:{hidden:{left:0},visible:{left:"100%"}},initial:"hidden",animate:u,transition:{duration:s??.5,ease:"easeIn"},style:{position:"absolute",top:4,bottom:4,left:0,right:0,zIndex:20,background:r??"#00b336",borderRadius:4}})]})}),RJ=g.memo(function({mainCircleSize:e=210,mainCircleOpacity:n=.24,numCircles:r=11,className:s=""}){return l.jsx("section",{className:`max-w-[50%] absolute inset-0 flex items-center justify-center
        dark:bg-white/5 bg-neutral-50
        [mask-image:linear-gradient(to_bottom,black,transparent)]
        dark:[mask-image:linear-gradient(to_bottom,white,transparent)] ${s}`,children:Array.from({length:r},(o,i)=>{const a=e+i*70,c=n-i*.03,u=`${i*.06}s`,d=i===r-1?"dashed":"solid",f=5+i*5;return l.jsx("span",{className:"absolute animate-ripple rounded-full bg-foreground/15 border",style:{width:`${a}px`,height:`${a}px`,opacity:c,animationDelay:u,borderStyle:d,borderWidth:"1px",borderColor:`var(--foreground) dark:var(--background) / ${f/100})`,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},i)})})}),OJ=g.memo(function({className:e,children:n,reverse:r=!1,duration:s=20,delay:o=10,radius:i=50,path:a=!0}){return l.jsxs(l.Fragment,{children:[a&&l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"pointer-events-none absolute inset-0 size-full",children:l.jsx("circle",{className:"stroke-black/10 stroke-1 dark:stroke-white/10",cx:"50%",cy:"50%",r:i,fill:"none"})}),l.jsx("section",{style:{"--duration":s,"--radius":i,"--delay":-o},className:ue("absolute flex size-full transform-gpu animate-orbit items-center justify-center rounded-full border bg-black/10 [animation-delay:calc(var(--delay)*1000ms)] dark:bg-white/10",{"[animation-direction:reverse]":r},e),children:n})]})}),IJ=g.memo(function({iconsArray:e,text:n="DMM SERVICES"}){return l.jsxs("section",{className:"relative flex h-full w-full flex-col items-center justify-center overflow-hidden rounded-lg",children:[l.jsx("span",{className:"pointer-events-none whitespace-pre-wrap bg-gradient-to-b from-[#00b336] to-[#00b336]/80 bg-clip-text text-center text-4xl font-semibold leading-none text-transparent dark:from-[#00b336] dark:to-[#00b336]/80 drop-shadow-lg",children:n}),e.map((r,s)=>l.jsx(OJ,{className:r.className,duration:r.duration,delay:r.delay,radius:r.radius,path:r.path,reverse:r.reverse,children:r.component()},s))]})}),LJ=g.memo(function({header:e,subHeader:n,fields:r,submitButton:s,textVariantButton:o,errorField:i,fieldPerRow:a=1,onSubmit:c,googleLogin:u,goTo:d}){const[f,h]=g.useState(!1),[p,m]=g.useState({}),v=()=>h(!f),b=y=>{const w={};return r.forEach(S=>{var C;const j=(C=y.target[S.label])==null?void 0:C.value;S.required&&!j&&(w[S.label]=`${S.label} is required`),S.type==="email"&&j&&!/\S+@\S+\.\S+/.test(j)&&(w[S.label]="Invalid email address"),S.type==="password"&&j&&j.length<6&&(w[S.label]="Password must be at least 6 characters long")}),w},x=y=>{y.preventDefault();const w=b(y);Object.keys(w).length===0?(c(y),console.log("Form submitted")):m(w)};return l.jsxs("section",{className:"max-md:w-full flex flex-col gap-4 w-96 mx-auto",children:[l.jsx(bc,{boxColor:"var(--skeleton)",duration:.3,children:l.jsx("h2",{className:"font-bold text-3xl text-neutral-800 dark:text-neutral-200",children:e})}),n&&l.jsx(bc,{boxColor:"var(--skeleton)",duration:.3,className:"pb-2",children:l.jsx("p",{className:"text-neutral-600 text-sm max-w-sm dark:text-neutral-300",children:n})}),l.jsxs("form",{onSubmit:x,children:[l.jsx("section",{className:`grid grid-cols-1 md:grid-cols-${a} mb-4`,children:r.map(y=>l.jsxs("section",{className:"flex flex-col gap-2",children:[l.jsx(bc,{boxColor:"var(--skeleton)",duration:.3,children:l.jsxs(zJ,{htmlFor:y.label,children:[y.label," ",l.jsx("span",{className:"text-red-500",children:"*"})]})}),l.jsxs(bc,{width:"100%",boxColor:"var(--skeleton)",duration:.3,className:"flex flex-col space-y-2 w-full",children:[l.jsxs("section",{className:"relative",children:[l.jsx(jI,{type:y.type==="password"?f?"text":"password":y.type,id:y.label,placeholder:y.placeholder,onChange:y.onChange}),y.type==="password"&&l.jsx("button",{type:"button",onClick:v,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5",children:f?l.jsx(Vl,{className:"h-5 w-5"}):l.jsx(fy,{className:"h-5 w-5"})})]}),l.jsx("section",{className:"h-4",children:p[y.label]&&l.jsx("p",{className:"text-red-500 text-xs",children:p[y.label]})})]})]},y.label))}),l.jsx(bc,{width:"100%",boxColor:"var(--skeleton)",duration:.3,children:i&&l.jsx("p",{className:"text-red-500 text-sm mb-4",children:i})}),l.jsx(bc,{width:"100%",boxColor:"var(--skeleton)",duration:.3,overflow:"visible",children:l.jsxs("button",{className:`bg-[#00b336] hover:bg-white hover:text-[#00b336] hover:border-[#00b336] hover:border-2 relative group/btn\r
            block w-full text-white rounded-md h-10 font-medium shadow-[0px_1px_0px_0px_#ffffff40_inset,0px_-1px_0px_0px_#ffffff40_inset] \r
              dark:shadow-[0px_1px_0px_0px_var(--zinc-800)_inset,0px_-1px_0px_0px_var(--zinc-800)_inset] outline-hidden hover:cursor-pointer transition-all duration-300`,type:"submit",children:[s," ",l.jsx(FJ,{})]})})]})]})}),FJ=()=>l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"group-hover/btn:opacity-100 block transition duration-500 opacity-0 absolute h-px w-full -bottom-px inset-x-0 bg-gradient-to-r from-transparent via-[#00b336] to-transparent"}),l.jsx("span",{className:"group-hover/btn:opacity-100 blur-sm block transition duration-500 opacity-0 absolute h-px w-1/2 mx-auto -bottom-px inset-x-10 bg-gradient-to-r from-transparent via-[#00b336] to-transparent"})]}),$J=g.memo(function({formFields:e,goTo:n,handleSubmit:r}){return l.jsx("div",{className:"flex max-lg:justify-center w-full md:w-auto",children:l.jsx("div",{className:"w-full lg:w-1/2 h-[100dvh] flex flex-col justify-center items-center max-lg:px-[10%]",children:l.jsx(LJ,{...e,fieldPerRow:1,onSubmit:r,goTo:n})})})}),zJ=g.memo(function({className:e,...n}){return l.jsx("label",{className:ue("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...n})}),BJ=({onSuccess:t})=>{const[e,n]=g.useState({email:"",password:""}),[r,s]=g.useState(!1),o=async c=>{var u;if(c.preventDefault(),!r){s(!0),console.log("LoginForm: Tentando fazer login...");try{const{data:d,error:f}=await re.auth.signInWithPassword({email:e.email,password:e.password});if(f){console.error("LoginForm: Erro de login:",f),q.error("Email ou senha invlidos");return}if(d.user){const{data:h}=await re.from("perfis").select("empresa_id, empresas(status)").eq("email",e.email).single();if(((u=h==null?void 0:h.empresas)==null?void 0:u.status)==="encerrado"){await re.auth.signOut(),q.error("Sua conta est bloqueada. Entre em contato com a equipe da DMM Services.");return}console.log("LoginForm: Login bem-sucedido"),q.success("Login realizado com sucesso!"),t()}}catch(d){console.error("LoginForm: Erro geral:",d),q.error("Erro interno. Tente novamente.")}finally{s(!1)}}},i={header:"Seja Bem-Vindo!!!",subHeader:"Acesse sua plataforma DMM SERVICES",fields:[{label:"Email",required:!0,type:"email",placeholder:"seu@email.com",value:e.email,onChange:c=>{n(u=>({...u,email:c.target.value}))}},{label:"Password",required:!0,type:"password",placeholder:"",value:e.password,onChange:c=>{n(u=>({...u,password:c.target.value}))}}],submitButton:r?"Entrando...":"Entrar",textVariantButton:"Esqueceu a senha?"},a=()=>{q.info("Funcionalidade de recuperao de senha ser implementada em breve")};return l.jsx($J,{formFields:i,goTo:a,handleSubmit:o})},VJ=[{component:()=>l.jsx("img",{src:"/lovable-uploads/2b710fe5-184f-41c2-af91-c2aae8cd9f66.png",alt:"Adobe Creative Cloud",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",duration:20,delay:20,radius:100,path:!1,reverse:!1},{component:()=>l.jsx("img",{src:"/lovable-uploads/d46ee4ba-a649-4044-b6df-695ad1ba8cec.png",alt:"Network",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",duration:20,delay:10,radius:100,path:!1,reverse:!1},{component:()=>l.jsx("img",{src:"/lovable-uploads/b9d7070c-b454-4433-bf80-326b914910b2.png",alt:"Klarna",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",radius:210,duration:20,path:!1,reverse:!1},{component:()=>l.jsx("img",{src:"/lovable-uploads/b594ae64-5ce7-481f-875c-1acdc07485d4.png",alt:"Meta",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",radius:210,duration:20,delay:20,path:!1,reverse:!1},{component:()=>l.jsx("img",{src:"/lovable-uploads/3fdc98cd-5d80-41c0-b7f6-57ee14160430.png",alt:"Google Ads",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",duration:20,delay:20,radius:150,path:!1,reverse:!0},{component:()=>l.jsx("img",{src:"/lovable-uploads/ea20a149-a430-41ae-a7a7-621239a434c7.png",alt:"Google",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",duration:20,delay:10,radius:150,path:!1,reverse:!0},{component:()=>l.jsx("img",{src:"/lovable-uploads/44576eb4-59d2-4185-a9e2-cf5f9f9a0c33.png",alt:"WhatsApp",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",radius:270,duration:20,path:!1,reverse:!0},{component:()=>l.jsx("img",{src:"/lovable-uploads/044a0cb8-31b6-4757-bd43-88f92afa476f.png",alt:"Instagram",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",radius:270,duration:20,delay:60,path:!1,reverse:!0},{component:()=>l.jsx("img",{src:"/lovable-uploads/31a99fbe-acdd-4d4f-ba35-6981a1bd004b.png",alt:"Automation",className:"w-10 h-10"}),className:"size-[40px] border-none bg-transparent",radius:320,duration:20,delay:20,path:!1,reverse:!1}],UJ=()=>{const t=ud(),{user:e,loading:n,perfil:r}=jt();g.useEffect(()=>{if(!n){if(e&&r)console.log("Login: Redirecionando usurio autenticado...",r.funcao),r.funcao==="dmm_admin"||r.funcao==="dmm_membro"?t("/dashboard-team",{replace:!0}):t("/dashboard-client",{replace:!0});else if(e&&!r){const o=setTimeout(()=>{console.log("Login: Usurio sem perfil aps timeout, redirecionando para dashboard client"),t("/dashboard-client",{replace:!0})},2e3);return()=>clearTimeout(o)}}},[e,n,r,t]);const s=()=>{console.log("Login: Login realizado com sucesso")};return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):l.jsx(l.Fragment,{children:l.jsxs("section",{className:"flex max-lg:justify-center min-h-screen bg-gradient-to-br from-background via-muted/30 to-primary/5",children:[l.jsxs("span",{className:"flex flex-col justify-center w-1/2 max-lg:hidden",children:[l.jsx(RJ,{mainCircleSize:100}),l.jsx(IJ,{iconsArray:VJ,text:"DMM"})]}),l.jsxs("span",{className:"w-1/2 h-[100dvh] flex flex-col justify-center items-center max-lg:w-full max-lg:px-[10%]",children:[l.jsx(BJ,{onSuccess:s}),l.jsx("div",{className:"text-center mt-8 text-sm text-muted-foreground",children:l.jsx("p",{children:" 2025 DMM SERVICES. Todos os direitos reservados."})})]})]})})},lT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,cT=OD,JC=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return cT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const h=lT(d)||lT(f);return s[u][h]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...p}=d;return Object.entries(p).every(m=>{let[v,b]=m;return Array.isArray(b)?b.includes({...o,...a}[v]):{...o,...a}[v]===b})?[...u,f,h]:u},[]);return cT(t,i,c,n==null?void 0:n.class,n==null?void 0:n.className)},ah=JC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),G=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const i=r?JV:"button";return l.jsx(i,{className:ue(ah({variant:e,size:n,className:t})),ref:o,...s})});G.displayName="Button";const wc=({title:t,subtitle:e})=>l.jsxs("div",{className:"dmm-card",children:[l.jsx("h3",{className:"text-lg font-semibold mb-1",children:t}),l.jsx("p",{className:"text-sm text-muted-foreground",children:e})]}),HJ=()=>l.jsxs("main",{className:"min-h-screen bg-gradient-to-br from-background via-muted/30 to-primary/5",children:[l.jsxs("section",{className:"container py-20 flex flex-col items-center text-center gap-6",children:[l.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs text-muted-foreground bg-card",children:[l.jsx("span",{className:"size-2 rounded-full bg-primary"}),"Portal DMM  verso remix"]}),l.jsx("h1",{className:"text-4xl md:text-5xl font-bold tracking-tight",children:"Central de produtividade e colaborao"}),l.jsx("p",{className:"max-w-2xl text-muted-foreground",children:"Organize tarefas, checklists, acessos e finanas da sua operao em uma nica plataforma com experincia moderna e responsiva."}),l.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[l.jsx(uw,{to:"/login",children:l.jsx(G,{className:"dmm-btn-primary",children:"Entrar"})}),l.jsx("a",{href:"#recursos",children:l.jsx(G,{variant:"secondary",className:"dmm-btn-secondary",children:"Ver recursos"})})]})]}),l.jsx("section",{className:"container py-8",children:l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-6 items-center opacity-70",children:[l.jsx("img",{src:"/logos/dmm-services.png",alt:"DMM Services",className:"h-8 object-contain mx-auto"}),l.jsx("img",{src:"/logos/embelleze.png",alt:"Embelleze",className:"h-8 object-contain mx-auto"}),l.jsx("img",{src:"/logos/grupo-arseg.png",alt:"Grupo Arseg",className:"h-8 object-contain mx-auto"}),l.jsx("img",{src:"/logos/knn-idiomas.png",alt:"KNN Idiomas",className:"h-8 object-contain mx-auto"}),l.jsx("img",{src:"/logos/dolb-clean.png",alt:"DOLB Clean",className:"h-8 object-contain mx-auto"}),l.jsx("img",{src:"/logos/limpmax.png",alt:"Limpmax",className:"h-8 object-contain mx-auto"})]})}),l.jsx("section",{id:"recursos",className:"container py-16",children:l.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[l.jsx(wc,{title:"Tarefas inteligentes",subtitle:"Crie, atribua e acompanhe tarefas com comentrios e subtarefas."}),l.jsx(wc,{title:"Checklists colaborativos",subtitle:"Padronize processos com checklists por equipe ou cliente."}),l.jsx(wc,{title:"Acessos e credenciais",subtitle:"Armazene com segurana acessos, gere senhas e TOTP."}),l.jsx(wc,{title:"Financeiro simplificado",subtitle:"Controle despesas e pagamentos de forma integrada."}),l.jsx(wc,{title:"Relatrios e dashboards",subtitle:"Visualize progresso, tendncias e gargalos em tempo real."}),l.jsx(wc,{title:"Segurana e permisses",subtitle:"Acesso por perfis, rotas protegidas e autenticao supabase."})]})}),l.jsx("section",{className:"container py-16 text-center",children:l.jsxs("div",{className:"dmm-card bg-primary text-primary-foreground",children:[l.jsx("h2",{className:"text-2xl font-semibold",children:"Pronto para acelerar sua operao?"}),l.jsx("p",{className:"opacity-90 mt-1",children:"Acesse com seu usurio para comear agora mesmo."}),l.jsx("div",{className:"mt-4",children:l.jsx(uw,{to:"/login",children:l.jsx(G,{variant:"secondary",className:"bg-white text-foreground hover:bg-white/90",children:"Entrar no Portal"})})})]})}),l.jsxs("footer",{className:"py-10 text-center text-sm text-muted-foreground",children:[" ",new Date().getFullYear()," DMM SERVICES. Todos os direitos reservados."]})]}),Me=g.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Me.displayName="Card";const Ge=g.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("flex flex-col space-y-1.5 p-6",t),...e}));Ge.displayName="CardHeader";const nt=g.forwardRef(({className:t,...e},n)=>l.jsx("h3",{ref:n,className:ue("text-2xl font-semibold leading-none tracking-tight",t),...e}));nt.displayName="CardTitle";const _i=g.forwardRef(({className:t,...e},n)=>l.jsx("p",{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));_i.displayName="CardDescription";const Ae=g.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("p-6 pt-0",t),...e}));Ae.displayName="CardContent";const WJ=g.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:ue("flex items-center p-6 pt-0",t),...e}));WJ.displayName="CardFooter";const qJ=JC("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Be({className:t,variant:e,...n}){return l.jsx("div",{className:ue(qJ({variant:e}),t),...n})}const uT=({size:t="md",showText:e=!0,textColor:n})=>{const{isDark:r}=LR(),s={sm:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12"},o={sm:"text-lg",md:"text-xl",lg:"text-2xl"},i=n||(r?"white":"black");return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`${s[t]} rounded-lg overflow-hidden flex items-center justify-center`,children:l.jsx("img",{src:"/lovable-uploads/logo-dmm-new.png",alt:"DMM Services",className:"w-full h-full object-contain p-1"})}),e&&l.jsx("div",{children:l.jsx("h1",{className:`${o[t]} font-bold leading-tight`,style:{color:i},children:"DMM SERVICES"})})]})},cn=()=>{const{data:t=[],isLoading:e}=jn({queryKey:["empresas"],queryFn:async()=>{try{const{data:n,error:r}=await re.from("empresas").select("*").eq("status","ativo").order("nome");if(r)throw console.error("Erro ao buscar empresas:",r),r;return n}catch(n){return console.error("Erro na query de empresas:",n),[]}}});return{empresas:t,isLoading:e}},Rn=({userType:t,onLogout:e})=>{var b,x,y;const[n,r]=g.useState(!1),[s,o]=g.useState(!1);nc();const{isDark:i,toggleTheme:a}=LR(),{signOut:c,perfil:u}=jt(),{empresas:d}=cn(),p=t==="team"?[{title:"Dashboard",icon:rT,path:"/dashboard-team"},{title:"Tarefas",icon:Jw,path:"/tasks-team"},{title:"Checklist",icon:Tg,path:"/checklist-team"},{title:"Acessos",icon:Qw,path:"/access-team"},{title:"Clientes",icon:Na,path:"/clients-team"},{title:"Documentos",icon:cu,isPlaceholder:!0},{title:"Financeiro",icon:Gw,path:"/financial-team"},{title:"Relatrios",icon:Kw,isPlaceholder:!0}]:[{title:"Dashboard",icon:rT,path:"/dashboard-client"},{title:"Tarefas",icon:Jw,path:"/tasks-client"},{title:"Checklist",icon:Tg,path:"/checklist-client"},{title:"Meus Acessos",icon:Qw,path:"/access-client"},{title:"Documentos",icon:cu,isPlaceholder:!0},{title:"Financeiro",icon:Gw,path:"/financial-client"},{title:"Relatrios",icon:Kw,isPlaceholder:!0}],m=async()=>{try{await c(),e&&e()}catch(w){console.error("Erro ao fazer logout:",w)}},v=({item:w})=>{const S=w.icon;return w.isPlaceholder?l.jsxs("div",{className:"flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors cursor-not-allowed opacity-60 text-muted-foreground hover:bg-muted/50",children:[l.jsx(S,{className:"h-4 w-4 mr-3 flex-shrink-0"}),!n&&l.jsx("span",{className:"truncate",children:w.title})]}):l.jsxs(h9,{to:w.path||"#",className:({isActive:j})=>`flex items-center rounded-lg px-3 py-2 text-sm font-medium transition-colors ${j?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"}`,end:!0,children:[l.jsx(S,{className:"h-4 w-4 mr-3 flex-shrink-0"}),!n&&l.jsx("span",{className:"truncate",children:w.title})]})};return l.jsxs("div",{className:`bg-sidebar border-r border-sidebar-border transition-all duration-300 ${n?"w-16":"w-64"} flex flex-col h-screen`,children:[l.jsx("div",{className:"p-4 border-b border-sidebar-border",children:l.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[!n&&l.jsxs(l.Fragment,{children:[t==="team"&&l.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-white/10 flex items-center justify-center",children:l.jsx(uT,{size:"md",showText:!1})}),l.jsx("div",{className:"text-center",children:l.jsx("span",{className:"text-sm font-semibold text-foreground block",children:t==="client"?((b=d.find(w=>w.id===(u==null?void 0:u.empresa_id)))==null?void 0:b.nome)||"Cliente":"DMM Services"})}),l.jsx("div",{className:"text-xs text-muted-foreground",children:t==="team"?"Painel da Equipe":"Painel do Cliente"})]}),n&&l.jsx("div",{className:"w-8 h-8 rounded-lg overflow-hidden bg-white/10 flex items-center justify-center",children:t==="team"?l.jsx(uT,{size:"sm",showText:!1}):l.jsx("div",{className:"w-full h-full bg-primary/20 rounded flex items-center justify-center",children:l.jsx("span",{className:"text-xs font-bold text-primary",children:((y=(x=d.find(w=>w.id===(u==null?void 0:u.empresa_id)))==null?void 0:x.nome)==null?void 0:y.charAt(0))||"C"})})})]})}),l.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:p.map((w,S)=>l.jsx(v,{item:w},S))}),l.jsx("div",{className:"p-4 border-t border-sidebar-border space-y-2",children:n?l.jsxs(l.Fragment,{children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"w-full justify-center text-muted-foreground hover:text-foreground",children:l.jsx(nT,{className:"h-4 w-4 rotate-180"})}),l.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>o(!s),className:"w-full justify-center text-muted-foreground hover:text-foreground relative",children:[l.jsx(tT,{className:"h-4 w-4"}),l.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]}),l.jsx(G,{variant:"ghost",size:"sm",onClick:a,className:"w-full justify-center text-muted-foreground hover:text-foreground",children:i?l.jsx(iT,{className:"h-4 w-4"}):l.jsx(oT,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:m,className:"w-full justify-center text-muted-foreground hover:text-white hover:bg-red-500 dark:hover:text-white dark:hover:bg-red-600",children:l.jsx(sT,{className:"h-4 w-4"})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[l.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>o(!s),className:"text-muted-foreground hover:text-foreground relative",children:[l.jsx(tT,{className:"h-4 w-4"}),l.jsx("span",{className:"absolute -top-1 -right-1 h-2 w-2 bg-red-500 rounded-full"})]}),l.jsx(G,{variant:"ghost",size:"sm",onClick:a,className:"text-muted-foreground hover:text-foreground",children:i?l.jsx(iT,{className:"h-4 w-4"}):l.jsx(oT,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>r(!0),className:"text-muted-foreground hover:text-foreground",children:l.jsx(nT,{className:"h-4 w-4"})})]}),l.jsxs(G,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:bg-muted hover:text-foreground",children:[l.jsx(AJ,{className:"h-4 w-4 mr-3"}),"Configuraes"]}),l.jsxs(G,{variant:"ghost",onClick:m,className:"w-full justify-start text-muted-foreground hover:text-white hover:bg-red-500 dark:hover:text-white dark:hover:bg-red-600",children:[l.jsx(sT,{className:"h-4 w-4 mr-3"}),"Sair"]})]})})]})},oc=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["checklists"],queryFn:async()=>{try{const{data:a,error:c}=await re.from("itens_checklist").select(`
            *,
            criado_por_perfil:perfis!itens_checklist_criado_por_fkey(nome_completo, url_avatar),
            concluido_por_perfil:perfis!itens_checklist_concluido_por_fkey(nome_completo, url_avatar),
            empresa:empresas!inner(status)
          `).eq("empresa.status","ativo").order("criado_em",{ascending:!1});if(c)throw console.error("Erro ao buscar checklists:",c),c;return a}catch(a){return console.error("Erro na query de checklists:",a),[]}}}),r=Qe({mutationFn:async a=>{const{data:c,error:u}=await re.from("itens_checklist").insert(a).select().single();if(u)throw console.error("Erro ao criar item checklist:",u),u;return c},onSuccess:()=>{t.invalidateQueries({queryKey:["checklists"]})}}),s=Qe({mutationFn:async({id:a,...c})=>{console.log("Atualizando item:",a,"com dados:",c);const{data:u,error:d}=await re.from("itens_checklist").update(c).eq("id",a).select().single();if(d)throw console.error("Erro ao atualizar item checklist:",d),d;return console.log("Item atualizado com sucesso:",u),u},onSuccess:()=>{t.invalidateQueries({queryKey:["checklists"]})}}),o=Qe({mutationFn:async a=>{const{error:c}=await re.from("itens_checklist").delete().eq("id",a);if(c)throw console.error("Erro ao deletar item checklist:",c),c},onSuccess:()=>{t.invalidateQueries({queryKey:["checklists"]})}}),i=async(a,c)=>{var u;try{const d={concluido:c,concluido_em:c?new Date().toISOString():null,concluido_por:c&&((u=(await re.auth.getUser()).data.user)==null?void 0:u.id)||null};return s.mutateAsync({id:a,...d})}catch(d){throw console.error("Erro ao alterar status do item:",d),d}};return{checklists:e,isLoading:n,criarItem:r.mutateAsync,atualizarItem:s.mutateAsync,deletarItem:o.mutateAsync,toggleConcluido:i,isCreating:r.isPending,isUpdating:s.isPending,isDeleting:o.isPending}},jo=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["tarefas"],queryFn:async()=>{const{data:f,error:h}=await re.from("tarefas").select(`
          *,
          criado_por_perfil:perfis!tarefas_criado_por_fkey(nome_completo, url_avatar),
          empresa:empresas!inner(status)
        `).eq("tipo","tarefa").eq("empresa.status","ativo").order("criado_em",{ascending:!1});if(h)throw console.error("Erro ao buscar tarefas:",h),h;return f}}),{mutateAsync:r,isPending:s}=Qe({mutationFn:async f=>{const{data:h,error:p}=await re.from("tarefas").insert(f).select().single();if(p)throw console.error("Erro ao criar tarefa:",p),p;return h},onSuccess:()=>{t.invalidateQueries({queryKey:["tarefas"]})}}),{mutateAsync:o,isPending:i}=Qe({mutationFn:async f=>{const{id:h,...p}=f,{data:m,error:v}=await re.from("tarefas").update(p).eq("id",h).select().single();if(v)throw console.error("Erro ao atualizar tarefa:",v),v;return m},onSuccess:()=>{t.invalidateQueries({queryKey:["tarefas"]})}}),{mutateAsync:a,isPending:c}=Qe({mutationFn:async f=>{const{error:h}=await re.from("tarefas").delete().eq("id",f);if(h)throw console.error("Erro ao excluir tarefa:",h),h},onSuccess:()=>{t.invalidateQueries({queryKey:["tarefas"]})}}),{mutateAsync:u,isPending:d}=Qe({mutationFn:async({subtarefasIds:f})=>{const h=f.map((m,v)=>re.from("tarefas").update({ordem_subtarefa:v}).eq("id",m)),p=await Promise.all(h);for(const m of p)if(m.error)throw console.error("Erro ao reordenar subtarefas:",m.error),m.error},onSuccess:()=>{t.invalidateQueries({queryKey:["tarefas"]})}});return{tarefas:e,isLoading:n,criarTarefa:r,atualizarTarefa:o,excluirTarefa:a,reordenarSubtarefas:u,isCreating:s,isUpdating:i,isDeleting:c,isReordering:d}},On=()=>{const{data:t=[],isLoading:e}=jn({queryKey:["perfis"],queryFn:async()=>{const{data:s,error:o}=await re.from("perfis").select("*").order("nome_completo");if(o)throw console.error("Erro ao buscar perfis:",o),o;return s}}),n=t.filter(s=>s.funcao==="dmm_admin"||s.funcao==="dmm_membro");return{perfis:t,perfisEquipe:n,getNomeUsuario:s=>{if(!s)return"No atribudo";const o=t.find(i=>i.id===s);return(o==null?void 0:o.nome_completo)||"Usurio no encontrado"},isLoading:e}},KJ=()=>{const{perfil:t}=jt(),{checklists:e,isLoading:n}=oc(),{tarefas:r,isLoading:s}=jo(),{perfisEquipe:o}=On(),{empresas:i}=cn(),[a,c]=g.useState([]),[u,d]=g.useState([]);g.useEffect(()=>{if(t!=null&&t.empresa_id&&e){const y=e.filter(w=>w.empresa_id===t.empresa_id);c(y)}},[t==null?void 0:t.empresa_id,e]),g.useEffect(()=>{if(t!=null&&t.empresa_id&&r){const y=r.filter(w=>w.empresa_id===t.empresa_id);d(y)}},[t==null?void 0:t.empresa_id,r]);const f=g.useMemo(()=>{const y=a.filter(S=>S.tipo==="pendencia_dmm"),w=a.filter(S=>S.tipo==="pendencia_cliente");return{totalDMM:y.length,pendentesDMM:y.filter(S=>!S.concluido).length,concluidasDMM:y.filter(S=>S.concluido).length,altaPrioridadeDMM:y.filter(S=>S.prioridade==="alta"&&!S.concluido).length,totalCliente:w.length,pendentesCliente:w.filter(S=>!S.concluido).length,concluidasCliente:w.filter(S=>S.concluido).length,altaPrioridadeCliente:w.filter(S=>S.prioridade==="alta"&&!S.concluido).length}},[a]),h=g.useMemo(()=>({total:u.length,pendentes:u.filter(y=>!["concluido","rejeitado"].includes(y.status)).length,concluidas:u.filter(y=>y.status==="concluido").length,emAndamento:u.filter(y=>y.status==="em_andamento").length,atrasadas:u.filter(y=>{if(!y.data_entrega)return!1;const w=new Date;return new Date(y.data_entrega)<w&&!["concluido","rejeitado"].includes(y.status)}).length}),[u]),p=y=>{switch(y){case"alta":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"media":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300";case"baixa":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},m=y=>{if(!y)return"";const w=new Date,j=new Date(y).getTime()-w.getTime(),C=Math.ceil(j/(1e3*60*60*24));return C<=0?"text-red-600 font-bold dark:text-red-400":C<=2?"text-yellow-600 font-bold dark:text-yellow-400":"text-green-600 font-bold dark:text-green-400"},v=y=>{if(!y)return"No atribudo";if(o.find(j=>j.id===y&&(j.funcao==="dmm_admin"||j.funcao==="dmm_membro")))return"DMM Services";const S=o.find(j=>j.id===y);return(S==null?void 0:S.nome_completo)||"DMM Services"},b=y=>{if(!y)return"Sem empresa";const w=i.find(S=>S.id===y);return(w==null?void 0:w.nome)||"Empresa no encontrada"},x=({checklist:y})=>l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"font-medium text-foreground",children:b(y.empresa_id)})]}),l.jsx("h4",{className:"font-semibold text-foreground mb-1 line-clamp-2 break-words",children:y.titulo}),y.descricao&&l.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2 break-words",children:y.descricao}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(sc,{className:"h-3 w-3"}),l.jsx("span",{children:v(y.criado_por)})]}),y.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsx("span",{className:`text-sm font-bold ${m(y.data_entrega)}`,children:l.jsxs("strong",{children:["Entrega: ",new Date(y.data_entrega).toLocaleDateString("pt-BR")]})})]})]}),y.prioridade&&l.jsx(Be,{className:p(y.prioridade),children:y.prioridade==="alta"?"Alta":y.prioridade==="media"?"Mdia":"Baixa"})]})})});return n||s?l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Viso geral das suas checklists e tarefas"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:f.pendentesDMM}),l.jsx("p",{className:"text-muted-foreground",children:"Pendncias DMM"})]}),l.jsx(jJ,{className:"h-8 w-8 text-blue-500"})]})})}),l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:f.pendentesCliente}),l.jsx("p",{className:"text-muted-foreground",children:"Minhas Pendncias"})]}),l.jsx(cu,{className:"h-8 w-8 text-green-500"})]})})}),l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:h.pendentes}),l.jsx("p",{className:"text-muted-foreground",children:"Tarefas Pendentes"})]}),l.jsx(Eg,{className:"h-8 w-8 text-orange-500"})]})})}),l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:h.concluidas}),l.jsx("p",{className:"text-muted-foreground",children:"Tarefas Concludas"})]}),l.jsx(SJ,{className:"h-8 w-8 text-green-600"})]})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:f.altaPrioridadeDMM+f.altaPrioridadeCliente}),l.jsx("p",{className:"text-muted-foreground",children:"Alta Prioridade"})]}),l.jsx(aT,{className:"h-8 w-8 text-red-500"})]})})}),l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:h.emAndamento}),l.jsx("p",{className:"text-muted-foreground",children:"Em Andamento"})]}),l.jsx(SI,{className:"h-8 w-8 text-purple-500"})]})})}),l.jsx(Me,{className:"dark:bg-card dark:border-border",children:l.jsx(Ae,{className:"p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:h.atrasadas}),l.jsx("p",{className:"text-muted-foreground",children:"Tarefas Atrasadas"})]}),l.jsx(aT,{className:"h-8 w-8 text-red-600"})]})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Checklists Recentes"}),a.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.filter(y=>!y.concluido).slice(0,6).map(y=>l.jsx(x,{checklist:y},y.id))}):l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma checklist encontrada."})]})]})})]})},we=g.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:ue("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));we.displayName="Input";function dT(t,[e,n]){return Math.min(n,Math.max(e,t))}function XC(t){const e=t+"CollectionProvider",[n,r]=nr(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=v=>{const{scope:b,children:x}=v,y=J.useRef(null),w=J.useRef(new Map).current;return l.jsx(s,{scope:b,itemMap:w,collectionRef:y,children:x})};i.displayName=e;const a=t+"CollectionSlot",c=Sa(a),u=J.forwardRef((v,b)=>{const{scope:x,children:y}=v,w=o(a,x),S=Ue(b,w.collectionRef);return l.jsx(c,{ref:S,children:y})});u.displayName=a;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=Sa(d),p=J.forwardRef((v,b)=>{const{scope:x,children:y,...w}=v,S=J.useRef(null),j=Ue(b,S),C=o(d,x);return J.useEffect(()=>(C.itemMap.set(S,{ref:S,...w}),()=>void C.itemMap.delete(S))),l.jsx(h,{[f]:"",ref:j,children:y})});p.displayName=d;function m(v){const b=o(t+"CollectionConsumer",v);return J.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((C,k)=>w.indexOf(C.ref.current)-w.indexOf(k.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:u,ItemSlot:p},m,r]}var GJ=g.createContext(void 0);function hy(t){const e=g.useContext(GJ);return t||e||"ltr"}var n0=0;function py(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??fT()),document.body.insertAdjacentElement("beforeend",t[1]??fT()),n0++,()=>{n0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),n0--}},[])}function fT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var r0="focusScope.autoFocusOnMount",s0="focusScope.autoFocusOnUnmount",hT={bubbles:!1,cancelable:!0},YJ="FocusScope",Gh=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...i}=t,[a,c]=g.useState(null),u=Ts(s),d=Ts(o),f=g.useRef(null),h=Ue(e,v=>c(v)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let v=function(w){if(p.paused||!a)return;const S=w.target;a.contains(S)?f.current=S:Ti(f.current,{select:!0})},b=function(w){if(p.paused||!a)return;const S=w.relatedTarget;S!==null&&(a.contains(S)||Ti(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Ti(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const y=new MutationObserver(x);return a&&y.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),y.disconnect()}}},[r,a,p.paused]),g.useEffect(()=>{if(a){mT.add(p);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(r0,hT);a.addEventListener(r0,u),a.dispatchEvent(x),x.defaultPrevented||(QJ(tX(kI(a)),{select:!0}),document.activeElement===v&&Ti(a))}return()=>{a.removeEventListener(r0,u),setTimeout(()=>{const x=new CustomEvent(s0,hT);a.addEventListener(s0,d),a.dispatchEvent(x),x.defaultPrevented||Ti(v??document.body,{select:!0}),a.removeEventListener(s0,d),mT.remove(p)},0)}}},[a,u,d,p]);const m=g.useCallback(v=>{if(!n&&!r||p.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(b&&x){const y=v.currentTarget,[w,S]=JJ(y);w&&S?!v.shiftKey&&x===S?(v.preventDefault(),n&&Ti(w,{select:!0})):v.shiftKey&&x===w&&(v.preventDefault(),n&&Ti(S,{select:!0})):x===y&&v.preventDefault()}},[n,r,p.paused]);return l.jsx(je.div,{tabIndex:-1,...i,ref:h,onKeyDown:m})});Gh.displayName=YJ;function QJ(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ti(r,{select:e}),document.activeElement!==n)return}function JJ(t){const e=kI(t),n=pT(e,t),r=pT(e.reverse(),t);return[n,r]}function kI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pT(t,e){for(const n of t)if(!XJ(n,{upTo:e}))return n}function XJ(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function ZJ(t){return t instanceof HTMLInputElement&&"select"in t}function Ti(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&ZJ(t)&&e&&t.select()}}var mT=eX();function eX(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=gT(t,e),t.unshift(e)},remove(e){var n;t=gT(t,e),(n=t[0])==null||n.resume()}}}function gT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function tX(t){return t.filter(e=>e.tagName!=="A")}function ZC(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var nX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Sc=new WeakMap,Wp=new WeakMap,qp={},o0=0,NI=function(t){return t&&(t.host||NI(t.parentNode))},rX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=NI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},sX=function(t,e,n,r){var s=rX(e,Array.isArray(t)?t:[t]);qp[n]||(qp[n]=new WeakMap);var o=qp[n],i=[],a=new Set,c=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",v=(Sc.get(h)||0)+1,b=(o.get(h)||0)+1;Sc.set(h,v),o.set(h,b),i.push(h),v===1&&m&&Wp.set(h,!0),b===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(e),a.clear(),o0++,function(){i.forEach(function(f){var h=Sc.get(f)-1,p=o.get(f)-1;Sc.set(f,h),o.set(f,p),h||(Wp.has(f)||f.removeAttribute(r),Wp.delete(f)),p||f.removeAttribute(n)}),o0--,o0||(Sc=new WeakMap,Sc=new WeakMap,Wp=new WeakMap,qp={})}},my=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=nX(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),sX(r,s,n,"aria-hidden")):function(){return null}},Qs=function(){return Qs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Qs.apply(this,arguments)};function EI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function oX(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Tm="right-scroll-bar-position",Mm="width-before-scroll-bar",iX="with-scroll-bars-hidden",aX="--removed-body-scroll-bar-size";function i0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lX(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var cX=typeof window<"u"?g.useLayoutEffect:g.useEffect,vT=new WeakMap;function uX(t,e){var n=lX(null,function(r){return t.forEach(function(s){return i0(s,r)})});return cX(function(){var r=vT.get(n);if(r){var s=new Set(r),o=new Set(t),i=n.current;s.forEach(function(a){o.has(a)||i0(a,null)}),o.forEach(function(a){s.has(a)||i0(a,i)})}vT.set(n,t)},[t]),n}function dX(t){return t}function fX(t,e){e===void 0&&(e=dX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var i=e(o,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(o){for(r=!0;n.length;){var i=n;n=[],i.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(o),i=n}var c=function(){var d=i;i=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function hX(t){t===void 0&&(t={});var e=fX(null);return e.options=Qs({async:!0,ssr:!1},t),e}var _I=function(t){var e=t.sideCar,n=EI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,Qs({},n))};_I.isSideCarExport=!0;function pX(t,e){return t.useMedium(e),_I}var TI=hX(),a0=function(){},gy=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:a0,onWheelCapture:a0,onTouchMoveCapture:a0}),s=r[0],o=r[1],i=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,p=t.noRelative,m=t.noIsolation,v=t.inert,b=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,S=EI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,C=uX([n,e]),k=Qs(Qs({},S),s);return g.createElement(g.Fragment,null,d&&g.createElement(j,{sideCar:TI,removeScrollBar:u,shards:f,noRelative:p,noIsolation:m,inert:v,setCallbacks:o,allowPinchZoom:!!b,lockRef:n,gapMode:w}),i?g.cloneElement(g.Children.only(a),Qs(Qs({},k),{ref:C})):g.createElement(y,Qs({},k,{className:c,ref:C}),a))});gy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gy.classNames={fullWidth:Mm,zeroRight:Tm};var mX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=mX();return e&&t.setAttribute("nonce",e),t}function vX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function yX(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=gX())&&(vX(e,n),yX(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},bX=function(){var t=xX();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},MI=function(){var t=bX(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},wX={left:0,top:0,right:0,gap:0},l0=function(t){return parseInt(t||"",10)||0},SX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[l0(n),l0(r),l0(s)]},CX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return wX;var e=SX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},jX=MI(),du="data-scroll-locked",kX=function(t,e,n,r){var s=t.left,o=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(iX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(du,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tm,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Mm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tm," .").concat(Tm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Mm," .").concat(Mm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(du,`] {
    `).concat(aX,": ").concat(a,`px;
  }
`)},yT=function(){var t=parseInt(document.body.getAttribute(du)||"0",10);return isFinite(t)?t:0},NX=function(){g.useEffect(function(){return document.body.setAttribute(du,(yT()+1).toString()),function(){var t=yT()-1;t<=0?document.body.removeAttribute(du):document.body.setAttribute(du,t.toString())}},[])},EX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;NX();var o=g.useMemo(function(){return CX(s)},[s]);return g.createElement(jX,{styles:kX(o,!e,s,n?"":"!important")})},Xw=!1;if(typeof window<"u")try{var Kp=Object.defineProperty({},"passive",{get:function(){return Xw=!0,!0}});window.addEventListener("test",Kp,Kp),window.removeEventListener("test",Kp,Kp)}catch{Xw=!1}var Cc=Xw?{passive:!1}:!1,_X=function(t){return t.tagName==="TEXTAREA"},AI=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_X(t)&&n[e]==="visible")},TX=function(t){return AI(t,"overflowY")},MX=function(t){return AI(t,"overflowX")},xT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=PI(t,r);if(s){var o=DI(t,r),i=o[1],a=o[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},AX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},PX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},PI=function(t,e){return t==="v"?TX(e):MX(e)},DI=function(t,e){return t==="v"?AX(e):PX(e)},DX=function(t,e){return t==="h"&&e==="rtl"?-1:1},RX=function(t,e,n,r,s){var o=DX(t,window.getComputedStyle(e).direction),i=o*r,a=n.target,c=e.contains(a),u=!1,d=i>0,f=0,h=0;do{if(!a)break;var p=DI(t,a),m=p[0],v=p[1],b=p[2],x=v-b-o*m;(m||x)&&PI(t,a)&&(f+=x,h+=m);var y=a.parentNode;a=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(h)<1||!s))&&(u=!0),u},Gp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bT=function(t){return[t.deltaX,t.deltaY]},wT=function(t){return t&&"current"in t?t.current:t},OX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},IX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},LX=0,jc=[];function FX(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(LX++)[0],o=g.useState(MI)[0],i=g.useRef(t);g.useEffect(function(){i.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=oX([t.lockRef.current],(t.shards||[]).map(wT),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!i.current.allowPinchZoom;var x=Gp(v),y=n.current,w="deltaX"in v?v.deltaX:y[0]-x[0],S="deltaY"in v?v.deltaY:y[1]-x[1],j,C=v.target,k=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&k==="h"&&C.type==="range")return!1;var N=xT(k,C);if(!N)return!0;if(N?j=k:(j=k==="v"?"h":"v",N=xT(k,C)),!N)return!1;if(!r.current&&"changedTouches"in v&&(w||S)&&(r.current=j),!j)return!0;var E=r.current||j;return RX(E,b,v,E==="h"?w:S,!0)},[]),c=g.useCallback(function(v){var b=v;if(!(!jc.length||jc[jc.length-1]!==o)){var x="deltaY"in b?bT(b):Gp(b),y=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&OX(j.delta,x)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var w=(i.current.shards||[]).map(wT).filter(Boolean).filter(function(j){return j.contains(b.target)}),S=w.length>0?a(b,w[0]):!i.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(v,b,x,y){var w={name:v,delta:b,target:x,should:y,shadowParent:$X(x)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),d=g.useCallback(function(v){n.current=Gp(v),r.current=void 0},[]),f=g.useCallback(function(v){u(v.type,bT(v),v.target,a(v,t.lockRef.current))},[]),h=g.useCallback(function(v){u(v.type,Gp(v),v.target,a(v,t.lockRef.current))},[]);g.useEffect(function(){return jc.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Cc),document.addEventListener("touchmove",c,Cc),document.addEventListener("touchstart",d,Cc),function(){jc=jc.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Cc),document.removeEventListener("touchmove",c,Cc),document.removeEventListener("touchstart",d,Cc)}},[]);var p=t.removeScrollBar,m=t.inert;return g.createElement(g.Fragment,null,m?g.createElement(o,{styles:IX(s)}):null,p?g.createElement(EX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function $X(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const zX=pX(TI,FX);var Yh=g.forwardRef(function(t,e){return g.createElement(gy,Qs({},t,{ref:e,sideCar:zX}))});Yh.classNames=gy.classNames;var BX=[" ","Enter","ArrowUp","ArrowDown"],VX=[" ","Enter"],Hl="Select",[vy,yy,UX]=XC(Hl),[gd,Cge]=nr(Hl,[UX,Da]),xy=Da(),[HX,$a]=gd(Hl),[WX,qX]=gd(Hl),RI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:i,defaultValue:a,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:p,form:m}=t,v=xy(e),[b,x]=g.useState(null),[y,w]=g.useState(null),[S,j]=g.useState(!1),C=hy(u),[k,N]=ni({prop:r,defaultProp:s??!1,onChange:o,caller:Hl}),[E,A]=ni({prop:i,defaultProp:a,onChange:c,caller:Hl}),$=g.useRef(null),H=b?m||!!b.closest("form"):!0,[O,V]=g.useState(new Set),B=Array.from(O).map(K=>K.props.value).join(";");return l.jsx(nC,{...v,children:l.jsxs(HX,{required:p,scope:e,trigger:b,onTriggerChange:x,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Es(),value:E,onValueChange:A,open:k,onOpenChange:N,dir:C,triggerPointerDownPosRef:$,disabled:h,children:[l.jsx(vy.Provider,{scope:e,children:l.jsx(WX,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(K=>{V(R=>new Set(R).add(K))},[]),onNativeOptionRemove:g.useCallback(K=>{V(R=>{const T=new Set(R);return T.delete(K),T})},[]),children:n})}),H?l.jsxs(sL,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:f,value:E,onChange:K=>A(K.target.value),disabled:h,form:m,children:[E===void 0?l.jsx("option",{value:""}):null,Array.from(O)]},B):null]})})};RI.displayName=Hl;var OI="SelectTrigger",II=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=xy(n),i=$a(OI,n),a=i.disabled||r,c=Ue(e,i.onTriggerChange),u=yy(n),d=g.useRef("touch"),[f,h,p]=iL(v=>{const b=u().filter(w=>!w.disabled),x=b.find(w=>w.value===i.value),y=aL(b,v,x);y!==void 0&&i.onValueChange(y.value)}),m=v=>{a||(i.onOpenChange(!0),p()),v&&(i.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return l.jsx($h,{asChild:!0,...o,children:l.jsx(je.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":oL(i.value)?"":void 0,...s,ref:c,onClick:le(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&m(v)}),onPointerDown:le(s.onPointerDown,v=>{d.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(m(v),v.preventDefault())}),onKeyDown:le(s.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(b&&v.key===" ")&&BX.includes(v.key)&&(m(),v.preventDefault())})})})});II.displayName=OI;var LI="SelectValue",FI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:i="",...a}=t,c=$a(LI,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,f=Ue(e,c.onValueNodeChange);return Gt(()=>{u(d)},[u,d]),l.jsx(je.span,{...a,ref:f,style:{pointerEvents:"none"},children:oL(c.value)?l.jsx(l.Fragment,{children:i}):o})});FI.displayName=LI;var KX="SelectIcon",$I=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(je.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});$I.displayName=KX;var GX="SelectPortal",zI=t=>l.jsx(zh,{asChild:!0,...t});zI.displayName=GX;var Wl="SelectContent",BI=g.forwardRef((t,e)=>{const n=$a(Wl,t.__scopeSelect),[r,s]=g.useState();if(Gt(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Cs.createPortal(l.jsx(VI,{scope:t.__scopeSelect,children:l.jsx(vy.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),o):null}return l.jsx(UI,{...t,ref:e})});BI.displayName=Wl;var ms=10,[VI,za]=gd(Wl),YX="SelectContentImpl",QX=Sa("SelectContent.RemoveScroll"),UI=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:i,side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:v,avoidCollisions:b,...x}=t,y=$a(Wl,n),[w,S]=g.useState(null),[j,C]=g.useState(null),k=Ue(e,F=>S(F)),[N,E]=g.useState(null),[A,$]=g.useState(null),H=yy(n),[O,V]=g.useState(!1),B=g.useRef(!1);g.useEffect(()=>{if(w)return my(w)},[w]),py();const K=g.useCallback(F=>{const[Y,...oe]=H().map(ke=>ke.ref.current),[se]=oe.slice(-1),pe=document.activeElement;for(const ke of F)if(ke===pe||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===Y&&j&&(j.scrollTop=0),ke===se&&j&&(j.scrollTop=j.scrollHeight),ke==null||ke.focus(),document.activeElement!==pe))return},[H,j]),R=g.useCallback(()=>K([N,w]),[K,N,w]);g.useEffect(()=>{O&&R()},[O,R]);const{onOpenChange:T,triggerPointerDownPosRef:D}=y;g.useEffect(()=>{if(w){let F={x:0,y:0};const Y=se=>{var pe,ke;F={x:Math.abs(Math.round(se.pageX)-(((pe=D.current)==null?void 0:pe.x)??0)),y:Math.abs(Math.round(se.pageY)-(((ke=D.current)==null?void 0:ke.y)??0))}},oe=se=>{F.x<=10&&F.y<=10?se.preventDefault():w.contains(se.target)||T(!1),document.removeEventListener("pointermove",Y),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",oe,{capture:!0})}}},[w,T,D]),g.useEffect(()=>{const F=()=>T(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[T]);const[L,X]=iL(F=>{const Y=H().filter(pe=>!pe.disabled),oe=Y.find(pe=>pe.ref.current===document.activeElement),se=aL(Y,F,oe);se&&setTimeout(()=>se.ref.current.focus())}),I=g.useCallback((F,Y,oe)=>{const se=!B.current&&!oe;(y.value!==void 0&&y.value===Y||se)&&(E(F),se&&(B.current=!0))},[y.value]),W=g.useCallback(()=>w==null?void 0:w.focus(),[w]),_=g.useCallback((F,Y,oe)=>{const se=!B.current&&!oe;(y.value!==void 0&&y.value===Y||se)&&$(F)},[y.value]),ee=r==="popper"?Zw:HI,M=ee===Zw?{side:a,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:v,avoidCollisions:b}:{};return l.jsx(VI,{scope:n,content:w,viewport:j,onViewportChange:C,itemRefCallback:I,selectedItem:N,onItemLeave:W,itemTextRefCallback:_,focusSelectedItem:R,selectedItemText:A,position:r,isPositioned:O,searchRef:L,children:l.jsx(Yh,{as:QX,allowPinchZoom:!0,children:l.jsx(Gh,{asChild:!0,trapped:y.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:le(s,F=>{var Y;(Y=y.trigger)==null||Y.focus({preventScroll:!0}),F.preventDefault()}),children:l.jsx(sd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:l.jsx(ee,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:F=>F.preventDefault(),...x,...M,onPlaced:()=>V(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:le(x.onKeyDown,F=>{const Y=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!Y&&F.key.length===1&&X(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let se=H().filter(pe=>!pe.disabled).map(pe=>pe.ref.current);if(["ArrowUp","End"].includes(F.key)&&(se=se.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const pe=F.target,ke=se.indexOf(pe);se=se.slice(ke+1)}setTimeout(()=>K(se)),F.preventDefault()}})})})})})})});UI.displayName=YX;var JX="SelectItemAlignedPosition",HI=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=$a(Wl,n),i=za(Wl,n),[a,c]=g.useState(null),[u,d]=g.useState(null),f=Ue(e,k=>d(k)),h=yy(n),p=g.useRef(!1),m=g.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:x,focusSelectedItem:y}=i,w=g.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&v&&b&&x){const k=o.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),E=o.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(o.dir!=="rtl"){const pe=A.left-N.left,ke=E.left-pe,ct=k.left-ke,gt=k.width+ct,dn=Math.max(gt,N.width),fn=window.innerWidth-ms,hn=dT(ke,[ms,Math.max(ms,fn-dn)]);a.style.minWidth=gt+"px",a.style.left=hn+"px"}else{const pe=N.right-A.right,ke=window.innerWidth-E.right-pe,ct=window.innerWidth-k.right-ke,gt=k.width+ct,dn=Math.max(gt,N.width),fn=window.innerWidth-ms,hn=dT(ke,[ms,Math.max(ms,fn-dn)]);a.style.minWidth=gt+"px",a.style.right=hn+"px"}const $=h(),H=window.innerHeight-ms*2,O=v.scrollHeight,V=window.getComputedStyle(u),B=parseInt(V.borderTopWidth,10),K=parseInt(V.paddingTop,10),R=parseInt(V.borderBottomWidth,10),T=parseInt(V.paddingBottom,10),D=B+K+O+T+R,L=Math.min(b.offsetHeight*5,D),X=window.getComputedStyle(v),I=parseInt(X.paddingTop,10),W=parseInt(X.paddingBottom,10),_=k.top+k.height/2-ms,ee=H-_,M=b.offsetHeight/2,F=b.offsetTop+M,Y=B+K+F,oe=D-Y;if(Y<=_){const pe=$.length>0&&b===$[$.length-1].ref.current;a.style.bottom="0px";const ke=u.clientHeight-v.offsetTop-v.offsetHeight,ct=Math.max(ee,M+(pe?W:0)+ke+R),gt=Y+ct;a.style.height=gt+"px"}else{const pe=$.length>0&&b===$[0].ref.current;a.style.top="0px";const ct=Math.max(_,B+v.offsetTop+(pe?I:0)+M)+oe;a.style.height=ct+"px",v.scrollTop=Y-_+v.offsetTop}a.style.margin=`${ms}px 0`,a.style.minHeight=L+"px",a.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,o.trigger,o.valueNode,a,u,v,b,x,o.dir,r]);Gt(()=>w(),[w]);const[S,j]=g.useState();Gt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const C=g.useCallback(k=>{k&&m.current===!0&&(w(),y==null||y(),m.current=!1)},[w,y]);return l.jsx(ZX,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(je.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});HI.displayName=JX;var XX="SelectPopperPosition",Zw=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ms,...o}=t,i=xy(n);return l.jsx(Jv,{...i,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Zw.displayName=XX;var[ZX,ej]=gd(Wl,{}),e1="SelectViewport",WI=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=za(e1,n),i=ej(e1,n),a=Ue(e,o.onViewportChange),c=g.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(vy.Slot,{scope:n,children:l.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:le(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&f){const p=Math.abs(c.current-d.scrollTop);if(p>0){const m=window.innerHeight-ms*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),x=Math.max(v,b);if(x<m){const y=x+p,w=Math.min(m,y),S=y-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});WI.displayName=e1;var qI="SelectGroup",[eZ,tZ]=gd(qI),nZ=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Es();return l.jsx(eZ,{scope:n,id:s,children:l.jsx(je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});nZ.displayName=qI;var KI="SelectLabel",GI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=tZ(KI,n);return l.jsx(je.div,{id:s.id,...r,ref:e})});GI.displayName=KI;var Ag="SelectItem",[rZ,YI]=gd(Ag),QI=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...i}=t,a=$a(Ag,n),c=za(Ag,n),u=a.value===r,[d,f]=g.useState(o??""),[h,p]=g.useState(!1),m=Ue(e,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,r,s)}),v=Es(),b=g.useRef("touch"),x=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(rZ,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:g.useCallback(y=>{f(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:l.jsx(vy.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(je.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:m,onFocus:le(i.onFocus,()=>p(!0)),onBlur:le(i.onBlur,()=>p(!1)),onClick:le(i.onClick,()=>{b.current!=="mouse"&&x()}),onPointerUp:le(i.onPointerUp,()=>{b.current==="mouse"&&x()}),onPointerDown:le(i.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:le(i.onPointerMove,y=>{var w;b.current=y.pointerType,s?(w=c.onItemLeave)==null||w.call(c):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(i.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:le(i.onKeyDown,y=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&y.key===" "||(VX.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});QI.displayName=Ag;var Gd="SelectItemText",JI=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,i=$a(Gd,n),a=za(Gd,n),c=YI(Gd,n),u=qX(Gd,n),[d,f]=g.useState(null),h=Ue(e,x=>f(x),c.onItemTextChange,x=>{var y;return(y=a.itemTextRefCallback)==null?void 0:y.call(a,x,c.value,c.disabled)}),p=d==null?void 0:d.textContent,m=g.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return Gt(()=>(v(m),()=>b(m)),[v,b,m]),l.jsxs(l.Fragment,{children:[l.jsx(je.span,{id:c.textId,...o,ref:h}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Cs.createPortal(o.children,i.valueNode):null]})});JI.displayName=Gd;var XI="SelectItemIndicator",ZI=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return YI(XI,n).isSelected?l.jsx(je.span,{"aria-hidden":!0,...r,ref:e}):null});ZI.displayName=XI;var t1="SelectScrollUpButton",eL=g.forwardRef((t,e)=>{const n=za(t1,t.__scopeSelect),r=ej(t1,t.__scopeSelect),[s,o]=g.useState(!1),i=Ue(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(nL,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});eL.displayName=t1;var n1="SelectScrollDownButton",tL=g.forwardRef((t,e)=>{const n=za(n1,t.__scopeSelect),r=ej(n1,t.__scopeSelect),[s,o]=g.useState(!1),i=Ue(e,r.onScrollButtonChange);return Gt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(nL,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});tL.displayName=n1;var nL=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=za("SelectScrollButton",n),i=g.useRef(null),a=yy(n),c=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>c(),[c]),Gt(()=>{var d;const u=a().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),l.jsx(je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:le(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:le(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:le(s.onPointerLeave,()=>{c()})})}),sZ="SelectSeparator",rL=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(je.div,{"aria-hidden":!0,...r,ref:e})});rL.displayName=sZ;var r1="SelectArrow",oZ=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=xy(n),o=$a(r1,n),i=za(r1,n);return o.open&&i.position==="popper"?l.jsx(Xv,{...s,...r,ref:e}):null});oZ.displayName=r1;var iZ="SelectBubbleInput",sL=g.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=g.useRef(null),o=Ue(r,s),i=ZC(e);return g.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==e&&d){const f=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(f)}},[i,e]),l.jsx(je.select,{...n,style:{...jD,...n.style},ref:o,defaultValue:e})});sL.displayName=iZ;function oL(t){return t===""||t===void 0}function iL(t){const e=Ts(t),n=g.useRef(""),r=g.useRef(0),s=g.useCallback(i=>{const a=n.current+i;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),o=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function aL(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=aZ(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function aZ(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var lZ=RI,lL=II,cZ=FI,uZ=$I,dZ=zI,cL=BI,fZ=WI,uL=GI,dL=QI,hZ=JI,pZ=ZI,fL=eL,hL=tL,pL=rL;const Oe=lZ,Ie=cZ,Pe=g.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(lL,{ref:r,className:ue("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(uZ,{asChild:!0,children:l.jsx(ih,{className:"h-4 w-4 opacity-50"})})]}));Pe.displayName=lL.displayName;const mL=g.forwardRef(({className:t,...e},n)=>l.jsx(fL,{ref:n,className:ue("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(Ng,{className:"h-4 w-4"})}));mL.displayName=fL.displayName;const gL=g.forwardRef(({className:t,...e},n)=>l.jsx(hL,{ref:n,className:ue("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(ih,{className:"h-4 w-4"})}));gL.displayName=hL.displayName;const De=g.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(dZ,{children:l.jsxs(cL,{ref:s,className:ue("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(mL,{}),l.jsx(fZ,{className:ue("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(gL,{})]})}));De.displayName=cL.displayName;const mZ=g.forwardRef(({className:t,...e},n)=>l.jsx(uL,{ref:n,className:ue("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));mZ.displayName=uL.displayName;const z=g.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(dL,{ref:r,className:ue("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(pZ,{children:l.jsx(Ar,{className:"h-4 w-4"})})}),l.jsx(hZ,{children:e})]}));z.displayName=dL.displayName;const gZ=g.forwardRef(({className:t,...e},n)=>l.jsx(pL,{ref:n,className:ue("-mx-1 my-1 h-px bg-muted",t),...e}));gZ.displayName=pL.displayName;var vL={exports:{}},yL={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uu=g;function vZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yZ=typeof Object.is=="function"?Object.is:vZ,xZ=Uu.useState,bZ=Uu.useEffect,wZ=Uu.useLayoutEffect,SZ=Uu.useDebugValue;function CZ(t,e){var n=e(),r=xZ({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return wZ(function(){s.value=n,s.getSnapshot=e,c0(s)&&o({inst:s})},[t,n,e]),bZ(function(){return c0(s)&&o({inst:s}),t(function(){c0(s)&&o({inst:s})})},[t]),SZ(n),n}function c0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yZ(t,n)}catch{return!0}}function jZ(t,e){return e()}var kZ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?jZ:CZ;yL.useSyncExternalStore=Uu.useSyncExternalStore!==void 0?Uu.useSyncExternalStore:kZ;vL.exports=yL;var by=vL.exports;function NZ(){return by.useSyncExternalStore(EZ,()=>!0,()=>!1)}function EZ(){return()=>{}}var tj="Avatar",[_Z,jge]=nr(tj),[TZ,xL]=_Z(tj),bL=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=g.useState("idle");return l.jsx(TZ,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:l.jsx(je.span,{...r,ref:e})})});bL.displayName=tj;var wL="AvatarImage",SL=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,i=xL(wL,n),a=MZ(r,o),c=Ts(u=>{s(u),i.onImageLoadingStatusChange(u)});return Gt(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?l.jsx(je.img,{...o,ref:e,src:r}):null});SL.displayName=wL;var CL="AvatarFallback",jL=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=xL(CL,n),[i,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),i&&o.imageLoadingStatus!=="loaded"?l.jsx(je.span,{...s,ref:e}):null});jL.displayName=CL;function ST(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function MZ(t,{referrerPolicy:e,crossOrigin:n}){const r=NZ(),s=g.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[i,a]=g.useState(()=>ST(o,t));return Gt(()=>{a(ST(o,t))},[o,t]),Gt(()=>{const c=f=>()=>{a(f)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,n,e]),i}var kL=bL,NL=SL,EL=jL;const on=g.forwardRef(({className:t,...e},n)=>l.jsx(kL,{ref:n,className:ue("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));on.displayName=kL.displayName;const an=g.forwardRef(({className:t,...e},n)=>l.jsx(NL,{ref:n,className:ue("aspect-square h-full w-full",t),...e}));an.displayName=NL.displayName;const ln=g.forwardRef(({className:t,...e},n)=>l.jsx(EL,{ref:n,className:ue("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ln.displayName=EL.displayName;var wy="Dialog",[_L,TL]=nr(wy),[AZ,Os]=_L(wy),ML=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!0}=t,a=g.useRef(null),c=g.useRef(null),[u,d]=ni({prop:r,defaultProp:s??!1,onChange:o,caller:wy});return l.jsx(AZ,{scope:e,triggerRef:a,contentRef:c,contentId:Es(),titleId:Es(),descriptionId:Es(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:i,children:n})};ML.displayName=wy;var AL="DialogTrigger",PL=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Os(AL,n),o=Ue(e,s.triggerRef);return l.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":sj(s.open),...r,ref:o,onClick:le(t.onClick,s.onOpenToggle)})});PL.displayName=AL;var nj="DialogPortal",[PZ,DL]=_L(nj,{forceMount:void 0}),RL=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Os(nj,e);return l.jsx(PZ,{scope:e,forceMount:n,children:g.Children.map(r,i=>l.jsx(Or,{present:n||o.open,children:l.jsx(zh,{asChild:!0,container:s,children:i})}))})};RL.displayName=nj;var Pg="DialogOverlay",OL=g.forwardRef((t,e)=>{const n=DL(Pg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Os(Pg,t.__scopeDialog);return o.modal?l.jsx(Or,{present:r||o.open,children:l.jsx(RZ,{...s,ref:e})}):null});OL.displayName=Pg;var DZ=Sa("DialogOverlay.RemoveScroll"),RZ=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Os(Pg,n);return l.jsx(Yh,{as:DZ,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(je.div,{"data-state":sj(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ql="DialogContent",IL=g.forwardRef((t,e)=>{const n=DL(ql,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Os(ql,t.__scopeDialog);return l.jsx(Or,{present:r||o.open,children:o.modal?l.jsx(OZ,{...s,ref:e}):l.jsx(IZ,{...s,ref:e})})});IL.displayName=ql;var OZ=g.forwardRef((t,e)=>{const n=Os(ql,t.__scopeDialog),r=g.useRef(null),s=Ue(e,n.contentRef,r);return g.useEffect(()=>{const o=r.current;if(o)return my(o)},[]),l.jsx(LL,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&o.preventDefault()}),onFocusOutside:le(t.onFocusOutside,o=>o.preventDefault())})}),IZ=g.forwardRef((t,e)=>{const n=Os(ql,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return l.jsx(LL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),LL=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...i}=t,a=Os(ql,n),c=g.useRef(null),u=Ue(e,c);return py(),l.jsxs(l.Fragment,{children:[l.jsx(Gh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:l.jsx(sd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":sj(a.open),...i,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(FZ,{titleId:a.titleId}),l.jsx(zZ,{contentRef:c,descriptionId:a.descriptionId})]})]})}),rj="DialogTitle",FL=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Os(rj,n);return l.jsx(je.h2,{id:s.titleId,...r,ref:e})});FL.displayName=rj;var $L="DialogDescription",zL=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Os($L,n);return l.jsx(je.p,{id:s.descriptionId,...r,ref:e})});zL.displayName=$L;var BL="DialogClose",VL=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Os(BL,n);return l.jsx(je.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});VL.displayName=BL;function sj(t){return t?"open":"closed"}var UL="DialogTitleWarning",[LZ,HL]=YV(UL,{contentName:ql,titleName:rj,docsSlug:"dialog"}),FZ=({titleId:t})=>{const e=HL(UL),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},$Z="DialogDescriptionWarning",zZ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HL($Z).contentName}}.`;return g.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},WL=ML,BZ=PL,qL=RL,oj=OL,ij=IL,aj=FL,lj=zL,cj=VL;const rr=WL,VZ=qL,KL=g.forwardRef(({className:t,...e},n)=>l.jsx(oj,{ref:n,className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));KL.displayName=oj.displayName;const In=g.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(VZ,{children:[l.jsx(KL,{}),l.jsxs(ij,{ref:r,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(cj,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(CI,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));In.displayName=ij.displayName;const Ln=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Ln.displayName="DialogHeader";const Qh=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Qh.displayName="DialogFooter";const Fn=g.forwardRef(({className:t,...e},n)=>l.jsx(aj,{ref:n,className:ue("text-lg font-semibold leading-none tracking-tight",t),...e}));Fn.displayName=aj.displayName;const UZ=g.forwardRef(({className:t,...e},n)=>l.jsx(lj,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));UZ.displayName=lj.displayName;const Jh=t=>{const e=ls(),{data:n=[],isLoading:r}=jn({queryKey:["responsaveis-tarefa",t],queryFn:async()=>{if(!t)return[];const{data:u,error:d}=await re.from("tarefa_responsaveis").select(`
          *,
          responsavel_perfil:perfis!tarefa_responsaveis_responsavel_id_fkey(nome_completo, url_avatar)
        `).eq("tarefa_id",t);if(d)throw console.error("Erro ao buscar responsveis:",d),d;return u},enabled:!!t}),{mutateAsync:s,isPending:o}=Qe({mutationFn:async u=>{const{data:d,error:f}=await re.from("tarefa_responsaveis").insert(u).select().single();if(f)throw console.error("Erro ao adicionar responsvel:",f),f;return d},onSuccess:()=>{e.invalidateQueries({queryKey:["responsaveis-tarefa",t]})}}),{mutateAsync:i,isPending:a}=Qe({mutationFn:async u=>{const{error:d}=await re.from("tarefa_responsaveis").delete().eq("id",u);if(d)throw console.error("Erro ao remover responsvel:",d),d},onSuccess:()=>{e.invalidateQueries({queryKey:["responsaveis-tarefa",t]})}}),{mutateAsync:c}=Qe({mutationFn:async({tarefaId:u,responsaveisIds:d})=>{if(await re.from("tarefa_responsaveis").delete().eq("tarefa_id",u),d.length>0){const f=d.map(p=>({tarefa_id:u,responsavel_id:p})),{error:h}=await re.from("tarefa_responsaveis").insert(f);if(h)throw console.error("Erro ao atualizar responsveis:",h),h}},onSuccess:()=>{e.invalidateQueries({queryKey:["responsaveis-tarefa",t]})}});return{responsaveis:n,isLoading:r,adicionarResponsavel:s,removerResponsavel:i,atualizarResponsaveis:c,isAdding:o,isRemoving:a}},GL=t=>{const e=ls(),{data:n=[],isLoading:r}=jn({queryKey:["comentarios-tarefa",t],queryFn:async()=>{if(!t)return[];const{data:c,error:u}=await re.from("comentarios_tarefa").select(`
          *,
          autor_perfil:perfis!comentarios_tarefa_autor_id_fkey(nome_completo, url_avatar)
        `).eq("tarefa_id",t).order("criado_em",{ascending:!1});if(u)throw console.error("Erro ao buscar comentrios:",u),u;return c},enabled:!!t}),{mutateAsync:s,isPending:o}=Qe({mutationFn:async c=>{const{data:u,error:d}=await re.from("comentarios_tarefa").insert(c).select().single();if(d)throw console.error("Erro ao criar comentrio:",d),d;return u},onSuccess:()=>{e.invalidateQueries({queryKey:["comentarios-tarefa",t]})}}),{mutateAsync:i,isPending:a}=Qe({mutationFn:async c=>{const{error:u}=await re.from("comentarios_tarefa").delete().eq("id",c);if(u)throw console.error("Erro ao deletar comentrio:",u),u},onSuccess:()=>{e.invalidateQueries({queryKey:["comentarios-tarefa",t]})}});return{comentarios:n,isLoading:r,criarComentario:s,deletarComentario:i,isCreating:o,isDeleting:a}},ic=g.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:ue("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));ic.displayName="Textarea";const YL=g.forwardRef(({className:t,...e},n)=>l.jsx(ic,{autoComplete:"off",ref:n,name:"message",className:ue("max-h-12 px-4 py-3 bg-background text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 w-full rounded-md flex items-center h-16 resize-none",t),...e}));YL.displayName="ChatInput";const QL=({comments:t,onAddComment:e,onDeleteComment:n,currentUser:r,readOnly:s=!1})=>{const[o,i]=g.useState(""),[a,c]=g.useState([]),u=p=>{if(p.preventDefault(),s||!o.trim()&&a.length===0)return;const m=a.map((v,b)=>({id:`${Date.now()}-${b}`,name:v.name,url:URL.createObjectURL(v),type:v.type}));e({text:o.trim(),author:r.name,authorAvatar:r.avatar,attachments:m.length>0?m:void 0}),i(""),c([]),q.success("Comentrio adicionado com sucesso")},d=p=>{if(s)return;const m=Array.from(p.target.files||[]);c(v=>[...v,...m])},f=p=>{s||c(m=>m.filter((v,b)=>b!==p))},h=p=>new Date(p).toLocaleString("pt-BR");return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-3",children:[t.map(p=>l.jsxs("div",{className:"flex gap-3 p-3 bg-muted/30 rounded-lg",children:[l.jsxs(on,{className:"h-8 w-8 flex-shrink-0",children:[l.jsx(an,{src:p.authorAvatar,alt:p.author}),l.jsx(ln,{className:"text-xs",children:p.author.charAt(0)})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium",children:p.author}),l.jsx("span",{className:"text-xs text-muted-foreground",children:h(p.date)})]}),!s&&l.jsx(G,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",onClick:()=>n(p.id),children:l.jsx(Ea,{className:"h-3 w-3"})})]}),p.text&&l.jsx("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:p.text}),p.attachments&&p.attachments.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:p.attachments.map(m=>l.jsxs("div",{className:"flex items-center gap-2 bg-background px-2 py-1 rounded text-xs border",children:[l.jsx(t0,{className:"h-3 w-3"}),l.jsx("span",{children:m.name}),l.jsx(G,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",onClick:()=>{const v=document.createElement("a");v.href=m.url,v.download=m.name,v.click()},children:l.jsx(Yw,{className:"h-2 w-2"})})]},m.id))})]})]},p.id)),t.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Nenhum comentrio ainda"})]}),!s&&l.jsxs("form",{className:"relative rounded-lg border bg-background focus-within:ring-1 focus-within:ring-ring p-1",onSubmit:u,children:[l.jsx(YL,{value:o,onChange:p=>i(p.target.value),placeholder:"Adicione um comentrio...",className:"min-h-12 resize-none rounded-lg bg-background border-0 p-3 shadow-none focus-visible:ring-0"}),a.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 px-3 pb-2",children:a.map((p,m)=>l.jsxs("div",{className:"flex items-center gap-2 bg-muted px-2 py-1 rounded text-xs",children:[l.jsx(t0,{className:"h-3 w-3"}),l.jsx("span",{children:p.name}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive",onClick:()=>f(m),children:l.jsx(Ea,{className:"h-2 w-2"})})]},m))}),l.jsxs("div",{className:"flex items-center p-3 pt-0",children:[l.jsx("input",{type:"file",id:"attachment-input",className:"hidden",multiple:!0,onChange:d}),l.jsxs(G,{variant:"ghost",size:"icon",type:"button",onClick:()=>{var p;return(p=document.getElementById("attachment-input"))==null?void 0:p.click()},children:[l.jsx(t0,{className:"size-4"}),l.jsx("span",{className:"sr-only",children:"Anexar arquivo"})]}),l.jsxs(G,{type:"submit",size:"sm",className:"ml-auto gap-1.5",disabled:!o.trim()&&a.length===0,children:["Comentar",l.jsx(kJ,{className:"size-3.5"})]})]})]})]})},HZ=()=>{const{perfil:t}=jt(),[e,n]=g.useState(""),[r,s]=g.useState(null),[o,i]=g.useState(!1),[a,c]=g.useState("all"),[u,d]=g.useState("all"),[f,h]=g.useState("all"),[p,m]=g.useState("all"),[v,b]=g.useState("all"),[x,y]=g.useState({pode_fazer:!0,deve_fazer:!0,pronto_fazer:!0,em_andamento:!0,em_revisao:!0,recorrente:!0,concluido:!1,rejeitado:!1}),{tarefas:w,isLoading:S}=jo(),{perfisEquipe:j}=On(),{empresas:C}=cn(),k=g.useMemo(()=>t!=null&&t.empresa_id?w.filter(I=>I.empresa_id===t.empresa_id):[],[w,t==null?void 0:t.empresa_id]),N=g.useMemo(()=>[...k].sort((I,W)=>{const _={alta:3,media:2,baixa:1},ee=(_[W.prioridade]||0)-(_[I.prioridade]||0);return ee!==0?ee:!I.data_entrega&&!W.data_entrega?0:I.data_entrega?W.data_entrega?new Date(I.data_entrega).getTime()-new Date(W.data_entrega).getTime():-1:1}),[k]),{data:E=[]}=jn({queryKey:["all-responsaveis-client"],queryFn:async()=>{const{data:I,error:W}=await re.from("tarefa_responsaveis").select("tarefa_id, responsavel_id");if(W)throw W;return I}}),A=(I,W)=>{if(W==="all")return!0;if(!I&&W!=="all")return!1;const _=new Date(I),ee=new Date,M=_.getTime()-ee.getTime(),F=Math.ceil(M/(1e3*60*60*24));switch(W){case"overdue":return F<0;case"1day":return F>=0&&F<=1;case"2days":return F>=0&&F<=2;case"7days":return F>=0&&F<=7;case"10days":return F>=0&&F<=10;case"20days":return F>=0&&F<=20;case"30days":return F>=0&&F<=30;case"60days":return F>=0&&F<=60;case"90days":return F>=0&&F<=90;default:return!0}},$=g.useMemo(()=>N.filter(I=>{var oe;const W=!e||I.titulo.toLowerCase().includes(e.toLowerCase())||((oe=I.descricao)==null?void 0:oe.toLowerCase().includes(e.toLowerCase())),_=a==="all"||I.status===a,ee=u==="all"||I.prioridade===u,M=f==="all"||E.some(se=>se.tarefa_id===I.id&&se.responsavel_id===f),F=A(I.data_inicio,p),Y=A(I.data_entrega,v);return W&&_&&ee&&M&&F&&Y}),[N,e,a,u,f,p,v,E]),H=g.useMemo(()=>a==="all"?{pode_fazer:$.filter(I=>I.status==="pode_fazer"),deve_fazer:$.filter(I=>I.status==="deve_fazer"),pronto_fazer:$.filter(I=>I.status==="pronto_fazer"),em_andamento:$.filter(I=>I.status==="em_andamento"),em_revisao:$.filter(I=>I.status==="em_revisao"),recorrente:$.filter(I=>I.status==="recorrente"),concluido:$.filter(I=>I.status==="concluido"),rejeitado:$.filter(I=>I.status==="rejeitado")}:{pode_fazer:a==="pode_fazer"?$:[],deve_fazer:a==="deve_fazer"?$:[],pronto_fazer:a==="pronto_fazer"?$:[],em_andamento:a==="em_andamento"?$:[],em_revisao:a==="em_revisao"?$:[],recorrente:a==="recorrente"?$:[],concluido:a==="concluido"?$:[],rejeitado:a==="rejeitado"?$:[]},[$,a]),O=I=>{switch(I){case"pode_fazer":return{label:"Poderia Fazer",color:"bg-slate-500",count:H.pode_fazer.length};case"deve_fazer":return{label:"Devemos Fazer",color:"bg-orange-500",count:H.deve_fazer.length};case"pronto_fazer":return{label:"Pronto para Fazer",color:"bg-pink-500",count:H.pronto_fazer.length};case"em_andamento":return{label:"Em Progresso",color:"bg-purple-500",count:H.em_andamento.length};case"em_revisao":return{label:"Em Reviso",color:"bg-blue-500",count:H.em_revisao.length};case"recorrente":return{label:"Recorrente",color:"bg-indigo-500",count:H.recorrente.length};case"concluido":return{label:"Concludo",color:"bg-green-500",count:H.concluido.length};case"rejeitado":return{label:"Rejeitado",color:"bg-red-500",count:H.rejeitado.length};default:return{label:I,color:"bg-gray-500",count:0}}},V=I=>{switch(I){case"alta":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30";case"media":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30";case"baixa":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}},B=I=>{if(!I)return null;const W=String(I);let _=W.match(/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.\d+)?(?:[+-]\d{2}:?\d{2}|Z)?/);if(_){const[,ee,M,F,Y,oe]=_;return`${F}/${M}/${ee} ${Y}:${oe}`}if(_=W.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})/),_){const[,ee,M,F,Y,oe]=_;return`${F}/${M}/${ee} ${Y}:${oe}`}return W},K=I=>{if(!I)return"";const W=new Date,ee=new Date(I).getTime()-W.getTime(),M=Math.ceil(ee/(1e3*60*60*24));return M<=0?"text-red-600 font-bold dark:text-red-400":M<=2?"text-yellow-600 font-bold dark:text-yellow-400":"text-green-600 font-bold dark:text-green-400"},R=I=>{if(!I)return"Sem empresa";const W=C.find(_=>_.id===I);return(W==null?void 0:W.nome)||"Empresa no encontrada"},T=I=>{y(W=>({...W,[I]:!W[I]}))},D=I=>{s(I),i(!0)},L=({tarefaId:I})=>{const{responsaveis:W,isLoading:_}=Jh(I),{getNomeUsuario:ee}=On();return _?l.jsx("span",{className:"text-xs text-muted-foreground",children:"Carregando responsveis..."}):!W||W.length===0?l.jsx("span",{className:"text-xs text-muted-foreground",children:"Nenhum responsvel"}):l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(sc,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("div",{className:"flex -space-x-1",children:[W.slice(0,3).map((M,F)=>{var se,pe;const Y=((se=M.responsavel_perfil)==null?void 0:se.nome_completo)||ee(M.responsavel_id),oe=((pe=M.responsavel_perfil)==null?void 0:pe.url_avatar)||"";return l.jsxs(on,{className:"h-5 w-5 border-2 border-white dark:border-gray-800",children:[l.jsx(an,{src:oe,alt:Y}),l.jsx(ln,{className:"text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:Y&&Y.length>0?Y.charAt(0).toUpperCase():"U"})]},M.id||F)}),W.length>3&&l.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-white dark:border-gray-800 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:l.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:["+",W.length-3]})})]})]})},X=({task:I,isOpen:W,onClose:_})=>{const{comentarios:ee}=GL(I==null?void 0:I.id);if(!I)return null;const M=ee.map(F=>{var Y,oe;return{id:F.id,text:F.comentario,author:((Y=F.autor_perfil)==null?void 0:Y.nome_completo)||"Usurio",authorAvatar:((oe=F.autor_perfil)==null?void 0:oe.url_avatar)||"",date:F.criado_em,attachments:F.anexos||[]}});return l.jsx(rr,{open:W,onOpenChange:_,children:l.jsxs(In,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:"Visualizar Tarefa"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold uppercase",children:I.titulo}),l.jsx("p",{className:"text-sm text-muted-foreground",children:R(I.empresa_id)})]}),I.descricao&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Descrio"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:I.descricao})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Status"}),l.jsx(Be,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300",children:O(I.status).label})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Prioridade"}),l.jsx(Be,{className:V(I.prioridade),children:I.prioridade==="alta"?"Alta":I.prioridade==="media"?"Mdia":"Baixa"})]})]}),(I.data_inicio||I.data_entrega)&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[I.data_inicio&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Data de Incio"}),l.jsx("p",{className:"text-sm",children:B(I.data_inicio)})]}),I.data_entrega&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Data de Entrega"}),l.jsx("p",{className:`text-sm ${K(I.data_entrega)}`,children:B(I.data_entrega)})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Responsveis"}),l.jsx(L,{tarefaId:I.id})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium mb-2",children:"Comentrios"}),l.jsx(QL,{comments:M,onAddComment:()=>{},onDeleteComment:()=>{},currentUser:{id:(t==null?void 0:t.id)||"",name:(t==null?void 0:t.nome_completo)||"",avatar:(t==null?void 0:t.url_avatar)||""},readOnly:!0})]})]})]})})};return S?l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("div",{className:"flex-1 overflow-auto p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Minhas Tarefas"}),l.jsx("p",{className:"text-muted-foreground",children:"Acompanhe o progresso das suas tarefas"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar tarefas...",value:e,onChange:I=>n(I.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(Oe,{value:a,onValueChange:c,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por status"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os status"}),l.jsx(z,{value:"pode_fazer",children:"Poderia Fazer"}),l.jsx(z,{value:"deve_fazer",children:"Devemos Fazer"}),l.jsx(z,{value:"pronto_fazer",children:"Pronto para Fazer"}),l.jsx(z,{value:"em_andamento",children:"Em Progresso"}),l.jsx(z,{value:"em_revisao",children:"Em Reviso"}),l.jsx(z,{value:"recorrente",children:"Recorrente"}),l.jsx(z,{value:"concluido",children:"Concludo"}),l.jsx(z,{value:"rejeitado",children:"Rejeitado"})]})]}),l.jsxs(Oe,{value:u,onValueChange:d,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as prioridades"}),l.jsx(z,{value:"alta",children:"Alta"}),l.jsx(z,{value:"media",children:"Mdia"}),l.jsx(z,{value:"baixa",children:"Baixa"})]})]}),l.jsxs(Oe,{value:f,onValueChange:h,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por responsvel"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os responsveis"}),j.map(I=>l.jsx(z,{value:I.id,children:I.nome_completo},I.id))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(Oe,{value:p,onValueChange:m,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por data de incio"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as datas de incio"}),l.jsx(z,{value:"overdue",children:"Atrasado"}),l.jsx(z,{value:"1day",children:"At 1 dia"}),l.jsx(z,{value:"2days",children:"At 2 dias"}),l.jsx(z,{value:"7days",children:"At 7 dias"}),l.jsx(z,{value:"10days",children:"At 10 dias"}),l.jsx(z,{value:"20days",children:"At 20 dias"}),l.jsx(z,{value:"30days",children:"At 30 dias"}),l.jsx(z,{value:"60days",children:"At 60 dias"}),l.jsx(z,{value:"90days",children:"At 90 dias"})]})]}),l.jsxs(Oe,{value:v,onValueChange:b,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por data de entrega"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as datas de entrega"}),l.jsx(z,{value:"overdue",children:"Atrasado"}),l.jsx(z,{value:"1day",children:"At 1 dia"}),l.jsx(z,{value:"2days",children:"At 2 dias"}),l.jsx(z,{value:"7days",children:"At 7 dias"}),l.jsx(z,{value:"10days",children:"At 10 dias"}),l.jsx(z,{value:"20days",children:"At 20 dias"}),l.jsx(z,{value:"30days",children:"At 30 dias"}),l.jsx(z,{value:"60days",children:"At 60 dias"}),l.jsx(z,{value:"90days",children:"At 90 dias"})]})]})]}),l.jsx("div",{className:"space-y-6",children:Object.entries(H).map(([I,W])=>{const _=O(I),ee=x[I];return a!=="all"&&a!==I?null:l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{className:"cursor-pointer hover:bg-muted/50 dark:hover:bg-muted/20",onClick:()=>T(I),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${_.color}`}),l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:_.label}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:_.count})]}),ee?l.jsx(Ng,{className:"h-4 w-4 text-muted-foreground"}):l.jsx(ih,{className:"h-4 w-4 text-muted-foreground"})]})}),ee&&l.jsx(Ae,{children:l.jsx("div",{className:"space-y-3 min-h-[80px] p-4 rounded-lg border-2 border-dashed border-muted-foreground/20",children:W.length===0?l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx("div",{className:"text-lg mb-2",children:""}),l.jsx("div",{children:"Nenhuma tarefa neste status"})]}):W.map(M=>l.jsx("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/50 dark:hover:bg-muted/20 bg-card dark:bg-card transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"font-medium text-foreground",children:R(M.empresa_id)})]}),l.jsx("h4",{className:"font-semibold text-foreground uppercase",children:M.titulo}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[l.jsx(Be,{className:V(M.prioridade),children:M.prioridade==="alta"?"Alta":M.prioridade==="media"?"Mdia":"Baixa"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx(L,{tarefaId:M.id}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:"text-muted-foreground",children:["Atualizado em: ",B(M.atualizado_em)]})]})]}),l.jsx("div",{className:"flex flex-col gap-1",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap ml-8",children:[M.data_inicio&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${M.status==="recorrente"||M.status==="concluido"?"text-gray-400":K(M.data_inicio)}`,children:["Incio: ",B(M.data_inicio)]})]}),M.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${M.status==="concluido"?"text-gray-400":K(M.data_entrega)}`,children:["Entrega: ",B(M.data_entrega)]})]})]})})]})]}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>D(M),className:"text-muted-foreground hover:text-foreground",children:l.jsx(Vl,{className:"h-4 w-4"})})]})},M.id))})})]},I)})})]})})}),l.jsx(X,{task:r,isOpen:o,onClose:()=>{i(!1),s(null)}})]})};var u0="rovingFocusGroup.onEntryFocus",WZ={bubbles:!1,cancelable:!0},Xh="RovingFocusGroup",[s1,JL,qZ]=XC(Xh),[KZ,Sy]=nr(Xh,[qZ]),[GZ,YZ]=KZ(Xh),XL=g.forwardRef((t,e)=>l.jsx(s1.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx(s1.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(QZ,{...t,ref:e})})}));XL.displayName=Xh;var QZ=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,h=g.useRef(null),p=Ue(e,h),m=hy(o),[v,b]=ni({prop:i,defaultProp:a??null,onChange:c,caller:Xh}),[x,y]=g.useState(!1),w=Ts(u),S=JL(n),j=g.useRef(!1),[C,k]=g.useState(0);return g.useEffect(()=>{const N=h.current;if(N)return N.addEventListener(u0,w),()=>N.removeEventListener(u0,w)},[w]),l.jsx(GZ,{scope:n,orientation:r,dir:m,loop:s,currentTabStopId:v,onItemFocus:g.useCallback(N=>b(N),[b]),onItemShiftTab:g.useCallback(()=>y(!0),[]),onFocusableItemAdd:g.useCallback(()=>k(N=>N+1),[]),onFocusableItemRemove:g.useCallback(()=>k(N=>N-1),[]),children:l.jsx(je.div,{tabIndex:x||C===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{j.current=!0}),onFocus:le(t.onFocus,N=>{const E=!j.current;if(N.target===N.currentTarget&&E&&!x){const A=new CustomEvent(u0,WZ);if(N.currentTarget.dispatchEvent(A),!A.defaultPrevented){const $=S().filter(K=>K.focusable),H=$.find(K=>K.active),O=$.find(K=>K.id===v),B=[H,O,...$].filter(Boolean).map(K=>K.ref.current);t4(B,d)}}j.current=!1}),onBlur:le(t.onBlur,()=>y(!1))})})}),ZL="RovingFocusGroupItem",e4=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,children:i,...a}=t,c=Es(),u=o||c,d=YZ(ZL,n),f=d.currentTabStopId===u,h=JL(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:v}=d;return g.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),l.jsx(s1.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:le(t.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:le(t.onFocus,()=>d.onItemFocus(u)),onKeyDown:le(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=ZZ(b,d.orientation,d.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=h().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const S=w.indexOf(b.currentTarget);w=d.loop?eee(w,S+1):w.slice(S+1)}setTimeout(()=>t4(w))}}),children:typeof i=="function"?i({isCurrentTabStop:f,hasTabStop:v!=null}):i})})});e4.displayName=ZL;var JZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XZ(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ZZ(t,e,n){const r=XZ(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return JZ[r]}function t4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function eee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var n4=XL,r4=e4,Cy="Tabs",[tee,kge]=nr(Cy,[Sy]),s4=Sy(),[nee,uj]=tee(Cy),o4=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:i="horizontal",dir:a,activationMode:c="automatic",...u}=t,d=hy(a),[f,h]=ni({prop:r,onChange:s,defaultProp:o??"",caller:Cy});return l.jsx(nee,{scope:n,baseId:Es(),value:f,onValueChange:h,orientation:i,dir:d,activationMode:c,children:l.jsx(je.div,{dir:d,"data-orientation":i,...u,ref:e})})});o4.displayName=Cy;var i4="TabsList",a4=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=uj(i4,n),i=s4(n);return l.jsx(n4,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:r,children:l.jsx(je.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});a4.displayName=i4;var l4="TabsTrigger",c4=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,i=uj(l4,n),a=s4(n),c=f4(i.baseId,r),u=h4(i.baseId,r),d=r===i.value;return l.jsx(r4,{asChild:!0,...a,focusable:!s,active:d,children:l.jsx(je.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:le(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:le(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const f=i.activationMode!=="manual";!d&&!s&&f&&i.onValueChange(r)})})})});c4.displayName=l4;var u4="TabsContent",d4=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...i}=t,a=uj(u4,n),c=f4(a.baseId,r),u=h4(a.baseId,r),d=r===a.value,f=g.useRef(d);return g.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),l.jsx(Or,{present:s||d,children:({present:h})=>l.jsx(je.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});d4.displayName=u4;function f4(t,e){return`${t}-trigger-${e}`}function h4(t,e){return`${t}-content-${e}`}var ree=o4,p4=a4,m4=c4,g4=d4;const dj=ree,jy=g.forwardRef(({className:t,...e},n)=>l.jsx(p4,{ref:n,className:ue("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));jy.displayName=p4.displayName;const lh=g.forwardRef(({className:t,...e},n)=>l.jsx(m4,{ref:n,className:ue("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));lh.displayName=m4.displayName;const ch=g.forwardRef(({className:t,...e},n)=>l.jsx(g4,{ref:n,className:ue("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ch.displayName=g4.displayName;var o1=["Enter"," "],see=["ArrowDown","PageUp","Home"],v4=["ArrowUp","PageDown","End"],oee=[...see,...v4],iee={ltr:[...o1,"ArrowRight"],rtl:[...o1,"ArrowLeft"]},aee={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zh="Menu",[uh,lee,cee]=XC(Zh),[ac,y4]=nr(Zh,[cee,Da,Sy]),ky=Da(),x4=Sy(),[uee,lc]=ac(Zh),[dee,ep]=ac(Zh),b4=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:i=!0}=t,a=ky(e),[c,u]=g.useState(null),d=g.useRef(!1),f=Ts(o),h=hy(s);return g.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),l.jsx(nC,{...a,children:l.jsx(uee,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:l.jsx(dee,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:i,children:r})})})};b4.displayName=Zh;var fee="MenuAnchor",fj=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=ky(n);return l.jsx($h,{...s,...r,ref:e})});fj.displayName=fee;var hj="MenuPortal",[hee,w4]=ac(hj,{forceMount:void 0}),S4=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=lc(hj,e);return l.jsx(hee,{scope:e,forceMount:n,children:l.jsx(Or,{present:n||o.open,children:l.jsx(zh,{asChild:!0,container:s,children:r})})})};S4.displayName=hj;var es="MenuContent",[pee,pj]=ac(es),C4=g.forwardRef((t,e)=>{const n=w4(es,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=lc(es,t.__scopeMenu),i=ep(es,t.__scopeMenu);return l.jsx(uh.Provider,{scope:t.__scopeMenu,children:l.jsx(Or,{present:r||o.open,children:l.jsx(uh.Slot,{scope:t.__scopeMenu,children:i.modal?l.jsx(mee,{...s,ref:e}):l.jsx(gee,{...s,ref:e})})})})}),mee=g.forwardRef((t,e)=>{const n=lc(es,t.__scopeMenu),r=g.useRef(null),s=Ue(e,r);return g.useEffect(()=>{const o=r.current;if(o)return my(o)},[]),l.jsx(mj,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),gee=g.forwardRef((t,e)=>{const n=lc(es,t.__scopeMenu);return l.jsx(mj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),vee=Sa("MenuContent.ScrollLock"),mj=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...v}=t,b=lc(es,n),x=ep(es,n),y=ky(n),w=x4(n),S=lee(n),[j,C]=g.useState(null),k=g.useRef(null),N=Ue(e,k,b.onContentChange),E=g.useRef(0),A=g.useRef(""),$=g.useRef(0),H=g.useRef(null),O=g.useRef("right"),V=g.useRef(0),B=m?Yh:g.Fragment,K=m?{as:vee,allowPinchZoom:!0}:void 0,R=D=>{var F,Y;const L=A.current+D,X=S().filter(oe=>!oe.disabled),I=document.activeElement,W=(F=X.find(oe=>oe.ref.current===I))==null?void 0:F.textValue,_=X.map(oe=>oe.textValue),ee=Tee(_,L,W),M=(Y=X.find(oe=>oe.textValue===ee))==null?void 0:Y.ref.current;(function oe(se){A.current=se,window.clearTimeout(E.current),se!==""&&(E.current=window.setTimeout(()=>oe(""),1e3))})(L),M&&setTimeout(()=>M.focus())};g.useEffect(()=>()=>window.clearTimeout(E.current),[]),py();const T=g.useCallback(D=>{var X,I;return O.current===((X=H.current)==null?void 0:X.side)&&Aee(D,(I=H.current)==null?void 0:I.area)},[]);return l.jsx(pee,{scope:n,searchRef:A,onItemEnter:g.useCallback(D=>{T(D)&&D.preventDefault()},[T]),onItemLeave:g.useCallback(D=>{var L;T(D)||((L=k.current)==null||L.focus(),C(null))},[T]),onTriggerLeave:g.useCallback(D=>{T(D)&&D.preventDefault()},[T]),pointerGraceTimerRef:$,onPointerGraceIntentChange:g.useCallback(D=>{H.current=D},[]),children:l.jsx(B,{...K,children:l.jsx(Gh,{asChild:!0,trapped:s,onMountAutoFocus:le(o,D=>{var L;D.preventDefault(),(L=k.current)==null||L.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:l.jsx(sd,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:l.jsx(n4,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:C,onEntryFocus:le(c,D=>{x.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Jv,{role:"menu","aria-orientation":"vertical","data-state":$4(b.open),"data-radix-menu-content":"",dir:x.dir,...y,...v,ref:N,style:{outline:"none",...v.style},onKeyDown:le(v.onKeyDown,D=>{const X=D.target.closest("[data-radix-menu-content]")===D.currentTarget,I=D.ctrlKey||D.altKey||D.metaKey,W=D.key.length===1;X&&(D.key==="Tab"&&D.preventDefault(),!I&&W&&R(D.key));const _=k.current;if(D.target!==_||!oee.includes(D.key))return;D.preventDefault();const M=S().filter(F=>!F.disabled).map(F=>F.ref.current);v4.includes(D.key)&&M.reverse(),Eee(M)}),onBlur:le(t.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(E.current),A.current="")}),onPointerMove:le(t.onPointerMove,dh(D=>{const L=D.target,X=V.current!==D.clientX;if(D.currentTarget.contains(L)&&X){const I=D.clientX>V.current?"right":"left";O.current=I,V.current=D.clientX}}))})})})})})})});C4.displayName=es;var yee="MenuGroup",gj=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(je.div,{role:"group",...r,ref:e})});gj.displayName=yee;var xee="MenuLabel",j4=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(je.div,{...r,ref:e})});j4.displayName=xee;var Dg="MenuItem",CT="menu.itemSelect",Ny=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=g.useRef(null),i=ep(Dg,t.__scopeMenu),a=pj(Dg,t.__scopeMenu),c=Ue(e,o),u=g.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const h=new CustomEvent(CT,{bubbles:!0,cancelable:!0});f.addEventListener(CT,p=>r==null?void 0:r(p),{once:!0}),eD(f,h),h.defaultPrevented?u.current=!1:i.onClose()}};return l.jsx(k4,{...s,ref:c,disabled:n,onClick:le(t.onClick,d),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),u.current=!0},onPointerUp:le(t.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:le(t.onKeyDown,f=>{const h=a.searchRef.current!=="";n||h&&f.key===" "||o1.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Ny.displayName=Dg;var k4=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,i=pj(Dg,n),a=x4(n),c=g.useRef(null),u=Ue(e,c),[d,f]=g.useState(!1),[h,p]=g.useState("");return g.useEffect(()=>{const m=c.current;m&&p((m.textContent??"").trim())},[o.children]),l.jsx(uh.ItemSlot,{scope:n,disabled:r,textValue:s??h,children:l.jsx(r4,{asChild:!0,...a,focusable:!r,children:l.jsx(je.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:le(t.onPointerMove,dh(m=>{r?i.onItemLeave(m):(i.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(t.onPointerLeave,dh(m=>i.onItemLeave(m))),onFocus:le(t.onFocus,()=>f(!0)),onBlur:le(t.onBlur,()=>f(!1))})})})}),bee="MenuCheckboxItem",N4=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return l.jsx(A4,{scope:t.__scopeMenu,checked:n,children:l.jsx(Ny,{role:"menuitemcheckbox","aria-checked":Rg(n)?"mixed":n,...s,ref:e,"data-state":yj(n),onSelect:le(s.onSelect,()=>r==null?void 0:r(Rg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});N4.displayName=bee;var E4="MenuRadioGroup",[wee,See]=ac(E4,{value:void 0,onValueChange:()=>{}}),_4=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=Ts(r);return l.jsx(wee,{scope:t.__scopeMenu,value:n,onValueChange:o,children:l.jsx(gj,{...s,ref:e})})});_4.displayName=E4;var T4="MenuRadioItem",M4=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=See(T4,t.__scopeMenu),o=n===s.value;return l.jsx(A4,{scope:t.__scopeMenu,checked:o,children:l.jsx(Ny,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":yj(o),onSelect:le(r.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});M4.displayName=T4;var vj="MenuItemIndicator",[A4,Cee]=ac(vj,{checked:!1}),P4=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=Cee(vj,n);return l.jsx(Or,{present:r||Rg(o.checked)||o.checked===!0,children:l.jsx(je.span,{...s,ref:e,"data-state":yj(o.checked)})})});P4.displayName=vj;var jee="MenuSeparator",D4=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return l.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});D4.displayName=jee;var kee="MenuArrow",R4=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=ky(n);return l.jsx(Xv,{...s,...r,ref:e})});R4.displayName=kee;var Nee="MenuSub",[Nge,O4]=ac(Nee),Yd="MenuSubTrigger",I4=g.forwardRef((t,e)=>{const n=lc(Yd,t.__scopeMenu),r=ep(Yd,t.__scopeMenu),s=O4(Yd,t.__scopeMenu),o=pj(Yd,t.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),c(null)}},[a,c]),l.jsx(fj,{asChild:!0,...u,children:l.jsx(k4,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":$4(n.open),...t,ref:Kv(e,s.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(t.onPointerMove,dh(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(t.onPointerLeave,dh(f=>{var p,m;d();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const v=(m=n.content)==null?void 0:m.dataset.side,b=v==="right",x=b?-5:5,y=h[b?"left":"right"],w=h[b?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:y,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:y,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:le(t.onKeyDown,f=>{var p;const h=o.searchRef.current!=="";t.disabled||h&&f.key===" "||iee[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});I4.displayName=Yd;var L4="MenuSubContent",F4=g.forwardRef((t,e)=>{const n=w4(es,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=lc(es,t.__scopeMenu),i=ep(es,t.__scopeMenu),a=O4(L4,t.__scopeMenu),c=g.useRef(null),u=Ue(e,c);return l.jsx(uh.Provider,{scope:t.__scopeMenu,children:l.jsx(Or,{present:r||o.open,children:l.jsx(uh.Slot,{scope:t.__scopeMenu,children:l.jsx(mj,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;i.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(t.onFocusOutside,d=>{d.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:le(t.onEscapeKeyDown,d=>{i.onClose(),d.preventDefault()}),onKeyDown:le(t.onKeyDown,d=>{var p;const f=d.currentTarget.contains(d.target),h=aee[i.dir].includes(d.key);f&&h&&(o.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});F4.displayName=L4;function $4(t){return t?"open":"closed"}function Rg(t){return t==="indeterminate"}function yj(t){return Rg(t)?"indeterminate":t?"checked":"unchecked"}function Eee(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function _ee(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Tee(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let i=_ee(t,Math.max(o,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Mee(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const a=e[o],c=e[i],u=a.x,d=a.y,f=c.x,h=c.y;d>r!=h>r&&n<(f-u)*(r-d)/(h-d)+u&&(s=!s)}return s}function Aee(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Mee(n,e)}function dh(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Pee=b4,Dee=fj,Ree=S4,Oee=C4,Iee=gj,Lee=j4,Fee=Ny,$ee=N4,zee=_4,Bee=M4,Vee=P4,Uee=D4,Hee=R4,Wee=I4,qee=F4,Ey="DropdownMenu",[Kee,Ege]=nr(Ey,[y4]),sr=y4(),[Gee,z4]=Kee(Ey),B4=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:i,modal:a=!0}=t,c=sr(e),u=g.useRef(null),[d,f]=ni({prop:s,defaultProp:o??!1,onChange:i,caller:Ey});return l.jsx(Gee,{scope:e,triggerId:Es(),triggerRef:u,contentId:Es(),open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),modal:a,children:l.jsx(Pee,{...c,open:d,onOpenChange:f,dir:r,modal:a,children:n})})};B4.displayName=Ey;var V4="DropdownMenuTrigger",U4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=z4(V4,n),i=sr(n);return l.jsx(Dee,{asChild:!0,...i,children:l.jsx(je.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Kv(e,o.triggerRef),onPointerDown:le(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:le(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});U4.displayName=V4;var Yee="DropdownMenuPortal",H4=t=>{const{__scopeDropdownMenu:e,...n}=t,r=sr(e);return l.jsx(Ree,{...r,...n})};H4.displayName=Yee;var W4="DropdownMenuContent",q4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=z4(W4,n),o=sr(n),i=g.useRef(!1);return l.jsx(Oee,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:le(t.onCloseAutoFocus,a=>{var c;i.current||(c=s.triggerRef.current)==null||c.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:le(t.onInteractOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});q4.displayName=W4;var Qee="DropdownMenuGroup",Jee=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Iee,{...s,...r,ref:e})});Jee.displayName=Qee;var Xee="DropdownMenuLabel",K4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Lee,{...s,...r,ref:e})});K4.displayName=Xee;var Zee="DropdownMenuItem",G4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Fee,{...s,...r,ref:e})});G4.displayName=Zee;var ete="DropdownMenuCheckboxItem",Y4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx($ee,{...s,...r,ref:e})});Y4.displayName=ete;var tte="DropdownMenuRadioGroup",nte=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(zee,{...s,...r,ref:e})});nte.displayName=tte;var rte="DropdownMenuRadioItem",Q4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Bee,{...s,...r,ref:e})});Q4.displayName=rte;var ste="DropdownMenuItemIndicator",J4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Vee,{...s,...r,ref:e})});J4.displayName=ste;var ote="DropdownMenuSeparator",X4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Uee,{...s,...r,ref:e})});X4.displayName=ote;var ite="DropdownMenuArrow",ate=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Hee,{...s,...r,ref:e})});ate.displayName=ite;var lte="DropdownMenuSubTrigger",Z4=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(Wee,{...s,...r,ref:e})});Z4.displayName=lte;var cte="DropdownMenuSubContent",e3=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=sr(n);return l.jsx(qee,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});e3.displayName=cte;var ute=B4,dte=U4,fte=H4,t3=q4,n3=K4,r3=G4,s3=Y4,o3=Q4,i3=J4,a3=X4,l3=Z4,c3=e3;const u3=ute,d3=dte,hte=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>l.jsxs(l3,{ref:s,className:ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,l.jsx(vI,{className:"ml-auto h-4 w-4"})]}));hte.displayName=l3.displayName;const pte=g.forwardRef(({className:t,...e},n)=>l.jsx(c3,{ref:n,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));pte.displayName=c3.displayName;const xj=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(fte,{children:l.jsx(t3,{ref:r,sideOffset:e,className:ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));xj.displayName=t3.displayName;const fh=g.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(r3,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));fh.displayName=r3.displayName;const mte=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>l.jsxs(s3,{ref:s,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(i3,{children:l.jsx(Ar,{className:"h-4 w-4"})})}),e]}));mte.displayName=s3.displayName;const gte=g.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(o3,{ref:r,className:ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(i3,{children:l.jsx(CJ,{className:"h-2 w-2 fill-current"})})}),e]}));gte.displayName=o3.displayName;const vte=g.forwardRef(({className:t,inset:e,...n},r)=>l.jsx(n3,{ref:r,className:ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));vte.displayName=n3.displayName;const yte=g.forwardRef(({className:t,...e},n)=>l.jsx(a3,{ref:n,className:ue("-mx-1 my-1 h-px bg-muted",t),...e}));yte.displayName=a3.displayName;var _y="Checkbox",[xte,_ge]=nr(_y),[bte,bj]=xte(_y);function wte(t){const{__scopeCheckbox:e,checked:n,children:r,defaultChecked:s,disabled:o,form:i,name:a,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=t,[h,p]=ni({prop:n,defaultProp:s??!1,onChange:c,caller:_y}),[m,v]=g.useState(null),[b,x]=g.useState(null),y=g.useRef(!1),w=m?!!i||!!m.closest("form"):!0,S={checked:h,disabled:o,setChecked:p,control:m,setControl:v,name:a,form:i,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:pa(s)?!1:s,isFormControl:w,bubbleInput:b,setBubbleInput:x};return l.jsx(bte,{scope:e,...S,children:Ste(f)?f(S):r})}var f3="CheckboxTrigger",h3=g.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...r},s)=>{const{control:o,value:i,disabled:a,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:m}=bj(f3,t),v=Ue(s,d),b=g.useRef(c);return g.useEffect(()=>{const x=o==null?void 0:o.form;if(x){const y=()=>f(b.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[o,f]),l.jsx(je.button,{type:"button",role:"checkbox","aria-checked":pa(c)?"mixed":c,"aria-required":u,"data-state":y3(c),"data-disabled":a?"":void 0,disabled:a,value:i,...r,ref:v,onKeyDown:le(e,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:le(n,x=>{f(y=>pa(y)?!0:!y),m&&p&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});h3.displayName=f3;var wj=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:c,onCheckedChange:u,form:d,...f}=t;return l.jsx(wte,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:a,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>l.jsxs(l.Fragment,{children:[l.jsx(h3,{...f,ref:e,__scopeCheckbox:n}),h&&l.jsx(v3,{__scopeCheckbox:n})]})})});wj.displayName=_y;var p3="CheckboxIndicator",m3=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,o=bj(p3,n);return l.jsx(Or,{present:r||pa(o.checked)||o.checked===!0,children:l.jsx(je.span,{"data-state":y3(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});m3.displayName=p3;var g3="CheckboxBubbleInput",v3=g.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:i,required:a,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:p}=bj(g3,t),m=Ue(n,p),v=ZC(o),b=ZS(r);g.useEffect(()=>{const y=h;if(!y)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,C=!s.current;if(v!==o&&j){const k=new Event("click",{bubbles:C});y.indeterminate=pa(o),j.call(y,pa(o)?!1:o),y.dispatchEvent(k)}},[h,v,o,s]);const x=g.useRef(pa(o)?!1:o);return l.jsx(je.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:a,disabled:c,name:u,value:d,form:f,...e,tabIndex:-1,ref:m,style:{...e.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});v3.displayName=g3;function Ste(t){return typeof t=="function"}function pa(t){return t==="indeterminate"}function y3(t){return pa(t)?"indeterminate":t?"checked":"unchecked"}const Nr=g.forwardRef(({className:t,...e},n)=>l.jsx(wj,{ref:n,className:ue("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:l.jsx(m3,{className:ue("flex items-center justify-center text-current"),children:l.jsx(Ar,{className:"h-4 w-4"})})}));Nr.displayName=wj.displayName;var Cte="Label",x3=g.forwardRef((t,e)=>l.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));x3.displayName=Cte;var b3=x3;const jte=JC("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=g.forwardRef(({className:t,...e},n)=>l.jsx(b3,{ref:n,className:ue(jte(),t),...e}));Q.displayName=b3.displayName;const w3=({isOpen:t,onClose:e,onSuccess:n,allowCompanySelection:r=!1})=>{const{perfil:s}=jt(),{criarItem:o}=oc(),{empresas:i}=cn(),[a,c]=g.useState({titulo:"",descricao:"",prioridade:"media",empresa_id:(s==null?void 0:s.empresa_id)||"",data_entrega:""}),[u,d]=g.useState(!1),f=async p=>{if(p.preventDefault(),!a.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!a.empresa_id){q.error("Selecione uma empresa");return}d(!0);try{const m={titulo:a.titulo.trim(),descricao:a.descricao.trim()||null,empresa_id:a.empresa_id,tipo:"pendencia_cliente",criado_por:s==null?void 0:s.id,concluido:!1,prioridade:a.prioridade,data_entrega:a.data_entrega||null};await o(m),q.success("Checklist do cliente criado com sucesso!"),c({titulo:"",descricao:"",prioridade:"media",empresa_id:(s==null?void 0:s.empresa_id)||"",data_entrega:""}),n(),e()}catch(m){console.error("Erro ao criar checklist:",m),q.error("Erro ao criar checklist. Verifique os dados e tente novamente.")}finally{d(!1)}},h=()=>{c({titulo:"",descricao:"",prioridade:"media",empresa_id:(s==null?void 0:s.empresa_id)||"",data_entrega:""}),e()};return l.jsx(rr,{open:t,onOpenChange:h,children:l.jsxs(In,{className:"sm:max-w-[500px] dark:bg-card dark:border-border",children:[l.jsx(Ln,{children:l.jsx(Fn,{className:"text-foreground",children:"Nova Checklist Cliente"})}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",className:"text-foreground",children:"Empresa *"}),l.jsxs(Oe,{value:a.empresa_id,onValueChange:r?p=>c(m=>({...m,empresa_id:p})):()=>{},required:!0,disabled:!r,children:[l.jsx(Pe,{className:r?"":"bg-muted",children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:(r?i:i.filter(p=>p.id===(s==null?void 0:s.empresa_id))).map(p=>l.jsx(z,{value:p.id,children:p.nome},p.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",className:"text-foreground",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:a.titulo,onChange:p=>c(m=>({...m,titulo:p.target.value})),placeholder:"Ttulo do checklist",required:!0,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",className:"text-foreground",children:"Descrio"}),l.jsx(ic,{id:"descricao",value:a.descricao,onChange:p=>c(m=>({...m,descricao:p.target.value})),placeholder:"Detalhes do checklist",rows:3,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",className:"text-foreground",children:"Prioridade"}),l.jsxs(Oe,{value:a.prioridade,onValueChange:p=>c(m=>({...m,prioridade:p})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",className:"text-foreground",children:"Data de Entrega"}),l.jsx(we,{id:"data_entrega",type:"datetime-local",value:a.data_entrega,onChange:p=>c(m=>({...m,data_entrega:p.target.value})),className:"dark:bg-input dark:border-border"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:h,className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:u,className:"bg-blue-500 hover:bg-blue-600 text-white",children:u?"Salvando...":"Criar Checklist"})]})]})]})})},S3=({isOpen:t,onClose:e,item:n,onSuccess:r,isClientModal:s=!1})=>{const{perfil:o}=jt(),{empresas:i}=cn(),{atualizarItem:a}=oc(),[c,u]=g.useState({titulo:"",descricao:"",tipo:"pendencia_dmm",empresa_id:"",prioridade:"media",data_entrega:""}),[d,f]=g.useState(!1);g.useEffect(()=>{n&&u({titulo:n.titulo||"",descricao:n.descricao||"",tipo:n.tipo||"pendencia_dmm",empresa_id:n.empresa_id||"",prioridade:n.prioridade||"media",data_entrega:n.data_entrega?new Date(n.data_entrega).toISOString().slice(0,16):""})},[n]);const h=async p=>{if(p.preventDefault(),!c.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!c.empresa_id){q.error("Selecione uma empresa");return}f(!0);try{const m={id:n.id,titulo:c.titulo.trim(),descricao:c.descricao.trim()||null,tipo:c.tipo,empresa_id:c.empresa_id,prioridade:c.prioridade,data_entrega:c.data_entrega?new Date(c.data_entrega).toISOString():null,atualizado_em:new Date().toISOString()};console.log("Enviando dados para atualizao:",m),await a(m),q.success("Item atualizado com sucesso!"),r(),e()}catch(m){console.error("Erro ao atualizar item:",m),q.error("Erro ao atualizar item. Verifique os dados e tente novamente.")}finally{f(!1)}};return n?l.jsx(rr,{open:t,onOpenChange:e,children:l.jsxs(In,{className:"sm:max-w-[500px] dark:bg-card dark:border-border",children:[l.jsx(Ln,{children:l.jsx(Fn,{className:"text-foreground",children:"Editar Item do Checklist"})}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",className:"text-foreground",children:"Empresa *"}),l.jsxs(Oe,{value:c.empresa_id,onValueChange:p=>u(m=>({...m,empresa_id:p})),required:!0,disabled:s&&!!(o!=null&&o.empresa_id),children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:s&&(o!=null&&o.empresa_id)?i.filter(p=>p.id===o.empresa_id).map(p=>l.jsx(z,{value:p.id,children:p.nome},p.id)):i.map(p=>l.jsx(z,{value:p.id,children:p.nome},p.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",className:"text-foreground",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:c.titulo,onChange:p=>u(m=>({...m,titulo:p.target.value})),placeholder:"Digite o ttulo do item",required:!0,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",className:"text-foreground",children:"Descrio"}),l.jsx(ic,{id:"descricao",value:c.descricao,onChange:p=>u(m=>({...m,descricao:p.target.value})),placeholder:"Digite a descrio do item (opcional)",rows:3,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"tipo",className:"text-foreground",children:"Tipo"}),l.jsxs(Oe,{value:c.tipo,onValueChange:p=>u(m=>({...m,tipo:p})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"pendencia_dmm",children:"Pendncia DMM"}),l.jsx(z,{value:"pendencia_cliente",children:"Pendncia Cliente"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",className:"text-foreground",children:"Prioridade"}),l.jsxs(Oe,{value:c.prioridade,onValueChange:p=>u(m=>({...m,prioridade:p})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",className:"text-foreground",children:"Data de Entrega"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_entrega",type:"datetime-local",value:c.data_entrega,onChange:p=>u(m=>({...m,data_entrega:p.target.value})),className:"dark:bg-input dark:border-border flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>u(p=>({...p,data_entrega:""})),className:"px-3",children:"Limpar"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:e,className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:d,className:"bg-green-600 hover:bg-green-700 text-white",children:d?"Salvando...":"Salvar"})]})]})]})}):null};var C3="AlertDialog",[kte,Tge]=nr(C3,[TL]),ci=TL(),j3=t=>{const{__scopeAlertDialog:e,...n}=t,r=ci(e);return l.jsx(WL,{...r,...n,modal:!0})};j3.displayName=C3;var Nte="AlertDialogTrigger",Ete=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ci(n);return l.jsx(BZ,{...s,...r,ref:e})});Ete.displayName=Nte;var _te="AlertDialogPortal",k3=t=>{const{__scopeAlertDialog:e,...n}=t,r=ci(e);return l.jsx(qL,{...r,...n})};k3.displayName=_te;var Tte="AlertDialogOverlay",N3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ci(n);return l.jsx(oj,{...s,...r,ref:e})});N3.displayName=Tte;var fu="AlertDialogContent",[Mte,Ate]=kte(fu),Pte=ZP("AlertDialogContent"),E3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,o=ci(n),i=g.useRef(null),a=Ue(e,i),c=g.useRef(null);return l.jsx(LZ,{contentName:fu,titleName:_3,docsSlug:"alert-dialog",children:l.jsx(Mte,{scope:n,cancelRef:c,children:l.jsxs(ij,{role:"alertdialog",...o,...s,ref:a,onOpenAutoFocus:le(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(Pte,{children:r}),l.jsx(Rte,{contentRef:i})]})})})});E3.displayName=fu;var _3="AlertDialogTitle",T3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ci(n);return l.jsx(aj,{...s,...r,ref:e})});T3.displayName=_3;var M3="AlertDialogDescription",A3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ci(n);return l.jsx(lj,{...s,...r,ref:e})});A3.displayName=M3;var Dte="AlertDialogAction",P3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ci(n);return l.jsx(cj,{...s,...r,ref:e})});P3.displayName=Dte;var D3="AlertDialogCancel",R3=g.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Ate(D3,n),o=ci(n),i=Ue(e,s);return l.jsx(cj,{...o,...r,ref:i})});R3.displayName=D3;var Rte=({contentRef:t})=>{const e=`\`${fu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fu}\` by passing a \`${M3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return g.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Ote=j3,Ite=k3,O3=N3,I3=E3,L3=P3,F3=R3,$3=T3,z3=A3;const ai=Ote,Lte=Ite,B3=g.forwardRef(({className:t,...e},n)=>l.jsx(O3,{className:ue("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));B3.displayName=O3.displayName;const uo=g.forwardRef(({className:t,...e},n)=>l.jsxs(Lte,{children:[l.jsx(B3,{}),l.jsx(I3,{ref:n,className:ue("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));uo.displayName=I3.displayName;const fo=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col space-y-2 text-center sm:text-left",t),...e});fo.displayName="AlertDialogHeader";const ho=({className:t,...e})=>l.jsx("div",{className:ue("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ho.displayName="AlertDialogFooter";const po=g.forwardRef(({className:t,...e},n)=>l.jsx($3,{ref:n,className:ue("text-lg font-semibold",t),...e}));po.displayName=$3.displayName;const mo=g.forwardRef(({className:t,...e},n)=>l.jsx(z3,{ref:n,className:ue("text-sm text-muted-foreground",t),...e}));mo.displayName=z3.displayName;const go=g.forwardRef(({className:t,...e},n)=>l.jsx(L3,{ref:n,className:ue(ah(),t),...e}));go.displayName=L3.displayName;const vo=g.forwardRef(({className:t,...e},n)=>l.jsx(F3,{ref:n,className:ue(ah({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));vo.displayName=F3.displayName;const Fte=()=>{const{perfil:t}=jt(),[e,n]=g.useState(""),[r,s]=g.useState(!1),[o,i]=g.useState(!1),[a,c]=g.useState(null),[u,d]=g.useState(!1),[f,h]=g.useState(null);g.useState("dmm");const[p,m]=g.useState("all"),{checklists:v,isLoading:b,atualizarItem:x,deletarItem:y}=oc(),{perfisEquipe:w,getNomeUsuario:S}=On(),{empresas:j}=cn(),C=g.useMemo(()=>t!=null&&t.empresa_id?v.filter(L=>L.empresa_id===t.empresa_id):[],[v,t==null?void 0:t.empresa_id]),k=g.useMemo(()=>C.filter(L=>{var W;const X=!e||L.titulo.toLowerCase().includes(e.toLowerCase())||((W=L.descricao)==null?void 0:W.toLowerCase().includes(e.toLowerCase())),I=p==="all"||L.prioridade===p;return X&&I}),[C,e,p]),N=g.useMemo(()=>{const L=k.filter(_=>_.tipo==="pendencia_dmm"&&!_.concluido),X=k.filter(_=>_.tipo==="pendencia_dmm"&&_.concluido),I=k.filter(_=>_.tipo==="pendencia_cliente"&&!_.concluido),W=k.filter(_=>_.tipo==="pendencia_cliente"&&_.concluido);return{dmm:{pendentes:L,concluidos:X},cliente:{pendentes:I,concluidos:W}}},[k]),E=L=>{switch(L){case"alta":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30";case"media":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30";case"baixa":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}},A=L=>{if(!L)return null;const X=String(L),I=X.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})/);if(I){const[,W,_,ee,M,F]=I;return`${ee}/${_}/${W} ${M}:${F}`}try{const W=new Date(X),_=ee=>String(ee).padStart(2,"0");return`${_(W.getDate())}/${_(W.getMonth()+1)}/${W.getFullYear()} ${_(W.getHours())}:${_(W.getMinutes())}`}catch{return X}},$=L=>{if(!L)return"";const X=new Date,W=new Date(L).getTime()-X.getTime(),_=Math.ceil(W/(1e3*60*60*24));return _<=0?"text-red-600 font-bold dark:text-red-400":_<=2?"text-yellow-600 font-bold dark:text-yellow-400":"text-green-600 font-bold dark:text-green-400"},H=L=>S(L),O=L=>{if(!L)return"Sem empresa";const X=j.find(I=>I.id===L);return(X==null?void 0:X.nome)||"Empresa no encontrada"},V=L=>{L.tipo==="pendencia_cliente"&&(c(L),i(!0))},B=L=>{L.tipo==="pendencia_cliente"&&(h(L),d(!0))},K=async()=>{if(f)try{await y(f.id),q.success("Checklist excludo com sucesso!")}catch{q.error("Erro ao excluir checklist")}d(!1),h(null)},R=async L=>{if(L.tipo==="pendencia_cliente")try{await x({id:L.id,concluido:!L.concluido,concluido_em:L.concluido?null:new Date().toISOString()}),q.success(`Checklist ${L.concluido?"reaberto":"concludo"} com sucesso!`)}catch(X){console.error("Erro ao atualizar checklist:",X),q.error("Erro ao atualizar pendncia")}},T=()=>{m("all"),n("")},D=({checklist:L,showCompleted:X=!1,canEdit:I=!1})=>l.jsx("div",{className:`border border-border rounded-lg p-4 hover:bg-muted/50 dark:hover:bg-muted/20 bg-card dark:bg-card transition-colors ${L.concluido?"opacity-75":""}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Nr,{checked:L.concluido,onCheckedChange:()=>R(L),className:"mt-1",disabled:L.tipo==="pendencia_dmm"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"font-medium text-foreground",children:O(L.empresa_id)})]}),l.jsx("h4",{className:`font-semibold text-foreground line-clamp-2 break-words ${L.concluido?"line-through":""}`,children:L.titulo}),L.descricao&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 break-words",children:L.descricao}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[l.jsx(Be,{className:E(L.prioridade),children:L.prioridade==="alta"?"Alta":L.prioridade==="media"?"Mdia":"Baixa"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(sc,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:"text-muted-foreground",children:["Criado por: ",H(L.criado_por)]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:"text-muted-foreground",children:["Criado em: ",new Date(L.criado_em).toLocaleDateString("pt-BR")]})]})]}),L.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsx("span",{className:`font-bold ${$(L.data_entrega)}`,children:l.jsxs("strong",{children:["Entrega: ",A(L.data_entrega)]})})]})]})]}),I&&l.jsxs(u3,{children:[l.jsx(d3,{asChild:!0,children:l.jsx(G,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:l.jsx(yI,{className:"h-4 w-4"})})}),l.jsxs(xj,{align:"end",className:"dark:bg-popover dark:border-border",children:[l.jsxs(fh,{onClick:()=>V(L),className:"dark:hover:bg-muted dark:focus:bg-muted",children:[l.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Editar"]}),l.jsxs(fh,{className:"text-red-600 dark:text-red-400 dark:hover:bg-muted dark:focus:bg-muted",onClick:()=>B(L),children:[l.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})},L.id);return b?l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("div",{className:"flex-1 overflow-auto p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Meus Checklists"}),l.jsx("p",{className:"text-muted-foreground",children:"Acompanhe pendncias da DMM e gerencie suas prprias pendncias"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar checklists...",value:e,onChange:L=>n(L.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(Oe,{value:p,onValueChange:m,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as prioridades"}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})})]})]}),l.jsx(G,{variant:"outline",onClick:T,children:"Limpar Filtros"})]}),l.jsxs(dj,{value:"cliente",className:"w-full",children:[l.jsx(jy,{className:"grid w-full grid-cols-1",children:l.jsxs(lh,{value:"cliente",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:["Minhas Pendncias (",N.cliente.pendentes.length,")"]})}),l.jsxs(ch,{value:"cliente",className:"space-y-6 mt-6",children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(G,{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Nova Pendncia"]})}),l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pendentes"}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:N.cliente.pendentes.length})]})}),l.jsx(Ae,{children:l.jsx("div",{className:"space-y-3 min-h-[80px] p-4 rounded-lg border-2 border-dashed border-muted-foreground/20",children:N.cliente.pendentes.length===0?l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx("div",{className:"text-lg mb-2",children:""}),l.jsx("div",{children:"Nenhuma pendncia sua"})]}):l.jsx("div",{className:"space-y-3",children:N.cliente.pendentes.map(L=>l.jsx(D,{checklist:L,canEdit:!0},L.id))})})})]}),l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Concludas"}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:N.cliente.concluidos.length})]})}),l.jsx(Ae,{children:l.jsx("div",{className:"space-y-3 min-h-[80px] p-4 rounded-lg border-2 border-dashed border-muted-foreground/20",children:N.cliente.concluidos.length===0?l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx("div",{className:"text-lg mb-2",children:""}),l.jsx("div",{children:"Nenhuma pendncia concluda"})]}):l.jsx("div",{className:"space-y-3",children:N.cliente.concluidos.map(L=>l.jsx(D,{checklist:L,showCompleted:!0,canEdit:!0},L.id))})})})]})]})]})]})})}),l.jsx(w3,{isOpen:r,onClose:()=>s(!1),onSuccess:()=>{}}),a&&l.jsx(S3,{isOpen:o,onClose:()=>{i(!1),c(null)},item:a,onSuccess:()=>{i(!1),c(null)},isClientModal:!0}),l.jsx(ai,{open:u,onOpenChange:d,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar excluso"}),l.jsx(mo,{children:"Tem certeza que deseja excluir este checklist? Esta ao no pode ser desfeita."})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Cancelar"}),l.jsx(go,{onClick:K,className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},V3=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["acessos"],queryFn:async()=>{const{data:a,error:c}=await re.from("acessos").select("*").order("criado_em",{ascending:!1});if(c)throw console.error("Erro ao buscar acessos:",c),c;return a}}),r=Qe({mutationFn:async a=>{const{data:c,error:u}=await re.from("acessos").insert([a]).select().single();if(u)throw u;return c},onSuccess:()=>{t.invalidateQueries({queryKey:["acessos"]}),q.success("Acesso criado com sucesso!")},onError:a=>{console.error("Erro ao criar acesso:",a),q.error("Erro ao criar acesso. Tente novamente.")}}),s=Qe({mutationFn:async({id:a,dados:c})=>{const{data:u,error:d}=await re.from("acessos").update(c).eq("id",a).select().single();if(d)throw d;return u},onSuccess:()=>{t.invalidateQueries({queryKey:["acessos"]}),q.success("Acesso atualizado com sucesso!")},onError:a=>{console.error("Erro ao atualizar acesso:",a),q.error("Erro ao atualizar acesso. Tente novamente.")}}),o=Qe({mutationFn:async({id:a,status:c})=>{const{error:u}=await re.from("acessos").update({status:c}).eq("id",a);if(u)throw u},onSuccess:()=>{t.invalidateQueries({queryKey:["acessos"]}),q.success("Status do acesso atualizado com sucesso!")},onError:a=>{console.error("Erro ao atualizar status do acesso:",a),q.error("Erro ao atualizar status do acesso. Tente novamente.")}}),i=Qe({mutationFn:async a=>{const{error:c}=await re.from("acessos").update({ultimo_acesso:new Date().toISOString()}).eq("id",a);if(c)throw c},onError:a=>{console.error("Erro ao registrar ltimo acesso:",a)}});return{acessos:e,isLoading:n,createAcesso:r,updateAcesso:s,toggleStatusAcesso:o,registrarUltimoAcesso:i}},U3=()=>{const t=ls(),{perfil:e}=jt(),{data:n=[],isLoading:r}=jn({queryKey:["favoritos_acesso"],queryFn:async()=>{if(!(e!=null&&e.id))return[];const{data:i,error:a}=await re.from("favoritos_acesso").select("*").eq("usuario_id",e.id);if(a)throw console.error("Erro ao buscar favoritos:",a),a;return i},enabled:!!(e!=null&&e.id)}),s=Qe({mutationFn:async i=>{if(!(e!=null&&e.id))throw new Error("Usurio no encontrado");const a=n.find(c=>c.acesso_id===i);if(a){const{error:c}=await re.from("favoritos_acesso").delete().eq("id",a.id);if(c)throw c;return{acao:"removido"}}else{const{error:c}=await re.from("favoritos_acesso").insert([{acesso_id:i,usuario_id:e.id}]);if(c)throw c;return{acao:"adicionado"}}},onSuccess:()=>{t.invalidateQueries({queryKey:["favoritos_acesso"]})},onError:i=>{console.error("Erro ao alterar favorito:",i)}});return{favoritos:n,isLoading:r,toggleFavorito:s,isFavorito:i=>n.some(a=>a.acesso_id===i)}};//! otpauth 9.4.1 | (c) Hctor Molinero Fernndez | MIT | https://github.com/hectorm/otpauth
//! noble-hashes 1.8.0 | (c) Paul Miller | MIT | https://github.com/paulmillr/noble-hashes
const $te=t=>{const e=new ArrayBuffer(8),n=new Uint8Array(e);let r=t;for(let s=7;s>=0&&r!==0;s--)n[s]=r&255,r-=n[s],r/=256;return n};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Og(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Hu(t,...e){if(!zte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bte(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Og(t.outputLen),Og(t.blockLen)}function Wu(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function H3(t,e){Hu(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Vte(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function yo(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function d0(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zs(t,e){return t<<32-e|t>>>e}function f0(t,e){return t<<e|t>>>32-e>>>0}const Ute=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Hte(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Wte(t){for(let e=0;e<t.length;e++)t[e]=Hte(t[e]);return t}const jT=Ute?t=>t:Wte;function qte(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Ty(t){return typeof t=="string"&&(t=qte(t)),Hu(t),t}class Sj{}function vd(t){const e=r=>t().update(Ty(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}class W3 extends Sj{update(e){return Wu(this),this.iHash.update(e),this}digestInto(e){Wu(this),Hu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Bte(e);const r=Ty(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),yo(o)}}const i1=(t,e,n)=>new W3(t,e).update(n).digest();i1.create=(t,e)=>new W3(t,e);function Kte(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,i,r),t.setUint32(e+u,a,r)}function q3(t,e,n){return t&e^~t&n}function K3(t,e,n){return t&e^t&n^e&n}class Cj extends Sj{update(e){Wu(this),e=Ty(e),Hu(e);const{view:n,buffer:r,blockLen:s}=this,o=e.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=d0(e);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wu(this),H3(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,yo(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let f=i;f<s;f++)n[f]=0;Kte(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=d0(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,d[f],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return e.destroyed=i,e.finished=o,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=d0(this.buffer)}}const vi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yi=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),En=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),_n=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ld=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),xi=new Uint32Array(80);class Gte extends Cj{get(){const{A:e,B:n,C:r,D:s,E:o}=this;return[e,n,r,s,o]}set(e,n,r,s,o){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0}process(e,n){for(let c=0;c<16;c++,n+=4)xi[c]=e.getUint32(n,!1);for(let c=16;c<80;c++)xi[c]=f0(xi[c-3]^xi[c-8]^xi[c-14]^xi[c-16],1);let{A:r,B:s,C:o,D:i,E:a}=this;for(let c=0;c<80;c++){let u,d;c<20?(u=q3(s,o,i),d=1518500249):c<40?(u=s^o^i,d=1859775393):c<60?(u=K3(s,o,i),d=2400959708):(u=s^o^i,d=3395469782);const f=f0(r,5)+u+a+d+xi[c]|0;a=i,i=o,o=f0(s,30),s=r,r=f}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,this.set(r,s,o,i,a)}roundClean(){yo(xi)}destroy(){this.set(0,0,0,0,0),yo(this.buffer)}constructor(){super(64,20,8,!1),this.A=Ld[0]|0,this.B=Ld[1]|0,this.C=Ld[2]|0,this.D=Ld[3]|0,this.E=Ld[4]|0}}const Yte=vd(()=>new Gte),Yp=BigInt(2**32-1),kT=BigInt(32);function Qte(t,e=!1){return e?{h:Number(t&Yp),l:Number(t>>kT&Yp)}:{h:Number(t>>kT&Yp)|0,l:Number(t&Yp)|0}}function G3(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=Qte(t[o],e);[r[o],s[o]]=[i,a]}return[r,s]}const NT=(t,e,n)=>t>>>n,ET=(t,e,n)=>t<<32-n|e>>>n,kc=(t,e,n)=>t>>>n|e<<32-n,Nc=(t,e,n)=>t<<32-n|e>>>n,Qp=(t,e,n)=>t<<64-n|e>>>n-32,Jp=(t,e,n)=>t>>>n-32|e<<64-n,Jte=(t,e,n)=>t<<n|e>>>32-n,Xte=(t,e,n)=>e<<n|t>>>32-n,Zte=(t,e,n)=>e<<n-32|t>>>64-n,ene=(t,e,n)=>t<<n-32|e>>>64-n;function Mo(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const tne=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),nne=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,rne=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),sne=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,one=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),ine=(t,e,n,r,s,o)=>e+n+r+s+o+(t/2**32|0)|0,ane=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bi=new Uint32Array(64);class Y3 extends Cj{get(){const{A:e,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[e,n,r,s,o,i,a,c]}set(e,n,r,s,o,i,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(e,n){for(let f=0;f<16;f++,n+=4)bi[f]=e.getUint32(n,!1);for(let f=16;f<64;f++){const h=bi[f-15],p=bi[f-2],m=zs(h,7)^zs(h,18)^h>>>3,v=zs(p,17)^zs(p,19)^p>>>10;bi[f]=v+bi[f-7]+m+bi[f-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const h=zs(a,6)^zs(a,11)^zs(a,25),p=d+h+q3(a,c,u)+ane[f]+bi[f]|0,v=(zs(r,2)^zs(r,13)^zs(r,22))+K3(r,s,o)|0;d=u,u=c,c=a,a=i+p|0,i=o,o=s,s=r,r=p+v|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,o,i,a,c,u,d)}roundClean(){yo(bi)}destroy(){this.set(0,0,0,0,0,0,0,0),yo(this.buffer)}constructor(e=32){super(64,e,8,!1),this.A=vi[0]|0,this.B=vi[1]|0,this.C=vi[2]|0,this.D=vi[3]|0,this.E=vi[4]|0,this.F=vi[5]|0,this.G=vi[6]|0,this.H=vi[7]|0}}class lne extends Y3{constructor(){super(28),this.A=yi[0]|0,this.B=yi[1]|0,this.C=yi[2]|0,this.D=yi[3]|0,this.E=yi[4]|0,this.F=yi[5]|0,this.G=yi[6]|0,this.H=yi[7]|0}}const Q3=G3(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),cne=Q3[0],une=Q3[1],wi=new Uint32Array(80),Si=new Uint32Array(80);class J3 extends Cj{get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:o,Cl:i,Dh:a,Dl:c,Eh:u,El:d,Fh:f,Fl:h,Gh:p,Gl:m,Hh:v,Hl:b}=this;return[e,n,r,s,o,i,a,c,u,d,f,h,p,m,v,b]}set(e,n,r,s,o,i,a,c,u,d,f,h,p,m,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=h|0,this.Gh=p|0,this.Gl=m|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let w=0;w<16;w++,n+=4)wi[w]=e.getUint32(n),Si[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const S=wi[w-15]|0,j=Si[w-15]|0,C=kc(S,j,1)^kc(S,j,8)^NT(S,j,7),k=Nc(S,j,1)^Nc(S,j,8)^ET(S,j,7),N=wi[w-2]|0,E=Si[w-2]|0,A=kc(N,E,19)^Qp(N,E,61)^NT(N,E,6),$=Nc(N,E,19)^Jp(N,E,61)^ET(N,E,6),H=rne(k,$,Si[w-7],Si[w-16]),O=sne(H,C,A,wi[w-7],wi[w-16]);wi[w]=O|0,Si[w]=H|0}let{Ah:r,Al:s,Bh:o,Bl:i,Ch:a,Cl:c,Dh:u,Dl:d,Eh:f,El:h,Fh:p,Fl:m,Gh:v,Gl:b,Hh:x,Hl:y}=this;for(let w=0;w<80;w++){const S=kc(f,h,14)^kc(f,h,18)^Qp(f,h,41),j=Nc(f,h,14)^Nc(f,h,18)^Jp(f,h,41),C=f&p^~f&v,k=h&m^~h&b,N=one(y,j,k,une[w],Si[w]),E=ine(N,x,S,C,cne[w],wi[w]),A=N|0,$=kc(r,s,28)^Qp(r,s,34)^Qp(r,s,39),H=Nc(r,s,28)^Jp(r,s,34)^Jp(r,s,39),O=r&o^r&a^o&a,V=s&i^s&c^i&c;x=v|0,y=b|0,v=p|0,b=m|0,p=f|0,m=h|0,{h:f,l:h}=Mo(u|0,d|0,E|0,A|0),u=a|0,d=c|0,a=o|0,c=i|0,o=r|0,i=s|0;const B=tne(A,H,V);r=nne(B,E,$,O),s=B|0}({h:r,l:s}=Mo(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:i}=Mo(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:c}=Mo(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:d}=Mo(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:h}=Mo(this.Eh|0,this.El|0,f|0,h|0),{h:p,l:m}=Mo(this.Fh|0,this.Fl|0,p|0,m|0),{h:v,l:b}=Mo(this.Gh|0,this.Gl|0,v|0,b|0),{h:x,l:y}=Mo(this.Hh|0,this.Hl|0,x|0,y|0),this.set(r,s,o,i,a,c,u,d,f,h,p,m,v,b,x,y)}roundClean(){yo(wi,Si)}destroy(){yo(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(e=64){super(128,e,16,!1),this.Ah=_n[0]|0,this.Al=_n[1]|0,this.Bh=_n[2]|0,this.Bl=_n[3]|0,this.Ch=_n[4]|0,this.Cl=_n[5]|0,this.Dh=_n[6]|0,this.Dl=_n[7]|0,this.Eh=_n[8]|0,this.El=_n[9]|0,this.Fh=_n[10]|0,this.Fl=_n[11]|0,this.Gh=_n[12]|0,this.Gl=_n[13]|0,this.Hh=_n[14]|0,this.Hl=_n[15]|0}}class dne extends J3{constructor(){super(48),this.Ah=En[0]|0,this.Al=En[1]|0,this.Bh=En[2]|0,this.Bl=En[3]|0,this.Ch=En[4]|0,this.Cl=En[5]|0,this.Dh=En[6]|0,this.Dl=En[7]|0,this.Eh=En[8]|0,this.El=En[9]|0,this.Fh=En[10]|0,this.Fl=En[11]|0,this.Gh=En[12]|0,this.Gl=En[13]|0,this.Hh=En[14]|0,this.Hl=En[15]|0}}const fne=vd(()=>new Y3),hne=vd(()=>new lne),pne=vd(()=>new J3),mne=vd(()=>new dne),gne=BigInt(0),Fd=BigInt(1),vne=BigInt(2),yne=BigInt(7),xne=BigInt(256),bne=BigInt(113),X3=[],Z3=[],eF=[];for(let t=0,e=Fd,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],X3.push(2*(5*r+n)),Z3.push((t+1)*(t+2)/2%64);let s=gne;for(let o=0;o<7;o++)e=(e<<Fd^(e>>yne)*bne)%xne,e&vne&&(s^=Fd<<(Fd<<BigInt(o))-Fd);eF.push(s)}const tF=G3(eF,!0),wne=tF[0],Sne=tF[1],_T=(t,e,n)=>n>32?Zte(t,e,n):Jte(t,e,n),TT=(t,e,n)=>n>32?ene(t,e,n):Xte(t,e,n);function Cne(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let i=0;i<10;i++)n[i]=t[i]^t[i+10]^t[i+20]^t[i+30]^t[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,u=n[c],d=n[c+1],f=_T(u,d,1)^n[a],h=TT(u,d,1)^n[a+1];for(let p=0;p<50;p+=10)t[i+p]^=f,t[i+p+1]^=h}let s=t[2],o=t[3];for(let i=0;i<24;i++){const a=Z3[i],c=_T(s,o,a),u=TT(s,o,a),d=X3[i];s=t[d],o=t[d+1],t[d]=c,t[d+1]=u}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=t[i+a];for(let a=0;a<10;a++)t[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=wne[r],t[1]^=Sne[r]}yo(n)}class jj extends Sj{clone(){return this._cloneInto()}keccak(){jT(this.state32),Cne(this.state32,this.rounds),jT(this.state32),this.posOut=0,this.pos=0}update(e){Wu(this),e=Ty(e),Hu(e);const{blockLen:n,state:r}=this,s=e.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Wu(this,!1),Hu(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=e.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);e.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Og(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(H3(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,yo(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new jj(n,r,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}constructor(e,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Og(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Vte(this.state)}}const My=(t,e,n)=>vd(()=>new jj(e,t,n)),jne=My(6,144,224/8),kne=My(6,136,256/8),Nne=My(6,104,384/8),Ene=My(6,72,512/8),qu=(()=>{if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"__GLOBALTHIS__",{get(){return this},configurable:!0});try{if(typeof __GLOBALTHIS__<"u")return __GLOBALTHIS__}finally{delete Object.prototype.__GLOBALTHIS__}if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global})(),MT={SHA1:Yte,SHA224:hne,SHA256:fne,SHA384:mne,SHA512:pne,"SHA3-224":jne,"SHA3-256":kne,"SHA3-384":Nne,"SHA3-512":Ene},kj=t=>{switch(!0){case/^(?:SHA-?1|SSL3-SHA1)$/i.test(t):return"SHA1";case/^SHA(?:2?-)?224$/i.test(t):return"SHA224";case/^SHA(?:2?-)?256$/i.test(t):return"SHA256";case/^SHA(?:2?-)?384$/i.test(t):return"SHA384";case/^SHA(?:2?-)?512$/i.test(t):return"SHA512";case/^SHA3-224$/i.test(t):return"SHA3-224";case/^SHA3-256$/i.test(t):return"SHA3-256";case/^SHA3-384$/i.test(t):return"SHA3-384";case/^SHA3-512$/i.test(t):return"SHA3-512";default:throw new TypeError(`Unknown hash algorithm: ${t}`)}},_ne=(t,e,n)=>{if(i1){const r=MT[t]??MT[kj(t)];return i1(r,e,n)}else throw new Error("Missing HMAC function")},a1="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",Tne=t=>{t=t.replace(/ /g,"");let e=t.length;for(;t[e-1]==="=";)--e;t=(e<t.length?t.substring(0,e):t).toUpperCase();const n=new ArrayBuffer(t.length*5/8|0),r=new Uint8Array(n);let s=0,o=0,i=0;for(let a=0;a<t.length;a++){const c=a1.indexOf(t[a]);if(c===-1)throw new TypeError(`Invalid character found: ${t[a]}`);o=o<<5|c,s+=5,s>=8&&(s-=8,r[i++]=o>>>s)}return r},Mne=t=>{let e=0,n=0,r="";for(let s=0;s<t.length;s++)for(n=n<<8|t[s],e+=8;e>=5;)r+=a1[n>>>e-5&31],e-=5;return e>0&&(r+=a1[n<<5-e&31]),r},Ane=t=>{t=t.replace(/ /g,"");const e=new ArrayBuffer(t.length/2),n=new Uint8Array(e);for(let r=0;r<t.length;r+=2)n[r/2]=parseInt(t.substring(r,r+2),16);return n},Pne=t=>{let e="";for(let n=0;n<t.length;n++){const r=t[n].toString(16);r.length===1&&(e+="0"),e+=r}return e.toUpperCase()},Dne=t=>{const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n},Rne=t=>{let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},AT=qu.TextEncoder?new qu.TextEncoder:null,PT=qu.TextDecoder?new qu.TextDecoder:null,One=t=>{if(!AT)throw new Error("Encoding API not available");return AT.encode(t)},Ine=t=>{if(!PT)throw new Error("Encoding API not available");return PT.decode(t)},Lne=t=>{var e;if((e=qu.crypto)!=null&&e.getRandomValues)return qu.crypto.getRandomValues(new Uint8Array(t));throw new Error("Cryptography API not available")};class eo{static fromLatin1(e){return new eo({buffer:Dne(e).buffer})}static fromUTF8(e){return new eo({buffer:One(e).buffer})}static fromBase32(e){return new eo({buffer:Tne(e).buffer})}static fromHex(e){return new eo({buffer:Ane(e).buffer})}get buffer(){return this.bytes.buffer}get latin1(){return Object.defineProperty(this,"latin1",{enumerable:!0,writable:!1,configurable:!1,value:Rne(this.bytes)}),this.latin1}get utf8(){return Object.defineProperty(this,"utf8",{enumerable:!0,writable:!1,configurable:!1,value:Ine(this.bytes)}),this.utf8}get base32(){return Object.defineProperty(this,"base32",{enumerable:!0,writable:!1,configurable:!1,value:Mne(this.bytes)}),this.base32}get hex(){return Object.defineProperty(this,"hex",{enumerable:!0,writable:!1,configurable:!1,value:Pne(this.bytes)}),this.hex}constructor({buffer:e,size:n=20}={}){this.bytes=typeof e>"u"?Lne(n):new Uint8Array(e),Object.defineProperty(this,"bytes",{enumerable:!0,writable:!1,configurable:!1,value:this.bytes})}}const Fne=(t,e)=>{{if(t.length!==e.length)throw new TypeError("Input strings must have the same length");let n=-1,r=0;for(;++n<t.length;)r|=t.charCodeAt(n)^e.charCodeAt(n);return r===0}};class Jt{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,counter:0,window:1}}static generate({secret:e,algorithm:n=Jt.defaults.algorithm,digits:r=Jt.defaults.digits,counter:s=Jt.defaults.counter}){const o=_ne(n,e.bytes,$te(s)),i=o[o.byteLength-1]&15;return(((o[i]&127)<<24|(o[i+1]&255)<<16|(o[i+2]&255)<<8|o[i+3]&255)%10**r).toString().padStart(r,"0")}generate({counter:e=this.counter++}={}){return Jt.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:e})}static validate({token:e,secret:n,algorithm:r,digits:s=Jt.defaults.digits,counter:o=Jt.defaults.counter,window:i=Jt.defaults.window}){if(e.length!==s)return null;let a=null;const c=u=>{const d=Jt.generate({secret:n,algorithm:r,digits:s,counter:u});Fne(e,d)&&(a=u-o)};c(o);for(let u=1;u<=i&&a===null&&(c(o-u),!(a!==null||(c(o+u),a!==null)));++u);return a}validate({token:e,counter:n=this.counter,window:r}){return Jt.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:n,window:r})}toString(){const e=encodeURIComponent;return`otpauth://hotp/${this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`}secret=${e(this.secret.base32)}&algorithm=${e(this.algorithm)}&digits=${e(this.digits)}&counter=${e(this.counter)}`}constructor({issuer:e=Jt.defaults.issuer,label:n=Jt.defaults.label,issuerInLabel:r=Jt.defaults.issuerInLabel,secret:s=new eo,algorithm:o=Jt.defaults.algorithm,digits:i=Jt.defaults.digits,counter:a=Jt.defaults.counter}={}){this.issuer=e,this.label=n,this.issuerInLabel=r,this.secret=typeof s=="string"?eo.fromBase32(s):s,this.algorithm=kj(o),this.digits=i,this.counter=a}}class Qt{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,period:30,window:1}}static counter({period:e=Qt.defaults.period,timestamp:n=Date.now()}={}){return Math.floor(n/1e3/e)}counter({timestamp:e=Date.now()}={}){return Qt.counter({period:this.period,timestamp:e})}static remaining({period:e=Qt.defaults.period,timestamp:n=Date.now()}={}){return e*1e3-n%(e*1e3)}remaining({timestamp:e=Date.now()}={}){return Qt.remaining({period:this.period,timestamp:e})}static generate({secret:e,algorithm:n,digits:r,period:s=Qt.defaults.period,timestamp:o=Date.now()}){return Jt.generate({secret:e,algorithm:n,digits:r,counter:Qt.counter({period:s,timestamp:o})})}generate({timestamp:e=Date.now()}={}){return Qt.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:e})}static validate({token:e,secret:n,algorithm:r,digits:s,period:o=Qt.defaults.period,timestamp:i=Date.now(),window:a}){return Jt.validate({token:e,secret:n,algorithm:r,digits:s,counter:Qt.counter({period:o,timestamp:i}),window:a})}validate({token:e,timestamp:n,window:r}){return Qt.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:n,window:r})}toString(){const e=encodeURIComponent;return`otpauth://totp/${this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`}secret=${e(this.secret.base32)}&algorithm=${e(this.algorithm)}&digits=${e(this.digits)}&period=${e(this.period)}`}constructor({issuer:e=Qt.defaults.issuer,label:n=Qt.defaults.label,issuerInLabel:r=Qt.defaults.issuerInLabel,secret:s=new eo,algorithm:o=Qt.defaults.algorithm,digits:i=Qt.defaults.digits,period:a=Qt.defaults.period}={}){this.issuer=e,this.label=n,this.issuerInLabel=r,this.secret=typeof s=="string"?eo.fromBase32(s):s,this.algorithm=kj(o),this.digits=i,this.period=a}}const nF=({secret:t,issuer:e="DMM",label:n="Account"})=>{const[r,s]=g.useState(""),[o,i]=g.useState(30),[a,c]=g.useState(!1);g.useEffect(()=>{if(!t)return;const h=()=>{try{const v=new Qt({issuer:e,label:n,algorithm:"SHA1",digits:6,period:30,secret:eo.fromBase32(t)}).generate();s(v);const x=30-Math.floor(Date.now()/1e3)%30;i(x)}catch(m){console.error("Error generating TOTP:",m),s("ERRO")}};h();const p=setInterval(()=>{const v=30-Math.floor(Date.now()/1e3)%30;i(v),v===30&&h()},1e3);return()=>clearInterval(p)},[t,e,n]);const u=async()=>{try{await navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2e3),q.success("Cdigo 2FA copiado!")}catch{q.error("Erro ao copiar cdigo!")}},d=r?`${r.slice(0,3)} ${r.slice(3)}`:"--- ---",f=o/30*100;return l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[l.jsx(PJ,{className:"h-4 w-4"}),"Cdigo 2FA (TOTP)"]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(we,{value:d,readOnly:!0,className:"font-mono text-center text-lg font-bold tracking-wider"}),l.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-primary/20 w-full rounded-b overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary transition-all duration-1000 ease-linear",style:{width:`${f}%`}})})]}),l.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[l.jsx(Eg,{className:"h-4 w-4"}),l.jsxs("span",{className:"text-sm font-mono w-6 text-right",children:[o,"s"]})]}),l.jsx(G,{variant:"outline",size:"icon",onClick:u,disabled:!r||r==="ERRO",children:a?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"O cdigo  renovado automaticamente a cada 30 segundos"})]})};function Je(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Pr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Kn(t,e){const n=Je(t);return isNaN(e)?Pr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ps(t,e){const n=Je(t);if(isNaN(e))return Pr(t,NaN);if(!e)return n;const r=n.getDate(),s=Pr(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const o=s.getDate();return r>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),r),n)}const Nj=6048e5,$ne=864e5;let zne={};function tp(){return zne}function xo(t,e){var a,c,u,d;const n=tp(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Je(t),o=s.getDay(),i=(o<r?7:0)+o-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Kl(t){return xo(t,{weekStartsOn:1})}function rF(t){const e=Je(t),n=e.getFullYear(),r=Pr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Kl(r),o=Pr(t,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=Kl(o);return e.getTime()>=s.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function Ku(t){const e=Je(t);return e.setHours(0,0,0,0),e}function Ig(t){const e=Je(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function to(t,e){const n=Ku(t),r=Ku(e),s=+n-Ig(n),o=+r-Ig(r);return Math.round((s-o)/$ne)}function Bne(t){const e=rF(t),n=Pr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Kl(n)}function l1(t,e){const n=e*7;return Kn(t,n)}function Vne(t,e){return Ps(t,e*12)}function Une(t){let e;return t.forEach(function(n){const r=Je(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function Hne(t){let e;return t.forEach(n=>{const r=Je(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function pr(t,e){const n=Ku(t),r=Ku(e);return+n==+r}function Ej(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Wne(t){if(!Ej(t)&&typeof t!="number")return!1;const e=Je(t);return!isNaN(Number(e))}function hh(t,e){const n=Je(t),r=Je(e),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function qne(t,e,n){const r=xo(t,n),s=xo(e,n),o=+r-Ig(r),i=+s-Ig(s);return Math.round((o-i)/Nj)}function _j(t){const e=Je(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function yr(t){const e=Je(t);return e.setDate(1),e.setHours(0,0,0,0),e}function sF(t){const e=Je(t),n=Pr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Tj(t,e){var a,c,u,d;const n=tp(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Je(t),o=s.getDay(),i=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function oF(t){return Tj(t,{weekStartsOn:1})}const Kne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gne=(t,e,n)=>{let r;const s=Kne[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function hu(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Yne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Jne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xne={date:hu({formats:Yne,defaultWidth:"full"}),time:hu({formats:Qne,defaultWidth:"full"}),dateTime:hu({formats:Jne,defaultWidth:"full"})},Zne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ere=(t,e,n,r)=>Zne[t];function Js(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[i]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const tre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},rre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ore={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ire={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},are=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},lre={ordinalNumber:are,era:Js({values:tre,defaultWidth:"wide"}),quarter:Js({values:nre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Js({values:rre,defaultWidth:"wide"}),day:Js({values:sre,defaultWidth:"wide"}),dayPeriod:Js({values:ore,defaultWidth:"wide",formattingValues:ire,defaultFormattingWidth:"wide"})};function Xs(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const i=o[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?ure(a,f=>f.test(i)):cre(a,f=>f.test(i));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(i.length);return{value:u,rest:d}}}function cre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ure(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function iF(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let i=t.valueCallback?t.valueCallback(o[0]):o[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(s.length);return{value:i,rest:a}}}const dre=/^(\d+)(th|st|nd|rd)?/i,fre=/\d+/i,hre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pre={any:[/^b/i,/^(a|c)/i]},mre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gre={any:[/1/i,/2/i,/3/i,/4/i]},vre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},bre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Sre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cre={ordinalNumber:iF({matchPattern:dre,parsePattern:fre,valueCallback:t=>parseInt(t,10)}),era:Xs({matchPatterns:hre,defaultMatchWidth:"wide",parsePatterns:pre,defaultParseWidth:"any"}),quarter:Xs({matchPatterns:mre,defaultMatchWidth:"wide",parsePatterns:gre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Xs({matchPatterns:vre,defaultMatchWidth:"wide",parsePatterns:yre,defaultParseWidth:"any"}),day:Xs({matchPatterns:xre,defaultMatchWidth:"wide",parsePatterns:bre,defaultParseWidth:"any"}),dayPeriod:Xs({matchPatterns:wre,defaultMatchWidth:"any",parsePatterns:Sre,defaultParseWidth:"any"})},aF={code:"en-US",formatDistance:Gne,formatLong:Xne,formatRelative:ere,localize:lre,match:Cre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jre(t){const e=Je(t);return to(e,sF(e))+1}function lF(t){const e=Je(t),n=+Kl(e)-+Bne(e);return Math.round(n/Nj)+1}function cF(t,e){var d,f,h,p;const n=Je(t),r=n.getFullYear(),s=tp(),o=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(h=s.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=Pr(t,0);i.setFullYear(r+1,0,o),i.setHours(0,0,0,0);const a=xo(i,e),c=Pr(t,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);const u=xo(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function kre(t,e){var a,c,u,d;const n=tp(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=cF(t,e),o=Pr(t,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),xo(o,e)}function uF(t,e){const n=Je(t),r=+xo(n,e)-+kre(n,e);return Math.round(r/Nj)+1}function tt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ci={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return tt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):tt(n+1,2)},d(t,e){return tt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return tt(t.getHours()%12||12,e.length)},H(t,e){return tt(t.getHours(),e.length)},m(t,e){return tt(t.getMinutes(),e.length)},s(t,e){return tt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return tt(s,e.length)}},Ec={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DT={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Ci.y(t,e)},Y:function(t,e,n,r){const s=cF(t,r),o=s>0?s:1-s;if(e==="YY"){const i=o%100;return tt(i,2)}return e==="Yo"?n.ordinalNumber(o,{unit:"year"}):tt(o,e.length)},R:function(t,e){const n=rF(t);return tt(n,e.length)},u:function(t,e){const n=t.getFullYear();return tt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return tt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return tt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ci.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return tt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=uF(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):tt(s,e.length)},I:function(t,e,n){const r=lF(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):tt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ci.d(t,e)},D:function(t,e,n){const r=jre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):tt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return tt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return tt(o,e.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return tt(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ec.noon:r===0?s=Ec.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ec.evening:r>=12?s=Ec.afternoon:r>=4?s=Ec.morning:s=Ec.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ci.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ci.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):tt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ci.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ci.s(t,e)},S:function(t,e){return Ci.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return OT(r);case"XXXX":case"XX":return rl(r);case"XXXXX":case"XXX":default:return rl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return OT(r);case"xxxx":case"xx":return rl(r);case"xxxxx":case"xxx":default:return rl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+RT(r,":");case"OOOO":default:return"GMT"+rl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+RT(r,":");case"zzzz":default:return"GMT"+rl(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return tt(r,e.length)},T:function(t,e,n){const r=t.getTime();return tt(r,e.length)}};function RT(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+e+tt(o,2)}function OT(t,e){return t%60===0?(t>0?"-":"+")+tt(Math.abs(t)/60,2):rl(t,e)}function rl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=tt(Math.trunc(r/60),2),o=tt(r%60,2);return n+s+e+o}const IT=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},dF=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Nre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return IT(t,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",IT(r,e)).replace("{{time}}",dF(s,e))},Ere={p:dF,P:Nre},_re=/^D+$/,Tre=/^Y+$/,Mre=["D","DD","YY","YYYY"];function Are(t){return _re.test(t)}function Pre(t){return Tre.test(t)}function Dre(t,e,n){const r=Rre(t,e,n);if(console.warn(r),Mre.includes(t))throw new RangeError(r)}function Rre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ore=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ire=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lre=/^'([^]*?)'?$/,Fre=/''/g,$re=/[a-zA-Z]/;function wn(t,e,n){var d,f,h,p,m,v,b,x;const r=tp(),s=(n==null?void 0:n.locale)??r.locale??aF,o=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,a=Je(t);if(!Wne(a))throw new RangeError("Invalid time value");let c=e.match(Ire).map(y=>{const w=y[0];if(w==="p"||w==="P"){const S=Ere[w];return S(y,s.formatLong)}return y}).join("").match(Ore).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:zre(y)};if(DT[w])return{isToken:!0,value:y};if(w.match($re))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(a,c));const u={firstWeekContainsDate:o,weekStartsOn:i,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Pre(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Are(w))&&Dre(w,e,String(t));const S=DT[w[0]];return S(a,w,s.localize,u)}).join("")}function zre(t){const e=t.match(Lre);return e?e[1].replace(Fre,"'"):t}function Bre(t){const e=Je(t),n=e.getFullYear(),r=e.getMonth(),s=Pr(t,0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function Vre(t){return Math.trunc(+Je(t)/1e3)}function Ure(t){const e=Je(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function Hre(t,e){return qne(Ure(t),yr(t),e)+1}function c1(t,e){const n=Je(t),r=Je(e);return n.getTime()>r.getTime()}function fF(t,e){const n=Je(t),r=Je(e);return+n<+r}function Mj(t,e){const n=Je(t),r=Je(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Wre(t,e){const n=Je(t),r=Je(e);return n.getFullYear()===r.getFullYear()}function h0(t,e){return Kn(t,-e)}function p0(t,e){const n=Je(t),r=n.getFullYear(),s=n.getDate(),o=Pr(t,0);o.setFullYear(r,e,15),o.setHours(0,0,0,0);const i=Bre(o);return n.setMonth(e,Math.min(s,i)),n}function LT(t,e){const n=Je(t);return isNaN(+n)?Pr(t,NaN):(n.setFullYear(e),n)}const qre={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Kre=(t,e,n)=>{let r;const s=qre[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+r:"h "+r:r},Gre={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Yre={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Qre={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jre={date:hu({formats:Gre,defaultWidth:"full"}),time:hu({formats:Yre,defaultWidth:"full"}),dateTime:hu({formats:Qre,defaultWidth:"full"})},Xre={lastWeek:t=>{const e=t.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},Zre=(t,e,n,r)=>{const s=Xre[t];return typeof s=="function"?s(e):s},ese={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},tse={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},nse={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},rse={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},sse={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},ose={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},ise=(t,e)=>{const n=Number(t);return(e==null?void 0:e.unit)==="week"?n+"":n+""},ase={ordinalNumber:ise,era:Js({values:ese,defaultWidth:"wide"}),quarter:Js({values:tse,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Js({values:nse,defaultWidth:"wide"}),day:Js({values:rse,defaultWidth:"wide"}),dayPeriod:Js({values:sse,defaultWidth:"wide",formattingValues:ose,defaultFormattingWidth:"wide"})},lse=/^(\d+)[o]?/i,cse=/\d+/i,use={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},dse={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},fse={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},hse={any:[/1/i,/2/i,/3/i,/4/i]},pse={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},mse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},gse={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},vse={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},yse={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},xse={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},bse={ordinalNumber:iF({matchPattern:lse,parsePattern:cse,valueCallback:t=>parseInt(t,10)}),era:Xs({matchPatterns:use,defaultMatchWidth:"wide",parsePatterns:dse,defaultParseWidth:"any"}),quarter:Xs({matchPatterns:fse,defaultMatchWidth:"wide",parsePatterns:hse,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Xs({matchPatterns:pse,defaultMatchWidth:"wide",parsePatterns:mse,defaultParseWidth:"any"}),day:Xs({matchPatterns:gse,defaultMatchWidth:"wide",parsePatterns:vse,defaultParseWidth:"any"}),dayPeriod:Xs({matchPatterns:yse,defaultMatchWidth:"any",parsePatterns:xse,defaultParseWidth:"any"})},pu={code:"pt-BR",formatDistance:Kre,formatLong:Jre,formatRelative:Zre,localize:ase,match:bse,options:{weekStartsOn:0,firstWeekContainsDate:1}},wse=()=>{var V;const t=ud(),{signOut:e,perfil:n}=jt(),{acessos:r,isLoading:s,registrarUltimoAcesso:o}=V3(),{isFavorito:i,toggleFavorito:a}=U3(),{empresas:c}=cn(),{getNomeUsuario:u}=On(),[d,f]=g.useState(""),[h,p]=g.useState(!1),[m,v]=g.useState(null),[b,x]=g.useState(new Set),[y,w]=g.useState({}),S=async()=>{try{await e(),t("/login")}catch(B){console.error("Erro ao fazer logout:",B),t("/login")}},j=g.useMemo(()=>r.filter(B=>B.empresa_id===(n==null?void 0:n.empresa_id)),[r,n]),C=g.useMemo(()=>j.filter(B=>{const K=B.nome.toLowerCase().includes(d.toLowerCase())||B.site.toLowerCase().includes(d.toLowerCase())||B.usuario.toLowerCase().includes(d.toLowerCase()),R=!h||i(B.id);return K&&R}),[j,d,h,i]),k=B=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(B.startsWith("http")?B:`https://${B}`).hostname}&sz=64`}catch{return null}},N=B=>({social:Sr,ads:bI,analytics:_g,email:uu,hosting:xI,domain:Sr,payment:uu,crm:_g,other:Sr})[B]||Sr,E=async B=>{await a.mutateAsync(B)},A=B=>{const K=new Set(b);K.has(B)?K.delete(B):K.add(B),x(K)},$=async(B,K,R)=>{try{await navigator.clipboard.writeText(B),w({...y,[`${K}-${R}`]:R}),setTimeout(()=>{w(T=>{const D={...T};return delete D[`${K}-${R}`],D})},2e3),q.success(`${R==="usuario"?"Usurio":"Senha"} copiado!`),R==="senha"&&o.mutate(K)}catch{q.error("Erro ao copiar!")}},H=B=>{const K=B.startsWith("http")?B:`https://${B}`;window.open(K,"_blank")},O=m?r.find(B=>B.id===m):null;return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx("div",{className:"fixed",children:l.jsx(Rn,{userType:"client",onLogout:S})}),l.jsxs("div",{className:"ml-64 flex",children:[l.jsxs("div",{className:"w-1/3 border-r border-border bg-card",children:[l.jsxs("div",{className:"p-6 border-b border-border",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("h1",{className:"text-2xl font-bold",children:"Meus Acessos"})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),l.jsx(we,{placeholder:"Buscar acessos...",value:d,onChange:B=>f(B.target.value),className:"pl-10"})]}),l.jsx("div",{className:"flex gap-2",children:l.jsxs(G,{variant:h?"default":"outline",size:"sm",onClick:()=>p(!h),children:[l.jsx(Mg,{className:`w-4 h-4 mr-1 ${h?"fill-current":""}`}),"Favoritos"]})})]})]}),l.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-200px)]",children:C.length===0?l.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[l.jsx(Sr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Nenhum acesso encontrado"}),l.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros"})]}):C.map(B=>{c.find(D=>D.id===B.empresa_id);const K=k(B.site),R=N(B.categoria||"other"),T=m===B.id;return l.jsx("div",{className:`p-4 border-b border-border cursor-pointer hover:bg-muted/50 transition-colors ${T?"bg-muted border-l-4 border-l-primary":""}`,onClick:()=>v(B.id),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-muted flex items-center justify-center flex-shrink-0",children:K?l.jsx("img",{src:K,alt:`${B.nome} favicon`,className:"w-6 h-6",onError:D=>{const L=D.target;L.parentElement.innerHTML=`<div class="h-5 w-5 text-muted-foreground">${Sr}</div>`}}):l.jsx(R,{className:"h-5 w-5 text-muted-foreground"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("h3",{className:"font-medium text-sm truncate",children:B.nome}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(G,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:D=>{D.stopPropagation(),E(B.id)},children:i(B.id)?l.jsx(Mg,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}):l.jsx(wI,{className:"h-3 w-3 text-muted-foreground"})}),l.jsx(Be,{variant:B.status?"default":"secondary",className:"text-xs",children:B.status?"Ativo":"Inativo"})]})]}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:B.site}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:B.usuario})]})]})},B.id)})})]}),l.jsx("div",{className:"flex-1 p-6",children:O?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4 pb-6 border-b border-border",children:[l.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-muted flex items-center justify-center",children:(()=>{const B=k(O.site);return l.jsx("img",{src:B||"",alt:`${O.nome} favicon`,className:"w-10 h-10",onError:K=>{const R=K.target;R.outerHTML='<div class="flex items-center justify-center w-16 h-16"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-muted-foreground"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg></div>'}})})()}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-2xl font-bold",children:O.nome}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("p",{className:"text-muted-foreground",children:O.site}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>H(O.site),children:l.jsx(QC,{className:"w-4 h-4"})})]})]}),l.jsx(Be,{variant:O.status?"default":"secondary",children:O.status?"Ativo":"Inativo"})]}),l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(uu,{className:"w-5 h-5"}),"Credenciais de Acesso"]})}),l.jsxs(Ae,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Usurio"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(we,{value:O.usuario,readOnly:!0,className:"font-mono bg-muted"}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>$(O.usuario,O.id,"usuario"),children:y[`${O.id}-usuario`]?l.jsx(Ar,{className:"w-4 h-4"}):l.jsx(co,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Senha"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(we,{type:b.has(O.id)?"text":"password",value:O.senha_criptografada,readOnly:!0,className:"font-mono bg-muted"}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>A(O.id),children:b.has(O.id)?l.jsx(fy,{className:"w-4 h-4"}):l.jsx(Vl,{className:"w-4 h-4"})}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>$(O.senha_criptografada,O.id,"senha"),children:y[`${O.id}-senha`]?l.jsx(Ar,{className:"w-4 h-4"}):l.jsx(co,{className:"w-4 h-4"})})]})]}),O.totp_enabled&&O.totp_secret&&l.jsx(nF,{secret:O.totp_secret,issuer:"DMM",label:O.nome})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{children:"Informaes"})}),l.jsxs(Ae,{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Empresa"}),l.jsx("p",{className:"text-sm",children:((V=c.find(B=>B.id===O.empresa_id))==null?void 0:V.nome)||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),l.jsx("div",{className:"mt-1",children:l.jsx(Be,{variant:O.status?"default":"secondary",children:O.status?"Ativo":"Inativo"})})]})]})]}),l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{children:"Histrico"})}),l.jsxs(Ae,{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Criado em"}),l.jsx("p",{className:"text-sm",children:O.criado_em?wn(new Date(O.criado_em),"dd/MM/yyyy HH:mm",{locale:pu}):"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Criado por"}),l.jsx("p",{className:"text-sm",children:u(O.criado_por)||"N/A"})]}),O.ultimo_acesso&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"ltimo acesso"}),l.jsx("p",{className:"text-sm",children:wn(new Date(O.ultimo_acesso),"dd/MM/yyyy HH:mm",{locale:pu})})]})]})]})]}),O.notas&&l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{children:"Notas"})}),l.jsx(Ae,{children:l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:O.notas})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx(Sr,{className:"w-24 h-24 text-muted-foreground/50 mb-4"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selecione um acesso"}),l.jsx("p",{className:"text-muted-foreground",children:"Escolha um acesso na lista para visualizar os detalhes e credenciais"})]})})]})]})},np=g.forwardRef(({className:t,...e},n)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:n,className:ue("w-full caption-bottom text-sm",t),...e})}));np.displayName="Table";const rp=g.forwardRef(({className:t,...e},n)=>l.jsx("thead",{ref:n,className:ue("[&_tr]:border-b",t),...e}));rp.displayName="TableHeader";const sp=g.forwardRef(({className:t,...e},n)=>l.jsx("tbody",{ref:n,className:ue("[&_tr:last-child]:border-0",t),...e}));sp.displayName="TableBody";const Sse=g.forwardRef(({className:t,...e},n)=>l.jsx("tfoot",{ref:n,className:ue("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));Sse.displayName="TableFooter";const Er=g.forwardRef(({className:t,...e},n)=>l.jsx("tr",{ref:n,className:ue("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Er.displayName="TableRow";const ht=g.forwardRef(({className:t,...e},n)=>l.jsx("th",{ref:n,className:ue("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ht.displayName="TableHead";const rt=g.forwardRef(({className:t,...e},n)=>l.jsx("td",{ref:n,className:ue("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));rt.displayName="TableCell";const Cse=g.forwardRef(({className:t,...e},n)=>l.jsx("caption",{ref:n,className:ue("mt-4 text-sm text-muted-foreground",t),...e}));Cse.displayName="TableCaption";const hF=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["pagamentos"],queryFn:async()=>{try{const{data:d,error:f}=await re.from("pagamentos").select(`
            *,
            empresas!inner(
              id,
              nome,
              status
            )
          `).order("data_vencimento",{ascending:!1});if(f)throw console.error("Erro ao buscar pagamentos:",f),f;return d}catch(d){return console.error("Erro na query de pagamentos:",d),[]}}}),r=Qe({mutationFn:async d=>{const{data:f,error:h}=await re.from("pagamentos").insert([d]).select().single();if(h)throw h;return f},onSuccess:()=>{t.invalidateQueries({queryKey:["pagamentos"]}),q.success("Pagamento adicionado com sucesso!")},onError:d=>{console.error("Erro ao criar pagamento:",d),q.error("Erro ao adicionar pagamento")}}),s=Qe({mutationFn:async({id:d,...f})=>{const{data:h,error:p}=await re.from("pagamentos").update(f).eq("id",d).select().single();if(p)throw p;return h},onSuccess:()=>{t.invalidateQueries({queryKey:["pagamentos"]}),q.success("Pagamento atualizado com sucesso!")},onError:d=>{console.error("Erro ao atualizar pagamento:",d),q.error("Erro ao atualizar pagamento")}}),o=Qe({mutationFn:async d=>{const{error:f}=await re.from("pagamentos").delete().eq("id",d);if(f)throw f},onSuccess:()=>{t.invalidateQueries({queryKey:["pagamentos"]}),q.success("Pagamento excludo com sucesso!")},onError:d=>{console.error("Erro ao excluir pagamento:",d),q.error("Erro ao excluir pagamento")}}),i=async(d,f,h)=>{try{const p=new Date().getFullYear(),m=`${f}/${p}/${h}/${d.name}`,{error:v}=await re.storage.from("comprovantes").upload(m,d,{cacheControl:"3600",upsert:!0});if(v)throw v;const{data:{publicUrl:b}}=re.storage.from("comprovantes").getPublicUrl(m);return b}catch(p){throw console.error("Erro ao fazer upload do comprovante:",p),q.error("Erro ao fazer upload do comprovante"),p}},a=async d=>{try{const f=d.split("/storage/v1/object/public/comprovantes/");if(f.length<2)throw new Error("URL de comprovante invlida");const h=f[1],{error:p}=await re.storage.from("comprovantes").remove([h]);if(p)throw p;q.success("Comprovante removido com sucesso")}catch(f){throw console.error("Erro ao remover comprovante:",f),q.error("Erro ao remover comprovante"),f}},c=d=>{const f=new Date(d);for(;f.getDay()===0||f.getDay()===6;)f.getDay()===0?f.setDate(f.getDate()+1):f.getDay()===6&&f.setDate(f.getDate()+2);return f},u=Qe({mutationFn:async()=>{const{data:d,error:f}=await re.from("empresas").select("id, nome, valor_projeto, data_inicio, data_encerramento, status, frequencia_pagamento").not("valor_projeto","is",null).gt("valor_projeto",0).not("data_inicio","is",null);if(f)throw f;if(!d||d.length===0)return{created:0,skipped:0};let h=0,p=0;for(const m of d){const v=new Date(m.data_inicio),b=new Date,x=m.frequencia_pagamento||"Mensal";let y;m.data_encerramento?y=new Date(m.data_encerramento):y=b;let w=1,S=0;switch(x){case"Semanal":w=4,S=7;break;case"Quinzenal":w=2,S=15;break;case"Mensal":w=1,S=0;break;case"Trimestral":w=1,S=0;break;case"Semestral":w=1,S=0;break;case"Anual":w=1,S=0;break}const j=(m.valor_projeto||0)/w;let C=new Date(v);for(;C<=y;){if(x==="Semanal"||x==="Quinzenal")for(let k=0;k<w;k++){let N=new Date(C);if(N.setDate(N.getDate()+k*S),N=c(N),m.data_encerramento){const $=new Date(m.data_encerramento);if(N>$)break}if(N>y)break;const E=N.toISOString().split("T")[0],{data:A}=await re.from("pagamentos").select("id").eq("empresa_id",m.id).eq("data_vencimento",E);if(!A||A.length===0){const{error:$}=await re.from("pagamentos").insert({empresa_id:m.id,valor:j,data_vencimento:E,status:"Pendente",forma_pagamento:"Pix",notas:"Cobrana gerada automaticamente"});$?console.error(`Erro ao criar pagamento para ${m.nome}:`,$):h++}else p++}else{const k=C.getDate(),N=C.getFullYear(),E=C.getMonth(),A=new Date(N,E+1,0).getDate(),$=Math.min(k,A);let H=new Date(N,E,$);if(H=c(H),m.data_encerramento){const R=new Date(m.data_encerramento);if(H>R)break}const O=H.toISOString().split("T")[0],V=new Date(N,E,1).toISOString().split("T")[0],B=new Date(N,E+1,0).toISOString().split("T")[0],{data:K}=await re.from("pagamentos").select("id").eq("empresa_id",m.id).gte("data_vencimento",V).lte("data_vencimento",B);if(!K||K.length===0){const{error:R}=await re.from("pagamentos").insert({empresa_id:m.id,valor:m.valor_projeto||0,data_vencimento:O,status:"Pendente",forma_pagamento:"Pix",notas:"Cobrana gerada automaticamente"});R?console.error(`Erro ao criar pagamento para ${m.nome}:`,R):h++}else p++}switch(x){case"Semanal":case"Quinzenal":C.setMonth(C.getMonth()+1),C.setDate(v.getDate());break;case"Mensal":C.setMonth(C.getMonth()+1);break;case"Trimestral":C.setMonth(C.getMonth()+3);break;case"Semestral":C.setMonth(C.getMonth()+6);break;case"Anual":C.setFullYear(C.getFullYear()+1);break}}}return{created:h,skipped:p}},onSuccess:d=>{t.invalidateQueries({queryKey:["pagamentos"]}),d.created>0&&q.success(`${d.created} cobrana(s) gerada(s) automaticamente`)},onError:d=>{console.error("Erro ao gerar cobranas recorrentes:",d),q.error("Erro ao gerar cobranas recorrentes")}});return{pagamentos:e,isLoading:n,createPagamento:r,updatePagamento:s,deletePagamento:o,uploadComprovante:i,deleteComprovante:a,gerarCobrancasRecorrentes:u}},jse=()=>{const{perfil:t}=jt(),{pagamentos:e,isLoading:n}=hF(),r=g.useMemo(()=>t!=null&&t.empresa_id?e.filter(u=>u.empresa_id===t.empresa_id):[],[e,t==null?void 0:t.empresa_id]),s=g.useMemo(()=>{const u=new Date,d=u.getMonth(),f=u.getFullYear();return r.find(h=>{const p=new Date(h.data_vencimento);return p.getMonth()===d&&p.getFullYear()===f})},[r]),o=g.useMemo(()=>{const u=new Date,d=u.getMonth(),f=u.getFullYear(),h=r.filter(b=>{const x=new Date(b.data_vencimento);return x.getMonth()===d&&x.getFullYear()===f}),p=r.filter(b=>b.status==="Pago").reduce((b,x)=>b+parseFloat(x.valor.toString()),0),m=r.filter(b=>b.status==="Pendente").reduce((b,x)=>b+parseFloat(x.valor.toString()),0),v=r.filter(b=>b.status==="Atrasado").reduce((b,x)=>b+parseFloat(x.valor.toString()),0);return{totalPago:p,totalPendente:m,totalAtrasado:v,pagamentosMesAtual:h.length}},[r]),i=u=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u),a=u=>wn(new Date(u),"dd 'de' MMMM 'de' yyyy",{locale:pu}),c=u=>{switch(u){case"Pago":return"bg-green-500/10 text-green-500 border-green-500/20";case"Pendente":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";case"Atrasado":return"bg-red-500/10 text-red-500 border-red-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}};return n?l.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:l.jsx("p",{className:"text-muted-foreground",children:"Carregando informaes financeiras..."})}):l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Rn,{userType:"client"}),l.jsx("div",{className:"lg:pl-64",children:l.jsxs("div",{className:"p-6 lg:p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Financeiro"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Acompanhe seus pagamentos e faturas"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs(Me,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Total Pago"}),l.jsx(Gw,{className:"h-4 w-4 text-green-500"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold text-green-500",children:i(o.totalPago)}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de pagamentos realizados"})]})]}),l.jsxs(Me,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Pendente"}),l.jsx(yn,{className:"h-4 w-4 text-yellow-500"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:i(o.totalPendente)}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Aguardando pagamento"})]})]}),l.jsxs(Me,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Atrasado"}),l.jsx(cu,{className:"h-4 w-4 text-red-500"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold text-red-500",children:i(o.totalAtrasado)}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pagamentos em atraso"})]})]}),l.jsxs(Me,{children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Faturas"}),l.jsx(NJ,{className:"h-4 w-4 text-primary"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold text-primary",children:r.length}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total de faturas registradas"})]})]})]}),s&&l.jsxs(Me,{className:"mb-8",children:[l.jsx(Ge,{children:l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(cu,{className:"h-5 w-5"}),"Fatura do Ms Atual"]})}),l.jsxs(Ae,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Valor"}),l.jsx("p",{className:"text-2xl font-bold",children:i(parseFloat(s.valor.toString()))})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Vencimento"}),l.jsx("p",{className:"text-lg font-semibold",children:a(s.data_vencimento)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Status"}),l.jsx(Be,{className:c(s.status),children:s.status})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Forma de Pagamento"}),l.jsx("p",{className:"text-lg font-semibold",children:s.forma_pagamento})]})]}),s.comprovante_url&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Comprovante de Pagamento"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(G,{variant:"outline",onClick:()=>window.open(s.comprovante_url,"_blank"),children:[l.jsx(Vl,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),l.jsxs(G,{variant:"outline",onClick:()=>{const u=document.createElement("a");u.href=s.comprovante_url,u.download=`comprovante-${s.id}`,u.click()},children:[l.jsx(Yw,{className:"h-4 w-4 mr-2"}),"Baixar"]})]})]}),s.notas&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Observaes"}),l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.notas})]})]})]}),l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{children:"Histrico de Pagamentos"})}),l.jsx(Ae,{children:r.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx(cu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),l.jsx("p",{className:"text-muted-foreground",children:"Nenhum pagamento registrado ainda."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(np,{children:[l.jsx(rp,{children:l.jsxs(Er,{children:[l.jsx(ht,{children:"Vencimento"}),l.jsx(ht,{children:"Valor"}),l.jsx(ht,{children:"Status"}),l.jsx(ht,{children:"Forma de Pagamento"}),l.jsx(ht,{children:"Comprovante"})]})}),l.jsx(sp,{children:r.sort((u,d)=>new Date(d.data_vencimento).getTime()-new Date(u.data_vencimento).getTime()).map(u=>l.jsxs(Er,{children:[l.jsx(rt,{children:a(u.data_vencimento)}),l.jsx(rt,{className:"font-semibold",children:i(parseFloat(u.valor.toString()))}),l.jsx(rt,{children:l.jsx(Be,{className:c(u.status),children:u.status})}),l.jsx(rt,{children:u.forma_pagamento}),l.jsx(rt,{children:u.comprovante_url?l.jsxs("div",{className:"flex gap-2",children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>window.open(u.comprovante_url,"_blank"),children:l.jsx(Vl,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{const d=document.createElement("a");d.href=u.comprovante_url,d.download=`comprovante-${u.id}`,d.click()},children:l.jsx(Yw,{className:"h-4 w-4"})})]}):l.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})})]},u.id))})]})})})]})]})})]})},kse=()=>{const{perfil:t}=jt(),{data:e=[],isLoading:n}=jn({queryKey:["minhas-tarefas",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:r,error:s}=await re.from("tarefas").select(`
          *,
          criado_por_perfil:perfis!tarefas_criado_por_fkey(nome_completo, url_avatar),
          tarefa_responsaveis!inner(responsavel_id),
          empresa:empresas!inner(nome, status)
        `).eq("tarefa_responsaveis.responsavel_id",t.id).eq("tipo","tarefa").eq("empresa.status","ativo").in("status",["em_andamento","pode_fazer","deve_fazer"]).order("status",{ascending:!0}).order("data_entrega",{ascending:!0,nullsFirst:!1}).limit(10);if(s)throw console.error("Erro ao buscar minhas tarefas:",s),s;return r||[]},enabled:!!(t!=null&&t.id)});return{minhasTarefas:e,isLoading:n}},Nse=()=>{const{data:t={},isLoading:e}=jn({queryKey:["tarefas-por-responsavel"],queryFn:async()=>{const{data:n,error:r}=await re.from("tarefa_responsaveis").select(`
          responsavel_id,
          tarefa:tarefas!inner(
            id,
            status,
            empresa:empresas!inner(status)
          )
        `).eq("tarefa.empresa.status","ativo").neq("tarefa.status","concluido").neq("tarefa.status","rejeitado");if(r)throw console.error("Erro ao buscar tarefas por responsvel:",r),r;const s={};return n==null||n.forEach(o=>{const i=o.responsavel_id;s[i]||(s[i]=0),s[i]++}),s}});return{tarefasPorResponsavel:t,isLoading:e}},Ese=()=>{var j;const t=ud(),{signOut:e,perfil:n}=jt(),{empresas:r,isLoading:s}=cn(),{tarefas:o,isLoading:i}=jo(),{checklists:a,isLoading:c}=oc(),{minhasTarefas:u,isLoading:d}=kse(),{perfisEquipe:f}=On(),{tarefasPorResponsavel:h,isLoading:p}=Nse(),{data:m=[],isLoading:v}=jn({queryKey:["minhas-recorrencias",n==null?void 0:n.id],queryFn:async()=>{if(!(n!=null&&n.id))return[];const{data:C,error:k}=await re.from("tarefa_responsaveis").select("tarefa_id").eq("responsavel_id",n.id);if(k)throw k;return C},enabled:!!(n!=null&&n.id)}),b=async()=>{try{await e(),t("/login")}catch(C){console.error("Erro ao fazer logout:",C),t("/login")}};if(s||i||c||d||p||v)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});const x={total:o.length,emAndamento:o.filter(C=>C.status==="em_andamento").length,concluidas:o.filter(C=>C.status==="concluido").length,pendentes:o.filter(C=>["pode_fazer","deve_fazer","pronto_fazer"].includes(C.status)).length,atrasadas:o.filter(C=>C.data_entrega?new Date(C.data_entrega)<new Date&&C.status!=="concluido":!1).length},y={total:a.length,concluidos:a.filter(C=>C.concluido).length,pendenciasDMM:a.filter(C=>C.tipo==="pendencia_dmm"&&!C.concluido).length,pendenciasCliente:a.filter(C=>C.tipo==="pendencia_cliente"&&!C.concluido).length},w=o.filter(C=>{if(!C.data_entrega||C.status==="concluido")return!1;const k=Math.ceil((new Date(C.data_entrega).getTime()-new Date().getTime())/(1e3*60*60*24));return k<=3&&k>=0}).slice(0,5),S=[...o.slice(0,3).map(C=>{var k;return{id:C.id,tipo:"tarefa",titulo:C.titulo,empresa:((k=r.find(N=>N.id===C.empresa_id))==null?void 0:k.nome)||"Empresa",data:C.criado_em,status:C.status}}),...a.slice(0,2).map(C=>{var k;return{id:C.id,tipo:"checklist",titulo:C.titulo,empresa:((k=r.find(N=>N.id===C.empresa_id))==null?void 0:k.nome)||"Empresa",data:C.criado_em,status:C.concluido?"concluido":"pendente"}})].sort((C,k)=>new Date(k.data).getTime()-new Date(C.data).getTime()).slice(0,5);return l.jsxs("div",{className:"flex min-h-screen bg-background",children:[l.jsx("div",{className:"fixed top-0 left-0 h-screen z-50",children:l.jsx(Rn,{userType:"team",onLogout:b})}),l.jsxs("main",{className:"flex-1 ml-64 overflow-auto",children:[l.jsx("div",{className:"sticky top-0 z-10 bg-background border-b px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Bem-vindo, ",(n==null?void 0:n.nome_completo)||"Usurio","!"]}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Viso geral das atividades da equipe DMM"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(on,{className:"h-10 w-10",children:[l.jsx(an,{src:(n==null?void 0:n.url_avatar)||"/placeholder.svg",alt:n==null?void 0:n.nome_completo}),l.jsx(ln,{children:((j=n==null?void 0:n.nome_completo)==null?void 0:j.charAt(0))||"U"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm font-medium",children:n==null?void 0:n.nome_completo}),l.jsx("p",{className:"text-xs text-muted-foreground",children:(n==null?void 0:n.funcao)==="dmm_admin"?"Administrador":"Membro da Equipe"})]})]})]})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Total de Tarefas"}),l.jsx(Jw,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold",children:x.total}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.emAndamento," em andamento"]})]})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Checklists"}),l.jsx(Tg,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold",children:y.total}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.concluidos," concludos"]})]})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Empresas Ativas"}),l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold",children:r.filter(C=>C.status==="ativo").length}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Clientes ativos"})]})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(nt,{className:"text-sm font-medium",children:"Tarefas Atrasadas"}),l.jsx(SI,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(Ae,{children:[l.jsx("div",{className:"text-2xl font-bold",children:x.atrasadas}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Tarefas vencidas"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(DJ,{className:"h-5 w-5 text-purple-600"}),"Minhas Tarefas"]}),l.jsx(_i,{children:"Tarefas em que voc est atribudo"})]}),l.jsx(Ae,{children:w.length===0?l.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma tarefa atribuda no momento"}):l.jsx("div",{className:"space-y-3",children:w.map(C=>{const k=r.find(A=>A.id===C.empresa_id),N={pode_fazer:"bg-slate-100 text-slate-700",deve_fazer:"bg-orange-100 text-orange-700",em_andamento:"bg-purple-100 text-purple-700",em_revisao:"bg-blue-100 text-blue-700",concluido:"bg-green-100 text-green-700",rejeitado:"bg-red-100 text-red-700"}[C.status]||"bg-gray-100 text-gray-700",E={pode_fazer:"Pode Fazer",deve_fazer:"Deve Fazer",em_andamento:"Em Andamento",em_revisao:"Em Reviso",concluido:"Concludo",rejeitado:"Rejeitado"}[C.status]||C.status;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-medium line-clamp-2 break-words",children:C.titulo}),l.jsx("p",{className:"text-xs text-muted-foreground",children:k==null?void 0:k.nome}),C.data_entrega&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Entrega: ",new Date(C.data_entrega).toLocaleDateString("pt-BR")]})]}),l.jsx(Be,{className:N,children:E})]},C.id)})})})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(Eg,{className:"h-5 w-5 text-green-600"}),"Minhas Recorrncias"]}),l.jsx(_i,{children:"Tarefas recorrentes em que voc est atribudo"})]}),l.jsx(Ae,{children:(()=>{const C=o.filter(k=>k.status==="recorrente"&&m.some(N=>N.tarefa_id===k.id));return C.length===0?l.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma recorrncia atribuda"}):l.jsx("div",{className:"space-y-3",children:C.slice(0,5).map(k=>{const N=r.find(E=>E.id===k.empresa_id);return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-medium line-clamp-2 break-words",children:k.titulo}),l.jsx("p",{className:"text-xs text-muted-foreground",children:N==null?void 0:N.nome}),k.data_entrega&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Entrega: ",new Date(k.data_entrega).toLocaleDateString("pt-BR")]})]}),l.jsx(Be,{variant:"outline",className:"text-green-600 border-green-600",children:"Recorrente"})]},k.id)})})})()})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(Eg,{className:"h-5 w-5 text-blue-600"}),"Atividade Recente"]}),l.jsx(_i,{children:"ltimas tarefas e checklists criados"})]}),l.jsx(Ae,{children:S.length===0?l.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma atividade recente"}):l.jsx("div",{className:"space-y-3",children:S.map(C=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${C.tipo==="tarefa"?"bg-blue-500":"bg-green-500"}`}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h4",{className:"text-sm font-medium line-clamp-2 break-words",children:C.titulo}),l.jsx("p",{className:"text-xs text-muted-foreground",children:C.empresa})]}),l.jsx(Be,{variant:"outline",className:"text-xs",children:C.tipo})]},`${C.tipo}-${C.id}`))})})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsxs(nt,{className:"flex items-center gap-2",children:[l.jsx(sc,{className:"h-5 w-5 text-purple-600"}),"Tarefas por Responsvel"]}),l.jsx(_i,{children:"Distribuio de tarefas entre responsveis da DMM"})]}),l.jsx(Ae,{children:l.jsx("div",{className:"space-y-3",children:f.filter(C=>C.funcao==="dmm_admin"||C.funcao==="dmm_membro").map(C=>{const k=h[C.id]||0;return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(on,{className:"h-8 w-8",children:[l.jsx(an,{src:C.url_avatar||"",alt:C.nome_completo}),l.jsx(ln,{children:C.nome_completo.charAt(0)})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium",children:C.nome_completo}),l.jsx("p",{className:"text-xs text-muted-foreground",children:C.funcao==="dmm_admin"?"Administrador":"Membro"})]})]}),l.jsxs(Be,{variant:"secondary",children:[k," tarefas"]})]},C.id)})})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsx(nt,{children:"Status das Tarefas"}),l.jsx(_i,{children:"Distribuio e funil de converso das tarefas"})]}),l.jsx(Ae,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-100 dark:bg-slate-800 rounded",children:[l.jsx("span",{className:"text-sm font-medium",children:"Poderia Fazer"}),l.jsx(Be,{variant:"secondary",children:o.filter(C=>C.status==="pode_fazer").length})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-100 dark:bg-orange-800 rounded ml-2",children:[l.jsx("span",{className:"text-sm font-medium",children:"Devemos Fazer"}),l.jsx(Be,{variant:"secondary",children:o.filter(C=>C.status==="deve_fazer").length})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-pink-100 dark:bg-pink-800 rounded ml-4",children:[l.jsx("span",{className:"text-sm font-medium",children:"Pronto para Fazer"}),l.jsx(Be,{variant:"secondary",children:o.filter(C=>C.status==="pronto_fazer").length})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-100 dark:bg-purple-800 rounded ml-6",children:[l.jsx("span",{className:"text-sm font-medium",children:"Em Progresso"}),l.jsx(Be,{variant:"secondary",children:x.emAndamento})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-100 dark:bg-blue-800 rounded ml-8",children:[l.jsx("span",{className:"text-sm font-medium",children:"Em Reviso"}),l.jsx(Be,{variant:"secondary",children:o.filter(C=>C.status==="em_revisao").length})]}),l.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-100 dark:bg-green-800 rounded ml-10",children:[l.jsx("span",{className:"text-sm font-medium",children:"Concludo"}),l.jsx(Be,{className:"bg-green-100 text-green-700",children:x.concluidas})]})]}),l.jsxs("div",{className:"pt-2 border-t space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Recorrente"}),l.jsx(Be,{variant:"outline",children:o.filter(C=>C.status==="recorrente").length})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Rejeitado"}),l.jsx(Be,{variant:"destructive",children:o.filter(C=>C.status==="rejeitado").length})]})]})]})})]}),l.jsxs(Me,{className:"dmm-card",children:[l.jsxs(Ge,{children:[l.jsx(nt,{children:"Status dos Checklists"}),l.jsx(_i,{children:"Distribuio dos checklists por tipo"})]}),l.jsx(Ae,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Pendncias Cliente"}),l.jsx(Be,{variant:"outline",children:y.pendenciasCliente})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm",children:"Concludos"}),l.jsx(Be,{className:"bg-green-100 text-green-700",children:y.concluidos})]})]})})]})]}),l.jsxs(Me,{className:"dmm-card mt-6",children:[l.jsxs(Ge,{children:[l.jsx(nt,{children:"Aes Rpidas"}),l.jsx(_i,{children:"Acesso rpido s principais funcionalidades"})]}),l.jsx(Ae,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(G,{onClick:()=>t("/tasks-team"),className:"dmm-btn-primary justify-start",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Nova Tarefa"]}),l.jsxs(G,{onClick:()=>t("/checklist-team"),variant:"outline",className:"justify-start",children:[l.jsx(Tg,{className:"h-4 w-4 mr-2"}),"Novo Checklist"]}),l.jsxs(G,{variant:"outline",className:"justify-start",disabled:!0,children:[l.jsx(Kw,{className:"h-4 w-4 mr-2"}),"Relatrios"]})]})})]})]})]})]})};function gn(t){this.content=t}gn.prototype={constructor:gn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),o=r.content.slice();return s==-1?o.push(n||t,e):(o[s+1]=e,n&&(o[s]=n)),new gn(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new gn(n)},addToStart:function(t,e){return new gn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new gn(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),o=r.find(t);return s.splice(o==-1?s.length:o,0,e,n),new gn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=gn.from(t),t.size?new gn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=gn.from(t),t.size?new gn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=gn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};gn.from=function(t){if(t instanceof gn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new gn(e)};function pF(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=pF(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function mF(t,e,n,r){for(let s=t.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=t.child(--s),a=e.child(--o),c=i.nodeSize;if(i==a){n-=c,r-=c;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let u=0,d=Math.min(i.text.length,a.text.length);for(;u<d&&i.text[i.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let u=mF(i.content,a.content,n-1,r-1);if(u)return u}n-=c,r-=c}}class Z{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,o){for(let i=0,a=0;a<n;i++){let c=this.content[i],u=a+c.nodeSize;if(u>e&&r(c,s+a,o||null,i)!==!1&&c.content.size){let d=a+1;c.nodesBetween(Math.max(0,e-d),Math.min(c.content.size,n-d),r,s+d)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let o="",i=!0;return this.nodesBetween(e,n,(a,c)=>{let u=a.isText?a.text.slice(Math.max(e,c)-c,n-c):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(i?i=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new Z(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let o=0,i=0;i<n;o++){let a=this.content[o],c=i+a.nodeSize;c>e&&((i<e||c>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),s+=a.nodeSize),i=c}return new Z(r,s)}cutByIndex(e,n){return e==n?Z.empty:e==0&&n==this.content.length?this:new Z(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new Z(s,o)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return pF(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return mF(this,e,n,r)}findIndex(e){if(e==0)return Xp(0,e);if(e==this.size)return Xp(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=e)return o==e?Xp(n+1,o):Xp(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Z.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let n,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(n||(n=e.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Z(n||e,r)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const m0={index:0,offset:0};function Xp(t,e){return m0.index=t,m0.offset=e,m0}function Lg(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Lg(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Lg(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ot=class u1{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Lg(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return u1.none;if(e instanceof u1)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};ot.none=[];class Fg extends Error{}class fe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=vF(this.content,e+this.openStart,n);return r&&new fe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new fe(gF(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return fe.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new fe(Z.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new fe(e,r,s)}}fe.empty=new fe(Z.empty,0,0);function gF(t,e,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(s==e||o.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(gF(o.content,e-s-1,n-s-1)))}function vF(t,e,n,r){let{index:s,offset:o}=t.findIndex(e),i=t.maybeChild(s);if(o==e||i.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=vF(i.content,e-o-1,n,i);return a&&t.replaceChild(s,i.copy(a))}function _se(t,e,n){if(n.openStart>t.depth)throw new Fg("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Fg("Inconsistent open depths");return yF(t,e,n,0)}function yF(t,e,n,r){let s=t.index(r),o=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let i=yF(t,e,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return Tl(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=Tse(n,t);return Tl(o,bF(t,i,a,e,r))}else return Tl(o,$g(t,e,r))}function xF(t,e){if(!e.type.compatibleContent(t.type))throw new Fg("Cannot join "+e.type.name+" onto "+t.type.name)}function d1(t,e,n){let r=t.node(n);return xF(r,e.node(n)),r}function _l(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function yf(t,e,n,r){let s=(e||t).node(n),o=0,i=e?e.index(n):s.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(_l(t.nodeAfter,r),o++));for(let a=o;a<i;a++)_l(s.child(a),r);e&&e.depth==n&&e.textOffset&&_l(e.nodeBefore,r)}function Tl(t,e){return t.type.checkContent(e),t.copy(e)}function bF(t,e,n,r,s){let o=t.depth>s&&d1(t,e,s+1),i=r.depth>s&&d1(n,r,s+1),a=[];return yf(null,t,s,a),o&&i&&e.index(s)==n.index(s)?(xF(o,i),_l(Tl(o,bF(t,e,n,r,s+1)),a)):(o&&_l(Tl(o,$g(t,e,s+1)),a),yf(e,n,s,a),i&&_l(Tl(i,$g(n,r,s+1)),a)),yf(r,null,s,a),new Z(a)}function $g(t,e,n){let r=[];if(yf(null,t,n,r),t.depth>n){let s=d1(t,e,n+1);_l(Tl(s,$g(t,e,n+1)),r)}return yf(e,null,n,r),new Z(r)}function Tse(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)s=e.node(o).copy(Z.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class ph{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ot.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new zg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=e;;){let{index:a,offset:c}=i.content.findIndex(o),u=o-c;if(r.push(i,a,s+c),!u||(i=i.child(a),i.isText))break;o=u-1,s+=c+1}return new ph(n,r,o)}static resolveCached(e,n){let r=FT.get(e);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else FT.set(e,r=new Mse);let s=r.elts[r.i]=ph.resolve(e,n);return r.i=(r.i+1)%Ase,s}}class Mse{constructor(){this.elts=[],this.i=0}}const Ase=12,FT=new WeakMap;class zg{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Pse=Object.create(null);let ma=class f1{constructor(e,n,r,s=ot.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Lg(this.attrs,n||e.defaultAttrs||Pse)&&ot.sameSet(this.marks,r||ot.none)}copy(e=null){return e==this.content?this:new f1(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new f1(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return fe.empty;let s=this.resolve(e),o=this.resolve(n),i=r?0:s.sharedDepth(n),a=s.start(i),u=s.node(i).content.cut(s.pos-a,o.pos-a);return new fe(u,s.depth-i,o.depth-i)}replace(e,n,r){return _se(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return ph.resolveCached(this,e)}resolveNoCache(e){return ph.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),wF(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Z.empty,s=0,o=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,s,o),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let c=s;c<o;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ot.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ot.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=Z.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};ma.prototype.text=void 0;class Bg extends ma{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wF(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Bg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Bg(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function wF(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Gl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Dse(e,n);if(r.next==null)return Gl.empty;let s=SF(r);r.next&&r.err("Unexpected trailing text");let o=zse($se(s));return Bse(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function o(i,a){let c=i.matchFragment(e,r);if(c&&(!n||c.validEnd))return Z.from(a.map(u=>u.createAndFill()));for(let u=0;u<i.next.length;u++){let{type:d,next:f}=i.next[u];if(!(d.isText||d.hasRequiredAttrs())&&s.indexOf(f)==-1){s.push(f);let h=o(f,a.concat(d));if(h)return h}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let i=[];for(let a=s;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:a,next:c}=o.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||c.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return o}).join(`
`)}}Gl.empty=new Gl(!0);class Dse{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function SF(t){let e=[];do e.push(Rse(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Rse(t){let e=[];do e.push(Ose(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Ose(t){let e=Fse(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Ise(t,e);else break;return e}function $T(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Ise(t,e){let n=$T(t),r=n;return t.eat(",")&&(t.next!="}"?r=$T(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Lse(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(e)&&s.push(i)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function Fse(t){if(t.eat("(")){let e=SF(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Lse(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function $se(t){let e=[[]];return s(o(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,c){let u={term:c,to:a};return e[i].push(u),u}function s(i,a){i.forEach(c=>c.to=a)}function o(i,a){if(i.type=="choice")return i.exprs.reduce((c,u)=>c.concat(o(u,a)),[]);if(i.type=="seq")for(let c=0;;c++){let u=o(i.exprs[c],a);if(c==i.exprs.length-1)return u;s(u,a=n())}else if(i.type=="star"){let c=n();return r(a,c),s(o(i.expr,c),c),[r(c)]}else if(i.type=="plus"){let c=n();return s(o(i.expr,a),c),s(o(i.expr,c),c),[r(c)]}else{if(i.type=="opt")return[r(a)].concat(o(i.expr,a));if(i.type=="range"){let c=a;for(let u=0;u<i.min;u++){let d=n();s(o(i.expr,c),d),c=d}if(i.max==-1)s(o(i.expr,c),c);else for(let u=i.min;u<i.max;u++){let d=n();r(c,d),s(o(i.expr,c),d),c=d}return[r(c)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function CF(t,e){return e-t}function zT(t,e){let n=[];return r(e),n.sort(CF);function r(s){let o=t[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:a,to:c}=o[i];!a&&n.indexOf(c)==-1&&r(c)}}}function zse(t){let e=Object.create(null);return n(zT(t,0));function n(r){let s=[];r.forEach(i=>{t[i].forEach(({term:a,to:c})=>{if(!a)return;let u;for(let d=0;d<s.length;d++)s[d][0]==a&&(u=s[d][1]);zT(t,c).forEach(d=>{u||s.push([a,u=[]]),u.indexOf(d)==-1&&u.push(d)})})});let o=e[r.join(",")]=new Gl(r.indexOf(t.length-1)>-1);for(let i=0;i<s.length;i++){let a=s[i][1].sort(CF);o.next.push({type:s[i][0],next:e[a.join(",")]||n(a)})}return o}}function Bse(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let a=0;a<s.next.length;a++){let{type:c,next:u}=s.next[a];i.push(c.name),o&&!(c.isText||c.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jF(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function kF(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let o=t[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function NF(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let o=t[s];o.validate&&o.validate(e[s])}}function EF(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Use(t,r,e[r]);return n}let BT=class _F{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EF(e,r.attrs),this.defaultAttrs=jF(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Gl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:kF(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ma(this,this.computeAttrs(e),Z.from(n),ot.setFrom(r))}createChecked(e=null,n,r){return n=Z.from(n),this.checkContent(n),new ma(this,this.computeAttrs(e),n,ot.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Z.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(Z.empty,!0);return o?new ma(this,e,n.append(o),ot.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){NF(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ot.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,i)=>r[o]=new _F(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Vse(t,e,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class Use{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Vse(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ay{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=EF(e,s.attrs),this.excluded=null;let o=jF(this.attrs);this.instance=o?new ot(this,o):null}create(e=null){return!e&&this.instance?this.instance:new ot(this,kF(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((o,i)=>r[o]=new Ay(o,s++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){NF(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class TF{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=gn.from(e.nodes),n.marks=gn.from(e.marks||{}),this.nodes=BT.compile(this.spec.nodes,this),this.marks=Ay.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=Gl.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?VT(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:VT(this,i.split(" "))}this.nodeFromJSON=s=>ma.fromJSON(this,s),this.markFromJSON=s=>ot.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof BT){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Bg(r,r.defaultAttrs,e,ot.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function VT(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],o=t.marks[s],i=o;if(o)n.push(o);else for(let a in t.marks){let c=t.marks[a];(s=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=c)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Hse(t){return t.tag!=null}function Wse(t){return t.style!=null}class ga{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(Hse(s))this.tags.push(s);else if(Wse(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new HT(this,n,!1);return r.addAll(e,ot.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new HT(this,n,!0);return r.addAll(e,ot.none,n.from,n.to),fe.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(Gse(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(e);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(e,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let c=i.getAttrs(n);if(c===!1)continue;i.attrs=c||void 0}return i}}}static schemaRules(e){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<o)break}n.splice(i,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=WT(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=WT(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ga(e,ga.schemaRules(e)))}}const MF={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},qse={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},AF={ol:!0,ul:!0},mh=1,h1=2,xf=4;function UT(t,e,n){return e!=null?(e?mh:0)|(e==="full"?h1:0):t&&t.whitespace=="pre"?mh|h1:n&~xf}class Zp{constructor(e,n,r,s,o,i){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=ot.none,this.match=o||(i&xf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Z.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&mh)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=Z.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!MF.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class HT{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=UT(null,n.preserveWhitespace,0)|(r?xf:0);s?o=new Zp(s.type,s.attrs,ot.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new Zp(null,null,ot.none,!0,null,i):o=new Zp(e.schema.topNodeType,null,ot.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,o=s.options&h1?"full":this.localPreserveWS||(s.options&mh)>0,{schema:i}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(i.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(i.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let c=0;c<a.length;c++)c&&this.insertNode(i.linebreakReplacement.create(),n,!0),a[c]&&this.insertNode(i.text(a[c]),n,!/\S/.test(a[c]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(i.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;AF.hasOwnProperty(i)&&this.parser.normalizeLists&&Kse(e);let c=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(c?c.ignore:qse.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(e=c.skip);let u,d=this.needsBlock;if(MF.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=c&&c.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),u&&this.sync(o),this.needsBlock=d}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,c,u,c.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let a=void 0;;){let c=this.parser.matchStyle(o,i,this,a);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(u=>!c.clearMark(u)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)a=c;else break}}return n}addElementByRule(e,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let c=this.enter(i,n.attrs||null,r,n.preserveWhitespace);c&&(o=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=e;typeof n.contentElement=="string"?c=e.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(e):n.contentElement&&(c=n.contentElement),this.findAround(e,c,!0),this.addAll(c,r),this.findAround(e,c,!1)}o&&this.sync(a)&&this.open--}addAll(e,n,r,s){let o=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];i!=a;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,n);this.findAtPoint(e,o)}findPlace(e,n,r){let s,o;for(let i=this.open,a=0;i>=0;i--){let c=this.nodes[i],u=c.findWrapping(e);if(u&&(!s||s.length>u.length+a)&&(s=u,o=c,!u.length))break;if(c.solid){if(r)break;a+=2}}if(!s)return null;this.sync(o);for(let i=0;i<s.length;i++)n=this.enterInner(s[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=ot.none;for(let a of s.concat(e.marks))(o.type?o.type.allowsMarkType(a.type):qT(a.type,e.type))&&(i=a.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,n,r,s){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,s)),o}enterInner(e,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=UT(e,o,i.options);i.options&xf&&i.content.length==0&&(a|=xf);let c=ot.none;return r=r.filter(u=>(i.type?i.type.allowsMarkType(u.type):qT(u.type,e))?(c=u.addToSet(c),!1):!0),this.nodes.push(new Zp(e,n,c,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=mh)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(a,c)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;c>=o;c--)if(i(a-1,c))return!0;return!1}else{let d=c>0||c==0&&s?this.nodes[c].type:r&&c>=o?r.node(c-o).type:null;if(!d||d.name!=u&&!d.isInGroup(u))return!1;c--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Kse(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&AF.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Gse(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function WT(t){let e={};for(let n in t)e[n]=t[n];return e}function qT(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let o=[],i=a=>{o.push(a);for(let c=0;c<a.edgeCount;c++){let{type:u,next:d}=a.edge(c);if(u==e||o.indexOf(d)<0&&i(d))return!0}};if(i(s.contentMatch))return!0}}class cc{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=g0(n).createDocumentFragment());let s=r,o=[];return e.forEach(i=>{if(o.length||i.marks.length){let a=0,c=0;for(;a<o.length&&c<i.marks.length;){let u=i.marks[c];if(!this.marks[u.type.name]){c++;continue}if(!u.eq(o[a][0])||u.type.spec.spanning===!1)break;a++,c++}for(;a<o.length;)s=o.pop()[1];for(;c<i.marks.length;){let u=i.marks[c++],d=this.serializeMark(u,i.isInline,n);d&&(o.push([u,s]),s.appendChild(d.dom),s=d.contentDOM||d.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Am(g0(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Am(g0(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Am(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new cc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=KT(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return KT(e.marks)}}function KT(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function g0(t){return t.document||window.document}const GT=new WeakMap;function Yse(t){let e=GT.get(t);return e===void 0&&GT.set(t,e=Qse(t)),e}function Qse(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Am(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=Yse(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let a,c=n?t.createElementNS(n,s):t.createElement(s),u=e[1],d=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){d=2;for(let f in u)if(u[f]!=null){let h=f.indexOf(" ");h>0?c.setAttributeNS(f.slice(0,h),f.slice(h+1),u[f]):f=="style"&&c.style?c.style.cssText=u[f]:c.setAttribute(f,u[f])}}for(let f=d;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:p,contentDOM:m}=Am(t,h,n,r);if(c.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:c,contentDOM:a}}const PF=65535,DF=Math.pow(2,16);function Jse(t,e){return t+e*DF}function YT(t){return t&PF}function Xse(t){return(t-(t&PF))/DF}const RF=1,OF=2,Pm=4,IF=8;class p1{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&IF)>0}get deletedBefore(){return(this.delInfo&(RF|Pm))>0}get deletedAfter(){return(this.delInfo&(OF|Pm))>0}get deletedAcross(){return(this.delInfo&Pm)>0}}class jr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&jr.empty)return jr.empty}recover(e){let n=0,r=YT(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+Xse(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?s:0);if(c>e)break;let u=this.ranges[a+o],d=this.ranges[a+i],f=c+u;if(e<=f){let h=u?e==c?-1:e==f?1:n:n,p=c+s+(h<0?0:d);if(r)return p;let m=e==(n<0?c:f)?null:Jse(a/3,e-c),v=e==c?OF:e==f?RF:Pm;return(n<0?e!=c:e!=f)&&(v|=IF),new p1(p,v,m)}s+=d-u}return r?e+s:new p1(e+s,0,null)}touches(e,n){let r=0,s=YT(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[a+o],d=c+u;if(e<=d&&a==s*3)return!0;r+=this.ranges[a+i]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],a=i-(this.inverted?o:0),c=i+(this.inverted?0:o),u=this.ranges[s+n],d=this.ranges[s+r];e(a,a+u,c,c+d),o+=d-u}}invert(){return new jr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?jr.empty:new jr(e<0?[0,-e,0]:[0,0,e])}}jr.empty=new jr([]);class gh{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new gh(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new gh;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this._maps[o],a=i.mapResult(e,n);if(a.recover!=null){let c=this.getMirror(o);if(c!=null&&c>o&&c<this.to){o=c,e=this._maps[c].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new p1(e,s,null)}}const v0=Object.create(null);class $n{getMap(){return jr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=v0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in v0)throw new RangeError("Duplicate use of step JSON ID "+e);return v0[e]=n,n.prototype.jsonID=e,n}}class Ft{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ft(e,null)}static fail(e){return new Ft(null,e)}static fromReplace(e,n,r,s){try{return Ft.ok(e.replace(n,r,s))}catch(o){if(o instanceof Fg)return Ft.fail(o.message);throw o}}}function Aj(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let o=t.child(s);o.content.size&&(o=o.copy(Aj(o.content,e,o))),o.isInline&&(o=e(o,n,s)),r.push(o)}return Z.fromArray(r)}class ta extends $n{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new fe(Aj(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,o)}invert(){return new js(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ta(n.pos,r.pos,this.mark)}merge(e){return e instanceof ta&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ta(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ta(n.from,n.to,e.markFromJSON(n.mark))}}$n.jsonID("addMark",ta);class js extends $n{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new fe(Aj(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,r)}invert(){return new ta(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new js(n.pos,r.pos,this.mark)}merge(e){return e instanceof js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new js(n.from,n.to,e.markFromJSON(n.mark))}}$n.jsonID("removeMark",js);class na extends $n{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new fe(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new na(this.pos,n.marks[s]);return new na(this.pos,this.mark)}}return new Yl(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new na(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new na(n.pos,e.markFromJSON(n.mark))}}$n.jsonID("addNodeMark",na);class Yl extends $n{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new fe(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new na(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Yl(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Yl(n.pos,e.markFromJSON(n.mark))}}$n.jsonID("removeNodeMark",Yl);class en extends $n{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&m1(e,this.from,this.to)?Ft.fail("Structure replace would overwrite content"):Ft.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new jr([this.from,this.to-this.from,this.slice.size])}invert(e){return new en(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new en(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof en)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?fe.empty:new fe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new en(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?fe.empty:new fe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new en(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new en(n.from,n.to,fe.fromJSON(e,n.slice),!!n.structure)}}$n.jsonID("replace",en);class rn extends $n{constructor(e,n,r,s,o,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=a}apply(e){if(this.structure&&(m1(e,this.from,this.gapFrom)||m1(e,this.gapTo,this.to)))return Ft.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ft.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ft.fromReplace(e,this.from,this.to,r):Ft.fail("Content does not fit in gap")}getMap(){return new jr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new rn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new rn(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new rn(n.from,n.to,n.gapFrom,n.gapTo,fe.fromJSON(e,n.slice),n.insert,!!n.structure)}}$n.jsonID("replaceAround",rn);function m1(t,e,n){let r=t.resolve(e),s=n-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function Zse(t,e,n,r){let s=[],o=[],i,a;t.doc.nodesBetween(e,n,(c,u,d)=>{if(!c.isInline)return;let f=c.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let h=Math.max(u,e),p=Math.min(u+c.nodeSize,n),m=r.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(m)||(i&&i.to==h&&i.mark.eq(f[v])?i.to=p:s.push(i=new js(h,p,f[v])));a&&a.to==h?a.to=p:o.push(a=new ta(h,p,r))}}),s.forEach(c=>t.step(c)),o.forEach(c=>t.step(c))}function eoe(t,e,n,r){let s=[],o=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;o++;let c=null;if(r instanceof Ay){let u=i.marks,d;for(;d=r.isInSet(u);)(c||(c=[])).push(d),u=d.removeFromSet(u)}else r?r.isInSet(i.marks)&&(c=[r]):c=i.marks;if(c&&c.length){let u=Math.min(a+i.nodeSize,n);for(let d=0;d<c.length;d++){let f=c[d],h;for(let p=0;p<s.length;p++){let m=s[p];m.step==o-1&&f.eq(s[p].style)&&(h=m)}h?(h.to=u,h.step=o):s.push({style:f,from:Math.max(a,e),to:u,step:o})}}}),s.forEach(i=>t.step(new js(i.from,i.to,i.style)))}function Pj(t,e,n,r=n.contentMatch,s=!0){let o=t.doc.nodeAt(e),i=[],a=e+1;for(let c=0;c<o.childCount;c++){let u=o.child(c),d=a+u.nodeSize,f=r.matchType(u.type);if(!f)i.push(new en(a,d,fe.empty));else{r=f;for(let h=0;h<u.marks.length;h++)n.allowsMarkType(u.marks[h].type)||t.step(new js(a,d,u.marks[h]));if(s&&u.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(u.text);)m||(m=new fe(Z.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),i.push(new en(a+h.index,a+h.index+h[0].length,m))}}a=d}if(!r.validEnd){let c=r.fillBefore(Z.empty,!0);t.replace(a,a,new fe(c,0,0))}for(let c=i.length-1;c>=0;c--)t.step(i[c])}function toe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function yd(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(o,i,n))return r;if(r==0||s.type.spec.isolating||!toe(s,o,i))break}return null}function noe(t,e,n){let{$from:r,$to:s,depth:o}=e,i=r.before(o+1),a=s.after(o+1),c=i,u=a,d=Z.empty,f=0;for(let m=o,v=!1;m>n;m--)v||r.index(m)>0?(v=!0,d=Z.from(r.node(m).copy(d)),f++):c--;let h=Z.empty,p=0;for(let m=o,v=!1;m>n;m--)v||s.after(m+1)<s.end(m)?(v=!0,h=Z.from(s.node(m).copy(h)),p++):u++;t.step(new rn(c,u,i,a,new fe(d.append(h),f,p),d.size-f,!0))}function Dj(t,e,n=null,r=t){let s=roe(t,e),o=s&&soe(r,e);return o?s.map(QT).concat({type:e,attrs:n}).concat(o.map(QT)):null}function QT(t){return{type:t,attrs:null}}function roe(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let i=o.length?o[0]:e;return n.canReplaceWith(r,s,i)?o:null}function soe(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.child(r),i=e.contentMatch.findWrapping(o.type);if(!i)return null;let c=(i.length?i[i.length-1]:e).contentMatch;for(let u=r;c&&u<s;u++)c=c.matchType(n.child(u).type);return!c||!c.validEnd?null:i}function ooe(t,e,n){let r=Z.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(n[i].type.create(n[i].attrs,r))}let s=e.start,o=e.end;t.step(new rn(s,o,s,o,new fe(r,0,0),n.length,!0))}function ioe(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let c=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,c)&&aoe(t.doc,t.mapping.slice(o).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&FF(t,i,a,o),Pj(t,t.mapping.slice(o).map(a,1),r,void 0,u===null);let d=t.mapping.slice(o),f=d.map(a,1),h=d.map(a+i.nodeSize,1);return t.step(new rn(f,h,f+1,h-1,new fe(Z.from(r.create(c,null,i.marks)),0,0),1,!0)),u===!0&&LF(t,i,a,o),!1}})}function LF(t,e,n,r){e.forEach((s,o)=>{if(s.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(s.text);){let c=t.mapping.slice(r).map(n+1+o+i.index);t.replaceWith(c,c+1,e.type.schema.linebreakReplacement.create())}}})}function FF(t,e,n,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+o);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function aoe(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function loe(t,e,n,r,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new rn(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new fe(Z.from(i),0,0),1,!0))}function mu(t,e,n=1,r){let s=t.resolve(e),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,d=n-2;u>o;u--,d--){let f=s.node(u),h=s.index(u);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[d+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let v=r&&r[d]||f;if(!f.canReplace(h+1,f.childCount)||!v.type.validContent(p))return!1}let a=s.indexAfter(o),c=r&&r[0];return s.node(o).canReplaceWith(a,a,c?c.type:s.node(o+1).type)}function coe(t,e,n=1,r){let s=t.doc.resolve(e),o=Z.empty,i=Z.empty;for(let a=s.depth,c=s.depth-n,u=n-1;a>c;a--,u--){o=Z.from(s.node(a).copy(o));let d=r&&r[u];i=Z.from(d?d.type.create(d.attrs,i):s.node(a).copy(i))}t.step(new en(e,e,new fe(o.append(i),n,n),!0))}function Ba(t,e){let n=t.resolve(e),r=n.index();return $F(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function uoe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),i=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function $F(t,e){return!!(t&&e&&!t.isLeaf&&uoe(t,e))}function Py(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let o,i,a=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),a++,i=r.node(s).maybeChild(a)):(o=r.node(s).maybeChild(a-1),i=r.node(s+1)),o&&!o.isTextblock&&$F(o,i)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function doe(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,o=t.doc.resolve(e-n),i=o.node().type;if(s&&i.inlineContent){let d=i.whitespace=="pre",f=!!i.contentMatch.matchType(s);d&&!f?r=!1:!d&&f&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);FF(t,d.node(),d.before(),a)}i.inlineContent&&Pj(t,e+n-1,i,o.node().contentMatchAt(o.index()),r==null);let c=t.mapping.slice(a),u=c.map(e-n);if(t.step(new en(u,c.map(e+n,-1),fe.empty,!0)),r===!0){let d=t.doc.resolve(u);LF(t,d.node(),d.before(),t.steps.length)}return t}function foe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function zF(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,c=r.index(i)+(a>0?1:0),u=r.node(i),d=!1;if(o==1)d=u.canReplace(c,c,s);else{let f=u.contentMatchAt(c).findWrapping(s.firstChild.type);d=f&&u.canReplaceWith(c,c,f[0])}if(d)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function Dy(t,e,n=e,r=fe.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),o=t.resolve(n);return BF(s,o,r)?new en(e,n,r):new hoe(s,o,r).fit()}function BF(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class hoe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Z.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,i=r.depth,a=s.depth;for(;i&&a&&o.childCount==1;)o=o.firstChild.content,i--,a--;let c=new fe(o,i,a);return e>-1?new rn(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new en(r.pos,s.pos,c):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=y0(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:c,match:u}=this.frontier[a],d,f=null;if(n==1&&(i?u.matchType(i.type)||(f=u.fillBefore(Z.from(i),!1)):o&&c.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:a,parent:o,inject:f};if(n==2&&i&&(d=u.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:o,wrap:d};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=y0(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new fe(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=y0(e,n);if(s.childCount<=1&&n>0){let o=e.size-n<=n+s.size;this.unplaced=new fe(Qd(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new fe(Qd(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let v=0;v<o.length;v++)this.openFrontierNode(o[v]);let i=this.unplaced,a=r?r.content:i.content,c=i.openStart-e,u=0,d=[],{match:f,type:h}=this.frontier[n];if(s){for(let v=0;v<s.childCount;v++)d.push(s.child(v));f=f.matchFragment(s)}let p=a.size+e-(i.content.size-i.openEnd);for(;u<a.childCount;){let v=a.child(u),b=f.matchType(v.type);if(!b)break;u++,(u>1||c==0||v.content.size)&&(f=b,d.push(VF(v.mark(h.allowedMarks(v.marks)),u==1?c:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=Jd(this.placed,n,Z.from(d)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,b=a;v<p;v++){let x=b.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),b=x.content}this.unplaced=m?e==0?fe.empty:new fe(Qd(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new fe(Qd(i.content,e,u),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!x0(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=x0(e,n,s,r,o);if(i){for(let a=n-1;a>=0;a--){let{match:c,type:u}=this.frontier[a],d=x0(e,a,u,c,!0);if(!d||d.childCount)continue e}return{depth:n,fit:i,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Jd(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Jd(this.placed,this.depth,Z.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Z.empty,!0);n.childCount&&(this.placed=Jd(this.placed,this.frontier.length,n))}}function Qd(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Qd(t.firstChild.content,e-1,n)))}function Jd(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Jd(t.lastChild.content,e-1,n)))}function y0(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function VF(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,VF(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),t.copy(r)}function x0(t,e,n,r,s){let o=t.node(e),i=s?t.indexAfter(e):t.index(e);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,i);return a&&!poe(n,o.content,i)?a:null}function poe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function moe(t){return t.spec.defining||t.spec.definingForContent}function goe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(BF(s,o,r))return t.step(new en(e,n,r));let i=HF(s,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(s.depth+1);i.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;i.indexOf(h)>-1?a=h:s.before(h)==p&&i.splice(1,0,-h)}let c=i.indexOf(a),u=[],d=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(u.push(m),p==r.openStart)break;h=m.content}for(let h=d-1;h>=0;h--){let p=u[h],m=moe(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))d=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+d+1)%(r.openStart+1),m=u[p];if(m)for(let v=0;v<i.length;v++){let b=i[(v+c)%i.length],x=!0;b<0&&(x=!1,b=-b);let y=s.node(b-1),w=s.index(b-1);if(y.canReplaceWith(w,w,m.type,m.marks))return t.replace(s.before(b),x?o.after(b):n,new fe(UF(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>f));h--){let p=i[h];p<0||(e=s.before(p),n=o.after(p))}}function UF(t,e,n,r,s){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(UF(o.content,e+1,n,r,o)))}if(e>r){let o=s.contentMatchAt(0),i=o.fillBefore(t).append(t);t=i.append(o.matchFragment(i).fillBefore(Z.empty,!0))}return t}function voe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=foe(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new fe(Z.from(r),0,0))}function yoe(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),o=HF(r,s);for(let i=0;i<o.length;i++){let a=o[i],c=i==o.length-1;if(c&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(c||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function HF(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let o=t.start(s);if(o<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&n.push(s)}return n}class gu extends $n{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Ft.fromReplace(e,this.pos,this.pos+1,new fe(Z.from(s),0,n.isLeaf?0:1))}getMap(){return jr.empty}invert(e){return new gu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new gu(n.pos,n.attr,n.value)}}$n.jsonID("attr",gu);class vh extends $n{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ft.ok(r)}getMap(){return jr.empty}invert(e){return new vh(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new vh(n.attr,n.value)}}$n.jsonID("docAttr",vh);let Gu=class extends Error{};Gu=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Gu.prototype=Object.create(Error.prototype);Gu.prototype.constructor=Gu;Gu.prototype.name="TransformError";class WF{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gh}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Gu(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=fe.empty){let s=Dy(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new fe(Z.from(r),0,0))}delete(e,n){return this.replace(e,n,fe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return goe(this,e,n,r),this}replaceRangeWith(e,n,r){return voe(this,e,n,r),this}deleteRange(e,n){return yoe(this,e,n),this}lift(e,n){return noe(this,e,n),this}join(e,n=1){return doe(this,e,n),this}wrap(e,n){return ooe(this,e,n),this}setBlockType(e,n=e,r,s=null){return ioe(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return loe(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new gu(e,n,r)),this}setDocAttribute(e,n){return this.step(new vh(e,n)),this}addNodeMark(e,n){return this.step(new na(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ot)n.isInSet(r.marks)&&this.step(new Yl(e,n));else{let s=r.marks,o,i=[];for(;o=n.isInSet(s);)i.push(new Yl(e,o)),s=o.removeFromSet(s);for(let a=i.length-1;a>=0;a--)this.step(i[a])}return this}split(e,n=1,r){return coe(this,e,n,r),this}addMark(e,n,r){return Zse(this,e,n,r),this}removeMark(e,n,r){return eoe(this,e,n,r),this}clearIncompatible(e,n,r){return Pj(this,e,n,r),this}}const b0=Object.create(null);class ze{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new xoe(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=fe.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let o=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:c,$to:u}=i[a],d=e.mapping.slice(o);e.replaceRange(d.map(c.pos),d.map(u.pos),a?fe.empty:n),a==0&&ZT(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:a}=s[o],c=e.mapping.slice(r),u=c.map(i.pos),d=c.map(a.pos);o?e.deleteRange(u,d):(e.replaceRangeWith(u,d,n),ZT(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new _e(e):Pc(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let i=n<0?Pc(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Pc(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ts(e.node(0))}static atStart(e){return Pc(e,e,0,0,1)||new ts(e)}static atEnd(e){return Pc(e,e,e.content.size,e.childCount,-1)||new ts(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=b0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in b0)throw new RangeError("Duplicate use of selection JSON ID "+e);return b0[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}}ze.prototype.visible=!0;class xoe{constructor(e,n){this.$from=e,this.$to=n}}let JT=!1;function XT(t){!JT&&!t.parent.inlineContent&&(JT=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _e extends ze{constructor(e,n=e){XT(e),XT(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ze.near(r);let s=e.resolve(n.map(this.anchor));return new _e(s.parent.inlineContent?s:r,r)}replace(e,n=fe.empty){if(super.replace(e,n),n==fe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof _e&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ry(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=ze.findFrom(n,r,!0)||ze.findFrom(n,-r,!0);if(o)n=o.$head;else return ze.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ze.findFrom(e,-r,!0)||ze.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new _e(e,n)}}ze.jsonID("text",_e);class Ry{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ry(e.map(this.anchor),e.map(this.head))}resolve(e){return _e.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ce extends ze{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=e.resolve(s);return r?ze.near(o):new Ce(o)}content(){return new fe(Z.from(this.node),0,0)}eq(e){return e instanceof Ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Rj(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ce(e.resolve(n.anchor))}static create(e,n){return new Ce(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ce.prototype.visible=!1;ze.jsonID("node",Ce);class Rj{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ry(r,r):new Rj(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ce.isSelectable(r)?new Ce(n):ze.near(n)}}class ts extends ze{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=fe.empty){if(n==fe.empty){e.delete(0,e.doc.content.size);let r=ze.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ts(e)}map(e){return new ts(e)}eq(e){return e instanceof ts}getBookmark(){return boe}}ze.jsonID("all",ts);const boe={map(){return this},resolve(t){return new ts(t)}};function Pc(t,e,n,r,s,o=!1){if(e.inlineContent)return _e.create(t,n);for(let i=r-(s>0?0:1);s>0?i<e.childCount:i>=0;i+=s){let a=e.child(i);if(a.isAtom){if(!o&&Ce.isSelectable(a))return Ce.create(t,n-(s<0?a.nodeSize:0))}else{let c=Pc(t,a,n+s,s<0?a.childCount:0,s,o);if(c)return c}n+=a.nodeSize*s}return null}function ZT(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof en||s instanceof rn))return;let o=t.mapping.maps[r],i;o.forEach((a,c,u,d)=>{i==null&&(i=d)}),t.setSelection(ze.near(t.doc.resolve(i),n))}const e2=1,em=2,t2=4;class woe extends WF{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|e2)&~em,this.storedMarks=null,this}get selectionSet(){return(this.updated&e2)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=em,this}ensureMarks(e){return ot.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&em)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~em,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ot.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ze.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=t2,this}get scrolledIntoView(){return(this.updated&t2)>0}}function n2(t,e){return!e||!t?t:t.bind(e)}class Xd{constructor(e,n,r){this.name=e,this.init=n2(n.init,r),this.apply=n2(n.apply,r)}}const Soe=[new Xd("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Xd("selection",{init(t,e){return t.selection||ze.atStart(e.doc)},apply(t){return t.selection}}),new Xd("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Xd("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class w0{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Soe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Xd(r.key,r.spec.state,r))})}}class Zc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let c=s?s[i].n:0,u=s?s[i].state:this,d=c<n.length&&a.spec.appendTransaction.call(a,c?n.slice(c):n,u,r);if(d&&r.filterTransaction(d,i)){if(d.setMeta("appendedTransaction",e),!s){s=[];for(let f=0;f<this.config.plugins.length;f++)s.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Zc(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new woe(this)}static create(e){let n=new w0(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Zc(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new w0(this.schema,e.plugins),r=n.fields,s=new Zc(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new w0(e.schema,e.plugins),o=new Zc(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=ma.fromJSON(e.schema,n.doc);else if(i.name=="selection")o.selection=ze.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let c=r[a],u=c.spec.state;if(c.key==i.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[i.name]=u.fromJSON.call(c,e,n[a],o);return}}o[i.name]=i.init(e,o)}}),o}}function qF(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=qF(s,e,{})),n[r]=s}return n}class Pt{constructor(e){this.spec=e,this.props={},e.props&&qF(e.props,this,this.props),this.key=e.key?e.key.key:KF("plugin")}getState(e){return e[this.key]}}const S0=Object.create(null);function KF(t){return t in S0?t+"$"+ ++S0[t]:(S0[t]=0,t+"$")}class un{constructor(e="key"){this.key=KF(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Coe=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function GF(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const joe=(t,e,n)=>{let r=GF(t,n);if(!r)return!1;let s=Oj(r);if(!s){let i=r.blockRange(),a=i&&yd(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let o=s.nodeBefore;if(XF(t,s,e,-1))return!0;if(r.parent.content.size==0&&(Yu(o,"end")||Ce.isSelectable(o)))for(let i=r.depth;;i--){let a=Dy(t.doc,r.before(i),r.after(i),fe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=t.tr.step(a);c.setSelection(Yu(o,"end")?ze.findFrom(c.doc.resolve(c.mapping.map(s.pos,-1)),-1):Ce.create(c.doc,s.pos-o.nodeSize)),e(c.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},koe=(t,e,n)=>{let r=GF(t,n);if(!r)return!1;let s=Oj(r);return s?YF(t,s,e):!1},Noe=(t,e,n)=>{let r=QF(t,n);if(!r)return!1;let s=Ij(r);return s?YF(t,s,e):!1};function YF(t,e,n){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let d=s.lastChild;if(!d)return!1;s=d}let i=e.nodeAfter,a=i,c=e.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let u=Dy(t.doc,o,c,fe.empty);if(!u||u.from!=o||u instanceof en&&u.slice.size>=c-o)return!1;if(n){let d=t.tr.step(u);d.setSelection(_e.create(d.doc,o)),n(d.scrollIntoView())}return!0}function Yu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Eoe=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=Oj(r)}let i=o&&o.nodeBefore;return!i||!Ce.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function Oj(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function QF(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const _oe=(t,e,n)=>{let r=QF(t,n);if(!r)return!1;let s=Ij(r);if(!s)return!1;let o=s.nodeAfter;if(XF(t,s,e,1))return!0;if(r.parent.content.size==0&&(Yu(o,"start")||Ce.isSelectable(o))){let i=Dy(t.doc,r.before(),r.after(),fe.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(Yu(o,"start")?ze.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Ce.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},Toe=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=Ij(r)}let i=o&&o.nodeAfter;return!i||!Ce.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,o.pos)).scrollIntoView()),!0)};function Ij(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Moe=(t,e)=>{let n=t.selection,r=n instanceof Ce,s;if(r){if(n.node.isTextblock||!Ba(t.doc,n.from))return!1;s=n.from}else if(s=Py(t.doc,n.from,-1),s==null)return!1;if(e){let o=t.tr.join(s);r&&o.setSelection(Ce.create(o.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Aoe=(t,e)=>{let n=t.selection,r;if(n instanceof Ce){if(n.node.isTextblock||!Ba(t.doc,n.to))return!1;r=n.to}else if(r=Py(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Poe=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),o=s&&yd(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)},Doe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function JF(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Roe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=JF(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(e){let a=n.after(),c=t.tr.replaceWith(a,a,i.createAndFill());c.setSelection(ze.near(c.doc.resolve(a),1)),e(c.scrollIntoView())}return!0},Ooe=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof ts||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=JF(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(i,o.createAndFill());a.setSelection(_e.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},Ioe=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(mu(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&yd(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},Loe=(t,e)=>{let{$from:n,to:r}=t.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),e&&e(t.tr.setSelection(Ce.create(t.doc,s))),!0)};function Foe(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||Ba(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function XF(t,e,n,r){let s=e.nodeBefore,o=e.nodeAfter,i,a,c=s.type.spec.isolating||o.type.spec.isolating;if(!c&&Foe(t,e,n))return!0;let u=!c&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(i=(a=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&a.matchType(i[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,m=Z.empty;for(let x=i.length-1;x>=0;x--)m=Z.from(i[x].create(null,m));m=Z.from(s.copy(m));let v=t.tr.step(new rn(e.pos-1,p,e.pos,p,new fe(m,1,0),i.length,!0)),b=v.doc.resolve(p+2*i.length);b.nodeAfter&&b.nodeAfter.type==s.type&&Ba(v.doc,b.pos)&&v.join(b.pos),n(v.scrollIntoView())}return!0}let d=o.type.spec.isolating||r>0&&c?null:ze.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),h=f&&yd(f);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(f,h).scrollIntoView()),!0;if(u&&Yu(o,"start",!0)&&Yu(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let v=o,b=1;for(;!v.isTextblock;v=v.firstChild)b++;if(p.canReplace(p.childCount,p.childCount,v.content)){if(n){let x=Z.empty;for(let w=m.length-1;w>=0;w--)x=Z.from(m[w].copy(x));let y=t.tr.step(new rn(e.pos-m.length,e.pos+o.nodeSize,e.pos+b,e.pos+o.nodeSize-b,new fe(x,m.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function ZF(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(e.tr.setSelection(_e.create(e.doc,t<0?s.start(o):s.end(o)))),!0):!1}}const $oe=ZF(-1),zoe=ZF(1);function Boe(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),a=i&&Dj(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function r2(t,e=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(i,a,(c,u)=>{if(s)return!1;if(!(!c.isTextblock||c.hasMarkup(t,e)))if(c.type==t)s=!0;else{let d=n.doc.resolve(u),f=d.index();s=d.parent.canReplaceWith(f,f+1,t)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[i];o.setBlockType(a,c,t,e)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Voe(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let a=r?n.tr:null;return Uoe(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Uoe(t,e,n,r=null){let s=!1,o=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let c=i.resolve(e.start-2);o=new zg(c,c,e.depth),e.endIndex<e.parent.childCount&&(e=new zg(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=Dj(o,n,r,e);return a?(t&&Hoe(t,e,a,s,n),!0):!1}function Hoe(t,e,n,r,s){let o=Z.empty;for(let d=n.length-1;d>=0;d--)o=Z.from(n[d].type.create(n[d].attrs,o));t.step(new rn(e.start-(r?2:0),e.end,e.start,e.end,new fe(o,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==s&&(i=d+1);let a=n.length-i,c=e.start+n.length-(r?2:0),u=e.parent;for(let d=e.startIndex,f=e.endIndex,h=!0;d<f;d++,h=!1)!h&&mu(t.doc,c,a)&&(t.split(c,a),c+=2*a),c+=u.child(d).nodeSize;return t}function Woe(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?qoe(e,n,t,o):Koe(e,n,o):!0:!1}}function qoe(t,e,n,r){let s=t.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new rn(o-1,i,o,i,new fe(Z.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new zg(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const a=yd(r);if(a==null)return!1;s.lift(r,a);let c=s.doc.resolve(s.mapping.map(o,-1)-1);return Ba(s.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&s.join(c.pos),e(s.scrollIntoView()),!0}function Koe(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,v=n.startIndex;m>v;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,c=n.endIndex==s.childCount,u=o.node(-1),d=o.index(-1);if(!u.canReplace(d+(a?0:1),d+1,i.content.append(c?Z.empty:Z.from(s))))return!1;let f=o.pos,h=f+i.nodeSize;return r.step(new rn(f-(a?1:0),h+(c?1:0),f+1,h-1,new fe((a?Z.empty:Z.from(s.copy(Z.empty))).append(c?Z.empty:Z.from(s.copy(Z.empty))),a?0:1,c?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Goe(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let a=o.parent,c=a.child(i-1);if(c.type!=t)return!1;if(n){let u=c.lastChild&&c.lastChild.type==a.type,d=Z.from(u?t.create():null),f=new fe(Z.from(t.create(null,Z.from(a.type.create(null,d)))),u?3:1,0),h=o.start,p=o.end;n(e.tr.step(new rn(h-(u?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}const xn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Qu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let g1=null;const zo=function(t,e,n){let r=g1||(g1=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Yoe=function(){g1=null},Ql=function(t,e,n,r){return n&&(s2(t,e,n,r,-1)||s2(t,e,n,r,1))},Qoe=/^(img|br|input|textarea|hr)$/i;function s2(t,e,n,r,s){for(var o;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Qr(t))){let i=t.parentNode;if(!i||i.nodeType!=1||op(t)||Qoe.test(t.nodeName)||t.contentEditable=="false")return!1;e=xn(t)+(s<0?0:1),t=i}else if(t.nodeType==1){let i=t.childNodes[e+(s<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((o=i.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else t=i,e=s<0?Qr(t):0}else return!1}}function Qr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Joe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Qr(t)}else if(t.parentNode&&!op(t))e=xn(t),t=t.parentNode;else return null}}function Xoe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!op(t))e=xn(t)+1,t=t.parentNode;else return null}}function Zoe(t,e,n){for(let r=e==0,s=e==Qr(t);r||s;){if(t==n)return!0;let o=xn(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,s=s&&o==Qr(t)}}function op(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Oy=function(t){return t.focusNode&&Ql(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ol(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function eie(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function tie(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Qr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Qr(r.startContainer),r.startOffset)}}}const bo=typeof navigator<"u"?navigator:null,o2=typeof document<"u"?document:null,Va=bo&&bo.userAgent||"",v1=/Edge\/(\d+)/.exec(Va),e$=/MSIE \d/.exec(Va),y1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Va),xr=!!(e$||y1||v1),va=e$?document.documentMode:y1?+y1[1]:v1?+v1[1]:0,ns=!xr&&/gecko\/(\d+)/i.test(Va);ns&&+(/Firefox\/(\d+)/.exec(Va)||[0,0])[1];const x1=!xr&&/Chrome\/(\d+)/.exec(Va),Pn=!!x1,t$=x1?+x1[1]:0,Jn=!xr&&!!bo&&/Apple Computer/.test(bo.vendor),Ju=Jn&&(/Mobile\/\w+/.test(Va)||!!bo&&bo.maxTouchPoints>2),qr=Ju||(bo?/Mac/.test(bo.platform):!1),nie=bo?/Win/.test(bo.platform):!1,qo=/Android \d/.test(Va),ip=!!o2&&"webkitFontSmoothing"in o2.documentElement.style,rie=ip?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function sie(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ao(t,e){return typeof t=="number"?t:t[e]}function oie(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function i2(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=Qu(i);continue}let a=i,c=a==o.body,u=c?sie(o):oie(a),d=0,f=0;if(e.top<u.top+Ao(r,"top")?f=-(u.top-e.top+Ao(s,"top")):e.bottom>u.bottom-Ao(r,"bottom")&&(f=e.bottom-e.top>u.bottom-u.top?e.top+Ao(s,"top")-u.top:e.bottom-u.bottom+Ao(s,"bottom")),e.left<u.left+Ao(r,"left")?d=-(u.left-e.left+Ao(s,"left")):e.right>u.right-Ao(r,"right")&&(d=e.right-u.right+Ao(s,"right")),d||f)if(c)o.defaultView.scrollBy(d,f);else{let p=a.scrollLeft,m=a.scrollTop;f&&(a.scrollTop+=f),d&&(a.scrollLeft+=d);let v=a.scrollLeft-p,b=a.scrollTop-m;e={left:e.left-v,top:e.top-b,right:e.right-v,bottom:e.bottom-b}}let h=c?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(h))break;i=h=="absolute"?i.offsetParent:Qu(i)}}function iie(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(o,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let c=a.getBoundingClientRect();if(c.top>=n-20){r=a,s=c.top;break}}return{refDOM:r,refTop:s,stack:n$(t.dom)}}function n$(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Qu(r));return e}function aie({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;r$(n,r==0?0:r-e)}function r$(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:o}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let _c=null;function lie(t){if(t.setActive)return t.setActive();if(_c)return t.focus(_c);let e=n$(t);t.focus(_c==null?{get preventScroll(){return _c={preventScroll:!0},!0}}:void 0),_c||(_c=!1,r$(e,0))}function s$(t,e){let n,r=2e8,s,o=0,i=e.top,a=e.top,c,u;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let h;if(d.nodeType==1)h=d.getClientRects();else if(d.nodeType==3)h=zo(d).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=i&&m.bottom>=a){i=Math.max(m.bottom,i),a=Math.min(m.top,a);let v=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(v<r){n=d,r=v,s=v&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,d.nodeType==1&&v&&(o=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!c&&m.left<=e.left&&m.right>=e.left&&(c=d,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(o=f+1)}}return!n&&c&&(n=c,s=u,r=0),n&&n.nodeType==3?cie(n,s):!n||r&&n.nodeType==1?{node:t,offset:o}:s$(n,s)}function cie(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=Mi(r,1);if(o.top!=o.bottom&&Lj(e,o))return{node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Lj(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function uie(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function die(t,e,n){let{node:r,offset:s}=s$(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,s,o)}function fie(t,e,n,r){let s=-1;for(let o=e,i=!1;o!=t.dom;){let a=t.docView.nearestDesc(o,!0),c;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((c=a.dom.getBoundingClientRect()).width||c.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!i&&c.left>r.left||c.top>r.top?s=a.posBefore:(!i&&c.right<r.left||c.bottom<r.top)&&(s=a.posAfter),i=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?a.posBefore:a.posAfter;o=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function o$(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=t.childNodes[o];if(i.nodeType==1){let a=i.getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(Lj(e,u))return o$(i,e,u)}}if((o=(o+1)%r)==s)break}return t}function hie(t,e){let n=t.dom.ownerDocument,r,s=0,o=tie(n,e.left,e.top);o&&({node:r,offset:s}=o);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let u=t.dom.getBoundingClientRect();if(!Lj(e,u)||(i=o$(t.dom,e,u),!i))return null}if(Jn)for(let u=i;r&&u;u=Qu(u))u.draggable&&(r=void 0);if(i=uie(i,e),r){if(ns&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let d=r.childNodes[s],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&s++}let u;ip&&s&&r.nodeType==1&&(u=r.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=fie(t,r,s,e))}a==null&&(a=die(t,i,e));let c=t.docView.nearestDesc(i,!0);return{pos:a,inside:c?c.posAtStart-c.border:-1}}function a2(t){return t.top<t.bottom||t.left<t.right}function Mi(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(a2(r))return r}return Array.prototype.find.call(n,a2)||t.getBoundingClientRect()}const pie=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function i$(t,e,n){let{node:r,offset:s,atom:o}=t.docView.domFromPos(e,n<0?-1:1),i=ip||ns;if(r.nodeType==3)if(i&&(pie.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let c=Mi(zo(r,s,s),n);if(ns&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let u=Mi(zo(r,s-1,s-1),-1);if(u.top==c.top){let d=Mi(zo(r,s,s+1),-1);if(d.top!=c.top)return $d(d,d.left<u.left)}}return c}else{let c=s,u=s,d=n<0?1:-1;return n<0&&!s?(u++,d=-1):n>=0&&s==r.nodeValue.length?(c--,d=1):n<0?c--:u++,$d(Mi(zo(r,c,u),d),d<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==Qr(r))){let c=r.childNodes[s-1];if(c.nodeType==1)return C0(c.getBoundingClientRect(),!1)}if(o==null&&s<Qr(r)){let c=r.childNodes[s];if(c.nodeType==1)return C0(c.getBoundingClientRect(),!0)}return C0(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==Qr(r))){let c=r.childNodes[s-1],u=c.nodeType==3?zo(c,Qr(c)-(i?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(u)return $d(Mi(u,1),!1)}if(o==null&&s<Qr(r)){let c=r.childNodes[s];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let u=c?c.nodeType==3?zo(c,0,i?0:1):c.nodeType==1?c:null:null;if(u)return $d(Mi(u,-1),!0)}return $d(Mi(r.nodeType==3?zo(r):r,-n),n>=0)}function $d(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function C0(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function a$(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function mie(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return a$(t,e,()=>{let{node:o}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let i=i$(t,s.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let c;if(a.nodeType==1)c=a.getClientRects();else if(a.nodeType==3)c=zo(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<c.length;u++){let d=c[u];if(d.bottom>d.top+1&&(n=="up"?i.top-d.top>(d.bottom-i.top)*2:d.bottom-i.bottom>(i.bottom-d.top)*2))return!1}}return!0})}const gie=/[\u0590-\u08ac]/;function vie(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,a=t.domSelection();return a?!gie.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:i:a$(t,e,()=>{let{focusNode:c,focusOffset:u,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:v}=t.domSelectionRange(),b=m&&!p.contains(m.nodeType==1?m:m.parentNode)||c==m&&u==v;try{a.collapse(d,f),c&&(c!=d||u!=f)&&a.extend&&a.extend(c,u)}catch{}return h!=null&&(a.caretBidiLevel=h),b}):r.pos==r.start()||r.pos==r.end()}let l2=null,c2=null,u2=!1;function yie(t,e,n){return l2==e&&c2==n?u2:(l2=e,c2=n,u2=n=="up"||n=="down"?mie(t,e,n):vie(t,e,n))}const rs=0,d2=1,dl=2,wo=3;class ap{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=rs,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,i;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>xn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let a=s.children[i];if(a.size){s=a;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],a=o+i.size;if(a>e||i instanceof c$){s=e-o;break}o=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof l$&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?xn(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?xn(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,a=0;;a++){let c=this.children[a],u=i+c.size;if(s==-1&&e<=u){let d=i+c.border;if(e>=d&&n<=u-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(e,n,d);e=i;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=xn(h.dom)+1;break}e-=h.size}s==-1&&(s=0)}if(s>-1&&(u>n||a==this.children.length-1)){n=u;for(let d=a+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=xn(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let o=Math.min(e,n),i=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let v=this.children[p],b=m+v.size;if(o>m&&i<b)return v.setSelection(e-m-v.border,n-m-v.border,r,s);m=b}let a=this.domFromPos(e,e?-1:1),c=n==e?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((ns||Jn)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let v=p,b;v;v=v.parentNode){if(b=v.nextSibling){b.nodeName=="BR"&&(a=c={node:b.parentNode,offset:xn(b)+1});break}let x=v.pmViewDesc;if(x&&x.node&&x.node.isBlock)break}}else{let v=p.childNodes[m-1];f=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(ns&&d.focusNode&&d.focusNode!=c.node&&d.focusNode.nodeType==1){let p=d.focusNode.childNodes[d.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||f&&Jn)&&Ql(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Ql(c.node,c.offset,d.focusNode,d.focusOffset))return;let h=!1;if((u.extend||e==n)&&!(f&&ns)){u.collapse(a.node,a.offset);try{e!=n&&u.extend(c.node,c.offset),h=!0}catch{}}if(!h){if(e>n){let m=a;a=c,c=m}let p=document.createRange();p.setEnd(c.node,c.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+o.border,c=i-o.border;if(e>=a&&n<=c){this.dirty=e==r||n==i?dl:d2,e==a&&n==c&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=wo:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?dl:wo}r=i}this.dirty=dl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?dl:d2;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class l$ extends ap{constructor(e,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==rs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class xie extends ap{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Jl extends ap{constructor(e,n,r,s,o){super(e,[],r,s),this.mark=n,this.spec=o}static create(e,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=cc.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Jl(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&wo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wo&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=rs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=rs}}slice(e,n,r){let s=Jl.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=w1(o,n,i,r)),e>0&&(o=w1(o,0,e,r));for(let a=0;a<o.length;a++)o[a].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ya extends ap{constructor(e,n,r,s,o,i,a,c,u){super(e,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,o,i){let a=o.nodeViews[n.type.name],c,u=a&&a(n,o,()=>{if(!c)return i;if(c.parent)return c.parent.posBeforeChild(c)},r,s),d=u&&u.dom,f=u&&u.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=cc.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let h=d;return d=f$(d,r,n),u?c=new bie(e,n,r,s,d,f||null,h,u,o,i+1):n.isText?new Iy(e,n,r,s,d,h,o):new ya(e,n,r,s,d,f||null,h,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,n,r){return this.dirty==rs&&e.eq(this.node)&&Vg(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,o=e.composing?this.localCompositionInfo(e,n):null,i=o&&o.pos>-1?o:null,a=o&&o.pos<0,c=new Sie(this,i&&i.node,e);kie(this.node,this.innerDeco,(u,d,f)=>{u.spec.marks?c.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!f&&c.syncToMarks(d==this.node.childCount?ot.none:this.node.child(d).marks,r,e),c.placeWidget(u,e,s)},(u,d,f,h)=>{c.syncToMarks(u.marks,r,e);let p;c.findNodeMatch(u,d,f,h)||a&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(p=c.findIndexWithChild(o.node))>-1&&c.updateNodeAt(u,d,f,p,e)||c.updateNextNode(u,d,f,e,h,s)||c.addNode(u,d,f,e,s),s+=u.nodeSize}),c.syncToMarks([],r,e),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==dl)&&(i&&this.protectLocalComposition(e,i),u$(this.contentDOM,this.children,e),Ju&&Nie(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof _e)||r<n||s>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,a=Eie(this.node.content,i,r-n,s-n);return a<0?null:{node:o,pos:a,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new xie(this,o,n,s);e.input.compositionNodes.push(i),this.children=w1(this.children,r,r+s.length,e,i)}update(e,n,r,s){return this.dirty==wo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=rs}updateOuterDeco(e){if(Vg(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=d$(this.dom,this.nodeDOM,b1(this.outerDeco,this.node,n),b1(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function f2(t,e,n,r,s){f$(r,e,t);let o=new ya(void 0,t,e,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class Iy extends ya{constructor(e,n,r,s,o,i,a){super(e,n,r,s,o,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==wo||this.dirty!=rs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=rs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=rs,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),o=document.createTextNode(s.text);return new Iy(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=wo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class c$ extends ap{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class bie extends ya{constructor(e,n,r,s,o,i,a,c,u,d){super(e,n,r,s,o,i,a,u,d),this.spec=c}update(e,n,r,s){if(this.dirty==wo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function u$(t,e,n){let r=t.firstChild,s=!1;for(let o=0;o<e.length;o++){let i=e[o],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=h2(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(i instanceof Jl){let c=r?r.previousSibling:t.lastChild;u$(i.contentDOM,i.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=h2(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const bf=function(t){t&&(this.nodeName=t)};bf.prototype=Object.create(null);const fl=[new bf];function b1(t,e,n){if(t.length==0)return fl;let r=n?fl[0]:new bf,s=[r];for(let o=0;o<t.length;o++){let i=t[o].type.attrs;if(i){i.nodeName&&s.push(r=new bf(i.nodeName));for(let a in i){let c=i[a];c!=null&&(n&&s.length==1&&s.push(r=new bf(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+c:a=="style"?r.style=(r.style?r.style+";":"")+c:a!="nodeName"&&(r[a]=c))}}}return s}function d$(t,e,n,r){if(n==fl&&r==fl)return e;let s=e;for(let o=0;o<r.length;o++){let i=r[o],a=n[o];if(o){let c;a&&a.nodeName==i.nodeName&&s!=t&&(c=s.parentNode)&&c.nodeName.toLowerCase()==i.nodeName||(c=document.createElement(i.nodeName),c.pmIsDeco=!0,c.appendChild(s),a=fl[0]),s=c}wie(s,a||fl[0],i)}return s}function wie(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&t.classList.add(s[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function f$(t,e,n){return d$(t,t,fl,b1(e,n,t.nodeType!=1))}function Vg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function h2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Sie{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Cie(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=rs,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let u=this.top.children[c];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){a=c;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let c=Jl.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))o=this.top.children.indexOf(i,this.index);else for(let a=this.index,c=Math.min(this.top.children.length,a+5);a<c;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,s,o){let i=this.top.children[s];return i.dirty==wo&&i.dom==i.contentDOM&&(i.dirty=dl),i.update(e,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,o,i){for(let a=this.index;a<this.top.children.length;a++){let c=this.top.children[a];if(c instanceof ya){let u=this.preMatch.matched.get(c);if(u!=null&&u!=o)return!1;let d=c.dom,f,h=this.isLocked(d)&&!(e.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==e.text&&c.dirty!=wo&&Vg(n,c.outerDeco));if(!h&&c.update(e,n,r,s))return this.destroyBetween(this.index,a),c.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(c,e,n,r,s,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=dl,f.updateChildren(s,i+1),f.dirty=rs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,o,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Vg(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=ya.create(this.top,n,r,s,o,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let c of a.children)c.parent=a}return e.destroy(),a}addNode(e,n,r,s,o){let i=ya.create(this.top,e,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new l$(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Jl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Iy)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Jn||Pn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new c$(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Cie(t,e){let n=e,r=n.children.length,s=t.childCount,o=new Map,i=[];e:for(;s>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof Jl)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=a.node;if(c){if(c!=t.child(s-1))break;--s,o.set(a,s),i.push(a)}}return{index:s,matched:o,matches:i.reverse()}}function jie(t,e){return t.type.side-e.type.side}function kie(t,e,n,r){let s=e.locals(t),o=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let d=t.child(u);r(d,s,e.forChild(o,d),u),o+=d.nodeSize}return}let i=0,a=[],c=null;for(let u=0;;){let d,f;for(;i<s.length&&s[i].to==o;){let b=s[i++];b.widget&&(d?(f||(f=[d])).push(b):d=b)}if(d)if(f){f.sort(jie);for(let b=0;b<f.length;b++)n(f[b],u,!!c)}else n(d,u,!!c);let h,p;if(c)p=-1,h=c,c=null;else if(u<t.childCount)p=u,h=t.child(u++);else break;for(let b=0;b<a.length;b++)a[b].to<=o&&a.splice(b--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)a.push(s[i++]);let m=o+h.nodeSize;if(h.isText){let b=m;i<s.length&&s[i].from<b&&(b=s[i].from);for(let x=0;x<a.length;x++)a[x].to<b&&(b=a[x].to);b<m&&(c=h.cut(b-o),h=h.cut(0,b-o),m=b,p=-1)}else for(;i<s.length&&s[i].to<m;)i++;let v=h.isInline&&!h.isLeaf?a.filter(b=>!b.inline):a.slice();r(h,v,e.forChild(o,h),p),o=m}}function Nie(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Eie(t,e,n,r){for(let s=0,o=0;s<t.childCount&&o<=r;){let i=t.child(s++),a=o;if(o+=i.nodeSize,!i.isText)continue;let c=i.text;for(;s<t.childCount;){let u=t.child(s++);if(o+=u.nodeSize,!u.isText)break;c+=u.text}if(o>=n){if(o>=r&&c.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?c.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&c.length>=r+e.length-a&&c.slice(r-a,r-a+e.length)==e)return r}}return-1}function w1(t,e,n,r,s){let o=[];for(let i=0,a=0;i<t.length;i++){let c=t[i],u=a,d=a+=c.size;u>=n||d<=e?o.push(c):(u<e&&o.push(c.slice(0,e-u,r)),s&&(o.push(s),s=void 0),d>n&&o.push(c.slice(n-u,c.size,r)))}return o}function Fj(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),c,u;if(Oy(n)){for(c=i;s&&!s.node;)s=s.parent;let f=s.node;if(s&&f.isAtom&&Ce.isSelectable(f)&&s.parent&&!(f.isInline&&Zoe(n.focusNode,n.focusOffset,s.dom))){let h=s.posBefore;u=new Ce(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,h=i;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[c,i]=h==t.state.selection.anchor?[h,f]:[f,h],a=r.resolve(i)}else c=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let d=r.resolve(c);if(!u){let f=e=="pointer"||t.state.selection.head<a.pos&&!o?1:-1;u=$j(t,d,a,f)}return u}function h$(t){return t.editable?t.hasFocus():m$(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Go(t,e=!1){let n=t.state.selection;if(p$(t,n),!!h$(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Pn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ql(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Tie(t);else{let{anchor:r,head:s}=n,o,i;p2&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(o=m2(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=m2(t,n.to))),t.docView.setSelection(r,s,t,e),p2&&(o&&g2(o),i&&g2(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&_ie(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const p2=Jn||Pn&&t$<63;function m2(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Jn&&s&&s.contentEditable=="false")return j0(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return j0(s);if(o)return j0(o)}}function j0(t){return t.contentEditable="true",Jn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function g2(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function _ie(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!h$(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Tie(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,xn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&xr&&va<=11&&(n.disabled=!0,n.disabled=!1)}function p$(t,e){if(e instanceof Ce){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(v2(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else v2(t)}function v2(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $j(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||_e.between(e,n,r)}function y2(t){return t.editable&&!t.hasFocus()?!1:m$(t)}function m$(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Mie(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ql(e.node,e.offset,n.anchorNode,n.anchorOffset)}function S1(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return o&&ze.findFrom(o,e)}function Di(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function x2(t,e,n){let r=t.state.selection;if(r instanceof _e)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=t.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return Di(t,new _e(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=S1(t.state,e);return s&&s instanceof Ce?Di(t,s):!1}else if(!(qr&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let a=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?Ce.isSelectable(o)?Di(t,new Ce(e<0?t.state.doc.resolve(s.pos-o.nodeSize):s)):ip?Di(t,new _e(t.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ce&&r.node.isInline)return Di(t,new _e(e>0?r.$to:r.$from));{let s=S1(t.state,e);return s?Di(t,s):!1}}}function Ug(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function wf(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Tc(t,e){return e<0?Aie(t):Pie(t)}function Aie(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,o,i=!1;for(ns&&n.nodeType==1&&r<Ug(n)&&wf(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(wf(a,-1))s=n,o=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(g$(n))break;{let a=n.previousSibling;for(;a&&wf(a,-1);)s=n.parentNode,o=xn(a),a=a.previousSibling;if(a)n=a,r=Ug(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?C1(t,n,r):s&&C1(t,s,o)}function Pie(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Ug(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(wf(a,1))o=n,i=++r;else break}else{if(g$(n))break;{let a=n.nextSibling;for(;a&&wf(a,1);)o=a.parentNode,i=xn(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Ug(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&C1(t,o,i)}function g$(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Die(t,e){for(;t&&e==t.childNodes.length&&!op(t);)e=xn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Rie(t,e){for(;t&&!e&&!op(t);)e=xn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function C1(t,e,n){if(e.nodeType!=3){let o,i;(i=Die(e,n))?(e=i,n=0):(o=Rie(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Oy(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Go(t)},50)}function b2(t,e){let n=t.state.doc.resolve(e);if(!(Pn||nie)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function w2(t,e,n){let r=t.state.selection;if(r instanceof _e&&!r.empty||n.indexOf("s")>-1||qr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=S1(t.state,e);if(i&&i instanceof Ce)return Di(t,i)}if(!s.parent.inlineContent){let i=e<0?s:o,a=r instanceof ts?ze.near(i,e):ze.findFrom(i,e);return a?Di(t,a):!1}return!1}function S2(t,e){if(!(t.state.selection instanceof _e))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=t.state.tr;return e<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),t.dispatch(i),!0}return!1}function C2(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Oie(t){if(!Jn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;C2(t,r,"true"),setTimeout(()=>C2(t,r,"false"),20)}return!1}function Iie(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Lie(t,e){let n=e.keyCode,r=Iie(e);if(n==8||qr&&n==72&&r=="c")return S2(t,-1)||Tc(t,-1);if(n==46&&!e.shiftKey||qr&&n==68&&r=="c")return S2(t,1)||Tc(t,1);if(n==13||n==27)return!0;if(n==37||qr&&n==66&&r=="c"){let s=n==37?b2(t,t.state.selection.from)=="ltr"?-1:1:-1;return x2(t,s,r)||Tc(t,s)}else if(n==39||qr&&n==70&&r=="c"){let s=n==39?b2(t,t.state.selection.from)=="ltr"?1:-1:1;return x2(t,s,r)||Tc(t,s)}else{if(n==38||qr&&n==80&&r=="c")return w2(t,-1,r)||Tc(t,-1);if(n==40||qr&&n==78&&r=="c")return Oie(t)||w2(t,1,r)||Tc(t,1);if(r==(qr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function zj(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||cc.fromSchema(t.state.schema),a=S$(),c=a.createElement("div");c.appendChild(i.serializeFragment(r,{document:a}));let u=c.firstChild,d,f=0;for(;u&&u.nodeType==1&&(d=w$[u.nodeName.toLowerCase()]);){for(let p=d.length-1;p>=0;p--){let m=a.createElement(d[p]);for(;c.firstChild;)m.appendChild(c.firstChild);c.appendChild(m),f++}u=c.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:c,text:h,slice:e}}function v$(t,e,n,r,s){let o=s.parent.type.spec.code,i,a;if(!n&&!e)return null;let c=!!e&&(r||o||!n);if(c){if(t.someProp("transformPastedText",h=>{e=h(e,o||r,t)}),o)return a=new fe(Z.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let f=t.someProp("clipboardTextParser",h=>h(e,s,r,t));if(f)a=f;else{let h=s.marks(),{schema:p}=t.state,m=cc.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(v=>{let b=i.appendChild(document.createElement("p"));v&&b.appendChild(m.serializeNode(p.text(v,h)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),i=Bie(n),ip&&Vie(i);let u=i&&i.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ga.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(c||d),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Fie.test(h.parentNode.nodeName)?{ignore:!0}:null}})),d)a=Uie(j2(a,+d[1],+d[2]),d[4]);else if(a=fe.maxOpen($ie(a.content,s),!0),a.openStart||a.openEnd){let f=0,h=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=j2(a,f,h)}return t.someProp("transformPasted",f=>{a=f(a,t,c)}),a}const Fie=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $ie(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),o,i=[];if(t.forEach(a=>{if(!i)return;let c=s.findWrapping(a.type),u;if(!c)return i=null;if(u=i.length&&o.length&&x$(c,o,a,i[i.length-1],0))i[i.length-1]=u;else{i.length&&(i[i.length-1]=b$(i[i.length-1],o.length));let d=y$(a,c);i.push(d),s=s.matchType(d.type),o=c}}),i)return Z.from(i)}return t}function y$(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Z.from(t));return t}function x$(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let o=x$(t,e,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(Z.from(y$(n,t,s+1))))}}function b$(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,b$(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Z.empty,!0);return t.copy(n.append(r))}function j1(t,e,n,r,s,o){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(o=0),s<r-1&&(a=j1(a,e,n,r,s+1,o)),s>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,o<=s).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(Z.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function j2(t,e,n){return e<t.openStart&&(t=new fe(j1(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new fe(j1(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const w$={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let k2=null;function S$(){return k2||(k2=document.implementation.createHTMLDocument("title"))}let k0=null;function zie(t){let e=window.trustedTypes;return e?(k0||(k0=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),k0.createHTML(t)):t}function Bie(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=S$().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&w$[r[1].toLowerCase()])&&(t=s.map(o=>"<"+o+">").join("")+t+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=zie(t),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function Vie(t){let e=t.querySelectorAll(Pn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Uie(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:o,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let c=n.nodes[r[a]];if(!c||c.hasRequiredAttrs())break;s=Z.from(c.create(r[a+1],s)),o++,i++}return new fe(s,o,i)}const Xn={},Zn={},Hie={touchstart:!0,touchmove:!0};class Wie{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function qie(t){for(let e in Xn){let n=Xn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Gie(t,r)&&!Bj(t,r)&&(t.editable||!(r.type in Zn))&&n(t,r)},Hie[e]?{passive:!0}:void 0)}Jn&&t.dom.addEventListener("input",()=>null),k1(t)}function ra(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Kie(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function k1(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Bj(t,r))})}function Bj(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Gie(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Yie(t,e){!Bj(t,e)&&Xn[e.type]&&(t.editable||!(e.type in Zn))&&Xn[e.type](t,e)}Zn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!j$(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(qo&&Pn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ju&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,ol(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Lie(t,n)?n.preventDefault():ra(t,"key")};Zn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zn.keypress=(t,e)=>{let n=e;if(j$(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||qr&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof _e)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,s,o))&&t.dispatch(o()),n.preventDefault()}};function Ly(t){return{left:t.clientX,top:t.clientY}}function Qie(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Vj(t,e,n,r,s){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(t.someProp(e,a=>i>o.depth?a(t,n,o.nodeAfter,o.before(i),s,!0):a(t,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function vu(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Jie(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ce.isSelectable(r)?(vu(t,new Ce(n)),!0):!1}function Xie(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Ce&&(r=n.node);let o=t.state.doc.resolve(e);for(let i=o.depth+1;i>0;i--){let a=i>o.depth?o.nodeAfter:o.node(i);if(Ce.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(vu(t,Ce.create(t.state.doc,s)),!0):!1}function Zie(t,e,n,r,s){return Vj(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(s?Xie(t,n):Jie(t,n))}function eae(t,e,n,r){return Vj(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function tae(t,e,n,r){return Vj(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||nae(t,n,r)}function nae(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(vu(t,_e.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),a=s.before(o);if(i.inlineContent)vu(t,_e.create(r,a+1,a+1+i.content.size));else if(Ce.isSelectable(i))vu(t,Ce.create(r,a));else continue;return!0}}function Uj(t){return Hg(t)}const C$=qr?"metaKey":"ctrlKey";Xn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Uj(t),s=Date.now(),o="singleClick";s-t.input.lastClick.time<500&&Qie(n,t.input.lastClick)&&!n[C$]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let i=t.posAtCoords(Ly(n));i&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new rae(t,i,n,!!r)):(o=="doubleClick"?eae:tae)(t,i.pos,i.inside,n)?n.preventDefault():ra(t,"pointer"))};class rae{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[C$],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),i=n.inside;else{let d=e.state.doc.resolve(n.pos);o=d.parent,i=d.depth?d.before():0}const a=s?null:r.target,c=a?e.docView.nearestDesc(a,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof Ce&&u.from<=i&&u.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ns&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ra(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Go(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ly(e))),this.updateAllowDefault(e),this.allowDefault||!n?ra(this.view,"pointer"):Zie(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Jn&&this.mightDrag&&!this.mightDrag.node.isAtom||Pn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(vu(this.view,ze.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ra(this.view,"pointer")}move(e){this.updateAllowDefault(e),ra(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Xn.touchstart=t=>{t.input.lastTouch=Date.now(),Uj(t),ra(t,"pointer")};Xn.touchmove=t=>{t.input.lastTouch=Date.now(),ra(t,"pointer")};Xn.contextmenu=t=>Uj(t);function j$(t,e){return t.composing?!0:Jn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const sae=qo?5e3:-1;Zn.compositionstart=Zn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _e&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Hg(t,!0),t.markCursor=null;else if(Hg(t,!e.selection.empty),ns&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}t.input.composing=!0}k$(t,sae)};Zn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,k$(t,20))};function k$(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Hg(t),e))}function N$(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=iae());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function oae(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Joe(e.focusNode,e.focusOffset),r=Xoe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function iae(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Hg(t,e=!1){if(!(qo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),N$(t),e||t.docView&&t.docView.dirty){let n=Fj(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function aae(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const yh=xr&&va<15||Ju&&rie<604;Xn.copy=Zn.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let o=yh?null:n.clipboardData,i=r.content(),{dom:a,text:c}=zj(t,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):aae(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function lae(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function cae(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?xh(t,r.value,null,s,e):xh(t,r.textContent,r.innerHTML,s,e)},50)}function xh(t,e,n,r,s){let o=v$(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",c=>c(t,s,o||fe.empty)))return!0;if(!o)return!1;let i=lae(o),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function E$(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zn.paste=(t,e)=>{let n=e;if(t.composing&&!qo)return;let r=yh?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&xh(t,E$(r),r.getData("text/html"),s,n)?n.preventDefault():cae(t,n)};class _${constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const uae=qr?"altKey":"ctrlKey";function T$(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[uae]}Xn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,o=s.empty?null:t.posAtCoords(Ly(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Ce?s.to-1:s.to))){if(r&&r.mightDrag)i=Ce.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(i=Ce.create(t.state.doc,f.posBefore))}}let a=(i||t.state.selection).content(),{dom:c,text:u,slice:d}=zj(t,a);(!n.dataTransfer.files.length||!Pn||t$>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(yh?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",yh||n.dataTransfer.setData("text/plain",u),t.dragging=new _$(d,T$(t,n),i)};Xn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zn.dragover=Zn.dragenter=(t,e)=>e.preventDefault();Zn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(Ly(n));if(!s)return;let o=t.state.doc.resolve(s.pos),i=r&&r.slice;i?t.someProp("transformPasted",m=>{i=m(i,t,!1)}):i=v$(t,E$(n.dataTransfer),yh?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(r&&T$(t,n));if(t.someProp("handleDrop",m=>m(t,n,i||fe.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let c=i?zF(t.state.doc,o.pos,i):o.pos;c==null&&(c=o.pos);let u=t.state.tr;if(a){let{node:m}=r;m?m.replace(u):u.deleteSelection()}let d=u.mapping.map(c),f=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=u.doc;if(f?u.replaceRangeWith(d,d,i.content.firstChild):u.replaceRange(d,d,i),u.doc.eq(h))return;let p=u.doc.resolve(d);if(f&&Ce.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))u.setSelection(new Ce(p));else{let m=u.mapping.map(c);u.mapping.maps[u.mapping.maps.length-1].forEach((v,b,x,y)=>m=y),u.setSelection($j(t,p,u.doc.resolve(m)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Xn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Go(t)},20))};Xn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Xn.beforeinput=(t,e)=>{if(Pn&&qo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ol(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Zn)Xn[t]=Zn[t];function bh(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Wg{constructor(e,n){this.toDOM=e,this.spec=n||Ml,this.side=this.spec.side||0}map(e,n,r,s){let{pos:o,deleted:i}=e.mapResult(n.from+s,this.side<0?-1:1);return i?null:new Yn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Wg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&bh(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class xa{constructor(e,n){this.attrs=e,this.spec=n||Ml}map(e,n,r,s){let o=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new Yn(o,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof xa&&bh(this.attrs,e.attrs)&&bh(this.spec,e.spec)}static is(e){return e.type instanceof xa}destroy(){}}class Hj{constructor(e,n){this.attrs=e,this.spec=n||Ml}map(e,n,r,s){let o=e.mapResult(n.from+s,1);if(o.deleted)return null;let i=e.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new Yn(o.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),o;return s==n.from&&!(o=e.child(r)).isText&&s+o.nodeSize==n.to}eq(e){return this==e||e instanceof Hj&&bh(this.attrs,e.attrs)&&bh(this.spec,e.spec)}destroy(){}}class Yn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Yn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Yn(e,e,new Wg(n,r))}static inline(e,n,r,s){return new Yn(e,n,new xa(r,s))}static node(e,n,r,s){return new Yn(e,n,new Hj(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof xa}get widget(){return this.type instanceof Wg}}const Dc=[],Ml={};class bt{constructor(e,n){this.local=e.length?e:Dc,this.children=n.length?n:Dc}static create(e,n){return n.length?qg(n,e,0,Ml):Mn}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,o){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,s+a,o)}}map(e,n,r){return this==Mn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ml)}mapInner(e,n,r,s,o){let i;for(let a=0;a<this.local.length;a++){let c=this.local[a].map(e,r,s);c&&c.type.valid(n,c)?(i||(i=[])).push(c):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?dae(this.children,i||[],e,n,r,s,o):i?new bt(i.sort(Al),Dc):Mn}add(e,n){return n.length?this==Mn?bt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,o=0;e.forEach((a,c)=>{let u=c+r,d;if(d=A$(n,a,u)){for(s||(s=this.children.slice());o<s.length&&s[o]<c;)o+=3;s[o]==c?s[o+2]=s[o+2].addInner(a,d,u+1):s.splice(o,0,c,c+a.nodeSize,qg(d,a,u+1,Ml)),o+=3}});let i=M$(o?P$(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new bt(i.length?this.local.concat(i).sort(Al):this.local,s||this.children)}remove(e){return e.length==0||this==Mn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,a=r[o]+n,c=r[o+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>a&&f.to<c&&(e[d]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(i,a+1);u!=Mn?r[o+2]=u:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<e.length;o++)if(i=e[o])for(let a=0;a<s.length;a++)s[a].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new bt(s,r):Mn}forChild(e,n){if(this==Mn)return this;if(n.isLeaf)return bt.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let o=e+1,i=o+n.content.size;for(let a=0;a<this.local.length;a++){let c=this.local[a];if(c.from<i&&c.to>o&&c.type instanceof xa){let u=Math.max(o,c.from)-o,d=Math.min(i,c.to)-o;u<d&&(s||(s=[])).push(c.copy(u,d))}}if(s){let a=new bt(s.sort(Al),Dc);return r?new zi([a,r]):a}return r||Mn}eq(e){if(this==e)return!0;if(!(e instanceof bt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Wj(this.localsInner(e))}localsInner(e){if(this==Mn)return Dc;if(e.inlineContent||!this.local.some(xa.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof xa||n.push(this.local[r]);return n}forEachSet(e){e(this)}}bt.empty=new bt([],[]);bt.removeOverlap=Wj;const Mn=bt.empty;class zi{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Ml));return zi.from(r)}forChild(e,n){if(n.isLeaf)return bt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,n);o!=Mn&&(o instanceof zi?r=r.concat(o.members):r.push(o))}return zi.from(r)}eq(e){if(!(e instanceof zi)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?Wj(r?n:n.sort(Al)):Dc}static from(e){switch(e.length){case 0:return Mn;case 1:return e[0];default:return new zi(e.every(n=>n instanceof bt)?e:e.reduce((n,r)=>n.concat(r instanceof bt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function dae(t,e,n,r,s,o,i){let a=t.slice();for(let u=0,d=o;u<n.maps.length;u++){let f=0;n.maps[u].forEach((h,p,m,v)=>{let b=v-m-(p-h);for(let x=0;x<a.length;x+=3){let y=a[x+1];if(y<0||h>y+d-f)continue;let w=a[x]+d-f;p>=w?a[x+1]=h<=w?-2:-1:h>=d&&b&&(a[x]+=b,a[x+1]+=b)}f+=b}),d=n.maps[u].map(d,-1)}let c=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){c=!0,a[u+1]=-1;continue}let d=n.map(t[u]+o),f=d-s;if(f<0||f>=r.content.size){c=!0;continue}let h=n.map(t[u+1]+o,-1),p=h-s,{index:m,offset:v}=r.content.findIndex(f),b=r.maybeChild(m);if(b&&v==f&&v+b.nodeSize==p){let x=a[u+2].mapInner(n,b,d+1,t[u]+o+1,i);x!=Mn?(a[u]=f,a[u+1]=p,a[u+2]=x):(a[u+1]=-2,c=!0)}else c=!0}if(c){let u=fae(a,t,e,n,s,o,i),d=qg(u,r,0,i);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<d.children.length;f+=3){let p=d.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,d.children[f],d.children[f+1],d.children[f+2])}}return new bt(e.sort(Al),a)}function M$(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Yn(s.from+e,s.to+e,s.type))}return n}function fae(t,e,n,r,s,o,i){function a(c,u){for(let d=0;d<c.local.length;d++){let f=c.local[d].map(r,s,u);f?n.push(f):i.onRemove&&i.onRemove(c.local[d].spec)}for(let d=0;d<c.children.length;d+=3)a(c.children[d+2],c.children[d]+u+1)}for(let c=0;c<t.length;c+=3)t[c+1]==-1&&a(t[c+2],e[c]+o+1);return n}function A$(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let o=0,i;o<t.length;o++)(i=t[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),t[o]=null);return s}function P$(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function qg(t,e,n,r){let s=[],o=!1;e.forEach((a,c)=>{let u=A$(t,a,c+n);if(u){o=!0;let d=qg(u,a,n+c+1,r);d!=Mn&&s.push(c,c+a.nodeSize,d)}});let i=M$(o?P$(t):t,-n).sort(Al);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||s.length?new bt(i,s):Mn}function Al(t,e){return t.from-e.from||t.to-e.to}function Wj(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[s]=o.copy(o.from,r.to),N2(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),N2(e,s,r.copy(o.from,r.to)));break}}}return e}function N2(t,e,n){for(;e<t.length&&Al(n,t[e])>0;)e++;t.splice(e,0,n)}function N0(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Mn&&e.push(r)}),t.cursorWrapper&&e.push(bt.create(t.state.doc,[t.cursorWrapper.deco])),zi.from(e)}const hae={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},pae=xr&&va<=11;class mae{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class gae{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mae,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);xr&&va<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),pae&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hae)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(y2(this.view)){if(this.suppressingSelectionUpdates)return Go(this.view);if(xr&&va<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ql(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Qu(o))n.add(o);for(let o=e.anchorNode;o;o=Qu(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&y2(e)&&!this.ignoreSelectionChange(r),o=-1,i=-1,a=!1,c=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],c);f&&(o=o<0?f.from:Math.min(f.from,o),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(ns&&c.length){let d=c.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,h]=d;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of d){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||xae(e,f)!=p)&&h.remove()}}}let u=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Oy(r)&&(u=Fj(e))&&u.eq(ze.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Go(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,i),vae(e)),this.handleDOMChange(o,i,a,c),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Go(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(xr&&va<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:h}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h)}let i=s&&s.parentNode==e.target?xn(s)+1:0,a=r.localPosFromDOM(e.target,i,-1),c=o&&o.parentNode==e.target?xn(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,c,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let E2=new WeakMap,_2=!1;function vae(t){if(!E2.has(t)&&(E2.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ns,_2)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_2=!0}}function T2(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return Ql(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function yae(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return T2(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?T2(t,n):null}function xae(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function bae(t,e,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:a}=t.docView.parseRange(e,n),c=t.domSelectionRange(),u,d=c.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(u=[{node:d,offset:c.anchorOffset}],Oy(c)||u.push({node:c.focusNode,offset:c.focusOffset})),Pn&&t.input.lastKeyCode===8)for(let b=o;b>s;b--){let x=r.childNodes[b-1],y=x.pmViewDesc;if(x.nodeName=="BR"&&!y){o=b;break}if(!y||y.size)break}let f=t.state.doc,h=t.someProp("domParser")||ga.fromSchema(t.state.schema),p=f.resolve(i),m=null,v=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:wae,context:p});if(u&&u[0].pos!=null){let b=u[0].pos,x=u[1]&&u[1].pos;x==null&&(x=b),m={anchor:b+i,head:x+i}}return{doc:v,sel:m,from:i,to:a}}function wae(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Jn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Jn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sae=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Cae(t,e,n,r,s){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=Fj(t,k);if(N&&!t.state.selection.eq(N)){if(Pn&&qo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",A=>A(t,ol(13,"Enter"))))return;let E=t.state.tr.setSelection(N);k=="pointer"?E.setMeta("pointer",!0):k=="key"&&E.scrollIntoView(),o&&E.setMeta("composition",o),t.dispatch(E)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let c=t.state.selection,u=bae(t,e,n),d=t.state.doc,f=d.slice(u.from,u.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=Nae(f.content,u.doc.content,u.from,h,p);if(m&&t.input.domChangeCount++,(Ju&&t.input.lastIOSEnter>Date.now()-225||qo)&&s.some(k=>k.nodeType==1&&!Sae.test(k.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",k=>k(t,ol(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&c instanceof _e&&!c.empty&&c.$head.sameParent(c.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(u.sel){let k=M2(t,t.state.doc,u.sel);if(k&&!k.eq(t.state.selection)){let N=t.state.tr.setSelection(k);o&&N.setMeta("composition",o),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof _e&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),xr&&va<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let v=u.doc.resolveNoCache(m.start-u.from),b=u.doc.resolveNoCache(m.endB-u.from),x=d.resolve(m.start),y=v.sameParent(b)&&v.parent.inlineContent&&x.end()>=m.endA;if((Ju&&t.input.lastIOSEnter>Date.now()-225&&(!y||s.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!y&&v.pos<u.doc.content.size&&(!v.sameParent(b)||!v.parent.inlineContent)&&v.pos<b.pos&&!/\S/.test(u.doc.textBetween(v.pos,b.pos,"","")))&&t.someProp("handleKeyDown",k=>k(t,ol(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&kae(d,m.start,m.endA,v,b)&&t.someProp("handleKeyDown",k=>k(t,ol(8,"Backspace")))){qo&&Pn&&t.domObserver.suppressSelectionUpdates();return}Pn&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),qo&&!y&&v.start()!=b.start()&&b.parentOffset==0&&v.depth==b.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,b=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,ol(13,"Enter"))})},20));let w=m.start,S=m.endA,j=k=>{let N=k||t.state.tr.replace(w,S,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let E=M2(t,N.doc,u.sel);E&&!(Pn&&t.composing&&E.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(E.head==w||E.head==N.mapping.map(S)-1)||xr&&E.empty&&E.head==w)&&N.setSelection(E)}return o&&N.setMeta("composition",o),N.scrollIntoView()},C;if(y)if(v.pos==b.pos){xr&&va<=11&&v.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Go(t),20));let k=j(t.state.tr.delete(w,S)),N=d.resolve(m.start).marksAcross(d.resolve(m.endA));N&&k.ensureMarks(N),t.dispatch(k)}else if(m.endA==m.endB&&(C=jae(v.parent.content.cut(v.parentOffset,b.parentOffset),x.parent.content.cut(x.parentOffset,m.endA-x.start())))){let k=j(t.state.tr);C.type=="add"?k.addMark(w,S,C.mark):k.removeMark(w,S,C.mark),t.dispatch(k)}else if(v.parent.child(v.index()).isText&&v.index()==b.index()-(b.textOffset?0:1)){let k=v.parent.textBetween(v.parentOffset,b.parentOffset),N=()=>j(t.state.tr.insertText(k,w,S));t.someProp("handleTextInput",E=>E(t,w,S,k,N))||t.dispatch(N())}else t.dispatch(j());else t.dispatch(j())}function M2(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:$j(t,e.resolve(n.anchor),e.resolve(n.head))}function jae(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,o=r,i,a,c;for(let d=0;d<r.length;d++)s=r[d].removeFromSet(s);for(let d=0;d<n.length;d++)o=n[d].removeFromSet(o);if(s.length==1&&o.length==0)a=s[0],i="add",c=d=>d.mark(a.addToSet(d.marks));else if(s.length==0&&o.length==1)a=o[0],i="remove",c=d=>d.mark(a.removeFromSet(d.marks));else return null;let u=[];for(let d=0;d<e.childCount;d++)u.push(c(e.child(d)));if(Z.from(u).eq(t))return{mark:a,type:i}}function kae(t,e,n,r,s){if(n-e<=s.pos-r.pos||E0(r,!0,!1)<s.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=t.resolve(E0(o,!0,!0));return!i.parent.isTextblock||i.pos>n||E0(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function E0(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function Nae(t,e,n,r,s){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let c=Math.max(0,o-Math.min(i,a));r-=i+c-o}if(i<o&&t.size<e.size){let c=r<=o&&r>=i?o-r:0;o-=c,o&&o<e.size&&A2(e.textBetween(o-1,o+1))&&(o+=c?1:-1),a=o+(a-i),i=o}else if(a<o){let c=r<=o&&r>=a?o-r:0;o-=c,o&&o<t.size&&A2(t.textBetween(o-1,o+1))&&(o+=c?1:-1),i=o+(i-a),a=o}return{start:o,endA:i,endB:a}}function A2(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class D${constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Wie,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(I2),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=R2(this),D2(this),this.nodeViews=O2(this),this.docView=f2(this.state.doc,P2(this),N0(this),this.dom,this),this.domObserver=new gae(this,(r,s,o,i)=>Cae(this,r,s,o,i)),this.domObserver.start(),qie(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&k1(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(I2),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(N$(this),i=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=O2(this);_ae(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&k1(this),this.editable=R2(this),D2(this);let c=N0(this),u=P2(this),d=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,u,c);(f||!e.selection.eq(s.selection))&&(i=!0);let h=d=="preserve"&&i&&this.dom.style.overflowAnchor==null&&iie(this);if(i){this.domObserver.stop();let p=f&&(xr||Pn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&Eae(s.selection,e.selection);if(f){let m=Pn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=oae(this)),(o||!this.docView.update(e.doc,u,c,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=f2(e.doc,u,c,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Mie(this))?Go(this,p):(p$(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():h&&aie(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ce){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&i2(this,n.getBoundingClientRect(),e)}else i2(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new _$(e.slice,e.move,s<0?void 0:Ce.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(s=n?n(a):a))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let a=o[i].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(xr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&lie(this.dom),Go(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return hie(this,e)}coordsAtPos(e,n=1){return i$(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return yie(this,n||this.state,e)}pasteHTML(e,n){return xh(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return xh(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return zj(this,e)}destroy(){this.docView&&(Kie(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],N0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Yoe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Yie(this,e)}domSelectionRange(){let e=this.domSelection();return e?Jn&&this.root.nodeType===11&&eie(this.dom.ownerDocument)==this.dom&&yae(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}D$.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function P2(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Yn.node(0,t.state.doc.content.size,e)]}function D2(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Yn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function R2(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Eae(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function O2(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function _ae(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function I2(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _a={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Kg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Tae=typeof navigator<"u"&&/Mac/.test(navigator.platform),Mae=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bn=0;bn<10;bn++)_a[48+bn]=_a[96+bn]=String(bn);for(var bn=1;bn<=24;bn++)_a[bn+111]="F"+bn;for(var bn=65;bn<=90;bn++)_a[bn]=String.fromCharCode(bn+32),Kg[bn]=String.fromCharCode(bn);for(var _0 in _a)Kg.hasOwnProperty(_0)||(Kg[_0]=_a[_0]);function Aae(t){var e=Tae&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Mae&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Kg:_a)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Pae=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Dae=typeof navigator<"u"&&/Win/.test(navigator.platform);function Rae(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<e.length-1;a++){let c=e[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))Pae?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function Oae(t){let e=Object.create(null);for(let n in t)e[Rae(n)]=t[n];return e}function T0(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Iae(t){return new Pt({props:{handleKeyDown:R$(t)}})}function R$(t){let e=Oae(t);return function(n,r){let s=Aae(r),o,i=e[T0(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[T0(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Dae&&r.ctrlKey&&r.altKey)&&(o=_a[r.keyCode])&&o!=s){let a=e[T0(o,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var Lae=Object.defineProperty,qj=(t,e)=>{for(var n in e)Lae(t,n,{get:e[n],enumerable:!0})};function Fy(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var $y=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([i,a])=>[i,(...u)=>{const d=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i=[],a=!!t,c=t||s.tr,u=()=>(!a&&e&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),i.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(n).map(([f,h])=>[f,(...m)=>{const v=this.buildProps(c,e),b=h(...m)(v);return i.push(b),d}])),run:u};return d}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i={tr:t,editor:r,view:o,state:Fy({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)(i)]))}};return i}},O$={};qj(O$,{blur:()=>Fae,clearContent:()=>$ae,clearNodes:()=>zae,command:()=>Bae,createParagraphNear:()=>Vae,cut:()=>Uae,deleteCurrentNode:()=>Hae,deleteNode:()=>Wae,deleteRange:()=>qae,deleteSelection:()=>Kae,enter:()=>Gae,exitCode:()=>Yae,extendMarkRange:()=>Qae,first:()=>Jae,focus:()=>Zae,forEach:()=>ele,insertContent:()=>tle,insertContentAt:()=>sle,joinBackward:()=>ale,joinDown:()=>ile,joinForward:()=>lle,joinItemBackward:()=>cle,joinItemForward:()=>ule,joinTextblockBackward:()=>dle,joinTextblockForward:()=>fle,joinUp:()=>ole,keyboardShortcut:()=>ple,lift:()=>mle,liftEmptyBlock:()=>gle,liftListItem:()=>vle,newlineInCode:()=>yle,resetAttributes:()=>xle,scrollIntoView:()=>ble,selectAll:()=>wle,selectNodeBackward:()=>Sle,selectNodeForward:()=>Cle,selectParentNode:()=>jle,selectTextblockEnd:()=>kle,selectTextblockStart:()=>Nle,setContent:()=>Ele,setMark:()=>Wle,setMeta:()=>qle,setNode:()=>Kle,setNodeSelection:()=>Gle,setTextSelection:()=>Yle,sinkListItem:()=>Qle,splitBlock:()=>Jle,splitListItem:()=>Xle,toggleList:()=>Zle,toggleMark:()=>ece,toggleNode:()=>tce,toggleWrap:()=>nce,undoInputRule:()=>rce,unsetAllMarks:()=>sce,unsetMark:()=>oce,updateAttributes:()=>ice,wrapIn:()=>ace,wrapInList:()=>lce});var Fae=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),$ae=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),zae=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{t.doc.nodesBetween(o.pos,i.pos,(a,c)=>{if(a.type.isText)return;const{doc:u,mapping:d}=e,f=u.resolve(d.map(c)),h=u.resolve(d.map(c+a.nodeSize)),p=f.blockRange(h);if(!p)return;const m=yd(p);if(a.type.isTextblock){const{defaultType:v}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,v)}(m||m===0)&&e.lift(p,m)})}),!0},Bae=t=>e=>t(e),Vae=()=>({state:t,dispatch:e})=>Ooe(t,e),Uae=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,o.content),r.setSelection(new _e(r.doc.resolve(Math.max(i-1,0)))),!0},Hae=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const a=s.before(o),c=s.after(o);t.delete(a,c).scrollIntoView()}return!0}return!1};function $t(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Wae=t=>({tr:e,state:n,dispatch:r})=>{const s=$t(t,n.schema),o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const c=o.before(i),u=o.after(i);e.delete(c,u).scrollIntoView()}return!0}return!1},qae=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},Kae=()=>({state:t,dispatch:e})=>Coe(t,e),Gae=()=>({commands:t})=>t.keyboardShortcut("Enter"),Yae=()=>({state:t,dispatch:e})=>Roe(t,e);function Kj(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Gg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Kj(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function I$(t,e,n={}){return t.find(r=>r.type===e&&Gg(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function L2(t,e,n={}){return!!I$(t,e,n)}function Gj(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(d=>d.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(d=>d.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!I$([...s.node.marks],e,n)))return;let i=s.index,a=t.start()+s.offset,c=i+1,u=a+s.node.nodeSize;for(;i>0&&L2([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;c<t.parent.childCount&&L2([...t.parent.child(c).marks],e,n);)u+=t.parent.child(c).nodeSize,c+=1;return{from:a,to:u}}function ui(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Qae=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=ui(t,r.schema),{doc:i,selection:a}=n,{$from:c,from:u,to:d}=a;if(s){const f=Gj(c,o,e);if(f&&f.from<=u&&f.to>=d){const h=_e.create(i,f.from,f.to);n.setSelection(h)}}return!0},Jae=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function L$(t){return t instanceof _e}function hl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function F$(t,e=null){if(!e)return null;const n=ze.atStart(t),r=ze.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?_e.create(t,hl(0,s,o),hl(t.content.size,s,o)):_e.create(t,hl(e,s,o),hl(e,s,o))}function Xae(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Yj(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Zae=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const i=()=>{(Yj()||Xae())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!L$(n.state.selection))return i(),!0;const a=F$(s.doc,t)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||s.setSelection(a),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},ele=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),tle=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),$$=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&$$(r)}return t};function tm(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return $$(n)}function wh(t,e,n){if(t instanceof ma||t instanceof Z)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Z.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),wh("",e,n)}if(s){if(n.errorOnInvalidContent){let i=!1,a="";const c=new TF({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(i=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?ga.fromSchema(c).parseSlice(tm(t),n.parseOptions):ga.fromSchema(c).parse(tm(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const o=ga.fromSchema(e);return n.slice?o.parseSlice(tm(t),n.parseOptions).content:o.parse(tm(t),n.parseOptions)}return wh("",e,n)}function nle(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof en||s instanceof rn))return;const o=t.mapping.maps[r];let i=0;o.forEach((a,c,u,d)=>{i===0&&(i=d)}),t.setSelection(ze.near(t.doc.resolve(i),n))}var rle=t=>!("type"in t),sle=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const c=b=>{o.emit("contentError",{editor:o,error:b,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{wh(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(b){c(b)}try{a=wh(e,o.schema,{parseOptions:u,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:o.options.enableContentCheck})}catch(b){return c(b),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((rle(a)?a:[a]).forEach(b=>{b.check(),h=h?b.isText&&b.marks.length===0:!1,p=p?b.isBlock:!1}),d===f&&p){const{parent:b}=r.doc.resolve(d);b.isTextblock&&!b.type.spec.code&&!b.childCount&&(d-=1,f+=1)}let v;if(h){if(Array.isArray(e))v=e.map(b=>b.text||"").join("");else if(e instanceof Z){let b="";e.forEach(x=>{x.text&&(b+=x.text)}),v=b}else typeof e=="object"&&e&&e.text?v=e.text:v=e;r.insertText(v,d,f)}else{v=a;const b=r.doc.resolve(d),x=b.node(),y=b.parentOffset===0,w=x.isText||x.isTextblock,S=x.content.size>0;y&&w&&S&&(d=Math.max(0,d-1)),r.replaceWith(d,f,v)}n.updateSelection&&nle(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:v}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:v})}return!0},ole=()=>({state:t,dispatch:e})=>Moe(t,e),ile=()=>({state:t,dispatch:e})=>Aoe(t,e),ale=()=>({state:t,dispatch:e})=>joe(t,e),lle=()=>({state:t,dispatch:e})=>_oe(t,e),cle=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Py(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},ule=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Py(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},dle=()=>({state:t,dispatch:e})=>koe(t,e),fle=()=>({state:t,dispatch:e})=>Noe(t,e);function z$(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function hle(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let a=0;a<e.length-1;a+=1){const c=e[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))Yj()||z$()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var ple=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=hle(t).split(/-(?!$)/),i=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return c==null||c.steps.forEach(u=>{const d=u.map(r.mapping);d&&s&&r.maybeStep(d)}),!0};function Ta(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,i=e?$t(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),m=Math.min(s,h+f.nodeSize);a.push({node:f,from:p,to:m})});const c=s-r,u=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>Gg(f.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((f,h)=>f+h.to-h.from,0)>=c}var mle=(t,e={})=>({state:n,dispatch:r})=>{const s=$t(t,n.schema);return Ta(n,s,e)?Poe(n,r):!1},gle=()=>({state:t,dispatch:e})=>Ioe(t,e),vle=t=>({state:e,dispatch:n})=>{const r=$t(t,e.schema);return Woe(r)(e,n)},yle=()=>({state:t,dispatch:e})=>Doe(t,e);function zy(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function F2(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var xle=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=zy(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=$t(t,r.schema)),a==="mark"&&(i=ui(t,r.schema)),s&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{o&&o===u.type&&n.setNodeMarkup(d,void 0,F2(u.attrs,e)),i&&u.marks.length&&u.marks.forEach(f=>{i===f.type&&n.addMark(d,d+u.nodeSize,i.create(F2(f.attrs,e)))})})}),!0):!1},ble=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),wle=()=>({tr:t,dispatch:e})=>{if(e){const n=new ts(t.doc);t.setSelection(n)}return!0},Sle=()=>({state:t,dispatch:e})=>Eoe(t,e),Cle=()=>({state:t,dispatch:e})=>Toe(t,e),jle=()=>({state:t,dispatch:e})=>Loe(t,e),kle=()=>({state:t,dispatch:e})=>zoe(t,e),Nle=()=>({state:t,dispatch:e})=>$oe(t,e);function N1(t,e,n={},r={}){return wh(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var Ele=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:i,commands:a})=>{const{doc:c}=o;if(r.preserveWhitespace!=="full"){const u=N1(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return i&&o.replaceWith(0,c.content.size,u).setMeta("preventUpdate",!n),!0}return i&&o.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:c.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function B$(t,e){const n=ui(e,t.schema),{from:r,to:s,empty:o}=t.selection,i=[];o?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,c=>{i.push(...c.marks)});const a=i.find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function V$(t,e){const n=new WF(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function _le(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Tle(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function Mle(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function By(t){return e=>Mle(e.$from,t)}function xe(t,e,n){return t.config[e]===void 0&&t.parent?xe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?xe(t.parent,e,n):null}):t.config[e]}function Qj(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=xe(e,"addExtensions",n);return r?[e,...Qj(r())]:e}).flat(10)}function Jj(t,e){const n=cc.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function U$(t){return typeof t=="function"}function et(t,e=void 0,...n){return U$(t)?e?t.bind(e)(...n):t(...n):t}function Ale(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Sh(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function H$(t){const e=[],{nodeExtensions:n,markExtensions:r}=Sh(t),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:s},c=xe(i,"addGlobalAttributes",a);if(!c)return;c().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...o,...p}})})})})}),s.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},c=xe(i,"addAttributes",a);if(!c)return;const u=c();Object.entries(u).forEach(([d,f])=>{const h={...o,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:d,attribute:h})})}),e}function zt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const a=o?String(o).split(" "):[],c=r[s]?r[s].split(" "):[],u=a.filter(d=>!c.includes(d));r[s]=[...c,...u].join(" ")}else if(s==="style"){const a=o?o.split(";").map(d=>d.trim()).filter(Boolean):[],c=r[s]?r[s].split(";").map(d=>d.trim()).filter(Boolean):[],u=new Map;c.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),a.forEach(d=>{const[f,h]=d.split(":").map(p=>p.trim());u.set(f,h)}),r[s]=Array.from(u.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[s]=o}),r},{})}function Yg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>zt(n,r),{})}function Ple(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function $2(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):Ple(n.getAttribute(i.name));return a==null?o:{...o,[i.name]:a}},{});return{...r,...s}}}}function z2(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Ale(n)?!1:n!=null))}function B2(t){var e,n,r;const s={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&((n=t==null?void 0:t.attribute)==null?void 0:n.default)!==void 0&&(s.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(s.validate=t.attribute.validate),[t.name,s]}function Dle(t,e){var n;const r=H$(t),{nodeExtensions:s,markExtensions:o}=Sh(t),i=(n=s.find(u=>xe(u,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(u=>{const d=r.filter(x=>x.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((x,y)=>{const w=xe(y,"extendNodeSchema",f);return{...x,...w?w(u):{}}},{}),p=z2({...h,content:et(xe(u,"content",f)),marks:et(xe(u,"marks",f)),group:et(xe(u,"group",f)),inline:et(xe(u,"inline",f)),atom:et(xe(u,"atom",f)),selectable:et(xe(u,"selectable",f)),draggable:et(xe(u,"draggable",f)),code:et(xe(u,"code",f)),whitespace:et(xe(u,"whitespace",f)),linebreakReplacement:et(xe(u,"linebreakReplacement",f)),defining:et(xe(u,"defining",f)),isolating:et(xe(u,"isolating",f)),attrs:Object.fromEntries(d.map(B2))}),m=et(xe(u,"parseHTML",f));m&&(p.parseDOM=m.map(x=>$2(x,d)));const v=xe(u,"renderHTML",f);v&&(p.toDOM=x=>v({node:x,HTMLAttributes:Yg(x,d)}));const b=xe(u,"renderText",f);return b&&(p.toText=b),[u.name,p]})),c=Object.fromEntries(o.map(u=>{const d=r.filter(b=>b.type===u.name),f={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((b,x)=>{const y=xe(x,"extendMarkSchema",f);return{...b,...y?y(u):{}}},{}),p=z2({...h,inclusive:et(xe(u,"inclusive",f)),excludes:et(xe(u,"excludes",f)),group:et(xe(u,"group",f)),spanning:et(xe(u,"spanning",f)),code:et(xe(u,"code",f)),attrs:Object.fromEntries(d.map(B2))}),m=et(xe(u,"parseHTML",f));m&&(p.parseDOM=m.map(b=>$2(b,d)));const v=xe(u,"renderHTML",f);return v&&(p.toDOM=b=>v({mark:b,HTMLAttributes:Yg(b,d)})),[u.name,p]}));return new TF({topNode:i,nodes:a,marks:c})}function Rle(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Xj(t){return t.sort((n,r)=>{const s=xe(n,"priority")||100,o=xe(r,"priority")||100;return s>o?-1:s<o?1:0})}function W$(t){const e=Xj(Qj(t)),n=Rle(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function q$(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,s,(c,u,d,f)=>{var h;c.isBlock&&u>r&&(a+=o);const p=i==null?void 0:i[c.type.name];if(p)return d&&(a+=p({node:c,pos:u,parent:d,index:f,range:e})),!1;c.isText&&(a+=(h=c==null?void 0:c.text)==null?void 0:h.slice(Math.max(r,u)-u,s-u))}),a}function Ole(t,e){const n={from:0,to:t.content.size};return q$(t,n,e)}function K$(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function Ile(t,e){const n=$t(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,a=>{o.push(a)});const i=o.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function G$(t,e){const n=zy(typeof e=="string"?e:e.name,t.schema);return n==="node"?Ile(t,e):n==="mark"?B$(t,e):{}}function Lle(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function Fle(t){const e=Lle(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Y$(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((a,c)=>{i.push({from:a,to:c})});else{const{from:a,to:c}=n[o];if(a===void 0||c===void 0)return;i.push({from:a,to:c})}i.forEach(({from:a,to:c})=>{const u=e.slice(o).map(a,-1),d=e.slice(o).map(c),f=e.invert().map(u,-1),h=e.invert().map(d);r.push({oldRange:{from:f,to:h},newRange:{from:u,to:d}})})}),Fle(r)}function Zj(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),i=Gj(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(t,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}var $le=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let o=r,i=null;for(;o>0&&i===null;){const a=s.node(o);(a==null?void 0:a.type.name)===e?i=a:o-=1}return[i,o]};function M0(t,e){return e.nodes[t]||e.marks[t]||null}function Dm(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var zle=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,i,a)=>{var c,u;const d=((u=(c=s.type.spec).toText)==null?void 0:u.call(c,{node:s,pos:o,parent:i,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?d:d.slice(0,Math.max(0,r-o))}),n};function E1(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?ui(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>o?o.name===f.type.name:!0).find(f=>Gg(f.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;t.doc.nodesBetween(p,m,(v,b)=>{if(!v.isText&&!v.marks.length)return;const x=Math.max(p,b),y=Math.min(m,b+v.nodeSize),w=y-x;i+=w,a.push(...v.marks.map(S=>({mark:S,from:x,to:y})))})}),i===0)return!1;const c=a.filter(f=>o?o.name===f.mark.type.name:!0).filter(f=>Gg(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),u=a.filter(f=>o?f.mark.type!==o&&f.mark.type.excludes(o):!0).reduce((f,h)=>f+h.to-h.from,0);return(c>0?c+u:c)>=i}function Ble(t,e,n={}){if(!e)return Ta(t,null,n)||E1(t,null,n);const r=zy(e,t.schema);return r==="node"?Ta(t,e,n):r==="mark"?E1(t,e,n):!1}var Vle=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const o=By(a=>a.type.name===e)(t.selection);if(!o)return!1;const i=t.doc.resolve(o.pos+1);return s.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},Ule=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function V2(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function U2(t,e){const{nodeExtensions:n}=Sh(e),r=n.find(i=>i.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=et(xe(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Vy(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(Vy(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function Q$(t){return t instanceof Ce}function Hle(t,e,n){var r;const{selection:s}=e;let o=null;if(L$(s)&&(o=s.$cursor),o){const a=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(u=>u.type.excludes(n)))}const{ranges:i}=s;return i.some(({$from:a,$to:c})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,c.pos,(d,f,h)=>{if(u)return!1;if(d.isInline){const p=!h||h.type.allowsMarkType(n),m=!!n.isInSet(d.marks)||!d.marks.some(v=>v.type.excludes(n));u=p&&m}return!u}),u})}var Wle=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,c=ui(t,r.schema);if(s)if(i){const u=B$(r,c);n.addStoredMark(c.create({...u,...e}))}else a.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;r.doc.nodesBetween(d,f,(h,p)=>{const m=Math.max(p,d),v=Math.min(p+h.nodeSize,f);h.marks.find(x=>x.type===c)?h.marks.forEach(x=>{c===x.type&&n.addMark(m,v,c.create({...x.attrs,...e}))}):n.addMark(m,v,c.create(e))})});return Hle(r,n,c)},qle=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Kle=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=$t(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:a})=>r2(o,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>r2(o,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Gle=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=hl(t,0,r.content.size),o=Ce.create(r,s);e.setSelection(o)}return!0},Yle=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,i=_e.atStart(r).from,a=_e.atEnd(r).to,c=hl(s,i,a),u=hl(o,i,a),d=_e.create(r,c,u);e.setSelection(d)}return!0},Qle=t=>({state:e,dispatch:n})=>{const r=$t(t,e.schema);return Goe(r)(e,n)};function H2(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var Jle=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=e,{$from:a,$to:c}=o,u=s.extensionManager.attributes,d=Dm(u,a.node().type.name,a.node().attrs);if(o instanceof Ce&&o.node.isBlock)return!a.parentOffset||!mu(i,a.pos)?!1:(r&&(t&&H2(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=c.parentOffset===c.parent.content.size,h=a.depth===0?void 0:_le(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&h?[{type:h,attrs:d}]:void 0,m=mu(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&mu(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:d}]:void 0),r){if(m&&(o instanceof _e&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!f&&!a.parentOffset&&a.parent.type!==h)){const v=e.mapping.map(a.before()),b=e.doc.resolve(v);a.node(-1).canReplaceWith(b.index(),b.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&H2(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},Xle=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const a=$t(t,r.schema),{$from:c,$to:u}=r.selection,d=r.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const f=c.node(-1);if(f.type!==a)return!1;const h=o.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==a||c.index(-2)!==c.node(-2).childCount-1)return!1;if(s){let x=Z.empty;const y=c.index(-1)?1:c.index(-2)?2:3;for(let N=c.depth-y;N>=c.depth-3;N-=1)x=Z.from(c.node(N).copy(x));const w=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,S={...Dm(h,c.node().type.name,c.node().attrs),...e},j=((i=a.contentMatch.defaultType)==null?void 0:i.createAndFill(S))||void 0;x=x.append(Z.from(a.createAndFill(null,j)||void 0));const C=c.before(c.depth-(y-1));n.replace(C,c.after(-w),new fe(x,4-y,0));let k=-1;n.doc.nodesBetween(C,n.doc.content.size,(N,E)=>{if(k>-1)return!1;N.isTextblock&&N.content.size===0&&(k=E+1)}),k>-1&&n.setSelection(_e.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const p=u.pos===c.end()?f.contentMatchAt(0).defaultType:null,m={...Dm(h,f.type.name,f.attrs),...e},v={...Dm(h,c.node().type.name,c.node().attrs),...e};n.delete(c.pos,u.pos);const b=p?[{type:a,attrs:m},{type:p,attrs:v}]:[{type:a,attrs:m}];if(!mu(n.doc,c.pos,2))return!1;if(s){const{selection:x,storedMarks:y}=r,{splittableMarks:w}=o.extensionManager,S=y||x.$to.parentOffset&&x.$from.marks();if(n.split(c.pos,2,b).scrollIntoView(),!S||!s)return!0;const j=S.filter(C=>w.includes(C.type.name));n.ensureMarks(j)}return!0},A0=(t,e)=>{const n=By(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Ba(t.doc,n.pos)&&t.join(n.pos),!0},P0=(t,e)=>{const n=By(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Ba(t.doc,r)&&t.join(r),!0},Zle=(t,e,n,r={})=>({editor:s,tr:o,state:i,dispatch:a,chain:c,commands:u,can:d})=>{const{extensions:f,splittableMarks:h}=s.extensionManager,p=$t(t,i.schema),m=$t(e,i.schema),{selection:v,storedMarks:b}=i,{$from:x,$to:y}=v,w=x.blockRange(y),S=b||v.$to.parentOffset&&v.$from.marks();if(!w)return!1;const j=By(C=>U2(C.type.name,f))(v);if(w.depth>=1&&j&&w.depth-j.depth<=1){if(j.node.type===p)return u.liftListItem(m);if(U2(j.node.type.name,f)&&p.validContent(j.node.content)&&a)return c().command(()=>(o.setNodeMarkup(j.pos,p),!0)).command(()=>A0(o,p)).command(()=>P0(o,p)).run()}return!n||!S||!a?c().command(()=>d().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>A0(o,p)).command(()=>P0(o,p)).run():c().command(()=>{const C=d().wrapInList(p,r),k=S.filter(N=>h.includes(N.type.name));return o.ensureMarks(k),C?!0:u.clearNodes()}).wrapInList(p,r).command(()=>A0(o,p)).command(()=>P0(o,p)).run()},ece=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=ui(t,r.schema);return E1(r,i,e)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,e)},tce=(t,e,n={})=>({state:r,commands:s})=>{const o=$t(t,r.schema),i=$t(e,r.schema),a=Ta(r,o,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),a?s.setNode(i,c):s.setNode(o,{...c,...n})},nce=(t,e={})=>({state:n,commands:r})=>{const s=$t(t,n.schema);return Ta(n,s,e)?r.lift(s):r.wrapIn(s,e)},rce=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const i=t.tr,a=o.transform;for(let c=a.steps.length-1;c>=0;c-=1)i.step(a.steps[c].invert(a.docs[c]));if(o.text){const c=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,t.schema.text(o.text,c))}else i.delete(o.from,o.to)}return!0}}return!1},sce=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},oce=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,c=ui(t,r.schema),{$from:u,empty:d,ranges:f}=a;if(!s)return!0;if(d&&i){let{from:h,to:p}=a;const m=(o=u.marks().find(b=>b.type===c))==null?void 0:o.attrs,v=Gj(u,c,m);v&&(h=v.from,p=v.to),n.removeMark(h,p,c)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,c)});return n.removeStoredMark(c),!0},ice=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=zy(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(o=$t(t,r.schema)),a==="mark"&&(i=ui(t,r.schema)),s&&n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(u,d,(v,b)=>{o&&o===v.type&&(p=Math.max(b,u),m=Math.min(b+v.nodeSize,d),f=b,h=v)}):r.doc.nodesBetween(u,d,(v,b)=>{b<u&&o&&o===v.type&&(p=Math.max(b,u),m=Math.min(b+v.nodeSize,d),f=b,h=v),b>=u&&b<=d&&(o&&o===v.type&&n.setNodeMarkup(b,void 0,{...v.attrs,...e}),i&&v.marks.length&&v.marks.forEach(x=>{if(i===x.type){const y=Math.max(b,u),w=Math.min(b+v.nodeSize,d);n.addMark(y,w,i.create({...x.attrs,...e}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(v=>{i===v.type&&n.addMark(p,m,i.create({...v.attrs,...e}))}))}),!0):!1},ace=(t,e={})=>({state:n,dispatch:r})=>{const s=$t(t,n.schema);return Boe(s,e)(n,r)},lce=(t,e={})=>({state:n,dispatch:r})=>{const s=$t(t,n.schema);return Voe(s,e)(n,r)},cce=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Uy=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},uce=(t,e)=>{if(Kj(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function nm(t){var e;const{editor:n,from:r,to:s,text:o,rules:i,plugin:a}=t,{view:c}=n;if(c.composing)return!1;const u=c.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let d=!1;const f=zle(u)+o;return i.forEach(h=>{if(d)return;const p=uce(f,h.find);if(!p)return;const m=c.state.tr,v=Fy({state:c.state,transaction:m}),b={from:r-(p[0].length-o.length),to:s},{commands:x,chain:y,can:w}=new $y({editor:n,state:v});h.handler({state:v,range:b,match:p,commands:x,chain:y,can:w})===null||!m.steps.length||(h.undoable&&m.setMeta(a,{transform:m,from:r,to:s,text:o}),c.dispatch(m),d=!0)}),d}function dce(t){const{editor:e,rules:n}=t,r=new Pt({state:{init(){return null},apply(s,o,i){const a=s.getMeta(r);if(a)return a;const c=s.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:d}=c;typeof d=="string"?d=d:d=Jj(Z.from(d),i.schema);const{from:f}=c,h=f+d.length;nm({editor:e,from:f,to:h,text:d,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,a){return nm({editor:e,from:o,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&nm({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?nm({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function fce(t){return Object.prototype.toString.call(t).slice(8,-1)}function rm(t){return fce(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function J$(t,e){const n={...t};return rm(t)&&rm(e)&&Object.keys(e).forEach(r=>{rm(e[r])&&rm(t[r])?n[r]=J$(t[r],e[r]):n[r]=e[r]}),n}var ek=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...et(xe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...et(xe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>J$(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},uc=class X$ extends ek{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new X$(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(u=>(u==null?void 0:u.type.name)===n.name))return!1;const c=i.find(u=>(u==null?void 0:u.type.name)===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function hce(t){return typeof t=="number"}var pce=class{constructor(t){this.find=t.find,this.handler=t.handler}},mce=(t,e,n)=>{if(Kj(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function gce(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:a}=t,{commands:c,chain:u,can:d}=new $y({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,s,(p,m)=>{var v,b,x,y,w;if((b=(v=p.type)==null?void 0:v.spec)!=null&&b.code||!(p.isText||p.isTextblock||p.isInline))return;const S=(w=(y=(x=p.content)==null?void 0:x.size)!=null?y:p.nodeSize)!=null?w:0,j=Math.max(r,m),C=Math.min(s,m+S);if(j>=C)return;const k=p.isText?p.text||"":p.textBetween(j-m,C-m,void 0,"");mce(k,o.find,i).forEach(E=>{if(E.index===void 0)return;const A=j+E.index+1,$=A+E[0].length,H={from:n.tr.mapping.map(A),to:n.tr.mapping.map($)},O=o.handler({state:n,range:H,match:E,commands:c,chain:u,can:d,pasteEvent:i,dropEvent:a});f.push(O)})}),f.every(p=>p!==null)}var sm=null,vce=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function yce(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const c=({state:d,from:f,to:h,rule:p,pasteEvt:m})=>{const v=d.tr,b=Fy({state:d,transaction:v});if(!(!gce({editor:e,state:b,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!v.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,v}};return n.map(d=>new Pt({view(f){const h=m=>{var v;r=(v=f.dom.parentElement)!=null&&v.contains(m.target)?f.dom.parentElement:null,r&&(sm=e)},p=()=>{sm&&(sm=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(o=r===f.dom.parentElement,a=h,!o){const p=sm;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var p;const m=(p=h.clipboardData)==null?void 0:p.getData("text/html");return i=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],v=m.getMeta("uiEvent")==="paste"&&!s,b=m.getMeta("uiEvent")==="drop"&&!o,x=m.getMeta("applyPasteRules"),y=!!x;if(!v&&!b&&!y)return;if(y){let{text:j}=x;typeof j=="string"?j=j:j=Jj(Z.from(j),p.schema);const{from:C}=x,k=C+j.length,N=vce(j);return c({rule:d,state:p,from:C,to:{b:k},pasteEvt:N})}const w=h.doc.content.findDiffStart(p.doc.content),S=h.doc.content.findDiffEnd(p.doc.content);if(!(!hce(w)||!S||w===S.b))return c({rule:d,state:p,from:w,to:S,pasteEvt:i})}}))}var Hy=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=W$(t),this.schema=Dle(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:M0(e.name,this.schema)},r=xe(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Xj([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:M0(r.name,this.schema)},o=[],i=xe(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&xe(r,"exitable",s)&&(a.ArrowRight=()=>uc.handleExit({editor:t,mark:r})),i){const h=Object.fromEntries(Object.entries(i()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...h}}const c=Iae(a);o.push(c);const u=xe(r,"addInputRules",s);if(V2(r,t.options.enableInputRules)&&u){const h=u();if(h&&h.length){const p=dce({editor:t,rules:h}),m=Array.isArray(p)?p:[p];o.push(...m)}}const d=xe(r,"addPasteRules",s);if(V2(r,t.options.enablePasteRules)&&d){const h=d();if(h&&h.length){const p=yce({editor:t,rules:h});o.push(...p)}}const f=xe(r,"addProseMirrorPlugins",s);if(f){const h=f();o.push(...h)}return o})}get attributes(){return H$(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Sh(this.extensions);return Object.fromEntries(e.filter(n=>!!xe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:$t(n.name,this.schema)},o=xe(n,"addNodeView",s);if(!o)return[];const i=o();if(!i)return[];const a=(c,u,d,f,h)=>{const p=Yg(c,r);return i({node:c,view:u,getPos:d,decorations:f,innerDecorations:h,editor:t,extension:n,HTMLAttributes:p})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Sh(this.extensions);return Object.fromEntries(e.filter(n=>!!xe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ui(n.name,this.schema)},o=xe(n,"addMarkView",s);if(!o)return[];const i=(a,c,u)=>{const d=Yg(a,r);return o()({mark:a,view:c,inline:u,editor:t,extension:n,HTMLAttributes:d,updateAttributes:f=>{Pce(a,t,f)}})};return[n.name,i]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:M0(e.name,this.schema)};e.type==="mark"&&((n=et(xe(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=xe(e,"onBeforeCreate",r),o=xe(e,"onCreate",r),i=xe(e,"onUpdate",r),a=xe(e,"onSelectionUpdate",r),c=xe(e,"onTransaction",r),u=xe(e,"onFocus",r),d=xe(e,"onBlur",r),f=xe(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),c&&this.editor.on("transaction",c),u&&this.editor.on("focus",u),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}};Hy.resolve=W$;Hy.sort=Xj;Hy.flatten=Qj;var xce={};qj(xce,{ClipboardTextSerializer:()=>e5,Commands:()=>t5,Delete:()=>n5,Drop:()=>r5,Editable:()=>s5,FocusEvents:()=>i5,Keymap:()=>a5,Paste:()=>l5,Tabindex:()=>c5,focusEventsPluginKey:()=>o5});var Bt=class Z$ extends ek{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Z$(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},e5=Bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Pt({key:new un("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,i=Math.min(...o.map(d=>d.$from.pos)),a=Math.max(...o.map(d=>d.$to.pos)),c=K$(n);return q$(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),t5=Bt.create({name:"commands",addCommands(){return{...O$}}}),n5=Bt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const o=()=>{var i,a,c,u;if((u=(c=(a=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:a.filterTransaction)==null?void 0:c.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const d=V$(t.before,[t,...e]);Y$(d).forEach(p=>{d.mapping.mapResult(p.oldRange.from).deletedAfter&&d.mapping.mapResult(p.oldRange.to).deletedBefore&&d.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,v)=>{const b=v+m.nodeSize-2,x=p.oldRange.from<=v&&b<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:v,to:b,newFrom:d.mapping.map(v),newTo:d.mapping.map(b),deletedRange:p.oldRange,newRange:p.newRange,partial:!x,editor:this.editor,transaction:t,combinedTransform:d})})});const h=d.mapping;d.steps.forEach((p,m)=>{var v,b;if(p instanceof js){const x=h.slice(m).map(p.from,-1),y=h.slice(m).map(p.to),w=h.invert().map(x,-1),S=h.invert().map(y),j=(v=d.doc.nodeAt(x-1))==null?void 0:v.marks.some(k=>k.eq(p.mark)),C=(b=d.doc.nodeAt(y))==null?void 0:b.marks.some(k=>k.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:S},newRange:{from:x,to:y},partial:!!(C||j),editor:this.editor,transaction:t,combinedTransform:d})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),r5=Bt.create({name:"drop",addProseMirrorPlugins(){return[new Pt({key:new un("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),s5=Bt.create({name:"editable",addProseMirrorPlugins(){return[new Pt({key:new un("editable"),props:{editable:()=>this.editor.options.editable}})]}}),o5=new un("focusEvents"),i5=Bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Pt({key:o5,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),a5=Bt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:c,doc:u}=a,{empty:d,$anchor:f}=c,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,v=m.parent.type.spec.isolating,b=f.pos-f.parentOffset,x=v&&m.parent.childCount===1?b===f.pos:ze.atStart(u).from===h;return!d||!p.type.isTextblock||p.textContent.length||!x||x&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Yj()||z$()?o:s},addProseMirrorPlugins(){return[new Pt({key:new un("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(v=>v.getMeta("composition")))return;const r=t.some(v=>v.docChanged)&&!e.doc.eq(n.doc),s=t.some(v=>v.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:a}=e.selection,c=ze.atStart(e.doc).from,u=ze.atEnd(e.doc).to;if(o||!(i===c&&a===u)||!Vy(n.doc))return;const h=n.tr,p=Fy({state:n,transaction:h}),{commands:m}=new $y({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),l5=Bt.create({name:"paste",addProseMirrorPlugins(){return[new Pt({key:new un("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),c5=Bt.create({name:"tabindex",addProseMirrorPlugins(){return[new Pt({key:new un("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),bce=class Rc{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Rc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Rc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Rc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(i);if(!s&&a.depth<=this.depth)return;const c=new Rc(a,this.editor,s,s?n:null);s&&(c.actualDepth=this.depth+1),e.push(new Rc(a,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const c=i[a];if(o[c]!==n[c])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===e&&o.every(c=>n[c]===i.node.attrs[c])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},wce=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Sce(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var Cce=class extends cce{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=F$(e,this.options.autofocus);this.editorState=Zc.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Sce(wce,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=U$(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=n.filter(i=>!i.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[s5,e5.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),t5,i5,a5,c5,r5,l5,n5].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Hy(r,this)}createCommandManager(){this.commandManager=new $y({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=N1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=N1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new D$(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(u)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const i=n.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=i==null?void 0:i.getMeta("focus"),c=i==null?void 0:i.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:i}),c&&this.emit("blur",{editor:this,event:c.event,transaction:i}),!(t.getMeta("preventUpdate")||!n.some(u=>u.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return G$(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Ble(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Jj(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return Ole(this.state.doc,{blockSeparator:e,textSerializers:{...K$(this.schema),...n}})}get isEmpty(){return Vy(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new bce(e,this)}get $doc(){return this.$pos(0)}};function Xu(t){return new Uy({find:t.find,handler:({state:e,range:n,match:r})=>{const s=et(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,i=r[r.length-1],a=r[0];if(i){const c=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(Zj(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===t.type&&v!==p.mark.type)).filter(p=>p.to>u).length)return null;d<n.to&&o.delete(d,n.to),u>n.from&&o.delete(n.from+c,u);const h=n.from+c+i.length;o.addMark(n.from+c,h,t.type.create(s||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function jce(t){return new Uy({find:t.find,handler:({state:e,range:n,match:r})=>{const s=et(t.getAttributes,void 0,r)||{},{tr:o}=e,i=n.from;let a=n.to;const c=t.type.create(s);if(r[1]){const u=r[0].lastIndexOf(r[1]);let d=i+u;d>a?d=a:a=d+r[1].length;const f=r[0][r[0].length-1];o.insertText(f,i+r[0].length-1),o.replaceWith(d,a,c)}else if(r[0]){const u=t.type.isInline?i:i-1;o.insert(u,t.type.create(s)).delete(o.mapping.map(i),o.mapping.map(a))}o.scrollIntoView()},undoable:t.undoable})}function _1(t){return new Uy({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=et(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Zu(t){return new Uy({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=et(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),c=i.doc.resolve(n.from).blockRange(),u=c&&Dj(c,t.type,o);if(!u)return null;if(i.wrap(c,u),t.keepMarks&&t.editor){const{selection:f,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,m=h||f.$to.parentOffset&&f.$from.marks();if(m){const v=m.filter(b=>p.includes(b.type.name));i.ensureMarks(v)}}if(t.keepAttributes){const f=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(f,o).run()}const d=i.doc.resolve(n.from-1).nodeBefore;d&&d.type===t.type&&Ba(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,d))&&i.join(n.from-1)},undoable:t.undoable})}function kce(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Ce){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}var Nce={};qj(Nce,{createAtomBlockMarkdownSpec:()=>Ece,createBlockMarkdownSpec:()=>_ce,createInlineMarkdownSpec:()=>Ace,parseAttributes:()=>tk,parseIndentedBlocks:()=>T1,renderNestedMarkdownContent:()=>rk,serializeAttributes:()=>nk});function tk(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const u=s.map(d=>d.trim().slice(1));e.class=u.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,u,d])=>{var f;const h=parseInt(((f=d.match(/__QUOTED_(\d+)__/))==null?void 0:f[1])||"0",10),p=n[h];p&&(e[u]=p.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(d=>{d.match(/^[a-zA-Z][\w-]*$/)&&(e[d]=!0)}),e}function nk(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function Ece(t){const{nodeName:e,name:n,parseAttributes:r=tk,serializeAttributes:s=nk,defaultAttributes:o={},requiredAttributes:i=[],allowedAttributes:a}=t,c=n||e,u=d=>{if(!a)return d;const f={};return a.forEach(h=>{h in d&&(f[h]=d[h])}),f};return{parseMarkdown:(d,f)=>{const h={...o,...d.attributes};return f.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(d){var f;const h=new RegExp(`^:::${c}(?:\\s|$)`,"m"),p=(f=d.match(h))==null?void 0:f.index;return p!==void 0?p:-1},tokenize(d,f,h){const p=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=d.match(p);if(!m)return;const v=m[1]||"",b=r(v);if(!i.find(y=>!(y in b)))return{type:e,raw:m[0],attributes:b}}},renderMarkdown:d=>{const f=u(d.attrs||{}),h=s(f),p=h?` {${h}}`:"";return`:::${c}${p} :::`}}}function _ce(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=tk,serializeAttributes:o=nk,defaultAttributes:i={},content:a="block",allowedAttributes:c}=t,u=n||e,d=f=>{if(!c)return f;const h={};return c.forEach(p=>{p in f&&(h[p]=f[p])}),h};return{parseMarkdown:(f,h)=>{let p;if(r){const v=r(f);p=typeof v=="string"?[{type:"text",text:v}]:v}else a==="block"?p=h.parseChildren(f.tokens||[]):p=h.parseInline(f.tokens||[]);const m={...i,...f.attributes};return h.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(f){var h;const p=new RegExp(`^:::${u}`,"m"),m=(h=f.match(p))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(f,h,p){var m;const v=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),b=f.match(v);if(!b)return;const[x,y=""]=b,w=s(y);let S=1;const j=x.length;let C="";const k=/^:::([\w-]*)(\s.*)?/gm,N=f.slice(j);for(k.lastIndex=0;;){const E=k.exec(N);if(E===null)break;const A=E.index,$=E[1];if(!((m=E[2])!=null&&m.endsWith(":::"))){if($)S+=1;else if(S-=1,S===0){const H=N.slice(0,A);C=H.trim();const O=f.slice(0,j+A+E[0].length);let V=[];if(C)if(a==="block")for(V=p.blockTokens(H),V.forEach(B=>{B.text&&(!B.tokens||B.tokens.length===0)&&(B.tokens=p.inlineTokens(B.text))});V.length>0;){const B=V[V.length-1];if(B.type==="paragraph"&&(!B.text||B.text.trim()===""))V.pop();else break}else V=p.inlineTokens(C);return{type:e,raw:O,attributes:w,content:C,tokens:V}}}}}},renderMarkdown:(f,h)=>{const p=d(f.attrs||{}),m=o(p),v=m?` {${m}}`:"",b=h.renderChildren(f.content||[],`

`);return`:::${u}${v}

${b}

:::`}}}function Tce(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,o,i]=r;e[s]=o||i,r=n.exec(t)}return e}function Mce(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function Ace(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=Tce,serializeAttributes:o=Mce,defaultAttributes:i={},selfClosing:a=!1,allowedAttributes:c}=t,u=n||e,d=h=>{if(!c)return h;const p={};return c.forEach(m=>{m in h&&(p[m]=h[m])}),p},f=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,p)=>{const m={...i,...h.attributes};if(a)return p.createNode(e,m);const v=r?r(h):h.content||"";return v?p.createNode(e,m,[p.createTextNode(v)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(h){const p=a?new RegExp(`\\[${f}\\s*[^\\]]*\\]`):new RegExp(`\\[${f}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${f}\\]`),m=h.match(p),v=m==null?void 0:m.index;return v!==void 0?v:-1},tokenize(h,p,m){const v=a?new RegExp(`^\\[${f}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${f}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${f}\\]`),b=h.match(v);if(!b)return;let x="",y="";if(a){const[,S]=b;y=S}else{const[,S,j]=b;y=S,x=j||""}const w=s(y.trim());return{type:e,raw:b[0],content:x.trim(),attributes:w}}},renderMarkdown:h=>{let p="";r?p=r(h):h.content&&h.content.length>0&&(p=h.content.filter(x=>x.type==="text").map(x=>x.text).join(""));const m=d(h.attrs||{}),v=o(m),b=v?` ${v}`:"";return a?`[${u}${b}]`:`[${u}${b}]${p}[/${u}]`}}}function T1(t,e,n){var r,s,o,i;const a=t.split(`
`),c=[];let u="",d=0;const f=e.baseIndentSize||2;for(;d<a.length;){const h=a[d],p=h.match(e.itemPattern);if(!p){if(c.length>0)break;if(h.trim()===""){d+=1;continue}else return}const m=e.extractItemData(p),{indentLevel:v,mainContent:b}=m;u=`${u}${h}
`;const x=[b];for(d+=1;d<a.length;){const j=a[d];if(j.trim()===""){const k=a.slice(d+1).findIndex(A=>A.trim()!=="");if(k===-1)break;if((((s=(r=a[d+1+k].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>v){x.push(j),u=`${u}${j}
`,d+=1;continue}else break}if((((i=(o=j.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:i.length)||0)>v)x.push(j),u=`${u}${j}
`,d+=1;else break}let y;const w=x.slice(1);if(w.length>0){const j=w.map(C=>C.slice(v+f)).join(`
`);j.trim()&&(e.customNestedParser?y=e.customNestedParser(j):y=n.blockTokens(j))}const S=e.createToken(m,y);c.push(S)}if(c.length!==0)return{items:c,raw:u.trim()}}function rk(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[o,...i]=t.content,a=e.renderChildren([o]),c=[`${s}${a}`];return i&&i.length>0&&i.forEach(u=>{const d=e.renderChildren([u]);if(d){const f=d.split(`
`).map(h=>h?e.indent(h):"").join(`
`);c.push(f)}}),c.join(`
`)}function Pce(t,e,n={}){const{state:r}=e,{doc:s,tr:o}=r,i=t;s.descendants((a,c)=>{const u=o.mapping.map(c),d=o.mapping.map(c)+a.nodeSize;let f=null;if(a.marks.forEach(p=>{if(p!==i)return!1;f=p}),!f)return;let h=!1;if(Object.keys(n).forEach(p=>{n[p]!==f.attrs[p]&&(h=!0)}),h){const p=t.type.create({...t.attrs,...n});o.removeMark(u,d,t.type),o.addMark(u,d,p)}}),o.docChanged&&e.view.dispatch(o)}var Ir=class u5 extends ek{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new u5(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Xl(t){return new pce({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=et(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=e,a=r[r.length-1],c=r[0];let u=n.to;if(a){const d=c.search(/\S/),f=n.from+c.indexOf(a),h=f+a.length;if(Zj(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(b=>b===t.type&&b!==m.mark.type)).filter(m=>m.to>f).length)return null;h<n.to&&i.delete(h,n.to),f>n.from&&i.delete(n.from+d,f),u=n.from+d+a.length,i.addMark(n.from+d,u,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}var Dce=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var i=o[s];if(!(i==="_owner"&&e.$$typeof)&&!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n};const Rce=Y1(Dce);var d5={exports:{}},f5={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy=g,Oce=by;function Ice(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lce=typeof Object.is=="function"?Object.is:Ice,Fce=Oce.useSyncExternalStore,$ce=Wy.useRef,zce=Wy.useEffect,Bce=Wy.useMemo,Vce=Wy.useDebugValue;f5.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var o=$ce(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Bce(function(){function c(p){if(!u){if(u=!0,d=p,p=r(p),s!==void 0&&i.hasValue){var m=i.value;if(s(m,p))return f=m}return f=p}if(m=f,Lce(d,p))return m;var v=r(p);return s!==void 0&&s(m,v)?(d=p,m):(d=p,f=v)}var u=!1,d,f,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Fce(t,o[0],o[1]);return zce(function(){i.hasValue=!0,i.value=a},[a]),Vce(a),a};d5.exports=f5;var Uce=d5.exports,Hce=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Wce=({contentComponent:t})=>{const e=by.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return l.jsx(l.Fragment,{children:Object.values(e)})};function qce(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:WS.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var Kce=class extends J.Component{constructor(t){var e;super(t),this.editorContentRef=J.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=qce(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:Hce(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&l.jsx(Wce,{contentComponent:t.contentComponent})]})}},Gce=g.forwardRef((t,e)=>{const n=J.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return J.createElement(Kce,{key:n,innerRef:e,...t})}),Yce=J.memo(Gce),Qce=typeof window<"u"?g.useLayoutEffect:g.useEffect,Jce=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function Xce(t){var e;const[n]=g.useState(()=>new Jce(t.editor)),r=Uce.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Rce);return Qce(()=>n.watch(t.editor),[t.editor,n]),g.useDebugValue(r),r}var Zce=!1,M1=typeof window>"u",eue=M1||!!(typeof window<"u"&&window.next),tue=class h5{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){if(this.options.current.immediatelyRender===void 0)return M1||eue?null:this.createEditor();if(this.options.current.immediatelyRender&&M1&&Zce)throw new Error("Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.");return this.options.current.immediatelyRender?this.createEditor():null}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new Cce(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,o)=>{var i;return s===((i=n.extensions)==null?void 0:i[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?h5.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function nue(t={},e=[]){const n=g.useRef(t);n.current=t;const[r]=g.useState(()=>new tue(n)),s=by.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return g.useDebugValue(s),g.useEffect(r.onRender(e)),Xce({editor:s,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),s}var rue=g.createContext({editor:null});rue.Consumer;var sue=g.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),oue=()=>g.useContext(sue);J.forwardRef((t,e)=>{const{onDragStart:n}=oue(),r=t.as||"div";return l.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});J.createContext({markViewContentRef:()=>{}});var Qg=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},iue=/^\s*>\s$/,aue=Ir.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Qg("blockquote",{...zt(this.options.HTMLAttributes,t),children:Qg("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(c=>c.trim()===""?n:`${n} ${c}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Zu({find:iue,type:this.type})]}}),lue=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,cue=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uue=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,due=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fue=uc.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Qg("strong",{...zt(this.options.HTMLAttributes,t),children:Qg("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Xu({find:lue,type:this.type}),Xu({find:uue,type:this.type})]},addPasteRules(){return[Xl({find:cue,type:this.type}),Xl({find:due,type:this.type})]}}),hue=/(^|[^`])`([^`]+)`(?!`)$/,pue=/(^|[^`])`([^`]+)`(?!`)/g,mue=uc.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",zt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Xu({find:hue,type:this.type})]},addPasteRules(){return[Xl({find:pue,type:this.type})]}}),D0=4,gue=/^```([a-z]+)?[\s\n]$/,vue=/^~~~([a-z]+)?[\s\n]$/,yue=Ir.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:D0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",zt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:D0,{state:r}=t,{selection:s}=r,{$from:o,empty:i}=s;if(o.parent.type!==this.type)return!1;const a=" ".repeat(n);return i?t.commands.insertContent(a):t.commands.command(({tr:c})=>{const{from:u,to:d}=s,p=r.doc.textBetween(u,d,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return c.replaceWith(u,d,r.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:D0,{state:r}=t,{selection:s}=r,{$from:o,empty:i}=s;return o.parent.type!==this.type?!1:i?t.commands.command(({tr:a})=>{var c;const{pos:u}=o,d=o.start(),f=o.end(),p=r.doc.textBetween(d,f,`
`,`
`).split(`
`);let m=0,v=0;const b=u-d;for(let C=0;C<p.length;C+=1){if(v+p[C].length>=b){m=C;break}v+=p[C].length+1}const y=((c=p[m].match(/^ */))==null?void 0:c[0])||"",w=Math.min(y.length,n);if(w===0)return!0;let S=d;for(let C=0;C<m;C+=1)S+=p[C].length+1;return a.delete(S,S+w),u-S<=w&&a.setSelection(_e.create(a.doc,S)),!0}):t.commands.command(({tr:a})=>{const{from:c,to:u}=s,h=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(p=>{var m;const v=((m=p.match(/^ */))==null?void 0:m[0])||"",b=Math.min(v.length,n);return p.slice(b)}).join(`
`);return a.replaceWith(c,u,r.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(ze.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[_1({find:gue,type:this.type,getAttributes:t=>({language:t[1]})}),_1({find:vue,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Pt({key:new un("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:i,schema:a}=t.state,c=a.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},c)),i.selection.$from.parent.type!==this.type&&i.setSelection(_e.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),xue=Ir.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),bue=Ir.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",zt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,c=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:d})=>{if(d&&c&&i){const f=c.filter(h=>a.includes(h.type.name));u.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),wue=Ir.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,zt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>_1({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Sue=Ir.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",zt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!kce(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return Q$(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:i,dispatch:a})=>{if(a){const{$to:c}=i.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?i.setSelection(_e.create(i.doc,c.pos+1)):c.nodeAfter.isBlock?i.setSelection(Ce.create(i.doc,c.pos)):i.setSelection(_e.create(i.doc,c.pos));else{const d=o.schema.nodes[this.options.nextNodeType]||c.parent.type.contentMatch.defaultType,f=d==null?void 0:d.create();f&&(i.insert(u,f),i.setSelection(_e.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[jce({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Cue=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,jue=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,kue=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Nue=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Eue=uc.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",zt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Xu({find:Cue,type:this.type}),Xu({find:kue,type:this.type})]},addPasteRules(){return[Xl({find:jue,type:this.type}),Xl({find:Nue,type:this.type})]}});const _ue="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Tue="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",A1="numeric",P1="ascii",D1="alpha",Sf="asciinumeric",Zd="alphanumeric",R1="domain",p5="emoji",Mue="scheme",Aue="slashscheme",R0="whitespace";function Pue(t,e){return t in e||(e[t]=[]),e[t]}function pl(t,e,n){e[A1]&&(e[Sf]=!0,e[Zd]=!0),e[P1]&&(e[Sf]=!0,e[D1]=!0),e[Sf]&&(e[Zd]=!0),e[D1]&&(e[Zd]=!0),e[Zd]&&(e[R1]=!0),e[p5]&&(e[R1]=!0);for(const r in e){const s=Pue(r,n);s.indexOf(t)<0&&s.push(t)}}function Due(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function dr(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}dr.groups={};dr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||dr.groups;let s;return e&&e.j?s=e:(s=new dr(e),n&&r&&pl(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const o=t.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(t[i]);return s.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||dr.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const o=e;let i,a=s.go(t);if(a?(i=new dr,Object.assign(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new dr,o){if(r)if(i.t&&typeof i.t=="string"){const c=Object.assign(Due(i.t,r),n);pl(o,c,r)}else n&&pl(o,n,r);i.t=o}return s.j[t]=i,i}};const $e=(t,e,n,r,s)=>t.ta(e,n,r,s),Nt=(t,e,n,r,s)=>t.tr(e,n,r,s),W2=(t,e,n,r,s)=>t.ts(e,n,r,s),te=(t,e,n,r,s)=>t.tt(e,n,r,s),Lo="WORD",O1="UWORD",m5="ASCIINUMERICAL",g5="ALPHANUMERICAL",Ch="LOCALHOST",I1="TLD",L1="UTLD",Rm="SCHEME",Oc="SLASH_SCHEME",sk="NUM",F1="WS",ok="NL",Cf="OPENBRACE",jf="CLOSEBRACE",Jg="OPENBRACKET",Xg="CLOSEBRACKET",Zg="OPENPAREN",ev="CLOSEPAREN",tv="OPENANGLEBRACKET",nv="CLOSEANGLEBRACKET",rv="FULLWIDTHLEFTPAREN",sv="FULLWIDTHRIGHTPAREN",ov="LEFTCORNERBRACKET",iv="RIGHTCORNERBRACKET",av="LEFTWHITECORNERBRACKET",lv="RIGHTWHITECORNERBRACKET",cv="FULLWIDTHLESSTHAN",uv="FULLWIDTHGREATERTHAN",dv="AMPERSAND",fv="APOSTROPHE",hv="ASTERISK",Ri="AT",pv="BACKSLASH",mv="BACKTICK",gv="CARET",Bi="COLON",ik="COMMA",vv="DOLLAR",Us="DOT",yv="EQUALS",ak="EXCLAMATION",Ur="HYPHEN",kf="PERCENT",xv="PIPE",bv="PLUS",wv="POUND",Nf="QUERY",lk="QUOTE",v5="FULLWIDTHMIDDLEDOT",ck="SEMI",Hs="SLASH",Ef="TILDE",Sv="UNDERSCORE",y5="EMOJI",Cv="SYM";var x5=Object.freeze({__proto__:null,ALPHANUMERICAL:g5,AMPERSAND:dv,APOSTROPHE:fv,ASCIINUMERICAL:m5,ASTERISK:hv,AT:Ri,BACKSLASH:pv,BACKTICK:mv,CARET:gv,CLOSEANGLEBRACKET:nv,CLOSEBRACE:jf,CLOSEBRACKET:Xg,CLOSEPAREN:ev,COLON:Bi,COMMA:ik,DOLLAR:vv,DOT:Us,EMOJI:y5,EQUALS:yv,EXCLAMATION:ak,FULLWIDTHGREATERTHAN:uv,FULLWIDTHLEFTPAREN:rv,FULLWIDTHLESSTHAN:cv,FULLWIDTHMIDDLEDOT:v5,FULLWIDTHRIGHTPAREN:sv,HYPHEN:Ur,LEFTCORNERBRACKET:ov,LEFTWHITECORNERBRACKET:av,LOCALHOST:Ch,NL:ok,NUM:sk,OPENANGLEBRACKET:tv,OPENBRACE:Cf,OPENBRACKET:Jg,OPENPAREN:Zg,PERCENT:kf,PIPE:xv,PLUS:bv,POUND:wv,QUERY:Nf,QUOTE:lk,RIGHTCORNERBRACKET:iv,RIGHTWHITECORNERBRACKET:lv,SCHEME:Rm,SEMI:ck,SLASH:Hs,SLASH_SCHEME:Oc,SYM:Cv,TILDE:Ef,TLD:I1,UNDERSCORE:Sv,UTLD:L1,UWORD:O1,WORD:Lo,WS:F1});const Po=/[a-z]/,zd=new RegExp("\\p{L}","u"),O0=new RegExp("\\p{Emoji}","u"),Do=/\d/,I0=/\s/,q2="\r",L0=`
`,Rue="",Oue="",F0="";let om=null,im=null;function Iue(t=[]){const e={};dr.groups=e;const n=new dr;om==null&&(om=K2(_ue)),im==null&&(im=K2(Tue)),te(n,"'",fv),te(n,"{",Cf),te(n,"}",jf),te(n,"[",Jg),te(n,"]",Xg),te(n,"(",Zg),te(n,")",ev),te(n,"<",tv),te(n,">",nv),te(n,"",rv),te(n,"",sv),te(n,"",ov),te(n,"",iv),te(n,"",av),te(n,"",lv),te(n,"",cv),te(n,"",uv),te(n,"&",dv),te(n,"*",hv),te(n,"@",Ri),te(n,"`",mv),te(n,"^",gv),te(n,":",Bi),te(n,",",ik),te(n,"$",vv),te(n,".",Us),te(n,"=",yv),te(n,"!",ak),te(n,"-",Ur),te(n,"%",kf),te(n,"|",xv),te(n,"+",bv),te(n,"#",wv),te(n,"?",Nf),te(n,'"',lk),te(n,"/",Hs),te(n,";",ck),te(n,"~",Ef),te(n,"_",Sv),te(n,"\\",pv),te(n,"",v5);const r=Nt(n,Do,sk,{[A1]:!0});Nt(r,Do,r);const s=Nt(r,Po,m5,{[Sf]:!0}),o=Nt(r,zd,g5,{[Zd]:!0}),i=Nt(n,Po,Lo,{[P1]:!0});Nt(i,Do,s),Nt(i,Po,i),Nt(s,Do,s),Nt(s,Po,s);const a=Nt(n,zd,O1,{[D1]:!0});Nt(a,Po),Nt(a,Do,o),Nt(a,zd,a),Nt(o,Do,o),Nt(o,Po),Nt(o,zd,o);const c=te(n,L0,ok,{[R0]:!0}),u=te(n,q2,F1,{[R0]:!0}),d=Nt(n,I0,F1,{[R0]:!0});te(n,F0,d),te(u,L0,c),te(u,F0,d),Nt(u,I0,d),te(d,q2),te(d,L0),Nt(d,I0,d),te(d,F0,d);const f=Nt(n,O0,y5,{[p5]:!0});te(f,"#"),Nt(f,O0,f),te(f,Rue,f);const h=te(f,Oue);te(h,"#"),Nt(h,O0,f);const p=[[Po,i],[Do,s]],m=[[Po,null],[zd,a],[Do,o]];for(let v=0;v<om.length;v++)ji(n,om[v],I1,Lo,p);for(let v=0;v<im.length;v++)ji(n,im[v],L1,O1,m);pl(I1,{tld:!0,ascii:!0},e),pl(L1,{utld:!0,alpha:!0},e),ji(n,"file",Rm,Lo,p),ji(n,"mailto",Rm,Lo,p),ji(n,"http",Oc,Lo,p),ji(n,"https",Oc,Lo,p),ji(n,"ftp",Oc,Lo,p),ji(n,"ftps",Oc,Lo,p),pl(Rm,{scheme:!0,ascii:!0},e),pl(Oc,{slashscheme:!0,ascii:!0},e),t=t.sort((v,b)=>v[0]>b[0]?1:-1);for(let v=0;v<t.length;v++){const b=t[v][0],y=t[v][1]?{[Mue]:!0}:{[Aue]:!0};b.indexOf("-")>=0?y[R1]=!0:Po.test(b)?Do.test(b)?y[Sf]=!0:y[P1]=!0:y[A1]=!0,W2(n,b,b,y)}return W2(n,"localhost",Ch,{ascii:!0}),n.jd=new dr(Cv),{start:n,tokens:Object.assign({groups:e},x5)}}function b5(t,e){const n=Lue(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let a=t,c=null,u=0,d=null,f=-1,h=-1;for(;i<r&&(c=a.go(n[i]));)a=c,a.accepts()?(f=0,h=0,d=a):f>=0&&(f+=n[i].length,h++),u+=n[i].length,o+=n[i].length,i++;o-=f,i-=h,u-=f,s.push({t:d.t,v:e.slice(o-u,o),s:o-u,e:o})}return s}function Lue(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function ji(t,e,n,r,s){let o;const i=e.length;for(let a=0;a<i-1;a++){const c=e[a];t.j[c]?o=t.j[c]:(o=new dr(r),o.jr=s.slice(),t.j[c]=o),t=o}return o=new dr(n),o.jr=s.slice(),t.j[e[i-1]]=o,o}function K2(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let o=0;for(;s.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(t[r]),r++}return e}const jh={defaultProtocol:"http",events:null,format:G2,formatHref:G2,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function uk(t,e=null){let n=Object.assign({},jh);t&&(n=Object.assign(n,t instanceof uk?t.o:t));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}uk.prototype={o:jh,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:jh[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function G2(t){return t}function w5(t,e){this.t="token",this.v=t,this.tk=e}w5.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=jh.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),o=this.toFormattedString(t),i={},a=t.get("className",n,e),c=t.get("target",n,e),u=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),c&&(i.target=c),u&&(i.rel=u),d&&Object.assign(i,d),{tagName:s,attributes:i,content:o,eventListeners:f}}};function qy(t,e){class n extends w5{constructor(s,o){super(s,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Y2=qy("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Q2=qy("text"),Fue=qy("nl"),am=qy("url",{isLink:!0,toHref(t=jh.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Ch&&t[1].t===Bi}}),Br=t=>new dr(t);function $ue({groups:t}){const e=t.domain.concat([dv,hv,Ri,pv,mv,gv,vv,yv,Ur,sk,kf,xv,bv,wv,Hs,Cv,Ef,Sv]),n=[fv,Bi,ik,Us,ak,kf,Nf,lk,ck,tv,nv,Cf,jf,Xg,Jg,Zg,ev,rv,sv,ov,iv,av,lv,cv,uv],r=[dv,fv,hv,pv,mv,gv,vv,yv,Ur,Cf,jf,kf,xv,bv,wv,Nf,Hs,Cv,Ef,Sv],s=Br(),o=te(s,Ef);$e(o,r,o),$e(o,t.domain,o);const i=Br(),a=Br(),c=Br();$e(s,t.domain,i),$e(s,t.scheme,a),$e(s,t.slashscheme,c),$e(i,r,o),$e(i,t.domain,i);const u=te(i,Ri);te(o,Ri,u),te(a,Ri,u),te(c,Ri,u);const d=te(o,Us);$e(d,r,o),$e(d,t.domain,o);const f=Br();$e(u,t.domain,f),$e(f,t.domain,f);const h=te(f,Us);$e(h,t.domain,f);const p=Br(Y2);$e(h,t.tld,p),$e(h,t.utld,p),te(u,Ch,p);const m=te(f,Ur);te(m,Ur,m),$e(m,t.domain,f),$e(p,t.domain,f),te(p,Us,h),te(p,Ur,m);const v=te(p,Bi);$e(v,t.numeric,Y2);const b=te(i,Ur),x=te(i,Us);te(b,Ur,b),$e(b,t.domain,i),$e(x,r,o),$e(x,t.domain,i);const y=Br(am);$e(x,t.tld,y),$e(x,t.utld,y),$e(y,t.domain,i),$e(y,r,o),te(y,Us,x),te(y,Ur,b),te(y,Ri,u);const w=te(y,Bi),S=Br(am);$e(w,t.numeric,S);const j=Br(am),C=Br();$e(j,e,j),$e(j,n,C),$e(C,e,j),$e(C,n,C),te(y,Hs,j),te(S,Hs,j);const k=te(a,Bi),N=te(c,Bi),E=te(N,Hs),A=te(E,Hs);$e(a,t.domain,i),te(a,Us,x),te(a,Ur,b),$e(c,t.domain,i),te(c,Us,x),te(c,Ur,b),$e(k,t.domain,j),te(k,Hs,j),te(k,Nf,j),$e(A,t.domain,j),$e(A,e,j),te(A,Hs,j);const $=[[Cf,jf],[Jg,Xg],[Zg,ev],[tv,nv],[rv,sv],[ov,iv],[av,lv],[cv,uv]];for(let H=0;H<$.length;H++){const[O,V]=$[H],B=te(j,O);te(C,O,B),te(B,V,j);const K=Br(am);$e(B,e,K);const R=Br();$e(B,n),$e(K,e,K),$e(K,n,R),$e(R,e,K),$e(R,n,R),te(K,V,j),te(R,V,j)}return te(s,Ch,y),te(s,ok,Fue),{start:s,tokens:x5}}function zue(t,e,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let a=t,c=null,u=null,d=0,f=null,h=-1;for(;s<r&&!(c=a.go(n[s].t));)i.push(n[s++]);for(;s<r&&(u=c||a.go(n[s].t));)c=null,a=u,a.accepts()?(h=0,f=a):h>=0&&h++,s++,d++;if(h<0)s-=d,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push($0(Q2,e,i)),i=[]),s-=h,d-=h;const p=f.t,m=n.slice(s-d,s);o.push($0(p,e,m))}}return i.length>0&&o.push($0(Q2,e,i)),o}function $0(t,e,n){const r=n[0].s,s=n[n.length-1].e,o=e.slice(r,s);return new t(o,n)}const Bue=typeof console<"u"&&console&&console.warn||(()=>{}),Vue="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Uue(){return dr.groups={},ft.scanner=null,ft.parser=null,ft.tokenQueue=[],ft.pluginQueue=[],ft.customSchemes=[],ft.initialized=!1,ft}function J2(t,e=!1){if(ft.initialized&&Bue(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Vue}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ft.customSchemes.push([t,e])}function Hue(){ft.scanner=Iue(ft.customSchemes);for(let t=0;t<ft.tokenQueue.length;t++)ft.tokenQueue[t][1]({scanner:ft.scanner});ft.parser=$ue(ft.scanner.tokens);for(let t=0;t<ft.pluginQueue.length;t++)ft.pluginQueue[t][1]({scanner:ft.scanner,parser:ft.parser});return ft.initialized=!0,ft}function dk(t){return ft.initialized||Hue(),zue(ft.parser.start,t,b5(ft.scanner.start,t))}dk.scan=b5;function S5(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new uk(n),s=dk(t),o=[];for(let i=0;i<s.length;i++){const a=s[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&o.push(a.toFormattedObject(r))}return o}var fk="[\0- -\u2029]",Wue=new RegExp(fk),que=new RegExp(`${fk}$`),Kue=new RegExp(fk,"g");function Gue(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Yue(t){return new Pt({key:new un("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,a=V$(n.doc,[...e]);if(Y$(a).forEach(({newRange:u})=>{const d=Tle(r.doc,u,p=>p.isTextblock);let f,h;if(d.length>1)f=d[0],h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const p=r.doc.textBetween(u.from,u.to," "," ");if(!que.test(p))return;f=d[0],h=r.doc.textBetween(f.pos,u.to,void 0," ")}if(f&&h){const p=h.split(Wue).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],v=f.pos+h.lastIndexOf(m);if(!m)return!1;const b=dk(m).map(x=>x.toObject(t.defaultProtocol));if(!Gue(b))return!1;b.filter(x=>x.isLink).map(x=>({...x,from:v+x.start+1,to:v+x.end+1})).filter(x=>r.schema.marks.code?!r.doc.rangeHasMark(x.from,x.to,r.schema.marks.code):!0).filter(x=>t.validate(x.value)).filter(x=>t.shouldAutoLink(x.value)).forEach(x=>{Zj(x.from,x.to,r.doc).some(y=>y.mark.type===t.type)||i.addMark(x.from,x.to,t.type.create({href:x.href}))})}}),!!i.steps.length)return i}})}function Que(t){return new Pt({key:new un("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let i=null;if(r.target instanceof HTMLAnchorElement)i=r.target;else{let d=r.target;const f=[];for(;d.nodeName!=="DIV";)f.push(d),d=d.parentNode;i=f.find(h=>h.nodeName==="A")}if(!i)return!1;const a=G$(e.state,t.type.name),c=(s=i==null?void 0:i.href)!=null?s:a.href,u=(o=i==null?void 0:i.target)!=null?o:a.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),i&&c?(window.open(c,u),!0):!1}}})}function Jue(t){return new Pt({key:new un("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:o}=e,{selection:i}=o,{empty:a}=i;if(a)return!1;let c="";r.content.forEach(d=>{c+=d.textContent});const u=S5(c,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===c);return!c||!u||s!==void 0&&!s(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Xa(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(Kue,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Xue=uc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){J2(t);return}J2(t.scheme,t.optionalSlashes)})},onDestroy(){Uue()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Xa(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Xa(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Xa(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",zt(this.options.HTMLAttributes,t),0]:["a",zt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Xa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Xa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Xl({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=S5(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!Xa(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Yue({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Xa(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Que({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Jue({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Zue=Object.defineProperty,ede=(t,e)=>{for(var n in e)Zue(t,n,{get:e[n],enumerable:!0})},tde="listItem",X2="textStyle",Z2=/^\s*([-+*])\s$/,C5=Ir.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",zt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(tde,this.editor.getAttributes(X2)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Zu({find:Z2,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Zu({find:Z2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(X2),editor:this.editor})),[t]}}),j5=Ir.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",zt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const i=t.tokens.slice(1),a=e.parseChildren(i);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>rk(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),nde={};ede(nde,{findListItemPos:()=>lp,getNextListDepth:()=>hk,handleBackspace:()=>$1,handleDelete:()=>z1,hasListBefore:()=>k5,hasListItemAfter:()=>rde,hasListItemBefore:()=>N5,listItemHasSubList:()=>E5,nextListIsDeeper:()=>_5,nextListIsHigher:()=>T5});var lp=(t,e)=>{const{$from:n}=e.selection,r=$t(t,e.schema);let s=null,o=n.depth,i=n.pos,a=null;for(;o>0&&a===null;)s=n.node(o),s.type===r?a=o:(o-=1,i-=1);return a===null?null:{$pos:e.doc.resolve(i),depth:a}},hk=(t,e)=>{const n=lp(t,e);if(!n)return!1;const[,r]=$le(e,t,n.$pos.pos+4);return r},k5=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),o=t.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},N5=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},E5=(t,e,n)=>{if(!n)return!1;const r=$t(t,e.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},$1=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ta(t.state,e)&&k5(t.state,e,n)){const{$anchor:a}=t.state.selection,c=t.state.doc.resolve(a.before()-1),u=[];c.node().descendants((h,p)=>{h.type.name===e&&u.push({node:h,pos:p})});const d=u.at(-1);if(!d)return!1;const f=t.state.doc.resolve(c.start()+d.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},f.end()).joinForward().run()}if(!Ta(t.state,e)||!Ule(t.state))return!1;const r=lp(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=E5(e,t.state,o);return N5(e,t.state)&&!i?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},_5=(t,e)=>{const n=hk(t,e),r=lp(t,e);return!r||!n?!1:n>r.depth},T5=(t,e)=>{const n=hk(t,e),r=lp(t,e);return!r||!n?!1:n<r.depth},z1=(t,e)=>{if(!Ta(t.state,e)||!Vle(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:_5(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():T5(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},rde=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},M5=Bt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&z1(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&z1(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$1(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$1(t,n,r)&&(e=!0)}),e}}}}),eM=/^(\s*)(\d+)\.\s+(.*)$/,sde=/^\s/;function ode(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],o=s.match(eM);if(!o)break;const[,i,a,c]=o,u=i.length;let d=c,f=n+1;const h=[s];for(;f<t.length;){const p=t[f];if(p.match(eM))break;if(p.trim()==="")h.push(p),d+=`
`,f+=1;else if(p.match(sde))h.push(p),d+=`
${p.slice(u+2)}`,f+=1;else break}e.push({indent:u,number:parseInt(a,10),content:d.trim(),raw:h.join(`
`)}),r=f,n=f}return[e,r]}function A5(t,e,n){var r;const s=[];let o=0;for(;o<t.length;){const i=t[o];if(i.indent===e){const a=i.content.split(`
`),c=((r=a[0])==null?void 0:r.trim())||"",u=[];c&&u.push({type:"paragraph",raw:c,tokens:n.inlineTokens(c)});const d=a.slice(1).join(`
`).trim();if(d){const p=n.blockTokens(d);u.push(...p)}let f=o+1;const h=[];for(;f<t.length&&t[f].indent>e;)h.push(t[f]),f+=1;if(h.length>0){const p=Math.min(...h.map(v=>v.indent)),m=A5(h,p,n);u.push({type:"list",ordered:!0,start:h[0].number,items:m,raw:h.map(v=>v.raw).join(`
`)})}s.push({type:"list_item",raw:i.raw,tokens:u}),o=f}else o+=1}return s}function ide(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=e.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var ade="listItem",tM="textStyle",nM=/^(\d+)\.\s$/,P5=Ir.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",zt(this.options.HTMLAttributes,n),0]:["ol",zt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?ide(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[o,i]=ode(s);if(o.length===0)return;const a=A5(o,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,i).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ade,this.editor.getAttributes(tM)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Zu({find:nM,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Zu({find:nM,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(tM)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),lde=/^\s*(\[([( |x])?\])\s$/,cde=Ir.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",zt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return rk(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),a=document.createElement("input"),c=document.createElement("div"),u=d=>{var f,h;a.ariaLabel=((h=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:h.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};return u(t),o.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:h})=>{const p=n();if(typeof p!="number")return!1;const m=h.doc.nodeAt(p);return h.setNodeMarkup(p,void 0,{...m==null?void 0:m.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{s.setAttribute(d,f)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,o.append(a,i),s.append(o,c),Object.entries(e).forEach(([d,f])=>{s.setAttribute(d,f)}),{dom:s,contentDOM:c,update:d=>d.type!==this.type?!1:(s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,u(d),!0)}}},addInputRules(){return[Zu({find:lde,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),ude=Ir.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",zt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const i=T1(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,c)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:c}),customNestedParser:r},n);return i?[{type:"taskList",raw:i.raw,items:i.items}]:n.blockTokens(o)},s=T1(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,i)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:i}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Bt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(C5.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(j5.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(M5.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(P5.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(cde.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(ude.configure(this.options.taskList)),t}});var dde=Ir.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",zt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),fde=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,hde=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,pde=uc.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",zt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Xu({find:fde,type:this.type})]},addPasteRules(){return[Xl({find:hde,type:this.type})]}}),mde=Ir.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),gde=uc.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",zt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function vde(t={}){return new Pt({view(e){return new yde(e,t)}})}class yde{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),i=o.width/s.offsetWidth,a=o.height/s.offsetHeight;if(n){let f=e.nodeBefore,h=e.nodeAfter;if(f||h){let p=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(p){let m=p.getBoundingClientRect(),v=f?m.bottom:m.top;f&&h&&(v=(v+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let b=this.width/2*a;r={left:m.left,right:m.right,top:v-b,bottom:v+b}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*i;r={left:f.left-h,right:f.left+h,top:f.top,bottom:f.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,d;if(!c||c==document.body&&getComputedStyle(c).position=="static")u=-pageXOffset,d=-pageYOffset;else{let f=c.getBoundingClientRect(),h=f.width/c.offsetWidth,p=f.height/c.offsetHeight;u=f.left-c.scrollLeft*h,d=f.top-c.scrollTop*p}this.element.style.left=(r.left-u)/i+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=zF(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Mt extends ze{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Mt.valid(r)?new Mt(r):ze.near(r)}content(){return fe.empty}eq(e){return e instanceof Mt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mt(e.resolve(n.pos))}getBookmark(){return new pk(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!xde(e)||!bde(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Mt.valid(e))return e;let s=e.pos,o=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){o=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;s+=n;let c=e.doc.resolve(s);if(Mt.valid(c))return c}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!Ce.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let a=e.doc.resolve(s);if(Mt.valid(a))return a}return null}}}Mt.prototype.visible=!1;Mt.findFrom=Mt.findGapCursorFrom;ze.jsonID("gapcursor",Mt);class pk{constructor(e){this.pos=e}map(e){return new pk(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Mt.valid(n)?new Mt(n):ze.near(n)}}function D5(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function xde(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||D5(s.type))return!0;if(s.inlineContent)return!1}}return!0}function bde(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||D5(s.type))return!0;if(s.inlineContent)return!1}}return!0}function wde(){return new Pt({props:{decorations:kde,createSelectionBetween(t,e,n){return e.pos==n.pos&&Mt.valid(n)?new Mt(n):null},handleClick:Cde,handleKeyDown:Sde,handleDOMEvents:{beforeinput:jde}}})}const Sde=R$({ArrowLeft:lm("horiz",-1),ArrowRight:lm("horiz",1),ArrowUp:lm("vert",-1),ArrowDown:lm("vert",1)});function lm(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let i=r.selection,a=e>0?i.$to:i.$from,c=i.empty;if(i instanceof _e){if(!o.endOfTextblock(n)||a.depth==0)return!1;c=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Mt.findGapCursorFrom(a,e,c);return u?(s&&s(r.tr.setSelection(new Mt(u))),!0):!1}}function Cde(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Mt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ce.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Mt(r))),!0)}function jde(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Mt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Z.empty;for(let i=r.length-1;i>=0;i--)s=Z.from(r[i].createAndFill(null,s));let o=t.state.tr.replace(n.pos,n.pos,new fe(s,0,0));return o.setSelection(_e.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function kde(t){if(!(t.selection instanceof Mt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",bt.create(t.doc,[Yn.widget(t.selection.head,e,{key:"gapcursor"})])}var jv=200,sn=function(){};sn.prototype.append=function(e){return e.length?(e=sn.from(e),!this.length&&e||e.length<jv&&this.leafAppend(e)||this.length<jv&&e.leafPrepend(this)||this.appendInner(e)):this};sn.prototype.prepend=function(e){return e.length?sn.from(e).append(this):this};sn.prototype.appendInner=function(e){return new Nde(this,e)};sn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?sn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};sn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};sn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};sn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(e(o,i))},n,r),s};sn.from=function(e){return e instanceof sn?e:e&&e.length?new R5(e):sn.empty};var R5=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,i,a){for(var c=o;c<i;c++)if(s(this.values[c],a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,i,a){for(var c=o-1;c>=i;c--)if(s(this.values[c],a+c)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=jv)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=jv)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(sn);sn.empty=new R5([]);var Nde=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(o,a),i)===!1||o>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)===!1||o<a&&this.left.forEachInvertedInner(r,Math.min(s,a),o,i)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(sn);const Ede=500;class Ss{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=e.tr,a,c,u=[],d=[];return this.items.forEach((f,h)=>{if(!f.step){s||(s=this.remapping(r,h+1),o=s.maps.length),o--,d.push(f);return}if(s){d.push(new Ws(f.map));let p=f.step.map(s.slice(o)),m;p&&i.maybeStep(p).doc&&(m=i.mapping.maps[i.mapping.maps.length-1],u.push(new Ws(m,void 0,void 0,u.length+d.length))),o--,m&&s.appendMap(m,o)}else i.maybeStep(f.step);if(f.selection)return a=s?f.selection.map(s.slice(o)):f.selection,c=new Ss(this.items.slice(0,r).append(d.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:i,selection:a}}addTransform(e,n,r,s){let o=[],i=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),h=new Ws(e.mapping.maps[d],f,n),p;(p=c&&c.merge(h))&&(h=p,d?o.pop():a=a.slice(0,a.length-1)),o.push(h),n&&(i++,n=void 0),s||(c=h)}let u=i-r.depth;return u>Tde&&(a=_de(a,u),i-=u),new Ss(a.append(o),i)}remapping(e,n){let r=new gh;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Ss(this.items.append(e.map(n=>new Ws(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let c=n;this.items.forEach(h=>{let p=o.getMirror(--c);if(p==null)return;i=Math.min(i,p);let m=o.maps[p];if(h.step){let v=e.steps[p].invert(e.docs[p]),b=h.selection&&h.selection.map(o.slice(c+1,p));b&&a++,r.push(new Ws(m,v,b))}else r.push(new Ws(m))},s);let u=[];for(let h=n;h<i;h++)u.push(new Ws(o.maps[h]));let d=this.items.slice(0,s).append(u).append(r),f=new Ss(d,a);return f.emptyItemCount()>Ede&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],o=0;return this.items.forEach((i,a)=>{if(a>=e)s.push(i),i.selection&&o++;else if(i.step){let c=i.step.map(n.slice(r)),u=c&&c.getMap();if(r--,u&&n.appendMap(u,r),c){let d=i.selection&&i.selection.map(n.slice(r));d&&o++;let f=new Ws(u.invert(),c,d),h,p=s.length-1;(h=s.length&&s[p].merge(f))?s[p]=h:s.push(f)}}else i.map&&r--},this.items.length,0),new Ss(sn.from(s.reverse()),o)}}Ss.empty=new Ss(sn.empty,0);function _de(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Ws{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ws(n.getMap().invert(),n,this.selection)}}}class Oi{constructor(e,n,r,s,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const Tde=20;function Mde(t,e,n,r){let s=n.getMeta(Pl),o;if(s)return s.historyState;n.getMeta(Dde)&&(t=new Oi(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(Pl))return i.getMeta(Pl).redo?new Oi(t.done.addTransform(n,void 0,r,Om(e)),t.undone,rM(n.mapping.maps),t.prevTime,t.prevComposition):new Oi(t.done,t.undone.addTransform(n,void 0,r,Om(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),c=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Ade(n,t.prevRanges)),u=i?z0(t.prevRanges,n.mapping):rM(n.mapping.maps);return new Oi(t.done.addTransform(n,c?e.selection.getBookmark():void 0,r,Om(e)),Ss.empty,u,n.time,a??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Oi(t.done.rebased(n,o),t.undone.rebased(n,o),z0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Oi(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),z0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Ade(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(n=!0)}),n}function rM(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,o,i)=>e.push(o,i));return e}function z0(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),o=e.map(t[r+1],-1);s<=o&&n.push(s,o)}return n}function Pde(t,e,n){let r=Om(e),s=Pl.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),c=new Oi(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(i).setMeta(Pl,{redo:n,historyState:c})}let B0=!1,sM=null;function Om(t){let e=t.plugins;if(sM!=e){B0=!1,sM=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){B0=!0;break}}return B0}const Pl=new un("history"),Dde=new un("closeHistory");function Rde(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Pt({key:Pl,state:{init(){return new Oi(Ss.empty,Ss.empty,null,0,-1)},apply(e,n,r){return Mde(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?I5:r=="historyRedo"?L5:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function O5(t,e){return(n,r)=>{let s=Pl.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let o=Pde(s,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const I5=O5(!1,!0),L5=O5(!0,!0);Bt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Pt({key:new un("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const i=o-s,a=0,c=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(a,c);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,c=o-r,u=a-c,d=a;return e.deleteRange(u,d),!(this.storage.characters({node:e.doc})>r)}})]}});var Ode=Bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[vde(this.options)]}});Bt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Pt({key:new un("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,o=[];if(!n||!r)return bt.create(t,[]);let i=0;this.options.mode==="deepest"&&t.descendants((c,u)=>{if(c.isText)return;if(!(s>=u&&s<=u+c.nodeSize-1))return!1;i+=1});let a=0;return t.descendants((c,u)=>{if(c.isText||!(s>=u&&s<=u+c.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&i-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";o.push(Yn.node(u,u+c.nodeSize,{class:this.options.className}))}),bt.create(t,o)}}})]}});var Ide=Bt.create({name:"gapCursor",addProseMirrorPlugins(){return[wde()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=et(xe(t,"allowGapCursor",n)))!=null?e:null}}});Bt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Pt({key:new un("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((i,a)=>{const c=r>=a&&r<=a+i.nodeSize,u=!i.isLeaf&&Vy(i);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=Yn.node(a,a+i.nodeSize,{class:d.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:a,hasAnchor:c}):this.options.placeholder});s.push(f)}return this.options.includeChildren}),bt.create(t,s)}}})]}});Bt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Pt({key:new un("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Q$(n.selection)||t.view.dragging?null:bt.create(n.doc,[Yn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function oM({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Lde=Bt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new un(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Pt({key:e,appendTransaction:(s,o,i)=>{const{doc:a,tr:c,schema:u}=i,d=e.getState(i),f=a.content.size,h=u.nodes[n];if(d)return c.insert(f,h.create())},state:{init:(s,o)=>{const i=o.tr.doc.lastChild;return!oM({node:i,types:r})},apply:(s,o)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return o;const i=s.doc.lastChild;return!oM({node:i,types:r})}}})]}}),Fde=Bt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>I5(t,e),redo:()=>({state:t,dispatch:e})=>L5(t,e)}},addProseMirrorPlugins(){return[Rde(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),$de=Bt.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(fue.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(aue.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(C5.configure(this.options.bulletList)),this.options.code!==!1&&s.push(mue.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(yue.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(xue.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(Ode.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(Ide.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(bue.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(wue.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Fde.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(Sue.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(Eue.configure(this.options.italic)),this.options.listItem!==!1&&s.push(j5.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(M5.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(Xue.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(P5.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(dde.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(pde.configure(this.options.strike)),this.options.text!==!1&&s.push(mde.configure(this.options.text)),this.options.underline!==!1&&s.push(gde.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Lde.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),zde=$de;const xd=({value:t,onChange:e,placeholder:n})=>{const r=nue({extensions:[zde],content:t,onUpdate:({editor:s})=>{e(s.getHTML())},editorProps:{attributes:{class:"rich-text-content focus:outline-none min-h-[100px] p-3 border rounded-md"}}});return J.useEffect(()=>{r&&t!==r.getHTML()&&r.commands.setContent(t||"")},[t,r]),r?l.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"flex gap-1 p-2 border-b bg-muted/30",children:[l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBold().run(),className:r.isActive("bold")?"bg-muted":"",children:l.jsx(bJ,{className:"h-4 w-4"})}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleBulletList().run(),className:r.isActive("bulletList")?"bg-muted":"",children:l.jsx(TJ,{className:"h-4 w-4"})}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>r.chain().focus().toggleOrderedList().run(),className:r.isActive("orderedList")?"bg-muted":"",children:l.jsx(_J,{className:"h-4 w-4"})})]}),l.jsx(Yce,{editor:r})]}):null},Bde=({isOpen:t,onClose:e,onSuccess:n})=>{const{perfil:r}=jt(),{empresas:s}=cn(),{criarTarefa:o}=jo(),{perfisEquipe:i}=On(),[a,c]=g.useState({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),[u,d]=g.useState(!1),[f,h]=g.useState(!1),p=async x=>{if(x.preventDefault(),!a.empresa_id){q.error("Selecione uma empresa");return}if(!a.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!a.status){q.error("Status  obrigatrio");return}if(!a.prioridade){q.error("Prioridade  obrigatria");return}d(!0);try{let y=a.data_inicio,w=a.data_entrega;y&&!y.includes("T")&&(y=`${y}T09:00`),w&&!w.includes("T")&&(w=`${w}T23:59`);const S=await o({titulo:a.titulo.trim().toUpperCase(),descricao:a.descricao.trim()||null,status:a.status,prioridade:a.prioridade,empresa_id:a.empresa_id,data_entrega:w||null,data_inicio:y||null,criado_por:(r==null?void 0:r.id)||""});if(a.responsaveis.length>0&&S){const{supabase:j}=await Oa(async()=>{const{supabase:N}=await Promise.resolve().then(()=>pC);return{supabase:N}},void 0),C=a.responsaveis.map(N=>({tarefa_id:S.id,responsavel_id:N})),{error:k}=await j.from("tarefa_responsaveis").insert(C);k&&(console.error("Erro ao adicionar responsveis:",k),q.error("Tarefa criada, mas houve erro ao adicionar responsveis"))}q.success("Tarefa criada com sucesso!"),c({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),n(),e()}catch(y){console.error("Erro ao criar tarefa:",y),q.error("Erro ao criar tarefa. Verifique os dados e tente novamente.")}finally{d(!1)}},m=()=>{c({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),h(!1),e()},v=x=>{c(y=>({...y,responsaveis:y.responsaveis.includes(x)?y.responsaveis.filter(w=>w!==x):[...y.responsaveis,x]}))},b=()=>i.filter(x=>a.responsaveis.includes(x.id));return l.jsx(rr,{open:t,onOpenChange:m,children:l.jsxs(In,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:"Nova Tarefa"})}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:a.titulo,onChange:x=>c(y=>({...y,titulo:x.target.value.toUpperCase()})),placeholder:"Ttulo da tarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),f?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:i.map(x=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${x.id}`,checked:a.responsaveis.includes(x.id),onCheckedChange:()=>v(x.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:x.url_avatar||"",alt:x.nome_completo}),l.jsx(ln,{className:"text-xs",children:x.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${x.id}`,className:"text-sm cursor-pointer flex-1",children:x.nome_completo})]},x.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>h(!0),children:["+ Selecionar responsveis (",a.responsaveis.length," selecionados)"]}),a.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b().map(x=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:x.url_avatar||"",alt:x.nome_completo}),l.jsx(ln,{className:"text-xs",children:x.nome_completo.charAt(0)})]}),x.nome_completo]},x.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",children:"Empresa *"}),l.jsxs(Oe,{value:a.empresa_id,onValueChange:x=>c(y=>({...y,empresa_id:x})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:s.map(x=>l.jsx(z,{value:x.id,children:x.nome},x.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:a.descricao,onChange:x=>c(y=>({...y,descricao:x})),placeholder:"Detalhes da tarefa"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"status",children:"Status *"}),l.jsxs(Oe,{value:a.status,onValueChange:x=>c(y=>({...y,status:x})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione um Status"})}),l.jsxs(De,{children:[l.jsx(z,{value:"pode_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-500"}),"Poderia Fazer"]})}),l.jsx(z,{value:"deve_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Devemos Fazer"]})}),l.jsx(z,{value:"pronto_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),"Pronto para Fazer"]})}),l.jsx(z,{value:"em_andamento",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Em Progresso"]})}),l.jsx(z,{value:"em_revisao",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Em Reviso"]})}),l.jsx(z,{value:"recorrente",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Recorrente"]})}),l.jsx(z,{value:"concluido",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Concludo"]})}),l.jsx(z,{value:"rejeitado",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Rejeitado"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade *"}),l.jsxs(Oe,{value:a.prioridade,onValueChange:x=>c(y=>({...y,prioridade:x})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data de Incio"}),l.jsx(we,{id:"data_inicio",type:"date",value:a.data_inicio?a.data_inicio.slice(0,10):"",onChange:x=>{const y=x.target.value?`${x.target.value}T09:00`:"";c(w=>({...w,data_inicio:y}))}})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data de Entrega"}),l.jsx(we,{id:"data_entrega",type:"date",value:a.data_entrega?a.data_entrega.slice(0,10):"",onChange:x=>{const y=x.target.value?`${x.target.value}T23:59`:"";c(w=>({...w,data_entrega:y}))}})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:m,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:u,className:"bg-green-500 hover:bg-green-600",children:u?"Salvando...":"Criar Tarefa"})]})]})]})})},Vde=({isOpen:t,onClose:e,task:n,onSuccess:r})=>{var H;const{perfil:s}=jt(),{empresas:o}=cn(),{atualizarTarefa:i}=jo(),{perfisEquipe:a}=On(),{comentarios:c,criarComentario:u,deletarComentario:d}=GL(n==null?void 0:n.id),{responsaveis:f,atualizarResponsaveis:h}=Jh(n==null?void 0:n.id),[p,m]=g.useState({titulo:"",descricao:"",status:"pode_fazer",prioridade:"media",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),[v,b]=g.useState(!1),[x,y]=g.useState(!1),[w,S]=g.useState(null);g.useEffect(()=>{if(n){const O={titulo:n.titulo||"",descricao:n.descricao||"",status:n.status||"pode_fazer",prioridade:n.prioridade||"media",empresa_id:n.empresa_id||"",data_entrega:n.data_entrega?n.data_entrega.slice(0,16):"",data_inicio:n.data_inicio?n.data_inicio.slice(0,16):"",responsaveis:(f==null?void 0:f.map(V=>V.responsavel_id))||[]};m(O),S(O)}},[n,f]);const j=async O=>{if(O.preventDefault(),!p.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(p.status==="concluido"&&!p.data_entrega){q.error("No  possvel marcar como concluda sem uma data de entrega definida");return}if(p.data_inicio&&p.data_entrega){const V=new Date(p.data_inicio),B=new Date(p.data_entrega);if(V>B){q.error("A data de incio no pode ser posterior  data de entrega");return}}b(!0);try{let V=p.data_inicio,B=p.data_entrega;V&&V.length===16&&!V.endsWith("00:00")&&V.slice(11)==="00:00"&&(V=V.slice(0,11)+"09:00"),B&&B.length===16&&!B.endsWith("23:59")&&B.slice(11)==="00:00"&&(B=B.slice(0,11)+"23:59"),await i({id:n.id,titulo:p.titulo.trim().toUpperCase(),descricao:p.descricao.trim()||null,status:p.status,prioridade:p.prioridade,empresa_id:p.empresa_id,data_entrega:B||null,data_inicio:V||null}),await h({tarefaId:n.id,responsaveisIds:p.responsaveis}),q.success("Tarefa atualizada com sucesso!"),r(),e()}catch(V){console.error("Erro ao atualizar tarefa:",V),q.error("Erro ao atualizar tarefa. Verifique os dados e tente novamente.")}finally{b(!1)}},C=()=>{w&&JSON.stringify(p)!==JSON.stringify(w)?window.confirm("Voc tem alteraes no salvas. Deseja sair sem salvar?")&&(y(!1),e()):(y(!1),e())},k=O=>{m(V=>({...V,responsaveis:V.responsaveis.includes(O)?V.responsaveis.filter(B=>B!==O):[...V.responsaveis,O]}))},N=()=>a.filter(O=>p.responsaveis.includes(O.id)),E=async O=>{if(!(!(s!=null&&s.id)||!(n!=null&&n.id)))try{await u({tarefa_id:n.id,autor_id:s.id,comentario:O.text,anexos:O.attachments||[]})}catch(V){console.error("Erro ao adicionar comentrio:",V),q.error("Erro ao adicionar comentrio")}},A=async O=>{try{await d(O)}catch(V){console.error("Erro ao deletar comentrio:",V),q.error("Erro ao deletar comentrio")}},$=c.map(O=>{var V,B;return{id:O.id,text:O.comentario,author:((V=O.autor_perfil)==null?void 0:V.nome_completo)||"Usurio",authorAvatar:((B=O.autor_perfil)==null?void 0:B.url_avatar)||"",date:O.criado_em,attachments:O.anexos||[]}});return n?l.jsx(rr,{open:t,onOpenChange:C,children:l.jsxs(In,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:"Editar Tarefa"})}),l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:p.titulo,onChange:O=>m(V=>({...V,titulo:O.target.value.toUpperCase()})),placeholder:"Digite o ttulo da tarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),x?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:a.map(O=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${O.id}`,checked:p.responsaveis.includes(O.id),onCheckedChange:()=>k(O.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:O.url_avatar||"",alt:O.nome_completo}),l.jsx(ln,{className:"text-xs",children:O.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${O.id}`,className:"text-sm cursor-pointer flex-1",children:O.nome_completo})]},O.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>y(!0),children:["+ Selecionar responsveis (",p.responsaveis.length," selecionados)"]}),p.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:N().map(O=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:O.url_avatar||"",alt:O.nome_completo}),l.jsx(ln,{className:"text-xs",children:O.nome_completo.charAt(0)})]}),O.nome_completo]},O.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",children:"Empresa *"}),l.jsxs(Oe,{value:p.empresa_id,onValueChange:O=>m(V=>({...V,empresa_id:O})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:o.map(O=>l.jsx(z,{value:O.id,children:O.nome},O.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:p.descricao,onChange:O=>m(V=>({...V,descricao:O})),placeholder:"Digite a descrio da tarefa (opcional)"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"status",children:"Status"}),l.jsxs(Oe,{value:p.status,onValueChange:O=>m(V=>({...V,status:O})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"pode_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-500"}),"Poderia Fazer"]})}),l.jsx(z,{value:"deve_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Devemos Fazer"]})}),l.jsx(z,{value:"pronto_fazer",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-500"}),"Pronto para Fazer"]})}),l.jsx(z,{value:"em_andamento",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Em Progresso"]})}),l.jsx(z,{value:"em_revisao",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Em Reviso"]})}),l.jsx(z,{value:"recorrente",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Recorrente"]})}),l.jsx(z,{value:"concluido",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Concludo"]})}),l.jsx(z,{value:"rejeitado",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Rejeitado"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade"}),l.jsxs(Oe,{value:p.prioridade,onValueChange:O=>m(V=>({...V,prioridade:O})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data de Incio"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_inicio",type:"date",value:p.data_inicio?p.data_inicio.slice(0,10):"",onChange:O=>{const V=O.target.value?`${O.target.value}T09:00`:"";m(B=>({...B,data_inicio:V}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>m(O=>({...O,data_inicio:""})),className:"px-3",children:"Limpar"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data de Entrega"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_entrega",type:"date",value:p.data_entrega?p.data_entrega.slice(0,10):"",onChange:O=>{const V=O.target.value?`${O.target.value}T23:59`:"";m(B=>({...B,data_entrega:V}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>m(O=>({...O,data_entrega:""})),className:"px-3",children:"Limpar"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/20 rounded-lg",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{className:"text-sm font-medium text-muted-foreground",children:"Informaes da Tarefa"}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Criado por:"})," ",((H=a.find(O=>O.id===n.criado_por))==null?void 0:H.nome_completo)||"Usurio"]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Criado em:"})," ",n.criado_em?new Date(n.criado_em).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{className:"text-sm font-medium text-muted-foreground",children:"ltima Atualizao"}),l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Atualizado em:"})," ",n.atualizado_em?new Date(n.atualizado_em).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Comentrios"}),l.jsx(QL,{comments:$,onAddComment:E,onDeleteComment:A,currentUser:{id:(s==null?void 0:s.id)||"",name:(s==null?void 0:s.nome_completo)||"",avatar:(s==null?void 0:s.url_avatar)||""}})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:C,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:v,children:v?"Salvando...":"Salvar"})]})]})]})}):null},Ude=({isOpen:t,onClose:e,onSuccess:n,parentTask:r})=>{const{perfil:s}=jt(),{criarTarefa:o}=jo(),{perfisEquipe:i}=On(),[a,c]=g.useState({titulo:"",descricao:"",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),[u,d]=g.useState(!1),[f,h]=g.useState(!1),p=async x=>{if(x.preventDefault(),!a.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!r){q.error("Tarefa pai no encontrada");return}if(a.data_inicio&&a.data_entrega){const y=new Date(a.data_inicio),w=new Date(a.data_entrega);if(y>w){q.error("A data de incio no pode ser posterior  data de entrega");return}}if(a.data_entrega&&!r.data_entrega){q.error("No  possvel definir data de entrega na subtarefa pois a tarefa principal no possui data de entrega definida.");return}if(a.data_entrega&&r.data_entrega){const y=new Date(a.data_entrega),w=new Date(r.data_entrega);if(y>w){q.error("A data de entrega da subtarefa no pode ser posterior  data de entrega da tarefa principal.");return}}d(!0);try{const{supabase:y}=await Oa(async()=>{const{supabase:C}=await Promise.resolve().then(()=>pC);return{supabase:C}},void 0),{data:w}=await y.from("tarefas").select("ordem_subtarefa").eq("tarefa_pai_id",r.id).order("ordem_subtarefa",{ascending:!1}).limit(1),S=w&&w.length>0?(w[0].ordem_subtarefa||0)+1:0,j=await o({titulo:a.titulo.trim().toUpperCase(),descricao:a.descricao.trim()||null,status:"pode_fazer",prioridade:a.prioridade,empresa_id:r.empresa_id,data_entrega:a.data_entrega||null,data_inicio:a.data_inicio||null,criado_por:(s==null?void 0:s.id)||"",tipo:"subtarefa",tarefa_pai_id:r.id,ordem_subtarefa:S});if(a.responsaveis.length>0&&j){const C=a.responsaveis.map(N=>({tarefa_id:j.id,responsavel_id:N})),{error:k}=await y.from("tarefa_responsaveis").insert(C);k&&(console.error("Erro ao adicionar responsveis:",k),q.error("Subtarefa criada, mas houve erro ao adicionar responsveis"))}q.success("Subtarefa criada com sucesso!"),c({titulo:"",descricao:"",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),n(),e()}catch(y){console.error("Erro ao criar subtarefa:",y),q.error("Erro ao criar subtarefa. Tente novamente.")}finally{d(!1)}},m=x=>{c(y=>({...y,responsaveis:y.responsaveis.includes(x)?y.responsaveis.filter(w=>w!==x):[...y.responsaveis,x]}))},v=()=>i.filter(x=>a.responsaveis.includes(x.id)),b=()=>{c({titulo:"",descricao:"",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),h(!1),e()};return l.jsx(rr,{open:t,onOpenChange:b,children:l.jsxs(In,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[l.jsxs(Ln,{children:[l.jsx(Fn,{children:"Nova Subtarefa"}),r&&l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Para a tarefa: ",r.titulo]})]}),l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:a.titulo,onChange:x=>c(y=>({...y,titulo:x.target.value.toUpperCase()})),placeholder:"Ttulo da subtarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),f?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:i.map(x=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${x.id}`,checked:a.responsaveis.includes(x.id),onCheckedChange:()=>m(x.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:x.url_avatar||"",alt:x.nome_completo}),l.jsx(ln,{className:"text-xs",children:x.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${x.id}`,className:"text-sm cursor-pointer flex-1",children:x.nome_completo})]},x.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>h(!0),children:["+ Selecionar responsveis (",a.responsaveis.length," selecionados)"]}),a.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:v().map(x=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:x.url_avatar||"",alt:x.nome_completo}),l.jsx(ln,{className:"text-xs",children:x.nome_completo.charAt(0)})]}),x.nome_completo]},x.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:a.descricao,onChange:x=>c(y=>({...y,descricao:x})),placeholder:"Detalhes da subtarefa"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade"}),l.jsxs(Oe,{value:a.prioridade,onValueChange:x=>c(y=>({...y,prioridade:x})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data de Incio"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_inicio",type:"date",value:a.data_inicio?a.data_inicio.slice(0,10):"",onChange:x=>{const y=x.target.value?`${x.target.value}T09:00`:"";c(w=>({...w,data_inicio:y}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>c(x=>({...x,data_inicio:""})),className:"px-3",children:"Limpar"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data de Entrega"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_entrega",type:"date",value:a.data_entrega?a.data_entrega.slice(0,10):"",onChange:x=>{const y=x.target.value?`${x.target.value}T23:59`:"";c(w=>({...w,data_entrega:y}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>c(x=>({...x,data_entrega:""})),className:"px-3",children:"Limpar"})]}),(r==null?void 0:r.data_entrega)&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Data limite da tarefa principal: ",new Date(r.data_entrega).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:b,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:u,className:"bg-green-500 hover:bg-green-600",children:u?"Salvando...":"Criar Subtarefa"})]})]})]})})},Hde=({isOpen:t,onClose:e,subtask:n,parentTask:r,onSuccess:s,hasUnsavedChanges:o,setHasUnsavedChanges:i})=>{var k;jt(),cn();const{atualizarTarefa:a}=jo(),{perfisEquipe:c}=On(),{responsaveis:u,atualizarResponsaveis:d}=Jh(n==null?void 0:n.id),[f,h]=g.useState({titulo:"",descricao:"",status:"pode_fazer",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),[p,m]=g.useState(!1),[v,b]=g.useState(!1),[x,y]=g.useState(null);g.useEffect(()=>{if(n){const N={titulo:n.titulo||"",descricao:n.descricao||"",status:n.status||"pode_fazer",prioridade:n.prioridade||"media",data_entrega:n.data_entrega?n.data_entrega.slice(0,16):"",data_inicio:n.data_inicio?n.data_inicio.slice(0,16):"",responsaveis:(u==null?void 0:u.map(E=>E.responsavel_id))||[]};h(N),y(N)}},[n,u]),g.useEffect(()=>{if(x&&i){const N=JSON.stringify(f)!==JSON.stringify(x);i(N)}},[f,x,i]);const w=async N=>{if(N.preventDefault(),!f.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(f.data_inicio&&f.data_entrega){const E=new Date(f.data_inicio),A=new Date(f.data_entrega);if(E>A){q.error("A data de incio no pode ser posterior  data de entrega");return}}if(f.data_entrega&&!(r!=null&&r.data_entrega)){q.error("No  possvel definir data de entrega na subtarefa pois a tarefa principal no possui data de entrega definida.");return}if(f.data_entrega&&(r!=null&&r.data_entrega)){const E=new Date(f.data_entrega),A=new Date(r.data_entrega);if(E>A){q.error("A data de entrega da subtarefa no pode ser posterior  data de entrega da tarefa principal.");return}}m(!0);try{await a({id:n.id,titulo:f.titulo.trim().toUpperCase(),descricao:f.descricao.trim()||null,status:f.status,prioridade:f.prioridade,data_entrega:f.data_entrega||null,data_inicio:f.data_inicio||null}),await d({tarefaId:n.id,responsaveisIds:f.responsaveis}),q.success("Subtarefa atualizada com sucesso!"),s(),e()}catch(E){console.error("Erro ao atualizar subtarefa:",E),q.error("Erro ao atualizar subtarefa. Verifique os dados e tente novamente.")}finally{m(!1)}},S=()=>{o?window.confirm("Voc tem alteraes no salvas. Deseja sair sem salvar?")&&(b(!1),e()):(b(!1),e())},j=N=>{h(E=>({...E,responsaveis:E.responsaveis.includes(N)?E.responsaveis.filter(A=>A!==N):[...E.responsaveis,N]}))},C=()=>c.filter(N=>f.responsaveis.includes(N.id));return n?l.jsx(rr,{open:t,onOpenChange:S,children:l.jsxs(In,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[l.jsxs(Ln,{children:[l.jsx(Fn,{children:"Editar Subtarefa"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Tarefa principal: ",r==null?void 0:r.titulo]})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:f.titulo,onChange:N=>h(E=>({...E,titulo:N.target.value.toUpperCase()})),placeholder:"Digite o ttulo da subtarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),v?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:c.map(N=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${N.id}`,checked:f.responsaveis.includes(N.id),onCheckedChange:()=>j(N.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:N.url_avatar||"",alt:N.nome_completo}),l.jsx(ln,{className:"text-xs",children:N.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${N.id}`,className:"text-sm cursor-pointer flex-1",children:N.nome_completo})]},N.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>b(!0),children:["+ Selecionar responsveis (",f.responsaveis.length," selecionados)"]}),f.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:C().map(N=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:N.url_avatar||"",alt:N.nome_completo}),l.jsx(ln,{className:"text-xs",children:N.nome_completo.charAt(0)})]}),N.nome_completo]},N.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:f.descricao,onChange:N=>h(E=>({...E,descricao:N})),placeholder:"Digite a descrio da subtarefa (opcional)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade"}),l.jsxs(Oe,{value:f.prioridade,onValueChange:N=>h(E=>({...E,prioridade:N})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data de Incio"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_inicio",type:"date",value:f.data_inicio?f.data_inicio.slice(0,10):"",onChange:N=>{const E=f.data_inicio?f.data_inicio.slice(11):"00:00",A=N.target.value?`${N.target.value}T${E}`:"";h($=>({...$,data_inicio:A}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>h(N=>({...N,data_inicio:""})),className:"px-3",children:"Limpar"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data de Entrega"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"data_entrega",type:"date",value:f.data_entrega?f.data_entrega.slice(0,10):"",onChange:N=>{const E=f.data_entrega?f.data_entrega.slice(11):"00:00",A=N.target.value?`${N.target.value}T${E}`:"";h($=>({...$,data_entrega:A}))},className:"flex-1"}),l.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:()=>h(N=>({...N,data_entrega:""})),className:"px-3",children:"Limpar"})]}),(r==null?void 0:r.data_entrega)&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Data limite da tarefa principal: ",new Date(r.data_entrega).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/20 rounded-lg",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{className:"text-sm font-medium text-muted-foreground",children:"Informaes da Subtarefa"}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Criado por:"})," ",((k=c.find(N=>N.id===n.criado_por))==null?void 0:k.nome_completo)||"Usurio"]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Criado em:"})," ",n.criado_em?new Date(n.criado_em).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{className:"text-sm font-medium text-muted-foreground",children:"ltima Atualizao"}),l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.jsx("strong",{children:"Atualizado em:"})," ",n.atualizado_em?new Date(n.atualizado_em).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"]})})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:S,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:p,children:p?"Salvando...":"Salvar"})]})]})]})}):null},Wde=({isOpen:t,onClose:e,onSuccess:n,task:r})=>{const{perfil:s}=jt(),{empresas:o}=cn(),{criarTarefa:i}=jo(),{perfisEquipe:a}=On(),[c,u]=g.useState({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),[d,f]=g.useState(!1),[h,p]=g.useState(!1);g.useEffect(()=>{r&&t&&u({titulo:r.titulo||"",descricao:r.descricao||"",status:r.status||"",prioridade:r.prioridade||"",empresa_id:"",data_entrega:r.data_entrega?r.data_entrega.slice(0,16):"",data_inicio:r.data_inicio?r.data_inicio.slice(0,16):"",responsaveis:[]})},[r,t]);const m=async y=>{if(y.preventDefault(),!c.empresa_id){q.error("Selecione uma empresa");return}if(!c.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!c.status){q.error("Status  obrigatrio");return}if(!c.prioridade){q.error("Prioridade  obrigatria");return}f(!0);try{let w=c.data_inicio,S=c.data_entrega;w&&!w.includes("T")&&(w=`${w}T09:00`),S&&!S.includes("T")&&(S=`${S}T23:59`);const j=await i({titulo:c.titulo.trim().toUpperCase(),descricao:c.descricao.trim()||null,status:c.status,prioridade:c.prioridade,empresa_id:c.empresa_id,data_entrega:S||null,data_inicio:w||null,criado_por:(s==null?void 0:s.id)||""});if(c.responsaveis.length>0&&j){const{supabase:C}=await Oa(async()=>{const{supabase:E}=await Promise.resolve().then(()=>pC);return{supabase:E}},void 0),k=c.responsaveis.map(E=>({tarefa_id:j.id,responsavel_id:E})),{error:N}=await C.from("tarefa_responsaveis").insert(k);N&&(console.error("Erro ao adicionar responsveis:",N),q.error("Tarefa duplicada, mas houve erro ao adicionar responsveis"))}q.success("Tarefa duplicada com sucesso!"),u({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),n(),e()}catch(w){console.error("Erro ao duplicar tarefa:",w),q.error("Erro ao duplicar tarefa. Verifique os dados e tente novamente.")}finally{f(!1)}},v=()=>{u({titulo:"",descricao:"",status:"",prioridade:"",empresa_id:"",data_entrega:"",data_inicio:"",responsaveis:[]}),p(!1),e()},b=y=>{u(w=>({...w,responsaveis:w.responsaveis.includes(y)?w.responsaveis.filter(S=>S!==y):[...w.responsaveis,y]}))},x=()=>a.filter(y=>c.responsaveis.includes(y.id));return r?l.jsx(rr,{open:t,onOpenChange:v,children:l.jsxs(In,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[l.jsxs(Ln,{children:[l.jsx(Fn,{children:"Duplicar Tarefa"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecione a empresa de destino para duplicar esta tarefa"})]}),l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2 bg-muted/30 p-4 rounded-lg",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Empresa de Destino *"}),l.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Selecione a empresa para onde deseja duplicar a tarefa"}),l.jsxs(Oe,{value:c.empresa_id,onValueChange:y=>u(w=>({...w,empresa_id:y})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:o.map(y=>l.jsx(z,{value:y.id,children:y.nome},y.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:c.titulo,onChange:y=>u(w=>({...w,titulo:y.target.value.toUpperCase()})),placeholder:"Ttulo da tarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),h?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>p(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:a.map(y=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${y.id}`,checked:c.responsaveis.includes(y.id),onCheckedChange:()=>b(y.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:y.url_avatar||"",alt:y.nome_completo}),l.jsx(ln,{className:"text-xs",children:y.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${y.id}`,className:"text-sm cursor-pointer flex-1",children:y.nome_completo})]},y.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>p(!0),children:["+ Selecionar responsveis (",c.responsaveis.length," selecionados)"]}),c.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:x().map(y=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:y.url_avatar||"",alt:y.nome_completo}),l.jsx(ln,{className:"text-xs",children:y.nome_completo.charAt(0)})]}),y.nome_completo]},y.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:c.descricao,onChange:y=>u(w=>({...w,descricao:y})),placeholder:"Detalhes da tarefa"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"status",children:"Status *"}),l.jsxs(Oe,{value:c.status,onValueChange:y=>u(w=>({...w,status:y})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione um Status"})}),l.jsxs(De,{children:[l.jsx(z,{value:"pode_fazer",children:"Poderia Fazer"}),l.jsx(z,{value:"deve_fazer",children:"Devemos Fazer"}),l.jsx(z,{value:"pronto_fazer",children:"Pronto para Fazer"}),l.jsx(z,{value:"em_andamento",children:"Em Progresso"}),l.jsx(z,{value:"em_revisao",children:"Em Reviso"}),l.jsx(z,{value:"recorrente",children:"Recorrente"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade *"}),l.jsxs(Oe,{value:c.prioridade,onValueChange:y=>u(w=>({...w,prioridade:y})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:"Baixa"}),l.jsx(z,{value:"media",children:"Mdia"}),l.jsx(z,{value:"alta",children:"Alta"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data e Hora de Incio"}),l.jsx(we,{id:"data_inicio",type:"datetime-local",value:c.data_inicio,onChange:y=>{let w=y.target.value;w&&w.length===16&&w.endsWith("00:00")&&(w=w.slice(0,11)+"09:00"),u(S=>({...S,data_inicio:w}))},step:"1800"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data e Hora de Entrega"}),l.jsx(we,{id:"data_entrega",type:"datetime-local",value:c.data_entrega,onChange:y=>{let w=y.target.value;w&&w.length===16&&w.endsWith("00:00")&&(w=w.slice(0,11)+"23:59"),u(S=>({...S,data_entrega:w}))},step:"1800"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:v,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:d,className:"bg-blue-500 hover:bg-blue-600",children:d?"Duplicando...":"Duplicar Tarefa"})]})]})]})}):null},qde=({isOpen:t,onClose:e,subtask:n,parentTask:r,onSuccess:s})=>{const{perfil:o}=jt(),{criarTarefa:i}=jo(),{perfisEquipe:a}=On(),{responsaveis:c}=Jh(n==null?void 0:n.id),[u,d]=g.useState({titulo:"",descricao:"",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),[f,h]=g.useState(!1),[p,m]=g.useState(!1);g.useEffect(()=>{n&&t&&d({titulo:n.titulo||"",descricao:n.descricao||"",prioridade:n.prioridade||"media",data_entrega:n.data_entrega?n.data_entrega.slice(0,16):"",data_inicio:n.data_inicio?n.data_inicio.slice(0,16):"",responsaveis:(c==null?void 0:c.map(w=>w.responsavel_id))||[]})},[n,c,t]);const v=async w=>{if(w.preventDefault(),!u.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!r){q.error("Tarefa pai no encontrada");return}if(u.data_inicio&&u.data_entrega){const S=new Date(u.data_inicio),j=new Date(u.data_entrega);if(S>j){q.error("A data de incio no pode ser posterior  data de entrega");return}}if(u.data_entrega&&r.data_entrega){const S=new Date(u.data_entrega),j=new Date(r.data_entrega);if(S>j){q.error("A data de entrega da subtarefa no pode ser posterior  data de entrega da tarefa principal");return}}h(!0);try{const{data:S}=await re.from("tarefas").select("ordem_subtarefa").eq("tarefa_pai_id",r.id).eq("tipo","subtarefa").order("ordem_subtarefa",{ascending:!1}).limit(1),j=S&&S.length>0?(S[0].ordem_subtarefa||0)+1:1,C=await i({titulo:u.titulo,descricao:u.descricao,prioridade:u.prioridade,status:"pode_fazer",empresa_id:r.empresa_id,data_entrega:u.data_entrega||null,data_inicio:u.data_inicio||null,criado_por:o==null?void 0:o.id,tipo:"subtarefa",tarefa_pai_id:r.id,ordem_subtarefa:j});if(C&&u.responsaveis.length>0){const k=u.responsaveis.map(E=>({tarefa_id:C.id,responsavel_id:E})),{error:N}=await re.from("tarefa_responsaveis").insert(k);N&&(console.error("Erro ao adicionar responsveis:",N),q.error("Subtarefa duplicada, mas houve erro ao adicionar responsveis"))}q.success("Subtarefa duplicada com sucesso!"),b(),s()}catch(S){console.error("Erro ao duplicar subtarefa:",S),q.error("Erro ao duplicar subtarefa")}finally{h(!1)}},b=()=>{d({titulo:"",descricao:"",prioridade:"media",data_entrega:"",data_inicio:"",responsaveis:[]}),m(!1),e()},x=w=>{d(S=>({...S,responsaveis:S.responsaveis.includes(w)?S.responsaveis.filter(j=>j!==w):[...S.responsaveis,w]}))},y=()=>a.filter(w=>u.responsaveis.includes(w.id));return!n||!r?null:l.jsx(rr,{open:t,onOpenChange:b,children:l.jsxs(In,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs(Ln,{children:[l.jsx(Fn,{children:"Duplicar Subtarefa"}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Para a tarefa: ",r.titulo]})]}),l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:u.titulo,onChange:w=>d(S=>({...S,titulo:w.target.value.toUpperCase()})),placeholder:"Ttulo da subtarefa",className:"uppercase",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{children:"Responsveis"}),p?l.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Q,{className:"text-sm font-medium",children:"Selecionar Responsveis"}),l.jsx(G,{type:"button",variant:"ghost",size:"sm",onClick:()=>m(!1),children:"Fechar"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:a.map(w=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Nr,{id:`responsavel-${w.id}`,checked:u.responsaveis.includes(w.id),onCheckedChange:()=>x(w.id)}),l.jsxs(on,{className:"h-6 w-6",children:[l.jsx(an,{src:w.url_avatar||"",alt:w.nome_completo}),l.jsx(ln,{className:"text-xs",children:w.nome_completo.charAt(0)})]}),l.jsx(Q,{htmlFor:`responsavel-${w.id}`,className:"text-sm cursor-pointer flex-1",children:w.nome_completo})]},w.id))})]}):l.jsxs(G,{type:"button",variant:"outline",className:"w-full justify-start text-muted-foreground",onClick:()=>m(!0),children:["+ Selecionar responsveis (",u.responsaveis.length," selecionados)"]}),u.responsaveis.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:y().map(w=>l.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm",children:[l.jsxs(on,{className:"h-4 w-4",children:[l.jsx(an,{src:w.url_avatar||"",alt:w.nome_completo}),l.jsx(ln,{className:"text-xs",children:w.nome_completo.charAt(0)})]}),w.nome_completo]},w.id))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(xd,{value:u.descricao,onChange:w=>d(S=>({...S,descricao:w})),placeholder:"Detalhes da subtarefa"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",children:"Prioridade"}),l.jsxs(Oe,{value:u.prioridade,onValueChange:w=>d(S=>({...S,prioridade:w})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_inicio",children:"Data de Incio"}),l.jsx(we,{id:"data_inicio",type:"date",value:u.data_inicio?u.data_inicio.slice(0,10):"",onChange:w=>{const S=w.target.value?`${w.target.value}T09:00`:"";d(j=>({...j,data_inicio:S}))}})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",children:"Data de Entrega"}),l.jsx(we,{id:"data_entrega",type:"date",value:u.data_entrega?u.data_entrega.slice(0,10):"",onChange:w=>{const S=w.target.value?`${w.target.value}T23:59`:"";d(j=>({...j,data_entrega:S}))}}),(r==null?void 0:r.data_entrega)&&l.jsxs("p",{className:"text-xs text-muted-foreground",children:["Data limite da tarefa principal: ",new Date(r.data_entrega).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:b,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:f,className:"bg-green-500 hover:bg-green-600",children:f?"Duplicando...":"Duplicar Subtarefa"})]})]})]})})};function Kde(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Ky=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bd(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function mk(t){return"nodeType"in t}function br(t){var e,n;return t?bd(t)?t:mk(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function gk(t){const{Document:e}=br(t);return t instanceof e}function cp(t){return bd(t)?!1:t instanceof br(t).HTMLElement}function F5(t){return t instanceof br(t).SVGElement}function wd(t){return t?bd(t)?t.document:mk(t)?gk(t)?t:cp(t)||F5(t)?t.ownerDocument:document:document:document}const So=Ky?g.useLayoutEffect:g.useEffect;function vk(t){const e=g.useRef(t);return So(()=>{e.current=t}),g.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Gde(){const t=g.useRef(null),e=g.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=g.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function kh(t,e){e===void 0&&(e=[t]);const n=g.useRef(t);return So(()=>{n.current!==t&&(n.current=t)},e),n}function up(t,e){const n=g.useRef();return g.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function kv(t){const e=vk(t),n=g.useRef(null),r=g.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function B1(t){const e=g.useRef();return g.useEffect(()=>{e.current=t},[t]),e.current}let V0={};function dp(t,e){return g.useMemo(()=>{if(e)return e;const n=V0[t]==null?0:V0[t]+1;return V0[t]=n,t+"-"+n},[t,e])}function $5(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((o,i)=>{const a=Object.entries(i);for(const[c,u]of a){const d=o[c];d!=null&&(o[c]=d+t*u)}return o},{...e})}}const yu=$5(1),Nh=$5(-1);function Yde(t){return"clientX"in t&&"clientY"in t}function yk(t){if(!t)return!1;const{KeyboardEvent:e}=br(t.target);return e&&t instanceof e}function Qde(t){if(!t)return!1;const{TouchEvent:e}=br(t.target);return e&&t instanceof e}function V1(t){if(Qde(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Yde(t)?{x:t.clientX,y:t.clientY}:null}const Eh=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Eh.Translate.toString(t),Eh.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),iM="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Jde(t){return t.matches(iM)?t:t.querySelector(iM)}const Xde={display:"none"};function Zde(t){let{id:e,value:n}=t;return J.createElement("div",{id:e,style:Xde},n)}function efe(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return J.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function tfe(){const[t,e]=g.useState("");return{announce:g.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const z5=g.createContext(null);function nfe(t){const e=g.useContext(z5);g.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function rfe(){const[t]=g.useState(()=>new Set),e=g.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[g.useCallback(r=>{let{type:s,event:o}=r;t.forEach(i=>{var a;return(a=i[s])==null?void 0:a.call(i,o)})},[t]),e]}const sfe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ofe={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ife(t){let{announcements:e=ofe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=sfe}=t;const{announce:o,announcement:i}=tfe(),a=dp("DndLiveRegion"),[c,u]=g.useState(!1);if(g.useEffect(()=>{u(!0)},[]),nfe(g.useMemo(()=>({onDragStart(f){let{active:h}=f;o(e.onDragStart({active:h}))},onDragMove(f){let{active:h,over:p}=f;e.onDragMove&&o(e.onDragMove({active:h,over:p}))},onDragOver(f){let{active:h,over:p}=f;o(e.onDragOver({active:h,over:p}))},onDragEnd(f){let{active:h,over:p}=f;o(e.onDragEnd({active:h,over:p}))},onDragCancel(f){let{active:h,over:p}=f;o(e.onDragCancel({active:h,over:p}))}}),[o,e])),!c)return null;const d=J.createElement(J.Fragment,null,J.createElement(Zde,{id:r,value:s.draggable}),J.createElement(efe,{id:a,announcement:i}));return n?Cs.createPortal(d,n):d}var Wt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Wt||(Wt={}));function Nv(){}function aM(t,e){return g.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function afe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return g.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Ds=Object.freeze({x:0,y:0});function B5(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function V5(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function lfe(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function lM(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function U5(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function cM(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const cfe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=cM(e,e.left,e.top),o=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=B5(cM(c),s);o.push({id:a,data:{droppableContainer:i,value:u}})}}return o.sort(V5)},ufe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=lM(e),o=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=lM(c),d=s.reduce((h,p,m)=>h+B5(u[m],p),0),f=Number((d/4).toFixed(4));o.push({id:a,data:{droppableContainer:i,value:f}})}}return o.sort(V5)};function dfe(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),i=s-r,a=o-n;if(r<s&&n<o){const c=e.width*e.height,u=t.width*t.height,d=i*a,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const ffe=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const o of r){const{id:i}=o,a=n.get(i);if(a){const c=dfe(a,e);c>0&&s.push({id:i,data:{droppableContainer:o,value:c}})}}return s.sort(lfe)};function hfe(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function H5(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Ds}function pfe(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return s.reduce((i,a)=>({...i,top:i.top+t*a.y,bottom:i.bottom+t*a.y,left:i.left+t*a.x,right:i.right+t*a.x}),{...n})}}const mfe=pfe(1);function gfe(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vfe(t,e,n){const r=gfe(e);if(!r)return t;const{scaleX:s,scaleY:o,x:i,y:a}=r,c=t.left-i-(1-s)*parseFloat(n),u=t.top-a-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),d=s?t.width/s:t.width,f=o?t.height/o:t.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const yfe={ignoreTransform:!1};function Sd(t,e){e===void 0&&(e=yfe);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:d}=br(t).getComputedStyle(t);u&&(n=vfe(n,u,d))}const{top:r,left:s,width:o,height:i,bottom:a,right:c}=n;return{top:r,left:s,width:o,height:i,bottom:a,right:c}}function uM(t){return Sd(t,{ignoreTransform:!0})}function xfe(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function bfe(t,e){return e===void 0&&(e=br(t).getComputedStyle(t)),e.position==="fixed"}function wfe(t,e){e===void 0&&(e=br(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=e[s];return typeof o=="string"?n.test(o):!1})}function Gy(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(gk(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!cp(s)||F5(s)||n.includes(s))return n;const o=br(t).getComputedStyle(s);return s!==t&&wfe(s,o)&&n.push(s),bfe(s,o)?n:r(s.parentNode)}return t?r(t):n}function W5(t){const[e]=Gy(t,1);return e??null}function U0(t){return!Ky||!t?null:bd(t)?t:mk(t)?gk(t)||t===wd(t).scrollingElement?window:cp(t)?t:null:null}function q5(t){return bd(t)?t.scrollX:t.scrollLeft}function K5(t){return bd(t)?t.scrollY:t.scrollTop}function U1(t){return{x:q5(t),y:K5(t)}}var Zt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Zt||(Zt={}));function G5(t){return!Ky||!t?!1:t===document.scrollingElement}function Y5(t){const e={x:0,y:0},n=G5(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,i=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:o,isBottom:i,isRight:a,maxScroll:r,minScroll:e}}const Sfe={x:.2,y:.2};function Cfe(t,e,n,r,s){let{top:o,left:i,right:a,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=Sfe);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=Y5(t),p={x:0,y:0},m={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&o<=e.top+v.height?(p.y=Zt.Backward,m.y=r*Math.abs((e.top+v.height-o)/v.height)):!d&&c>=e.bottom-v.height&&(p.y=Zt.Forward,m.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!h&&a>=e.right-v.width?(p.x=Zt.Forward,m.x=r*Math.abs((e.right-v.width-a)/v.width)):!f&&i<=e.left+v.width&&(p.x=Zt.Backward,m.x=r*Math.abs((e.left+v.width-i)/v.width)),{direction:p,speed:m}}function jfe(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:i}=window;return{top:0,left:0,right:o,bottom:i,width:o,height:i}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Q5(t){return t.reduce((e,n)=>yu(e,U1(n)),Ds)}function kfe(t){return t.reduce((e,n)=>e+q5(n),0)}function Nfe(t){return t.reduce((e,n)=>e+K5(n),0)}function Efe(t,e){if(e===void 0&&(e=Sd),!t)return;const{top:n,left:r,bottom:s,right:o}=e(t);W5(t)&&(s<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const _fe=[["x",["left","right"],kfe],["y",["top","bottom"],Nfe]];class xk{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Gy(n),s=Q5(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,i,a]of _fe)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=a(r),d=s[o]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _f{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Tfe(t){const{EventTarget:e}=br(t);return t instanceof e?t:wd(t)}function H0(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Kr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Kr||(Kr={}));function dM(t){t.preventDefault()}function Mfe(t){t.stopPropagation()}var Ke;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ke||(Ke={}));const J5={start:[Ke.Space,Ke.Enter],cancel:[Ke.Esc],end:[Ke.Space,Ke.Enter,Ke.Tab]},Afe=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ke.Right:return{...n,x:n.x+25};case Ke.Left:return{...n,x:n.x-25};case Ke.Down:return{...n,y:n.y+25};case Ke.Up:return{...n,y:n.y-25}}};class bk{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new _f(wd(n)),this.windowListeners=new _f(br(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kr.Resize,this.handleCancel),this.windowListeners.add(Kr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Efe(r),n(Ds)}handleKeyDown(e){if(yk(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:o=J5,coordinateGetter:i=Afe,scrollBehavior:a="smooth"}=s,{code:c}=e;if(o.end.includes(c)){this.handleEnd(e);return}if(o.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Ds;this.referenceCoordinates||(this.referenceCoordinates=d);const f=i(e,{active:n,context:r.current,currentCoordinates:d});if(f){const h=Nh(f,d),p={x:0,y:0},{scrollableAncestors:m}=r.current;for(const v of m){const b=e.code,{isTop:x,isRight:y,isLeft:w,isBottom:S,maxScroll:j,minScroll:C}=Y5(v),k=jfe(v),N={x:Math.min(b===Ke.Right?k.right-k.width/2:k.right,Math.max(b===Ke.Right?k.left:k.left+k.width/2,f.x)),y:Math.min(b===Ke.Down?k.bottom-k.height/2:k.bottom,Math.max(b===Ke.Down?k.top:k.top+k.height/2,f.y))},E=b===Ke.Right&&!y||b===Ke.Left&&!w,A=b===Ke.Down&&!S||b===Ke.Up&&!x;if(E&&N.x!==f.x){const $=v.scrollLeft+h.x,H=b===Ke.Right&&$<=j.x||b===Ke.Left&&$>=C.x;if(H&&!h.y){v.scrollTo({left:$,behavior:a});return}H?p.x=v.scrollLeft-$:p.x=b===Ke.Right?v.scrollLeft-j.x:v.scrollLeft-C.x,p.x&&v.scrollBy({left:-p.x,behavior:a});break}else if(A&&N.y!==f.y){const $=v.scrollTop+h.y,H=b===Ke.Down&&$<=j.y||b===Ke.Up&&$>=C.y;if(H&&!h.x){v.scrollTo({top:$,behavior:a});return}H?p.y=v.scrollTop-$:p.y=b===Ke.Down?v.scrollTop-j.y:v.scrollTop-C.y,p.y&&v.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,yu(Nh(f,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}bk.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=J5,onActivation:s}=e,{active:o}=n;const{code:i}=t.nativeEvent;if(r.start.includes(i)){const a=o.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function fM(t){return!!(t&&"distance"in t)}function hM(t){return!!(t&&"delay"in t)}class wk{constructor(e,n,r){var s;r===void 0&&(r=Tfe(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:i}=o;this.props=e,this.events=n,this.document=wd(i),this.documentListeners=new _f(this.document),this.listeners=new _f(r),this.windowListeners=new _f(br(i)),this.initialCoordinates=(s=V1(o))!=null?s:Ds,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Kr.Resize,this.handleCancel),this.windowListeners.add(Kr.DragStart,dM),this.windowListeners.add(Kr.VisibilityChange,this.handleCancel),this.windowListeners.add(Kr.ContextMenu,dM),this.documentListeners.add(Kr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hM(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(fM(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Kr.Click,Mfe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!s)return;const c=(n=V1(e))!=null?n:Ds,u=Nh(s,c);if(!r&&a){if(fM(a)){if(a.tolerance!=null&&H0(u,a.tolerance))return this.handleCancel();if(H0(u,a.distance))return this.handleStart()}if(hM(a)&&H0(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),i(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ke.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Pfe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sk extends wk{constructor(e){const{event:n}=e,r=wd(n.target);super(e,Pfe,r)}}Sk.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Dfe={move:{name:"mousemove"},end:{name:"mouseup"}};var H1;(function(t){t[t.RightClick=2]="RightClick"})(H1||(H1={}));class Rfe extends wk{constructor(e){super(e,Dfe,wd(e.event.target))}}Rfe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===H1.RightClick?!1:(r==null||r({event:n}),!0)}}];const W0={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ofe extends wk{constructor(e){super(e,W0)}static setup(){return window.addEventListener(W0.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(W0.move.name,e)};function e(){}}}Ofe.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Tf;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Tf||(Tf={}));var Ev;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ev||(Ev={}));function Ife(t){let{acceleration:e,activator:n=Tf.Pointer,canScroll:r,draggingRect:s,enabled:o,interval:i=5,order:a=Ev.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=t;const p=Ffe({delta:f,disabled:!o}),[m,v]=Gde(),b=g.useRef({x:0,y:0}),x=g.useRef({x:0,y:0}),y=g.useMemo(()=>{switch(n){case Tf.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Tf.DraggableRect:return s}},[n,s,c]),w=g.useRef(null),S=g.useCallback(()=>{const C=w.current;if(!C)return;const k=b.current.x*x.current.x,N=b.current.y*x.current.y;C.scrollBy(k,N)},[]),j=g.useMemo(()=>a===Ev.TreeOrder?[...u].reverse():u,[a,u]);g.useEffect(()=>{if(!o||!u.length||!y){v();return}for(const C of j){if((r==null?void 0:r(C))===!1)continue;const k=u.indexOf(C),N=d[k];if(!N)continue;const{direction:E,speed:A}=Cfe(C,N,y,e,h);for(const $ of["x","y"])p[$][E[$]]||(A[$]=0,E[$]=0);if(A.x>0||A.y>0){v(),w.current=C,m(S,i),b.current=A,x.current=E;return}}b.current={x:0,y:0},x.current={x:0,y:0},v()},[e,S,r,v,o,i,JSON.stringify(y),JSON.stringify(p),m,u,j,d,JSON.stringify(h)])}const Lfe={x:{[Zt.Backward]:!1,[Zt.Forward]:!1},y:{[Zt.Backward]:!1,[Zt.Forward]:!1}};function Ffe(t){let{delta:e,disabled:n}=t;const r=B1(e);return up(s=>{if(n||!r||!s)return Lfe;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Zt.Backward]:s.x[Zt.Backward]||o.x===-1,[Zt.Forward]:s.x[Zt.Forward]||o.x===1},y:{[Zt.Backward]:s.y[Zt.Backward]||o.y===-1,[Zt.Forward]:s.y[Zt.Forward]||o.y===1}}},[n,e,r])}function $fe(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return up(s=>{var o;return e==null?null:(o=r??s)!=null?o:null},[r,e])}function zfe(t,e){return g.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,o=s.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,r)}));return[...n,...o]},[]),[t,e])}var _h;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(_h||(_h={}));var W1;(function(t){t.Optimized="optimized"})(W1||(W1={}));const pM=new Map;function Bfe(t,e){let{dragging:n,dependencies:r,config:s}=e;const[o,i]=g.useState(null),{frequency:a,measure:c,strategy:u}=s,d=g.useRef(t),f=b(),h=kh(f),p=g.useCallback(function(x){x===void 0&&(x=[]),!h.current&&i(y=>y===null?x:y.concat(x.filter(w=>!y.includes(w))))},[h]),m=g.useRef(null),v=up(x=>{if(f&&!n)return pM;if(!x||x===pM||d.current!==t||o!=null){const y=new Map;for(let w of t){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){y.set(w.id,w.rect.current);continue}const S=w.node.current,j=S?new xk(c(S),S):null;w.rect.current=j,j&&y.set(w.id,j)}return y}return x},[t,o,n,f,c]);return g.useEffect(()=>{d.current=t},[t]),g.useEffect(()=>{f||p()},[n,f]),g.useEffect(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),g.useEffect(()=>{f||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},a))},[a,f,p,...r]),{droppableRects:v,measureDroppableContainers:p,measuringScheduled:o!=null};function b(){switch(u){case _h.Always:return!1;case _h.BeforeDragging:return n;default:return!n}}}function X5(t,e){return up(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Vfe(t,e){return X5(t,e)}function Ufe(t){let{callback:e,disabled:n}=t;const r=vk(e),s=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Yy(t){let{callback:e,disabled:n}=t;const r=vk(e),s=g.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hfe(t){return new xk(Sd(t),t)}function mM(t,e,n){e===void 0&&(e=Hfe);const[r,s]=g.useState(null);function o(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=e(t);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const i=Ufe({callback(c){if(t)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(t)){o();break}}}}),a=Yy({callback:o});return So(()=>{o(),t?(a==null||a.observe(t),i==null||i.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),i==null||i.disconnect())},[t]),r}function Wfe(t){const e=X5(t);return H5(t,e)}const gM=[];function qfe(t){const e=g.useRef(t),n=up(r=>t?r&&r!==gM&&t&&e.current&&t.parentNode===e.current.parentNode?r:Gy(t):gM,[t]);return g.useEffect(()=>{e.current=t},[t]),n}function Kfe(t){const[e,n]=g.useState(null),r=g.useRef(t),s=g.useCallback(o=>{const i=U0(o.target);i&&n(a=>a?(a.set(i,U1(i)),new Map(a)):null)},[]);return g.useEffect(()=>{const o=r.current;if(t!==o){i(o);const a=t.map(c=>{const u=U0(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,U1(u)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=t}return()=>{i(t),i(o)};function i(a){a.forEach(c=>{const u=U0(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),g.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,i)=>yu(o,i),Ds):Q5(t):Ds,[t,e])}function vM(t,e){e===void 0&&(e=[]);const n=g.useRef(null);return g.useEffect(()=>{n.current=null},e),g.useEffect(()=>{const r=t!==Ds;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Nh(t,n.current):Ds}function Gfe(t){g.useEffect(()=>{if(!Ky)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Yfe(t,e){return g.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:o}=r;return n[s]=i=>{o(i,e)},n},{}),[t,e])}function Z5(t){return g.useMemo(()=>t?xfe(t):null,[t])}const yM=[];function Qfe(t,e){e===void 0&&(e=Sd);const[n]=t,r=Z5(n?br(n):null),[s,o]=g.useState(yM);function i(){o(()=>t.length?t.map(c=>G5(c)?r:new xk(e(c),c)):yM)}const a=Yy({callback:i});return So(()=>{a==null||a.disconnect(),i(),t.forEach(c=>a==null?void 0:a.observe(c))},[t]),s}function Jfe(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return cp(e)?e:t}function Xfe(t){let{measure:e}=t;const[n,r]=g.useState(null),s=g.useCallback(u=>{for(const{target:d}of u)if(cp(d)){r(f=>{const h=e(d);return f?{...f,width:h.width,height:h.height}:h});break}},[e]),o=Yy({callback:s}),i=g.useCallback(u=>{const d=Jfe(u);o==null||o.disconnect(),d&&(o==null||o.observe(d)),r(d?e(d):null)},[e,o]),[a,c]=kv(i);return g.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const Zfe=[{sensor:Sk,options:{}},{sensor:bk,options:{}}],ehe={current:{}},Im={draggable:{measure:uM},droppable:{measure:uM,strategy:_h.WhileDragging,frequency:W1.Optimized},dragOverlay:{measure:Sd}};class Mf extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const the={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Mf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Nv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Im,measureDroppableContainers:Nv,windowRect:null,measuringScheduled:!1},nhe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Nv,draggableNodes:new Map,over:null,measureDroppableContainers:Nv},Qy=g.createContext(nhe),ez=g.createContext(the);function rhe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Mf}}}function she(t,e){switch(e.type){case Wt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Wt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Wt.DragEnd:case Wt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Mf(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Wt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const i=new Mf(t.droppable.containers);return i.set(n,{...o,disabled:s}),{...t,droppable:{...t.droppable,containers:i}}}case Wt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Mf(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function ohe(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=g.useContext(Qy),o=B1(r),i=B1(n==null?void 0:n.id);return g.useEffect(()=>{if(!e&&!r&&o&&i!=null){if(!yk(o)||document.activeElement===o.target)return;const a=s.get(i);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=Jde(d);if(f){f.focus();break}}})}},[r,e,s,i,o]),null}function ihe(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,o)=>o({transform:s,...r}),n):n}function ahe(t){return g.useMemo(()=>({draggable:{...Im.draggable,...t==null?void 0:t.draggable},droppable:{...Im.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Im.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function lhe(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const o=g.useRef(!1),{x:i,y:a}=typeof s=="boolean"?{x:s,y:s}:s;So(()=>{if(!i&&!a||!e){o.current=!1;return}if(o.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=H5(d,r);if(i||(f.x=0),a||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=W5(u);h&&h.scrollBy({top:f.y,left:f.x})}},[e,i,a,r,n])}const tz=g.createContext({...Ds,scaleX:1,scaleY:1});var Ii;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ii||(Ii={}));const che=g.memo(function(e){var n,r,s,o;let{id:i,accessibility:a,autoScroll:c=!0,children:u,sensors:d=Zfe,collisionDetection:f=ffe,measuring:h,modifiers:p,...m}=e;const v=g.useReducer(she,void 0,rhe),[b,x]=v,[y,w]=rfe(),[S,j]=g.useState(Ii.Uninitialized),C=S===Ii.Initialized,{draggable:{active:k,nodes:N,translate:E},droppable:{containers:A}}=b,$=k!=null?N.get(k):null,H=g.useRef({initial:null,translated:null}),O=g.useMemo(()=>{var ce;return k!=null?{id:k,data:(ce=$==null?void 0:$.data)!=null?ce:ehe,rect:H}:null},[k,$]),V=g.useRef(null),[B,K]=g.useState(null),[R,T]=g.useState(null),D=kh(m,Object.values(m)),L=dp("DndDescribedBy",i),X=g.useMemo(()=>A.getEnabled(),[A]),I=ahe(h),{droppableRects:W,measureDroppableContainers:_,measuringScheduled:ee}=Bfe(X,{dragging:C,dependencies:[E.x,E.y],config:I.droppable}),M=$fe(N,k),F=g.useMemo(()=>R?V1(R):null,[R]),Y=U(),oe=Vfe(M,I.draggable.measure);lhe({activeNode:k!=null?N.get(k):null,config:Y.layoutShiftCompensation,initialRect:oe,measure:I.draggable.measure});const se=mM(M,I.draggable.measure,oe),pe=mM(M?M.parentElement:null),ke=g.useRef({activatorEvent:null,active:null,activeNode:M,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ct=A.getNodeFor((n=ke.current.over)==null?void 0:n.id),gt=Xfe({measure:I.dragOverlay.measure}),dn=(r=gt.nodeRef.current)!=null?r:M,fn=C?(s=gt.rect)!=null?s:se:null,hn=!!(gt.nodeRef.current&&gt.rect),ko=Wfe(hn?null:se),Lr=Z5(dn?br(dn):null),or=qfe(C?ct??M:null),Fr=Qfe(or),No=ihe(p,{transform:{x:E.x-ko.x,y:E.y-ko.y,scaleX:1,scaleY:1},activatorEvent:R,active:O,activeNodeRect:se,containerNodeRect:pe,draggingNodeRect:fn,over:ke.current.over,overlayNodeRect:gt.rect,scrollableAncestors:or,scrollableAncestorRects:Fr,windowRect:Lr}),$r=F?yu(F,E):null,Ha=Kfe(or),dc=vM(Ha),pn=vM(Ha,[se]),Xe=yu(No,dc),Yt=fn?mfe(fn,No):null,Eo=O&&Yt?f({active:O,collisionRect:Yt,droppableRects:W,droppableContainers:X,pointerCoordinates:$r}):null,Is=U5(Eo,"id"),[zn,_o]=g.useState(null),di=hn?No:yu(No,pn),Ls=hfe(di,(o=zn==null?void 0:zn.rect)!=null?o:null,se),fi=g.useRef(null),cs=g.useCallback((ce,ye)=>{let{sensor:Te,options:ae}=ye;if(V.current==null)return;const ie=N.get(V.current);if(!ie)return;const me=ce.nativeEvent,We=new Te({active:V.current,activeNode:ie,event:me,options:ae,context:ke,onAbort(ve){if(!N.get(ve))return;const{onDragAbort:vt}=D.current,Ot={id:ve};vt==null||vt(Ot),y({type:"onDragAbort",event:Ot})},onPending(ve,kt,vt,Ot){if(!N.get(ve))return;const{onDragPending:Ka}=D.current,Fs={id:ve,constraint:kt,initialCoordinates:vt,offset:Ot};Ka==null||Ka(Fs),y({type:"onDragPending",event:Fs})},onStart(ve){const kt=V.current;if(kt==null)return;const vt=N.get(kt);if(!vt)return;const{onDragStart:Ot}=D.current,qa={activatorEvent:me,active:{id:kt,data:vt.data,rect:H}};Cs.unstable_batchedUpdates(()=>{Ot==null||Ot(qa),j(Ii.Initializing),x({type:Wt.DragStart,initialCoordinates:ve,active:kt}),y({type:"onDragStart",event:qa}),K(fi.current),T(me)})},onMove(ve){x({type:Wt.DragMove,coordinates:ve})},onEnd:ge(Wt.DragEnd),onCancel:ge(Wt.DragCancel)});fi.current=We;function ge(ve){return async function(){const{active:vt,collisions:Ot,over:qa,scrollAdjustedTranslate:Ka}=ke.current;let Fs=null;if(vt&&Ka){const{cancelDrop:Ga}=D.current;Fs={activatorEvent:me,active:vt,collisions:Ot,delta:Ka,over:qa},ve===Wt.DragEnd&&typeof Ga=="function"&&await Promise.resolve(Ga(Fs))&&(ve=Wt.DragCancel)}V.current=null,Cs.unstable_batchedUpdates(()=>{x({type:ve}),j(Ii.Uninitialized),_o(null),K(null),T(null),fi.current=null;const Ga=ve===Wt.DragEnd?"onDragEnd":"onDragCancel";if(Fs){const jd=D.current[Ga];jd==null||jd(Fs),y({type:Ga,event:Fs})}})}}},[N]),Cd=g.useCallback((ce,ye)=>(Te,ae)=>{const ie=Te.nativeEvent,me=N.get(ae);if(V.current!==null||!me||ie.dndKit||ie.defaultPrevented)return;const We={active:me};ce(Te,ye.options,We)===!0&&(ie.dndKit={capturedBy:ye.sensor},V.current=ae,cs(Te,ye))},[N,cs]),fc=zfe(d,Cd);Gfe(d),So(()=>{se&&S===Ii.Initializing&&j(Ii.Initialized)},[se,S]),g.useEffect(()=>{const{onDragMove:ce}=D.current,{active:ye,activatorEvent:Te,collisions:ae,over:ie}=ke.current;if(!ye||!Te)return;const me={active:ye,activatorEvent:Te,collisions:ae,delta:{x:Xe.x,y:Xe.y},over:ie};Cs.unstable_batchedUpdates(()=>{ce==null||ce(me),y({type:"onDragMove",event:me})})},[Xe.x,Xe.y]),g.useEffect(()=>{const{active:ce,activatorEvent:ye,collisions:Te,droppableContainers:ae,scrollAdjustedTranslate:ie}=ke.current;if(!ce||V.current==null||!ye||!ie)return;const{onDragOver:me}=D.current,We=ae.get(Is),ge=We&&We.rect.current?{id:We.id,rect:We.rect.current,data:We.data,disabled:We.disabled}:null,ve={active:ce,activatorEvent:ye,collisions:Te,delta:{x:ie.x,y:ie.y},over:ge};Cs.unstable_batchedUpdates(()=>{_o(ge),me==null||me(ve),y({type:"onDragOver",event:ve})})},[Is]),So(()=>{ke.current={activatorEvent:R,active:O,activeNode:M,collisionRect:Yt,collisions:Eo,droppableRects:W,draggableNodes:N,draggingNode:dn,draggingNodeRect:fn,droppableContainers:A,over:zn,scrollableAncestors:or,scrollAdjustedTranslate:Xe},H.current={initial:fn,translated:Yt}},[O,M,Eo,Yt,N,dn,fn,W,A,zn,or,Xe]),Ife({...Y,delta:E,draggingRect:Yt,pointerCoordinates:$r,scrollableAncestors:or,scrollableAncestorRects:Fr});const Wa=g.useMemo(()=>({active:O,activeNode:M,activeNodeRect:se,activatorEvent:R,collisions:Eo,containerNodeRect:pe,dragOverlay:gt,draggableNodes:N,droppableContainers:A,droppableRects:W,over:zn,measureDroppableContainers:_,scrollableAncestors:or,scrollableAncestorRects:Fr,measuringConfiguration:I,measuringScheduled:ee,windowRect:Lr}),[O,M,se,R,Eo,pe,gt,N,A,W,zn,_,or,Fr,I,ee,Lr]),hc=g.useMemo(()=>({activatorEvent:R,activators:fc,active:O,activeNodeRect:se,ariaDescribedById:{draggable:L},dispatch:x,draggableNodes:N,over:zn,measureDroppableContainers:_}),[R,fc,O,se,x,L,N,zn,_]);return J.createElement(z5.Provider,{value:w},J.createElement(Qy.Provider,{value:hc},J.createElement(ez.Provider,{value:Wa},J.createElement(tz.Provider,{value:Ls},u)),J.createElement(ohe,{disabled:(a==null?void 0:a.restoreFocus)===!1})),J.createElement(ife,{...a,hiddenTextDescribedById:L}));function U(){const ce=(B==null?void 0:B.autoScrollEnabled)===!1,ye=typeof c=="object"?c.enabled===!1:c===!1,Te=C&&!ce&&!ye;return typeof c=="object"?{...c,enabled:Te}:{enabled:Te}}}),uhe=g.createContext(null),xM="button",dhe="Draggable";function fhe(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const o=dp(dhe),{activators:i,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=g.useContext(Qy),{role:p=xM,roleDescription:m="draggable",tabIndex:v=0}=s??{},b=(c==null?void 0:c.id)===e,x=g.useContext(b?tz:uhe),[y,w]=kv(),[S,j]=kv(),C=Yfe(i,e),k=kh(n);So(()=>(f.set(e,{id:e,key:o,node:y,activatorNode:S,data:k}),()=>{const E=f.get(e);E&&E.key===o&&f.delete(e)}),[f,e]);const N=g.useMemo(()=>({role:p,tabIndex:v,"aria-disabled":r,"aria-pressed":b&&p===xM?!0:void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[r,p,v,b,m,d.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:N,isDragging:b,listeners:r?void 0:C,node:y,over:h,setNodeRef:w,setActivatorNodeRef:j,transform:x}}function hhe(){return g.useContext(ez)}const phe="Droppable",mhe={timeout:25};function ghe(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const o=dp(phe),{active:i,dispatch:a,over:c,measureDroppableContainers:u}=g.useContext(Qy),d=g.useRef({disabled:n}),f=g.useRef(!1),h=g.useRef(null),p=g.useRef(null),{disabled:m,updateMeasurementsFor:v,timeout:b}={...mhe,...s},x=kh(v??r),y=g.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},b)},[b]),w=Yy({callback:y,disabled:m||!i}),S=g.useCallback((N,E)=>{w&&(E&&(w.unobserve(E),f.current=!1),N&&w.observe(N))},[w]),[j,C]=kv(S),k=kh(e);return g.useEffect(()=>{!w||!j.current||(w.disconnect(),f.current=!1,w.observe(j.current))},[j,w]),g.useEffect(()=>(a({type:Wt.RegisterDroppable,element:{id:r,key:o,disabled:n,node:j,rect:h,data:k}}),()=>a({type:Wt.UnregisterDroppable,key:o,id:r})),[r]),g.useEffect(()=>{n!==d.current.disabled&&(a({type:Wt.SetDroppableDisabled,id:r,key:o,disabled:n}),d.current.disabled=n)},[r,o,n,a]),{active:i,rect:h,isOver:(c==null?void 0:c.id)===r,node:j,over:c,setNodeRef:C}}function Ck(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function vhe(t,e){return t.reduce((n,r,s)=>{const o=e.get(r);return o&&(n[s]=o),n},Array(t.length))}function cm(t){return t!==null&&t>=0}function yhe(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function xhe(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const nz=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const o=Ck(e,r,n),i=e[s],a=o[s];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},um={scaleX:1,scaleY:1},bhe=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:o,overIndex:i}=t;const a=(e=o[n])!=null?e:r;if(!a)return null;if(s===n){const u=o[i];return u?{x:0,y:n<i?u.top+u.height-(a.top+a.height):u.top-a.top,...um}:null}const c=whe(o,s,n);return s>n&&s<=i?{x:0,y:-a.height-c,...um}:s<n&&s>=i?{x:0,y:a.height+c,...um}:{x:0,y:0,...um}};function whe(t,e,n){const r=t[e],s=t[e-1],o=t[e+1];return r?n<e?s?r.top-(s.top+s.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const rz="Sortable",sz=J.createContext({activeIndex:-1,containerId:rz,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:nz,disabled:{draggable:!1,droppable:!1}});function She(t){let{children:e,id:n,items:r,strategy:s=nz,disabled:o=!1}=t;const{active:i,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:d}=hhe(),f=dp(rz,n),h=a.rect!==null,p=g.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),m=i!=null,v=i?p.indexOf(i.id):-1,b=u?p.indexOf(u.id):-1,x=g.useRef(p),y=!yhe(p,x.current),w=b!==-1&&v===-1||y,S=xhe(o);So(()=>{y&&m&&d(p)},[y,p,m,d]),g.useEffect(()=>{x.current=p},[p]);const j=g.useMemo(()=>({activeIndex:v,containerId:f,disabled:S,disableTransforms:w,items:p,overIndex:b,useDragOverlay:h,sortedRects:vhe(p,c),strategy:s}),[v,f,S.draggable,S.droppable,w,p,b,c,h,s]);return J.createElement(sz.Provider,{value:j},e)}const Che=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Ck(n,r,s).indexOf(e)},jhe=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:o,newIndex:i,previousItems:a,previousContainerId:c,transition:u}=t;return!u||!r||a!==o&&s===i?!1:n?!0:i!==s&&e===c},khe={duration:200,easing:"ease"},oz="transform",Nhe=Eh.Transition.toString({property:oz,duration:0,easing:"linear"}),Ehe={roleDescription:"sortable"};function _he(t){let{disabled:e,index:n,node:r,rect:s}=t;const[o,i]=g.useState(null),a=g.useRef(n);return So(()=>{if(!e&&n!==a.current&&r.current){const c=s.current;if(c){const u=Sd(r.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&i(d)}}n!==a.current&&(a.current=n)},[e,n,r,s]),g.useEffect(()=>{o&&i(null)},[o]),o}function The(t){let{animateLayoutChanges:e=jhe,attributes:n,disabled:r,data:s,getNewIndex:o=Che,id:i,strategy:a,resizeObserverConfig:c,transition:u=khe}=t;const{items:d,containerId:f,activeIndex:h,disabled:p,disableTransforms:m,sortedRects:v,overIndex:b,useDragOverlay:x,strategy:y}=g.useContext(sz),w=Mhe(r,p),S=d.indexOf(i),j=g.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...s}),[f,s,S,d]),C=g.useMemo(()=>d.slice(d.indexOf(i)),[d,i]),{rect:k,node:N,isOver:E,setNodeRef:A}=ghe({id:i,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:$,activatorEvent:H,activeNodeRect:O,attributes:V,setNodeRef:B,listeners:K,isDragging:R,over:T,setActivatorNodeRef:D,transform:L}=fhe({id:i,data:j,attributes:{...Ehe,...n},disabled:w.draggable}),X=Kde(A,B),I=!!$,W=I&&!m&&cm(h)&&cm(b),_=!x&&R,ee=_&&W?L:null,F=W?ee??(a??y)({rects:v,activeNodeRect:O,activeIndex:h,overIndex:b,index:S}):null,Y=cm(h)&&cm(b)?o({id:i,items:d,activeIndex:h,overIndex:b}):S,oe=$==null?void 0:$.id,se=g.useRef({activeId:oe,items:d,newIndex:Y,containerId:f}),pe=d!==se.current.items,ke=e({active:$,containerId:f,isDragging:R,isSorting:I,id:i,index:S,items:d,newIndex:se.current.newIndex,previousItems:se.current.items,previousContainerId:se.current.containerId,transition:u,wasDragging:se.current.activeId!=null}),ct=_he({disabled:!ke,index:S,node:N,rect:k});return g.useEffect(()=>{I&&se.current.newIndex!==Y&&(se.current.newIndex=Y),f!==se.current.containerId&&(se.current.containerId=f),d!==se.current.items&&(se.current.items=d)},[I,Y,f,d]),g.useEffect(()=>{if(oe===se.current.activeId)return;if(oe!=null&&se.current.activeId==null){se.current.activeId=oe;return}const dn=setTimeout(()=>{se.current.activeId=oe},50);return()=>clearTimeout(dn)},[oe]),{active:$,activeIndex:h,attributes:V,data:j,rect:k,index:S,newIndex:Y,items:d,isOver:E,isSorting:I,isDragging:R,listeners:K,node:N,overIndex:b,over:T,setNodeRef:X,setActivatorNodeRef:D,setDroppableNodeRef:A,setDraggableNodeRef:B,transform:ct??F,transition:gt()};function gt(){if(ct||pe&&se.current.newIndex===S)return Nhe;if(!(_&&!yk(H)||!u)&&(I||ke))return Eh.Transition.toString({...u,property:oz})}}function Mhe(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function _v(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Ahe=[Ke.Down,Ke.Right,Ke.Up,Ke.Left],Phe=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:o,over:i,scrollableAncestors:a}}=e;if(Ahe.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=s.get(f.id);if(h)switch(t.code){case Ke.Down:r.top<h.top&&c.push(f);break;case Ke.Up:r.top>h.top&&c.push(f);break;case Ke.Left:r.left>h.left&&c.push(f);break;case Ke.Right:r.left<h.left&&c.push(f);break}});const u=ufe({active:n,collisionRect:r,droppableRects:s,droppableContainers:c,pointerCoordinates:null});let d=U5(u,"id");if(d===(i==null?void 0:i.id)&&u.length>1&&(d=u[1].id),d!=null){const f=o.get(n.id),h=o.get(d),p=h?s.get(h.id):null,m=h==null?void 0:h.node.current;if(m&&p&&f&&h){const b=Gy(m).some((C,k)=>a[k]!==C),x=iz(f,h),y=Dhe(f,h),w=b||!x?{x:0,y:0}:{x:y?r.width-p.width:0,y:y?r.height-p.height:0},S={x:p.left,y:p.top};return w.x&&w.y?S:Nh(S,w)}}}};function iz(t,e){return!_v(t)||!_v(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Dhe(t,e){return!_v(t)||!_v(e)||!iz(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Rhe=()=>{const[t,e]=g.useState(""),[n,r]=g.useState(!1),[s,o]=g.useState(!1),[i,a]=g.useState(!1),[c,u]=g.useState(!1),[d,f]=g.useState(!1),[h,p]=g.useState(!1),[m,v]=g.useState(null),[b,x]=g.useState(null),[y,w]=g.useState(null),[S,j]=g.useState(!1),[C,k]=g.useState(0),[N,E]=g.useState(!1),[A,$]=g.useState(null),[H,O]=g.useState(!1),[V,B]=g.useState(null),[K,R]=g.useState("all"),[T,D]=g.useState("all"),[L,X]=g.useState("all"),[I,W]=g.useState("all"),[_,ee]=g.useState("all"),[M,F]=g.useState("all"),[Y,oe]=g.useState({pode_fazer:!0,deve_fazer:!0,pronto_fazer:!0,em_andamento:!0,em_revisao:!0,recorrente:!0,concluido:!1,rejeitado:!1}),[se,pe]=g.useState({}),{tarefas:ke,isLoading:ct,atualizarTarefa:gt,excluirTarefa:dn,reordenarSubtarefas:fn,isDeleting:hn,isReordering:ko}=jo(),{perfisEquipe:Lr}=On(),{empresas:or}=cn(),Fr=afe(aM(Sk),aM(bk,{coordinateGetter:Phe})),No=async(U,ce,ye,Te)=>{const{active:ae,over:ie}=U;if(ae.id!==(ie==null?void 0:ie.id)){const me=ce.findIndex(ve=>ve.id===ae.id),We=ce.findIndex(ve=>ve.id===ie.id),ge=Ck(ce,me,We);ye(ge);try{const ve=ge.map(kt=>kt.id);await fn({subtarefasIds:ve}),q.success("Subtarefa reordenada com sucesso!")}catch(ve){console.error("Erro ao reordenar subtarefas:",ve),q.error("Erro ao salvar nova ordem. Tente novamente."),ye(ce)}}},$r=({subtask:U,tarefa:ce,onToggleComplete:ye,onEdit:Te,onDuplicate:ae,onDelete:ie,truncateText:me,getPrioridadeColor:We,formatDateForDisplay:ge,getDateColor:ve,getEmpresaNome:kt})=>{const{attributes:vt,listeners:Ot,setNodeRef:qa,transform:Ka,transition:Fs,isDragging:Ga}=The({id:U.id}),jd={transform:Eh.Transform.toString(Ka),transition:Fs};return l.jsx("div",{ref:qa,style:jd,className:`bg-muted/30 p-4 rounded-lg border border-border transition-all ${U.status==="concluido"?"opacity-60":""} ${Ga?"shadow-lg scale-105 bg-blue-50 dark:bg-blue-950/20 border-blue-300":""}`,...vt,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[l.jsx("div",{...Ot,className:"cursor-grab active:cursor-grabbing text-muted-foreground hover:text-foreground mt-1",children:l.jsx(EJ,{className:"h-4 w-4"})}),l.jsx("button",{onClick:ye,className:`mt-1 p-1 rounded transition-colors ${U.status==="concluido"?"bg-green-500 text-white hover:bg-green-600":"border-2 border-gray-300 hover:border-green-500"}`,children:U.status==="concluido"&&l.jsx(Ar,{className:"h-3 w-3"})}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"font-medium text-foreground",children:kt(U.empresa_id)})]}),l.jsx("h5",{className:`font-semibold text-foreground uppercase ${U.status==="concluido"?"line-through":""}`,children:me(U.titulo,80)}),U.descricao&&l.jsx("p",{className:`text-sm text-muted-foreground ${U.status==="concluido"?"line-through":""}`,children:me(U.descricao.replace(/<[^>]*>/g,""),60)}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[l.jsx(Be,{className:`text-xs ${We(U.prioridade)}`,children:U.prioridade==="alta"?"Alta":U.prioridade==="media"?"Mdia":"Baixa"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx(Wa,{tarefaId:U.id}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:"text-muted-foreground",children:["Atualizado em: ",ge(U.atualizado_em)]})]})]}),l.jsx("div",{className:"flex flex-col gap-1",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[U.data_inicio&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${["pode_fazer","deve_fazer","pronto_fazer"].includes(U.status)?ve(U.data_inicio,U.status,!0):"text-gray-400"}`,children:["Incio: ",ge(U.data_inicio)]})]}),U.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${["concluido","rejeitado"].includes(U.status)?"text-gray-400":ve(U.data_entrega,U.status,!1)}`,children:["Entrega: ",ge(U.data_entrega)]})]})]})})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:Te,className:"text-muted-foreground hover:text-foreground h-8 w-8 p-0",children:l.jsx(Ul,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:ie,className:"text-muted-foreground hover:text-red-600 h-8 w-8 p-0",disabled:hn,children:l.jsx(Ea,{className:"h-4 w-4"})})]})]})})},Ha=g.useMemo(()=>[...ke].sort((U,ce)=>{const ye={alta:3,media:2,baixa:1},Te=(ye[ce.prioridade]||0)-(ye[U.prioridade]||0);return Te!==0?Te:!U.data_entrega&&!ce.data_entrega?0:U.data_entrega?ce.data_entrega?new Date(U.data_entrega).getTime()-new Date(ce.data_entrega).getTime():-1:1}),[ke]),{data:dc=[]}=jn({queryKey:["all-responsaveis"],queryFn:async()=>{const{data:U,error:ce}=await re.from("tarefa_responsaveis").select("tarefa_id, responsavel_id");if(ce)throw ce;return U}}),pn=(U,ce)=>{if(ce==="all")return!0;if(!U&&ce!=="all")return!1;const ye=new Date(U),Te=new Date,ae=ye.getTime()-Te.getTime(),ie=Math.ceil(ae/(1e3*60*60*24));switch(ce){case"overdue":return ie<0;case"1day":return ie>=0&&ie<=1;case"2days":return ie>=0&&ie<=2;case"7days":return ie>=0&&ie<=7;case"10days":return ie>=0&&ie<=10;case"20days":return ie>=0&&ie<=20;case"30days":return ie>=0&&ie<=30;case"60days":return ie>=0&&ie<=60;case"90days":return ie>=0&&ie<=90;default:return!0}},Xe=g.useMemo(()=>Ha.filter(U=>{var ge;const ce=!t||U.titulo.toLowerCase().includes(t.toLowerCase())||((ge=U.descricao)==null?void 0:ge.toLowerCase().includes(t.toLowerCase())),ye=K==="all"||U.status===K,Te=T==="all"||U.prioridade===T,ae=L==="all"||U.empresa_id===L,ie=I==="all"||dc.some(ve=>ve.tarefa_id===U.id&&ve.responsavel_id===I),me=pn(U.data_inicio,_),We=pn(U.data_entrega,M);return ce&&ye&&Te&&ae&&ie&&me&&We}),[Ha,t,K,T,L,I,_,M,dc]),Yt=g.useMemo(()=>K==="all"?{pode_fazer:Xe.filter(U=>U.status==="pode_fazer"),deve_fazer:Xe.filter(U=>U.status==="deve_fazer"),pronto_fazer:Xe.filter(U=>U.status==="pronto_fazer"),em_andamento:Xe.filter(U=>U.status==="em_andamento"),em_revisao:Xe.filter(U=>U.status==="em_revisao"),recorrente:Xe.filter(U=>U.status==="recorrente"),concluido:Xe.filter(U=>U.status==="concluido"),rejeitado:Xe.filter(U=>U.status==="rejeitado")}:{pode_fazer:K==="pode_fazer"?Xe:[],deve_fazer:K==="deve_fazer"?Xe:[],pronto_fazer:K==="pronto_fazer"?Xe:[],em_andamento:K==="em_andamento"?Xe:[],em_revisao:K==="em_revisao"?Xe:[],recorrente:K==="recorrente"?Xe:[],concluido:K==="concluido"?Xe:[],rejeitado:K==="rejeitado"?Xe:[]},[Xe,K]),Eo=U=>{switch(U){case"pode_fazer":return{label:"Poderia Fazer",color:"bg-slate-500",count:Yt.pode_fazer.length};case"deve_fazer":return{label:"Devemos Fazer",color:"bg-orange-500",count:Yt.deve_fazer.length};case"pronto_fazer":return{label:"Pronto para Fazer",color:"bg-pink-500",count:Yt.pronto_fazer.length};case"em_andamento":return{label:"Em Progresso",color:"bg-purple-500",count:Yt.em_andamento.length};case"em_revisao":return{label:"Em Reviso",color:"bg-blue-500",count:Yt.em_revisao.length};case"recorrente":return{label:"Recorrente",color:"bg-indigo-500",count:Yt.recorrente.length};case"concluido":return{label:"Concludo",color:"bg-green-500",count:Yt.concluido.length};case"rejeitado":return{label:"Rejeitado",color:"bg-red-500",count:Yt.rejeitado.length};default:return{label:U,color:"bg-gray-500",count:0}}},Is=U=>{switch(U){case"alta":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30";case"media":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30";case"baixa":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}},zn=U=>{if(!U)return null;const ce=String(U);let ye=ce.match(/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.\d+)?(?:[+-]\d{2}:?\d{2}|Z)?/);if(ye){const[,Te,ae,ie,me,We]=ye;return`${ie}/${ae}/${Te} ${me}:${We}`}if(ye=ce.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})/),ye){const[,Te,ae,ie,me,We]=ye;return`${ie}/${ae}/${Te} ${me}:${We}`}return ce},_o=(U,ce,ye=!1)=>{if(!U)return"";if(ce==="concluido"||ce==="rejeitado"||ye&&ce==="recorrente"||ye&&(ce==="em_andamento"||ce==="em_revisao"))return"text-gray-500 dark:text-gray-400";const Te=new Date,ie=new Date(U).getTime()-Te.getTime(),me=Math.ceil(ie/(1e3*60*60*24));return me<=0?"text-red-600 font-bold dark:text-red-400":me<=2?"text-yellow-600 font-bold dark:text-yellow-400":"text-green-600 font-bold dark:text-green-400"},di=U=>{if(!U)return"Sem empresa";const ce=or.find(ye=>ye.id===U);return(ce==null?void 0:ce.nome)||"Empresa no encontrada"},Ls=U=>{oe(ce=>({...ce,[U]:!ce[U]}))},fi=U=>{$(U),E(!0)},cs=async()=>{if(A)try{await dn(A.id),q.success("Tarefa excluda com sucesso!"),E(!1),$(null)}catch(U){console.error("Erro ao excluir tarefa:",U),q.error("Erro ao excluir tarefa. Tente novamente.")}},Cd=U=>{B(U),O(!0)},fc=async()=>{if(V)try{await dn(V.id),q.success("Subtarefa excluda com sucesso!"),O(!1),B(null)}catch(U){console.error("Erro ao excluir subtarefa:",U),q.error("Erro ao excluir subtarefa. Tente novamente.")}},Wa=({tarefaId:U})=>{const{responsaveis:ce}=Jh(U);return!ce||ce.length===0?l.jsx("span",{className:"text-xs text-muted-foreground",children:"Nenhum responsvel"}):l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(sc,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("div",{className:"flex -space-x-1",children:[ce.slice(0,3).map((ye,Te)=>{var ae,ie,me;return l.jsxs(on,{className:"h-5 w-5 border-2 border-white dark:border-gray-800",children:[l.jsx(an,{src:((ae=ye.responsavel_perfil)==null?void 0:ae.url_avatar)||"",alt:((ie=ye.responsavel_perfil)==null?void 0:ie.nome_completo)||"Usurio"}),l.jsx(ln,{className:"text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300",children:(((me=ye.responsavel_perfil)==null?void 0:me.nome_completo)||"U").charAt(0)})]},ye.id)}),ce.length>3&&l.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-white dark:border-gray-800 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:l.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-300",children:["+",ce.length-3]})})]})]})},hc=({tarefa:U})=>{const[ce,ye]=g.useState([]);On();const Te=se[U.id]||!1,ae=ge=>{pe(ve=>({...ve,[U.id]:typeof ge=="function"?ge(ve[U.id]||!1):ge}))},ie=async()=>{if(U.tipo==="tarefa"){const{data:ge}=await re.from("tarefas").select(`
            *,
            criado_por_perfil:perfis!tarefas_criado_por_fkey(nome_completo, url_avatar)
          `).eq("tarefa_pai_id",U.id).eq("tipo","subtarefa").order("ordem_subtarefa",{ascending:!0});ye(ge||[])}};J.useEffect(()=>{ie()},[U.id]);const me=ce.length>0,We=(ge,ve=100)=>ge?ge.length>ve?ge.substring(0,ve)+"...":ge:"";return l.jsx("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/50 dark:hover:bg-muted/20 bg-card dark:bg-card transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"font-medium text-foreground",children:di(U.empresa_id)})]}),l.jsx("h4",{className:"font-semibold text-foreground line-clamp-2 break-words uppercase",children:We(U.titulo,100)}),U.descricao&&l.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 break-words",children:We(U.descricao.replace(/<[^>]*>/g,""),100)}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[l.jsx(Be,{className:Is(U.prioridade),children:U.prioridade==="alta"?"Alta":U.prioridade==="media"?"Mdia":"Baixa"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx(Wa,{tarefaId:U.id}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:"text-muted-foreground",children:["Atualizado em: ",zn(U.atualizado_em)]})]})]}),l.jsx("div",{className:"flex flex-col gap-1",children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap ml-8",children:[U.data_inicio&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${_o(U.data_inicio,U.status,!0)}`,children:["Incio: ",zn(U.data_inicio)]})]}),U.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-xs ${_o(U.data_entrega,U.status,!1)}`,children:["Entrega: ",zn(U.data_entrega)]})]})]})})]}),me&&l.jsxs("div",{className:"mt-4 border-t pt-4",children:[l.jsxs(G,{variant:"ghost",size:"sm",onClick:()=>ae(!Te),className:"flex items-center gap-2 text-muted-foreground hover:text-foreground",children:[Te?l.jsx(Ng,{className:"h-4 w-4"}):l.jsx(ih,{className:"h-4 w-4"}),ce.length," subtarefa",ce.length!==1?"s":"",me&&l.jsx("span",{className:"text-blue-600",children:""})]}),Te&&l.jsx("div",{className:"mt-2 ml-4 space-y-2 border-l-2 border-blue-200 pl-4",children:l.jsx(che,{sensors:Fr,collisionDetection:cfe,onDragEnd:ge=>No(ge,ce,ye,U.id),children:l.jsx(She,{items:ce.map(ge=>ge.id),strategy:bhe,children:ce.map(ge=>l.jsx($r,{subtask:ge,tarefa:U,onToggleComplete:async()=>{try{const ve=Te;await gt({id:ge.id,status:ge.status==="concluido"?"pode_fazer":"concluido"}),await ie(),ae(ve)}catch(ve){console.error("Erro ao atualizar subtarefa:",ve),q.error("Erro ao atualizar subtarefa")}},onEdit:()=>{const ve=Te;x(ge),w(U),u(!0),setTimeout(()=>ae(ve),100)},onDuplicate:()=>{const ve=Te;x(ge),w(U),p(!0),setTimeout(()=>ae(ve),100)},onDelete:()=>{const ve=Te;Cd(ge),setTimeout(()=>ae(ve),100)},truncateText:We,getPrioridadeColor:Is,formatDateForDisplay:zn,getDateColor:(ve,kt)=>_o(ve,ge.status,kt),getEmpresaNome:di},ge.id))})})})]}),l.jsx("div",{className:"flex justify-center mt-3",children:l.jsxs(G,{variant:"outline",size:"sm",onClick:()=>{w(U),a(!0)},className:"border-dashed text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Adicionar Subtarefa"]})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{const ge=document.querySelector(".overflow-auto");ge&&k(ge.scrollTop),v(U),f(!0)},className:"text-muted-foreground hover:text-blue-600",title:"Duplicar tarefa",children:l.jsx(co,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>{const ge=document.querySelector(".overflow-auto");ge&&k(ge.scrollTop),v(U),o(!0)},className:"text-muted-foreground hover:text-foreground",children:l.jsx(Ul,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>fi(U),className:"text-muted-foreground hover:text-red-600",disabled:hn,children:l.jsx(Ea,{className:"h-4 w-4"})})]})]})})};return ct?l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"team"}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"team"}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("div",{className:"flex-1 overflow-auto p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gerenciar Tarefas"}),l.jsx("p",{className:"text-muted-foreground",children:"Gerencie e acompanhe todas as tarefas da equipe"})]}),l.jsxs(G,{onClick:()=>r(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Nova Tarefa"]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar tarefas...",value:t,onChange:U=>e(U.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(Oe,{value:K,onValueChange:R,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por status"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os status"}),l.jsx(z,{value:"pode_fazer",children:"Poderia Fazer"}),l.jsx(z,{value:"deve_fazer",children:"Devemos Fazer"}),l.jsx(z,{value:"pronto_fazer",children:"Pronto para Fazer"}),l.jsx(z,{value:"em_andamento",children:"Em Progresso"}),l.jsx(z,{value:"em_revisao",children:"Em Reviso"}),l.jsx(z,{value:"recorrente",children:"Recorrente"}),l.jsx(z,{value:"concluido",children:"Concludo"}),l.jsx(z,{value:"rejeitado",children:"Rejeitado"})]})]}),l.jsxs(Oe,{value:T,onValueChange:D,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as prioridades"}),l.jsx(z,{value:"alta",children:"Alta"}),l.jsx(z,{value:"media",children:"Mdia"}),l.jsx(z,{value:"baixa",children:"Baixa"})]})]}),l.jsxs(Oe,{value:L,onValueChange:X,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por empresa"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as empresas"}),or.map(U=>l.jsx(z,{value:U.id,children:U.nome},U.id))]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(Oe,{value:I,onValueChange:W,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por responsvel"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os responsveis"}),Lr.map(U=>l.jsx(z,{value:U.id,children:U.nome_completo},U.id))]})]}),l.jsxs(Oe,{value:_,onValueChange:ee,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por data de incio"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as datas de incio"}),l.jsx(z,{value:"overdue",children:"Atrasado"}),l.jsx(z,{value:"1day",children:"At 1 dia"}),l.jsx(z,{value:"2days",children:"At 2 dias"}),l.jsx(z,{value:"7days",children:"At 7 dias"}),l.jsx(z,{value:"10days",children:"At 10 dias"}),l.jsx(z,{value:"20days",children:"At 20 dias"}),l.jsx(z,{value:"30days",children:"At 30 dias"}),l.jsx(z,{value:"60days",children:"At 60 dias"}),l.jsx(z,{value:"90days",children:"At 90 dias"})]})]}),l.jsxs(Oe,{value:M,onValueChange:F,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por data de entrega"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as datas de entrega"}),l.jsx(z,{value:"overdue",children:"Atrasado"}),l.jsx(z,{value:"1day",children:"At 1 dia"}),l.jsx(z,{value:"2days",children:"At 2 dias"}),l.jsx(z,{value:"7days",children:"At 7 dias"}),l.jsx(z,{value:"10days",children:"At 10 dias"}),l.jsx(z,{value:"20days",children:"At 20 dias"}),l.jsx(z,{value:"30days",children:"At 30 dias"}),l.jsx(z,{value:"60days",children:"At 60 dias"}),l.jsx(z,{value:"90days",children:"At 90 dias"})]})]})]}),l.jsx("div",{className:"space-y-6",children:Object.entries(Yt).map(([U,ce])=>{const ye=Eo(U),Te=Y[U];return K!=="all"&&K!==U?null:l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{className:"cursor-pointer hover:bg-muted/50 dark:hover:bg-muted/20",onClick:()=>Ls(U),children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-3 h-3 rounded-full ${ye.color}`}),l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:ye.label}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:ye.count})]}),Te?l.jsx(Ng,{className:"h-4 w-4 text-muted-foreground"}):l.jsx(ih,{className:"h-4 w-4 text-muted-foreground"})]})}),Te&&l.jsx(Ae,{children:l.jsx("div",{className:"space-y-3 min-h-[80px] p-4 rounded-lg border-2 border-dashed border-muted-foreground/20",children:ce.length===0?l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx("div",{className:"text-lg mb-2",children:""}),l.jsx("div",{children:"Nenhuma tarefa neste status"})]}):ce.map(ae=>l.jsx(hc,{tarefa:ae},ae.id))})})]},U)})})]})})}),l.jsx(Bde,{isOpen:n,onClose:()=>r(!1),onSuccess:()=>{}}),m&&l.jsx(Vde,{isOpen:s,onClose:()=>{o(!1),v(null),setTimeout(()=>{const U=document.querySelector(".overflow-auto");U&&(U.scrollTop=C)},100)},task:m,onSuccess:()=>{o(!1),v(null),setTimeout(()=>{const U=document.querySelector(".overflow-auto");U&&(U.scrollTop=C)},100)}}),l.jsx(Ude,{isOpen:i,onClose:()=>{a(!1),w(null)},onSuccess:()=>{a(!1),w(null)},parentTask:y}),l.jsx(Hde,{isOpen:c,onClose:()=>{u(!1),x(null),w(null),j(!1)},subtask:b,parentTask:y,onSuccess:()=>{u(!1),x(null),w(null),j(!1)},hasUnsavedChanges:S,setHasUnsavedChanges:j}),l.jsx(Wde,{isOpen:d,onClose:()=>{f(!1),v(null),setTimeout(()=>{const U=document.querySelector(".overflow-auto");U&&(U.scrollTop=C)},100)},task:m,onSuccess:()=>{f(!1),v(null),setTimeout(()=>{const U=document.querySelector(".overflow-auto");U&&(U.scrollTop=C)},100)}}),l.jsx(qde,{isOpen:h,onClose:()=>{p(!1),x(null),w(null)},subtask:b,parentTask:y,onSuccess:()=>{p(!1),x(null),w(null)}}),l.jsx(ai,{open:H,onOpenChange:O,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar excluso"}),l.jsxs(mo,{children:['Tem certeza que deseja excluir a subtarefa "',V==null?void 0:V.titulo,'"? Esta ao no pode ser desfeita.']})]}),l.jsxs(ho,{children:[l.jsx(vo,{onClick:()=>{O(!1),B(null)},children:"Cancelar"}),l.jsx(go,{onClick:fc,className:"bg-red-600 hover:bg-red-700",disabled:hn,children:hn?"Excluindo...":"Excluir"})]})]})}),l.jsx(ai,{open:N,onOpenChange:E,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar excluso"}),l.jsxs(mo,{children:['Tem certeza que deseja excluir a tarefa "',A==null?void 0:A.titulo,'"? Esta ao no pode ser desfeita.']})]}),l.jsxs(ho,{children:[l.jsx(vo,{onClick:()=>{E(!1),$(null)},children:"Cancelar"}),l.jsx(go,{onClick:cs,className:"bg-red-600 hover:bg-red-700",disabled:hn,children:hn?"Excluindo...":"Excluir"})]})]})})]})},Ohe=({isOpen:t,onClose:e,onSuccess:n})=>{const{perfil:r}=jt(),{criarItem:s}=oc(),{empresas:o}=cn(),[i,a]=g.useState({titulo:"",descricao:"",prioridade:"media",empresa_id:"",data_entrega:""}),[c,u]=g.useState(!1),d=async h=>{if(h.preventDefault(),!i.titulo.trim()){q.error("Ttulo  obrigatrio");return}if(!i.empresa_id){q.error("Selecione uma empresa");return}u(!0);try{const p={titulo:i.titulo.trim(),descricao:i.descricao.trim()||null,empresa_id:i.empresa_id,tipo:"pendencia_dmm",criado_por:r==null?void 0:r.id,concluido:!1,prioridade:i.prioridade,data_entrega:i.data_entrega?new Date(i.data_entrega).toISOString():null};await s(p),q.success("Checklist da DMM criado com sucesso!"),a({titulo:"",descricao:"",prioridade:"media",empresa_id:"",data_entrega:""}),n(),e()}catch(p){console.error("Erro ao criar checklist:",p),q.error("Erro ao criar checklist. Verifique os dados e tente novamente.")}finally{u(!1)}},f=()=>{a({titulo:"",descricao:"",prioridade:"media",empresa_id:"",data_entrega:""}),e()};return l.jsx(rr,{open:t,onOpenChange:f,children:l.jsxs(In,{className:"sm:max-w-[500px] dark:bg-card dark:border-border",children:[l.jsx(Ln,{children:l.jsx(Fn,{className:"text-foreground",children:"Nova Checklist DMM"})}),l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",className:"text-foreground",children:"Empresa *"}),l.jsxs(Oe,{value:i.empresa_id,onValueChange:h=>a(p=>({...p,empresa_id:h})),required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione uma empresa"})}),l.jsx(De,{children:o.map(h=>l.jsx(z,{value:h.id,children:h.nome},h.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"titulo",className:"text-foreground",children:"Ttulo *"}),l.jsx(we,{id:"titulo",value:i.titulo,onChange:h=>a(p=>({...p,titulo:h.target.value})),placeholder:"Ttulo do checklist",required:!0,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"descricao",className:"text-foreground",children:"Descrio"}),l.jsx(ic,{id:"descricao",value:i.descricao,onChange:h=>a(p=>({...p,descricao:h.target.value})),placeholder:"Detalhes do checklist",rows:3,className:"dark:bg-input dark:border-border"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"prioridade",className:"text-foreground",children:"Prioridade"}),l.jsxs(Oe,{value:i.prioridade,onValueChange:h=>a(p=>({...p,prioridade:h})),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsxs(De,{children:[l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"data_entrega",className:"text-foreground",children:"Data de Entrega"}),l.jsx(we,{id:"data_entrega",type:"datetime-local",value:i.data_entrega,onChange:h=>a(p=>({...p,data_entrega:h.target.value})),className:"dark:bg-input dark:border-border"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[l.jsx(G,{type:"button",variant:"outline",onClick:f,className:"dark:border-border dark:text-foreground dark:hover:bg-muted",children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:c,className:"bg-green-600 hover:bg-green-700 text-white",children:c?"Salvando...":"Criar Checklist"})]})]})]})})},Ihe=()=>{jt();const[t,e]=g.useState(""),[n,r]=g.useState(!1),[s,o]=g.useState(!1),[i,a]=g.useState(!1),[c,u]=g.useState(null),[d,f]=g.useState(!1),[h,p]=g.useState(null);g.useState("dmm");const[m,v]=g.useState("all"),[b,x]=g.useState("all"),{checklists:y,isLoading:w,atualizarItem:S,deletarItem:j}=oc(),{perfisEquipe:C,getNomeUsuario:k}=On(),{empresas:N}=cn(),E=g.useMemo(()=>y.filter(_=>{var Y;const ee=!t||_.titulo.toLowerCase().includes(t.toLowerCase())||((Y=_.descricao)==null?void 0:Y.toLowerCase().includes(t.toLowerCase())),M=m==="all"||_.empresa_id===m,F=b==="all"||_.prioridade===b;return ee&&M&&F}),[y,t,m,b]),A=g.useMemo(()=>{const _=E.filter(Y=>Y.tipo==="pendencia_dmm"&&!Y.concluido),ee=E.filter(Y=>Y.tipo==="pendencia_dmm"&&Y.concluido),M=E.filter(Y=>Y.tipo==="pendencia_cliente"&&!Y.concluido),F=E.filter(Y=>Y.tipo==="pendencia_cliente"&&Y.concluido);return{dmm:{pendentes:_,concluidos:ee},cliente:{pendentes:M,concluidos:F}}},[E]),$=_=>{switch(_){case"alta":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/30";case"media":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-900/30";case"baixa":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/30";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}},H=_=>{if(!_)return"";const ee=new Date,F=new Date(_).getTime()-ee.getTime(),Y=Math.ceil(F/(1e3*60*60*24));return Y<=0?"text-red-600 dark:text-red-400":Y<=2?"text-yellow-600 dark:text-yellow-400":"text-green-600 dark:text-green-400"},O=_=>{if(!_)return null;const ee=String(_),M=ee.match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})/);if(M){const[,F,Y,oe,se,pe]=M;return`${oe}/${Y}/${F} ${se}:${pe}`}try{const F=new Date(ee),Y=oe=>String(oe).padStart(2,"0");return`${Y(F.getDate())}/${Y(F.getMonth()+1)}/${F.getFullYear()} ${Y(F.getHours())}:${Y(F.getMinutes())}`}catch{return ee}},V=_=>k(_),B=_=>{if(!_)return"Sem empresa";const ee=N.find(M=>M.id===_);return(ee==null?void 0:ee.nome)||"Empresa no encontrada"},K=_=>{u(_),a(!0)},R=_=>{p(_),f(!0)},T=async()=>{if(h)try{await j(h.id),q.success("Checklist excludo com sucesso!")}catch{q.error("Erro ao excluir checklist")}f(!1),p(null)},D=async _=>{try{await S({id:_.id,concluido:!_.concluido}),q.success(`Checklist ${_.concluido?"reaberto":"concludo"} com sucesso!`)}catch(ee){console.error("Erro ao atualizar checklist:",ee),q.error("Erro ao atualizar pendncia")}},L=(_,ee)=>{_.dataTransfer.setData("text/plain",JSON.stringify({id:ee.id,type:"checklist"})),_.dataTransfer.effectAllowed="move"},X=_=>{_.preventDefault(),_.dataTransfer.dropEffect="move"},I=(_,ee)=>{_.preventDefault(),_.stopPropagation();try{const M=JSON.parse(_.dataTransfer.getData("text/plain"));M.type==="checklist"&&M.id!==(ee==null?void 0:ee.id)&&(console.log("Movendo checklist:",M.id,"para:",(ee==null?void 0:ee.id)||"rea vazia"),q.success("Funcionalidade de reorganizao ser implementada em breve"))}catch(M){console.error("Erro ao processar drop:",M)}},W=({checklist:_,showCompleted:ee=!1})=>l.jsx("div",{className:`border border-border rounded-lg p-4 hover:bg-muted/50 dark:hover:bg-muted/20 cursor-move bg-card dark:bg-card transition-colors ${_.concluido?"opacity-75":""}`,draggable:!0,onDragStart:M=>L(M,_),onDragOver:X,onDrop:M=>I(M,_),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(Nr,{checked:_.concluido,onCheckedChange:()=>D(_),className:"mt-1"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:`font-medium text-foreground ${_.concluido?"line-through":""}`,children:B(_.empresa_id)})]}),l.jsx("h4",{className:`font-semibold text-foreground line-clamp-2 break-words ${_.concluido?"line-through":""}`,children:_.titulo}),_.descricao&&l.jsx("p",{className:`text-sm text-muted-foreground line-clamp-2 break-words ${_.concluido?"line-through":""}`,children:_.descricao}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[l.jsx(Be,{className:`${$(_.prioridade)} ${_.concluido?"line-through":""}`,children:_.prioridade==="alta"?"Alta":_.prioridade==="media"?"Mdia":"Baixa"}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(sc,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-muted-foreground ${_.concluido?"line-through":""}`,children:["Criado por: ",V(_.criado_por)]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsxs("span",{className:`text-muted-foreground ${_.concluido?"line-through":""}`,children:["Criado em: ",new Date(_.criado_em).toLocaleDateString("pt-BR")]})]})]}),_.data_entrega&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(yn,{className:"h-3 w-3 text-muted-foreground"}),l.jsx("span",{className:`font-bold ${H(_.data_entrega)} ${_.concluido?"line-through":""}`,children:l.jsxs("strong",{children:["Entrega: ",O(_.data_entrega)]})})]})]})]}),l.jsxs(u3,{children:[l.jsx(d3,{asChild:!0,children:l.jsx(G,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",children:l.jsx(yI,{className:"h-4 w-4"})})}),l.jsxs(xj,{align:"end",className:"dark:bg-popover dark:border-border",children:[l.jsxs(fh,{onClick:()=>K(_),className:"dark:hover:bg-muted dark:focus:bg-muted",children:[l.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Editar"]}),l.jsxs(fh,{className:"text-red-600 dark:text-red-400 dark:hover:bg-muted dark:focus:bg-muted",onClick:()=>R(_),children:[l.jsx(Ea,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})},_.id);return w?l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"team"}),l.jsx("div",{className:"flex-1 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]}):l.jsxs("div",{className:"flex h-screen bg-background",children:[l.jsx(Rn,{userType:"team"}),l.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:l.jsx("div",{className:"flex-1 overflow-auto p-6",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Checklists da Equipe"}),l.jsx("p",{className:"text-muted-foreground",children:"Gerencie pendncias da DMM e dos clientes"})]})}),l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar checklists...",value:t,onChange:_=>e(_.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs(Oe,{value:m,onValueChange:v,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por empresa"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as empresas"}),N.map(_=>l.jsx(z,{value:_.id,children:_.nome},_.id))]})]}),l.jsxs(Oe,{value:b,onValueChange:x,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Filtrar por prioridade"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as prioridades"}),l.jsx(z,{value:"alta",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Alta"]})}),l.jsx(z,{value:"media",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Mdia"]})}),l.jsx(z,{value:"baixa",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Baixa"]})})]})]})]}),l.jsxs(dj,{value:"cliente",className:"w-full",children:[l.jsx(jy,{className:"grid w-full grid-cols-1",children:l.jsxs(lh,{value:"cliente",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:["Pendncias Cliente (",A.cliente.pendentes.length,")"]})}),l.jsxs(ch,{value:"cliente",className:"space-y-6 mt-6",children:[l.jsx("div",{className:"flex justify-end",children:l.jsxs(G,{onClick:()=>o(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Nova Pendncia Cliente"]})}),l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Pendentes"}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:A.cliente.pendentes.length})]})}),l.jsx(Ae,{children:A.cliente.pendentes.length===0?l.jsx("div",{className:"text-center py-8 text-muted-foreground border-2 border-dashed border-muted rounded-lg",onDragOver:X,onDrop:_=>I(_,null),children:"Nenhuma pendncia do cliente"}):l.jsx("div",{className:"space-y-3",children:A.cliente.pendentes.map(_=>l.jsx(W,{checklist:_},_.id))})})]}),l.jsxs(Me,{className:"dark:bg-card dark:border-border",children:[l.jsx(Ge,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Concludas"}),l.jsx(Be,{variant:"secondary",className:"dark:bg-secondary dark:text-secondary-foreground",children:A.cliente.concluidos.length})]})}),l.jsx(Ae,{children:A.cliente.concluidos.length===0?l.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma pendncia concluda"}):l.jsx("div",{className:"space-y-3",children:A.cliente.concluidos.map(_=>l.jsx(W,{checklist:_,showCompleted:!0},_.id))})})]})]})]})]})})}),l.jsx(Ohe,{isOpen:n,onClose:()=>r(!1),onSuccess:()=>{}}),l.jsx(w3,{isOpen:s,onClose:()=>o(!1),onSuccess:()=>{},allowCompanySelection:!0}),c&&l.jsx(S3,{isOpen:i,onClose:()=>a(!1),item:c,onSuccess:()=>{}}),l.jsx(ai,{open:d,onOpenChange:f,children:l.jsxs(uo,{className:"dark:bg-card dark:border-border",children:[l.jsxs(fo,{children:[l.jsx(po,{className:"text-foreground",children:"Confirmar Excluso"}),l.jsx(mo,{className:"text-muted-foreground",children:"Tem certeza que deseja excluir este checklist? Esta ao no pode ser desfeita."})]}),l.jsxs(ho,{children:[l.jsx(vo,{className:"dark:bg-secondary dark:text-secondary-foreground dark:hover:bg-secondary/80",children:"Cancelar"}),l.jsx(go,{onClick:T,className:"bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700",children:"Excluir"})]})]})})]})};var Jy="Switch",[Lhe,Mge]=nr(Jy),[Fhe,$he]=Lhe(Jy),az=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:i,disabled:a,value:c="on",onCheckedChange:u,form:d,...f}=t,[h,p]=g.useState(null),m=Ue(e,w=>p(w)),v=g.useRef(!1),b=h?d||!!h.closest("form"):!0,[x,y]=ni({prop:s,defaultProp:o??!1,onChange:u,caller:Jy});return l.jsxs(Fhe,{scope:n,checked:x,disabled:a,children:[l.jsx(je.button,{type:"button",role:"switch","aria-checked":x,"aria-required":i,"data-state":dz(x),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:m,onClick:le(t.onClick,w=>{y(S=>!S),b&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),b&&l.jsx(uz,{control:h,bubbles:!v.current,name:r,value:c,checked:x,required:i,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});az.displayName=Jy;var lz="SwitchThumb",cz=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=$he(lz,n);return l.jsx(je.span,{"data-state":dz(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});cz.displayName=lz;var zhe="SwitchBubbleInput",uz=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},o)=>{const i=g.useRef(null),a=Ue(i,o),c=ZC(n),u=ZS(e);return g.useEffect(()=>{const d=i.current;if(!d)return;const f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&p){const m=new Event("click",{bubbles:r});p.call(d,n),d.dispatchEvent(m)}},[c,n,r]),l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});uz.displayName=zhe;function dz(t){return t?"checked":"unchecked"}var fz=az,Bhe=cz;const q1=g.forwardRef(({className:t,...e},n)=>l.jsx(fz,{className:ue("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:l.jsx(Bhe,{className:ue("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));q1.displayName=fz.displayName;var jk="Progress",kk=100,[Vhe,Age]=nr(jk),[Uhe,Hhe]=Vhe(jk),hz=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=Whe,...i}=t;(s||s===0)&&!bM(s)&&console.error(qhe(`${s}`,"Progress"));const a=bM(s)?s:kk;r!==null&&!wM(r,a)&&console.error(Khe(`${r}`,"Progress"));const c=wM(r,a)?r:null,u=Tv(c)?o(c,a):void 0;return l.jsx(Uhe,{scope:n,value:c,max:a,children:l.jsx(je.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Tv(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":gz(c,a),"data-value":c??void 0,"data-max":a,...i,ref:e})})});hz.displayName=jk;var pz="ProgressIndicator",mz=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=Hhe(pz,n);return l.jsx(je.div,{"data-state":gz(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});mz.displayName=pz;function Whe(t,e){return`${Math.round(t/e*100)}%`}function gz(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Tv(t){return typeof t=="number"}function bM(t){return Tv(t)&&!isNaN(t)&&t>0}function wM(t,e){return Tv(t)&&!isNaN(t)&&t<=e&&t>=0}function qhe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kk}\`.`}function Khe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kk} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vz=hz,Ghe=mz;const yz=g.forwardRef(({className:t,value:e,...n},r)=>l.jsx(vz,{ref:r,className:ue("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:l.jsx(Ghe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));yz.displayName=vz.displayName;var Yhe="Separator",SM="horizontal",Qhe=["horizontal","vertical"],xz=g.forwardRef((t,e)=>{const{decorative:n,orientation:r=SM,...s}=t,o=Jhe(r)?r:SM,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return l.jsx(je.div,{"data-orientation":o,...a,...s,ref:e})});xz.displayName=Yhe;function Jhe(t){return Qhe.includes(t)}var bz=xz;const wz=g.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>l.jsx(bz,{ref:s,decorative:n,orientation:e,className:ue("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));wz.displayName=bz.displayName;const Xhe=({value:t,onChange:e})=>{const[n,r]=g.useState(12),[s,o]=g.useState(!0),[i,a]=g.useState(!0),[c,u]=g.useState(!0),[d,f]=g.useState(!0),[h,p]=g.useState(0),[m,v]=g.useState(""),[b,x]=g.useState(!1),y=C=>{let k=0;return C.length>=8&&(k+=25),C.length>=12&&(k+=25),/[a-z]/.test(C)&&(k+=10),/[A-Z]/.test(C)&&(k+=10),/[0-9]/.test(C)&&(k+=10),/[^A-Za-z0-9]/.test(C)&&(k+=20),Math.min(100,k)},w=C=>C<30?"Fraca":C<60?"Mdia":C<80?"Boa":"Forte";g.useEffect(()=>{const C=y(t);p(C),v(w(C))},[t]);const S=()=>{const C="abcdefghijklmnopqrstuvwxyz",k="ABCDEFGHIJKLMNOPQRSTUVWXYZ",N="0123456789",E="!@#$%^&*()_+-=[]{}|;:,.<>?";let A="";if(i&&(A+=C),s&&(A+=k),c&&(A+=N),d&&(A+=E),A===""){q.error("Selecione pelo menos um tipo de caractere!");return}let $="";for(let H=0;H<n;H++)$+=A.charAt(Math.floor(Math.random()*A.length));e($)},j=async()=>{try{await navigator.clipboard.writeText(t),x(!0),setTimeout(()=>x(!1),2e3),q.success("Senha copiada para rea de transferncia!")}catch{q.error("Erro ao copiar senha!")}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"password",children:"Senha Gerada"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"password",type:"text",value:t,onChange:C=>e(C.target.value),placeholder:"Senha ser gerada aqui...",className:"font-mono"}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:j,disabled:!t,children:b?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:S,children:l.jsx(MJ,{className:"h-4 w-4"})})]})]}),t&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Fora da senha:"}),l.jsx("span",{className:"font-medium",children:m})]}),l.jsx(yz,{value:h,className:"h-2"})]}),l.jsx(wz,{}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Q,{htmlFor:"length",children:["Comprimento: ",n]}),l.jsx("input",{id:"length",type:"range",min:"8",max:"32",value:n,onChange:C=>r(parseInt(C.target.value)),className:"w-full"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Nr,{id:"uppercase",checked:s,onCheckedChange:C=>o(C)}),l.jsx(Q,{htmlFor:"uppercase",children:"Letras maisculas (A-Z)"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Nr,{id:"lowercase",checked:i,onCheckedChange:C=>a(C)}),l.jsx(Q,{htmlFor:"lowercase",children:"Letras minsculas (a-z)"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Nr,{id:"numbers",checked:c,onCheckedChange:C=>u(C)}),l.jsx(Q,{htmlFor:"numbers",children:"Nmeros (0-9)"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Nr,{id:"symbols",checked:d,onCheckedChange:C=>f(C)}),l.jsx(Q,{htmlFor:"symbols",children:"Smbolos (!@#$%^&*)"})]})]})]})]})},Zhe=({isOpen:t,onClose:e,onSave:n,acesso:r,isLoading:s=!1})=>{const{empresas:o}=cn(),{perfil:i}=jt(),[a,c]=g.useState({nome:"",site:"",usuario:"",senha_criptografada:"",status:!0,empresa_id:"",notas:"",totp_secret:"",totp_enabled:!1}),[u,d]=g.useState(!1),[f,h]=g.useState({usuario:!1,senha:!1}),[p,m]=g.useState("dados");g.useEffect(()=>{c(r?{nome:r.nome||"",site:r.site||"",usuario:r.usuario||"",senha_criptografada:r.senha_criptografada||"",status:r.status??!0,empresa_id:r.empresa_id||"",notas:r.notas||"",totp_secret:r.totp_secret||"",totp_enabled:r.totp_enabled??!1}:{nome:"",site:"",usuario:"",senha_criptografada:"",status:!0,empresa_id:"",notas:"",totp_secret:"",totp_enabled:!1})},[r,i]);const v=y=>{if(y.preventDefault(),!a.nome.trim()){q.error("Nome  obrigatrio!");return}if(!a.site.trim()){q.error("Site  obrigatrio!");return}if(!a.usuario.trim()){q.error("Usurio  obrigatrio!");return}if(!a.senha_criptografada.trim()){q.error("Senha  obrigatria!");return}if(!a.empresa_id){q.error("Empresa  obrigatria!");return}const w={...a,criado_por:r?r.criado_por:(i==null?void 0:i.id)||"",atualizado_por:(i==null?void 0:i.id)||"",ultimo_acesso:null};n(w)},b=async(y,w)=>{try{await navigator.clipboard.writeText(y),h({...f,[w]:!0}),setTimeout(()=>h({...f,[w]:!1}),2e3),q.success(`${w==="usuario"?"Usurio":"Senha"} copiado para rea de transferncia!`)}catch{q.error(`Erro ao copiar ${w}!`)}},x=()=>{if(a.site){const y=a.site.startsWith("http")?a.site:`https://${a.site}`;window.open(y,"_blank")}};return l.jsx(rr,{open:t,onOpenChange:e,children:l.jsxs(In,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:r?"Editar Acesso":"Novo Acesso"})}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs(dj,{value:p,onValueChange:m,children:[l.jsxs(jy,{className:"grid w-full grid-cols-2",children:[l.jsx(lh,{value:"dados",children:"Dados do Acesso"}),l.jsx(lh,{value:"senha",children:"Gerador de Senha"})]}),l.jsxs(ch,{value:"dados",className:"space-y-4 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"nome",children:"Nome *"}),l.jsx(we,{id:"nome",value:a.nome,onChange:y=>c({...a,nome:y.target.value}),placeholder:"Ex: Facebook Business",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"site",children:"Site *"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"site",value:a.site,onChange:y=>c({...a,site:y.target.value}),placeholder:"Ex: facebook.com/business",required:!0}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:x,disabled:!a.site,children:l.jsx(QC,{className:"h-4 w-4"})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"usuario",children:"Usurio *"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"usuario",value:a.usuario,onChange:y=>c({...a,usuario:y.target.value}),placeholder:"Email ou nome de usurio",required:!0}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:()=>b(a.usuario,"usuario"),disabled:!a.usuario,children:f.usuario?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"senha",children:"Senha *"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"senha",type:u?"text":"password",value:a.senha_criptografada,onChange:y=>c({...a,senha_criptografada:y.target.value}),placeholder:"Senha do acesso",required:!0}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:()=>d(!u),children:u?l.jsx(fy,{className:"h-4 w-4"}):l.jsx(Vl,{className:"h-4 w-4"})}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:()=>b(a.senha_criptografada,"senha"),disabled:!a.senha_criptografada,children:f.senha?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"empresa",children:"Empresa *"}),l.jsxs(Oe,{value:a.empresa_id,onValueChange:y=>c({...a,empresa_id:y}),children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecionar empresa"})}),l.jsx(De,{children:o.map(y=>l.jsx(z,{value:y.id,children:y.nome},y.id))})]})]}),l.jsxs("div",{className:"space-y-2 flex items-center justify-between",children:[l.jsx(Q,{htmlFor:"status",children:"Status Ativo"}),l.jsx(q1,{id:"status",checked:a.status,onCheckedChange:y=>c({...a,status:y})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(q1,{checked:a.totp_enabled,onCheckedChange:y=>c({...a,totp_enabled:y})}),l.jsx(Q,{children:"Habilitar 2FA (TOTP)"})]}),a.totp_enabled&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"totp_secret",children:"Chave Secreta TOTP"}),l.jsx("div",{className:"flex space-x-2",children:l.jsx(we,{id:"totp_secret",value:a.totp_secret,onChange:y=>c({...a,totp_secret:y.target.value}),placeholder:"Chave secreta do autenticador"})}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Cole aqui a chave secreta (Secret Key) gerada pelo site"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Q,{htmlFor:"notas",children:"Notas"}),l.jsx(ic,{id:"notas",value:a.notas,onChange:y=>c({...a,notas:y.target.value}),placeholder:"Notas adicionais sobre o acesso...",rows:3})]})]}),l.jsx(ch,{value:"senha",className:"mt-4",children:l.jsx(Xhe,{value:a.senha_criptografada,onChange:y=>c({...a,senha_criptografada:y})})})]}),l.jsxs(Qh,{children:[l.jsx(G,{type:"button",variant:"outline",onClick:e,children:"Cancelar"}),l.jsx(G,{type:"submit",disabled:s,children:s?"Salvando...":r?"Atualizar":"Criar"})]})]})]})})},epe=()=>{var ee;const t=ud(),{signOut:e,perfil:n}=jt(),{acessos:r,isLoading:s,createAcesso:o,updateAcesso:i,toggleStatusAcesso:a,registrarUltimoAcesso:c}=V3(),{isFavorito:u,toggleFavorito:d}=U3(),{empresas:f}=cn(),{getNomeUsuario:h}=On(),[p,m]=g.useState(""),[v,b]=g.useState("all");g.useState("all");const[x,y]=g.useState(!1),[w,S]=g.useState(null),[j,C]=g.useState(!1),[k,N]=g.useState(null),[E,A]=g.useState(new Set),[$,H]=g.useState({}),O=async()=>{try{await e(),t("/login")}catch(M){console.error("Erro ao fazer logout:",M),t("/login")}},V=g.useMemo(()=>r.filter(M=>{const F=M.nome.toLowerCase().includes(p.toLowerCase())||M.site.toLowerCase().includes(p.toLowerCase())||M.usuario.toLowerCase().includes(p.toLowerCase()),Y=v==="all"||M.empresa_id===v,oe=!x||u(M.id);return F&&Y&&oe}),[r,p,v,x,u]),B=M=>{try{return`https://www.google.com/s2/favicons?domain=${new URL(M.startsWith("http")?M:`https://${M}`).hostname}&sz=64`}catch{return null}},K=M=>({social:Sr,ads:bI,analytics:_g,email:uu,hosting:xI,domain:Sr,payment:uu,crm:_g,other:Sr})[M]||Sr,R=()=>{N(null),C(!0)},T=M=>{N(M),C(!0)},D=async M=>{try{k?await i.mutateAsync({id:k.id,dados:M}):await o.mutateAsync(M),C(!1),N(null)}catch(F){console.error("Erro ao salvar acesso:",F)}},L=async M=>{await d.mutateAsync(M)},X=M=>{const F=new Set(E);F.has(M)?F.delete(M):F.add(M),A(F)},I=async(M,F,Y)=>{try{await navigator.clipboard.writeText(M),H({...$,[`${F}-${Y}`]:Y}),setTimeout(()=>{H(oe=>{const se={...oe};return delete se[`${F}-${Y}`],se})},2e3),q.success(`${Y==="usuario"?"Usurio":"Senha"} copiado!`),Y==="senha"&&c.mutate(F)}catch{q.error("Erro ao copiar!")}},W=M=>{const F=M.startsWith("http")?M:`https://${M}`;window.open(F,"_blank")},_=w?r.find(M=>M.id===w):null;return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs("div",{className:"flex min-h-screen bg-background",children:[l.jsx("div",{className:"fixed",children:l.jsx(Rn,{userType:"team",onLogout:O})}),l.jsxs("main",{className:"flex-1 flex overflow-hidden ml-64",children:[l.jsxs("div",{className:"w-1/3 border-r border-border flex flex-col",children:[l.jsxs("div",{className:"p-6 border-b border-border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"Acessos"}),l.jsxs(G,{onClick:R,size:"sm",children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Novo Acesso"]})]}),l.jsxs("div",{className:"relative mb-4",children:[l.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Pesquisar acessos...",value:p,onChange:M=>m(M.target.value),className:"pl-10"})]}),l.jsx("div",{className:"mb-4",children:l.jsxs(Oe,{value:v,onValueChange:b,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Todas empresas"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas empresas"}),f.map(M=>l.jsx(z,{value:M.id,children:M.nome},M.id))]})]})}),l.jsx("div",{className:"flex gap-2",children:l.jsxs(G,{variant:x?"default":"outline",size:"sm",onClick:()=>y(!x),children:[l.jsx(Mg,{className:"h-4 w-4 mr-1"}),"Favoritos"]})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[V.map(M=>{const F=f.find(pe=>pe.id===M.empresa_id),Y=B(M.site),oe=K(M.categoria||"other"),se=w===M.id;return l.jsx("div",{className:`p-4 border-b border-border cursor-pointer hover:bg-muted/50 transition-colors ${se?"bg-muted border-l-4 border-l-primary":""}`,onClick:()=>S(M.id),children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-lg overflow-hidden bg-muted flex items-center justify-center flex-shrink-0",children:Y?l.jsx("img",{src:Y,alt:`${M.nome} favicon`,className:"w-6 h-6",onError:pe=>{const ke=pe.target;ke.parentElement.innerHTML=`<div class="h-5 w-5 text-muted-foreground">${Sr}</div>`}}):l.jsx(oe,{className:"h-5 w-5 text-muted-foreground"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("h3",{className:"font-medium text-sm truncate",children:M.nome}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(G,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:pe=>{pe.stopPropagation(),L(M.id)},children:u(M.id)?l.jsx(Mg,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}):l.jsx(wI,{className:"h-3 w-3 text-muted-foreground"})}),l.jsx(Be,{variant:M.status?"default":"secondary",className:"text-xs",children:M.status?"Ativo":"Inativo"})]})]}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:M.site}),l.jsx("p",{className:"text-xs text-muted-foreground truncate",children:M.usuario}),l.jsx("p",{className:"text-xs text-muted-foreground",children:F==null?void 0:F.nome})]})]})},M.id)}),V.length===0&&l.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[l.jsx(Sr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Nenhum acesso encontrado"}),l.jsx("p",{className:"text-sm",children:"Tente ajustar os filtros ou criar um novo acesso"})]})]})]}),l.jsx("div",{className:"flex-1 flex flex-col",children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-6 border-b border-border",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:(()=>{const M=B(_.site);return K(_.categoria||"other"),l.jsx("img",{src:M||"",alt:`${_.nome} favicon`,className:"w-8 h-8",onError:F=>{const Y=F.target;Y.outerHTML='<div class="flex items-center justify-center w-12 h-12"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-muted-foreground"><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg></div>'}})})()}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:_.nome}),l.jsx("p",{className:"text-muted-foreground",children:_.site})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(G,{variant:"outline",size:"sm",onClick:()=>W(_.site),children:[l.jsx(QC,{className:"h-4 w-4 mr-2"}),"Abrir Site"]}),l.jsxs(G,{variant:"outline",size:"sm",onClick:()=>T(_),children:[l.jsx(Ul,{className:"h-4 w-4 mr-2"}),"Editar"]}),l.jsx(G,{variant:"outline",size:"sm",onClick:()=>a.mutate({id:_.id,status:!_.status}),children:_.status?"Desativar":"Ativar"})]})]})}),l.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{className:"text-lg",children:"Credenciais"})}),l.jsxs(Ae,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Usurio"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(we,{value:_.usuario,readOnly:!0,className:"font-mono"}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>I(_.usuario,_.id,"usuario"),children:$[`${_.id}-usuario`]?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Senha"}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx(we,{type:E.has(_.id)?"text":"password",value:_.senha_criptografada,readOnly:!0,className:"font-mono"}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>X(_.id),children:E.has(_.id)?l.jsx(fy,{className:"h-4 w-4"}):l.jsx(Vl,{className:"h-4 w-4"})}),l.jsx(G,{variant:"outline",size:"icon",onClick:()=>I(_.senha_criptografada,_.id,"senha"),children:$[`${_.id}-senha`]?l.jsx(Ar,{className:"h-4 w-4"}):l.jsx(co,{className:"h-4 w-4"})})]})]}),_.totp_enabled&&_.totp_secret&&l.jsx(nF,{secret:_.totp_secret,issuer:"DMM",label:_.nome})]})]}),l.jsxs(Me,{children:[l.jsx(Ge,{children:l.jsx(nt,{className:"text-lg",children:"Informaes"})}),l.jsxs(Ae,{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),l.jsx("div",{className:"mt-1",children:l.jsx(Be,{variant:_.status?"default":"secondary",children:_.status?"Ativo":"Inativo"})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Empresa"}),l.jsx("p",{className:"text-sm mt-1",children:(ee=f.find(M=>M.id===_.empresa_id))==null?void 0:ee.nome})]}),_.notas&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notas"}),l.jsx("p",{className:"text-sm mt-1 whitespace-pre-wrap",children:_.notas})]})]})]}),l.jsxs(Me,{className:"col-span-2",children:[l.jsx(Ge,{children:l.jsx(nt,{className:"text-lg",children:"Histrico"})}),l.jsx(Ae,{children:l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-medium text-muted-foreground",children:"Criado em"}),l.jsx("p",{children:wn(new Date(_.criado_em),"dd/MM/yyyy HH:mm",{locale:pu})}),l.jsxs("p",{className:"text-muted-foreground",children:["por ",h(_.criado_por)]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-medium text-muted-foreground",children:"Atualizado em"}),l.jsx("p",{children:wn(new Date(_.atualizado_em),"dd/MM/yyyy HH:mm",{locale:pu})}),l.jsxs("p",{className:"text-muted-foreground",children:["por ",h(_.atualizado_por||"")]})]}),_.ultimo_acesso&&l.jsxs("div",{className:"col-span-2",children:[l.jsx("label",{className:"font-medium text-muted-foreground",children:"ltimo acesso"}),l.jsx("p",{children:wn(new Date(_.ultimo_acesso),"dd/MM/yyyy HH:mm",{locale:pu})})]})]})})]})]})})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:l.jsxs("div",{className:"text-center",children:[l.jsx(uu,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),l.jsx("h3",{className:"text-lg font-medium mb-2",children:"Selecione um acesso"}),l.jsx("p",{children:"Escolha um acesso na lista para ver os detalhes"})]})})})]}),l.jsx(Zhe,{isOpen:j,onClose:()=>{C(!1),N(null)},onSave:D,acesso:k,isLoading:o.isPending||i.isPending})]})},tpe=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["clientes"],queryFn:async()=>{const{data:a,error:c}=await re.from("empresas").select("*").order("nome");if(c)throw c;return a.map(u=>({...u,servicos:Array.isArray(u.servicos)?u.servicos:[]}))}}),r=Qe({mutationFn:async a=>{const{data:{user:c}}=await re.auth.getUser(),{data:u}=await re.from("perfis").select("id").eq("email",(c==null?void 0:c.email)||"").single(),{data:d}=await re.from("empresas").select("id").eq("nome",a.nome).maybeSingle();if(d)throw new Error("J existe um cliente com este nome");const f=a.nome.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),h=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),{data:p,error:m}=await re.from("empresas").insert({nome:a.nome,slug:f,descricao:a.descricao,criado_por:u==null?void 0:u.id,nome_decisor:a.decisores,status:a.status,site:a.site,valor_projeto:a.valor_projeto,servicos:a.servicos,tipo_contrato:a.tipo_contrato,data_inicio:a.data_inicio,data_encerramento:a.data_encerramento,senha:h}).select().single();if(m)throw m;return{...p,senhaAleatoria:h}},onSuccess:()=>{t.invalidateQueries({queryKey:["clientes"]})},onError:a=>{q.error(a.message||"Erro ao criar cliente")}}),s=Qe({mutationFn:async({id:a,cliente:c})=>{const{data:u}=await re.from("empresas").select("id").eq("nome",c.nome).neq("id",a).maybeSingle();if(u)throw new Error("J existe um cliente com este nome");const d=c.nome.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),{data:f,error:h}=await re.from("empresas").update({nome:c.nome,slug:d,descricao:c.descricao,nome_decisor:c.decisores,status:c.status,site:c.site,valor_projeto:c.valor_projeto,servicos:c.servicos,tipo_contrato:c.tipo_contrato,data_inicio:c.data_inicio,data_encerramento:c.data_encerramento}).eq("id",a).select().single();if(h)throw h;return f},onSuccess:()=>{t.invalidateQueries({queryKey:["clientes"]}),q.success("Cliente atualizado com sucesso!")},onError:a=>{q.error(a.message||"Erro ao atualizar cliente")}}),o=Qe({mutationFn:async a=>{const{data:c}=await re.from("acessos").select("id").eq("empresa_id",a),{data:u}=await re.from("tarefas").select("id").eq("empresa_id",a),{data:d}=await re.from("itens_checklist").select("id").eq("empresa_id",a);if(c&&c.length>0||u&&u.length>0||d&&d.length>0)throw new Error("No  possvel excluir este cliente pois existem registros associados. Para excluir o cliente, primeiro exclua todos os acessos de sistemas (pgina Access-Team), tarefas e checklists vinculados a este cliente.");const{data:f}=await re.from("perfis").select("id, email").eq("empresa_id",a);if(f&&f.length>0&&await re.from("perfis").update({principal:!1}).eq("empresa_id",a),f&&f.length>0)for(const p of f)try{const m=await re.functions.invoke("delete-auth-user",{body:{email:p.email}});m.error&&console.error("Erro ao deletar usurio:",p.email,m.error)}catch(m){console.error("Erro ao deletar usurio:",p.email,m)}const{error:h}=await re.from("empresas").delete().eq("id",a);if(h)throw h},onSuccess:()=>{t.invalidateQueries({queryKey:["clientes"]}),q.success("Cliente excludo com sucesso!")},onError:a=>{q.error(a.message||"Erro ao excluir cliente")}}),i=Qe({mutationFn:async a=>{const c=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),{data:u,error:d}=await re.from("empresas").update({senha:c}).eq("id",a).select().single();if(d)throw d;return{...u,senhaAleatoria:c}},onSuccess:a=>{t.invalidateQueries({queryKey:["clientes"]}),q.success(`Senha resetada! Nova senha: ${a.senhaAleatoria}`)},onError:a=>{q.error(a.message||"Erro ao resetar senha")}});return{clientes:e,isLoading:n,createCliente:r,updateCliente:s,deleteCliente:o,resetarSenha:i}};var Ee=function(){return Ee=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ee.apply(this,arguments)};function npe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Sz(t,e,n){for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function fp(t){return t.mode==="multiple"}function hp(t){return t.mode==="range"}function Xy(t){return t.mode==="single"}var rpe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function spe(t,e){return wn(t,"LLLL y",e)}function ope(t,e){return wn(t,"d",e)}function ipe(t,e){return wn(t,"LLLL",e)}function ape(t){return"".concat(t)}function lpe(t,e){return wn(t,"cccccc",e)}function cpe(t,e){return wn(t,"yyyy",e)}var upe=Object.freeze({__proto__:null,formatCaption:spe,formatDay:ope,formatMonthCaption:ipe,formatWeekNumber:ape,formatWeekdayName:lpe,formatYearCaption:cpe}),dpe=function(t,e,n){return wn(t,"do MMMM (EEEE)",n)},fpe=function(){return"Month: "},hpe=function(){return"Go to next month"},ppe=function(){return"Go to previous month"},mpe=function(t,e){return wn(t,"cccc",e)},gpe=function(t){return"Week n. ".concat(t)},vpe=function(){return"Year: "},ype=Object.freeze({__proto__:null,labelDay:dpe,labelMonthDropdown:fpe,labelNext:hpe,labelPrevious:ppe,labelWeekNumber:gpe,labelWeekday:mpe,labelYearDropdown:vpe});function xpe(){var t="buttons",e=rpe,n=aF,r={},s={},o=1,i={},a=new Date;return{captionLayout:t,classNames:e,formatters:upe,labels:ype,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:o,styles:i,today:a,mode:"default"}}function bpe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,s=t.toMonth,o=t.fromDate,i=t.toDate;return r?o=yr(r):e&&(o=new Date(e,0,1)),s?i=_j(s):n&&(i=new Date(n,11,31)),{fromDate:o?Ku(o):void 0,toDate:i?Ku(i):void 0}}var Cz=g.createContext(void 0);function wpe(t){var e,n=t.initialProps,r=xpe(),s=bpe(n),o=s.fromDate,i=s.toDate,a=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!o||!i)&&(a="buttons");var c;(Xy(n)||fp(n)||hp(n))&&(c=n.onSelect);var u=Ee(Ee(Ee({},r),n),{captionLayout:a,classNames:Ee(Ee({},r.classNames),n.classNames),components:Ee({},n.components),formatters:Ee(Ee({},r.formatters),n.formatters),fromDate:o,labels:Ee(Ee({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Ee(Ee({},r.modifiers),n.modifiers),modifiersClassNames:Ee(Ee({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Ee(Ee({},r.styles),n.styles),toDate:i});return l.jsx(Cz.Provider,{value:u,children:t.children})}function lt(){var t=g.useContext(Cz);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function jz(t){var e=lt(),n=e.locale,r=e.classNames,s=e.styles,o=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:o(t.displayMonth,{locale:n})})}function Spe(t){return l.jsx("svg",Ee({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function kz(t){var e,n,r=t.onChange,s=t.value,o=t.children,i=t.caption,a=t.className,c=t.style,u=lt(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:Spe;return l.jsxs("div",{className:a,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:o}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Cpe(t){var e,n=lt(),r=n.fromDate,s=n.toDate,o=n.styles,i=n.locale,a=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});var f=[];if(Wre(r,s))for(var h=yr(r),p=r.getMonth();p<=s.getMonth();p++)f.push(p0(h,p));else for(var h=yr(new Date),p=0;p<=11;p++)f.push(p0(h,p));var m=function(b){var x=Number(b.target.value),y=p0(yr(t.displayMonth),x);t.onChange(y)},v=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:kz;return l.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:o.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:a(t.displayMonth,{locale:i}),children:f.map(function(b){return l.jsx("option",{value:b.getMonth(),children:a(b,{locale:i})},b.getMonth())})})}function jpe(t){var e,n=t.displayMonth,r=lt(),s=r.fromDate,o=r.toDate,i=r.locale,a=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!s)return l.jsx(l.Fragment,{});if(!o)return l.jsx(l.Fragment,{});for(var p=s.getFullYear(),m=o.getFullYear(),v=p;v<=m;v++)h.push(LT(sF(new Date),v));var b=function(y){var w=LT(yr(n),Number(y.target.value));t.onChange(w)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:kz;return l.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:a.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:i}),children:h.map(function(y){return l.jsx("option",{value:y.getFullYear(),children:d(y,{locale:i})},y.getFullYear())})})}function kpe(t,e){var n=g.useState(t),r=n[0],s=n[1],o=e===void 0?r:e;return[o,s]}function Npe(t){var e=t.month,n=t.defaultMonth,r=t.today,s=e||n||r||new Date,o=t.toDate,i=t.fromDate,a=t.numberOfMonths,c=a===void 0?1:a;if(o&&hh(o,s)<0){var u=-1*(c-1);s=Ps(o,u)}return i&&hh(s,i)<0&&(s=i),yr(s)}function Epe(){var t=lt(),e=Npe(t),n=kpe(e,t.month),r=n[0],s=n[1],o=function(i){var a;if(!t.disableNavigation){var c=yr(i);s(c),(a=t.onMonthChange)===null||a===void 0||a.call(t,c)}};return[r,o]}function _pe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,s=yr(t),o=yr(Ps(s,r)),i=hh(o,s),a=[],c=0;c<i;c++){var u=Ps(s,c);a.push(u)}return n&&(a=a.reverse()),a}function Tpe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=r?o:1,a=yr(t);if(!n)return Ps(a,i);var c=hh(n,t);if(!(c<o))return Ps(a,i)}}function Mpe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,o=s===void 0?1:s,i=r?o:1,a=yr(t);if(!n)return Ps(a,-i);var c=hh(a,n);if(!(c<=0))return Ps(a,-i)}}var Nz=g.createContext(void 0);function Ape(t){var e=lt(),n=Epe(),r=n[0],s=n[1],o=_pe(r,e),i=Tpe(r,e),a=Mpe(r,e),c=function(f){return o.some(function(h){return Mj(f,h)})},u=function(f,h){c(f)||(h&&fF(f,h)?s(Ps(f,1+e.numberOfMonths*-1)):s(f))},d={currentMonth:r,displayMonths:o,goToMonth:s,goToDate:u,previousMonth:a,nextMonth:i,isDateDisplayed:c};return l.jsx(Nz.Provider,{value:d,children:t.children})}function pp(){var t=g.useContext(Nz);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function CM(t){var e,n=lt(),r=n.classNames,s=n.styles,o=n.components,i=pp().goToMonth,a=function(d){i(Ps(d,t.displayIndex?-t.displayIndex:0))},c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:jz,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(Cpe,{onChange:a,displayMonth:t.displayMonth}),l.jsx(jpe,{onChange:a,displayMonth:t.displayMonth})]})}function Ppe(t){return l.jsx("svg",Ee({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dpe(t){return l.jsx("svg",Ee({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Mv=g.forwardRef(function(t,e){var n=lt(),r=n.classNames,s=n.styles,o=[r.button_reset,r.button];t.className&&o.push(t.className);var i=o.join(" "),a=Ee(Ee({},s.button_reset),s.button);return t.style&&Object.assign(a,t.style),l.jsx("button",Ee({},t,{ref:e,type:"button",className:i,style:a}))});function Rpe(t){var e,n,r=lt(),s=r.dir,o=r.locale,i=r.classNames,a=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var h=u(t.previousMonth,{locale:o}),p=[i.nav_button,i.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:o}),v=[i.nav_button,i.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:Dpe,x=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:Ppe;return l.jsxs("div",{className:i.nav,style:a.nav,children:[!t.hidePrevious&&l.jsx(Mv,{name:"previous-month","aria-label":h,className:p,style:a.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:s==="rtl"?l.jsx(b,{className:i.nav_icon,style:a.nav_icon}):l.jsx(x,{className:i.nav_icon,style:a.nav_icon})}),!t.hideNext&&l.jsx(Mv,{name:"next-month","aria-label":m,className:v,style:a.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:s==="rtl"?l.jsx(x,{className:i.nav_icon,style:a.nav_icon}):l.jsx(b,{className:i.nav_icon,style:a.nav_icon})})]})}function jM(t){var e=lt().numberOfMonths,n=pp(),r=n.previousMonth,s=n.nextMonth,o=n.goToMonth,i=n.displayMonths,a=i.findIndex(function(m){return Mj(t.displayMonth,m)}),c=a===0,u=a===i.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){r&&o(r)},p=function(){s&&o(s)};return l.jsx(Rpe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:h,onNextClick:p})}function Ope(t){var e,n=lt(),r=n.classNames,s=n.disableNavigation,o=n.styles,i=n.captionLayout,a=n.components,c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:jz,u;return s?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?u=l.jsx(CM,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(CM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(jM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(jM,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:r.caption,style:o.caption,children:u})}function Ipe(t){var e=lt(),n=e.footer,r=e.styles,s=e.classNames.tfoot;return n?l.jsx("tfoot",{className:s,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function Lpe(t,e,n){for(var r=n?Kl(new Date):xo(new Date,{locale:t,weekStartsOn:e}),s=[],o=0;o<7;o++){var i=Kn(r,o);s.push(i)}return s}function Fpe(){var t=lt(),e=t.classNames,n=t.styles,r=t.showWeekNumber,s=t.locale,o=t.weekStartsOn,i=t.ISOWeek,a=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=Lpe(s,o,i);return l.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:s}),children:a(d,{locale:s})},f)})]})}function $pe(){var t,e=lt(),n=e.classNames,r=e.styles,s=e.components,o=(t=s==null?void 0:s.HeadRow)!==null&&t!==void 0?t:Fpe;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(o,{})})}function zpe(t){var e=lt(),n=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(t.date,{locale:n})})}var Nk=g.createContext(void 0);function Bpe(t){if(!fp(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(Nk.Provider,{value:e,children:t.children})}return l.jsx(Vpe,{initialProps:t.initialProps,children:t.children})}function Vpe(t){var e=t.initialProps,n=t.children,r=e.selected,s=e.min,o=e.max,i=function(u,d,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var m=!!(d.selected&&s&&(r==null?void 0:r.length)===s);if(!m){var v=!!(!d.selected&&o&&(r==null?void 0:r.length)===o);if(!v){var b=r?Sz([],r):[];if(d.selected){var x=b.findIndex(function(y){return pr(u,y)});b.splice(x,1)}else b.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,b,u,d,f)}}},a={disabled:[]};r&&a.disabled.push(function(u){var d=o&&r.length>o-1,f=r.some(function(h){return pr(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:i,modifiers:a};return l.jsx(Nk.Provider,{value:c,children:n})}function Ek(){var t=g.useContext(Nk);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function Upe(t,e){var n=e||{},r=n.from,s=n.to;return r&&s?pr(s,t)&&pr(r,t)?void 0:pr(s,t)?{from:s,to:void 0}:pr(r,t)?void 0:c1(r,t)?{from:t,to:s}:{from:r,to:t}:s?c1(t,s)?{from:s,to:t}:{from:t,to:s}:r?fF(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var _k=g.createContext(void 0);function Hpe(t){if(!hp(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(_k.Provider,{value:e,children:t.children})}return l.jsx(Wpe,{initialProps:t.initialProps,children:t.children})}function Wpe(t){var e=t.initialProps,n=t.children,r=e.selected,s=r||{},o=s.from,i=s.to,a=e.min,c=e.max,u=function(p,m,v){var b,x;(b=e.onDayClick)===null||b===void 0||b.call(e,p,m,v);var y=Upe(p,r);(x=e.onSelect)===null||x===void 0||x.call(e,y,p,m,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(d.range_start=[o],i?(d.range_end=[i],pr(o,i)||(d.range_middle=[{after:o,before:i}])):d.range_end=[o]):i&&(d.range_start=[i],d.range_end=[i]),a&&(o&&!i&&d.disabled.push({after:h0(o,a-1),before:Kn(o,a-1)}),o&&i&&d.disabled.push({after:o,before:Kn(o,a-1)}),!o&&i&&d.disabled.push({after:h0(i,a-1),before:Kn(i,a-1)})),c){if(o&&!i&&(d.disabled.push({before:Kn(o,-c+1)}),d.disabled.push({after:Kn(o,c-1)})),o&&i){var f=to(i,o)+1,h=c-f;d.disabled.push({before:h0(o,h)}),d.disabled.push({after:Kn(i,h)})}!o&&i&&(d.disabled.push({before:Kn(i,-c+1)}),d.disabled.push({after:Kn(i,c-1)}))}return l.jsx(_k.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function Tk(){var t=g.useContext(_k);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Lm(t){return Array.isArray(t)?Sz([],t):t!==void 0?[t]:[]}function qpe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],s=n[1];e[r]=Lm(s)}),e}var Rs;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Rs||(Rs={}));var Kpe=Rs.Selected,Ro=Rs.Disabled,Gpe=Rs.Hidden,Ype=Rs.Today,q0=Rs.RangeEnd,K0=Rs.RangeMiddle,G0=Rs.RangeStart,Qpe=Rs.Outside;function Jpe(t,e,n){var r,s=(r={},r[Kpe]=Lm(t.selected),r[Ro]=Lm(t.disabled),r[Gpe]=Lm(t.hidden),r[Ype]=[t.today],r[q0]=[],r[K0]=[],r[G0]=[],r[Qpe]=[],r);return t.fromDate&&s[Ro].push({before:t.fromDate}),t.toDate&&s[Ro].push({after:t.toDate}),fp(t)?s[Ro]=s[Ro].concat(e.modifiers[Ro]):hp(t)&&(s[Ro]=s[Ro].concat(n.modifiers[Ro]),s[G0]=n.modifiers[G0],s[K0]=n.modifiers[K0],s[q0]=n.modifiers[q0]),s}var Ez=g.createContext(void 0);function Xpe(t){var e=lt(),n=Ek(),r=Tk(),s=Jpe(e,n,r),o=qpe(e.modifiers),i=Ee(Ee({},s),o);return l.jsx(Ez.Provider,{value:i,children:t.children})}function _z(){var t=g.useContext(Ez);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function Zpe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function eme(t){return!!(t&&typeof t=="object"&&"from"in t)}function tme(t){return!!(t&&typeof t=="object"&&"after"in t)}function nme(t){return!!(t&&typeof t=="object"&&"before"in t)}function rme(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function sme(t,e){var n,r=e.from,s=e.to;if(r&&s){var o=to(s,r)<0;o&&(n=[s,r],r=n[0],s=n[1]);var i=to(t,r)>=0&&to(s,t)>=0;return i}return s?pr(s,t):r?pr(r,t):!1}function ome(t){return Ej(t)}function ime(t){return Array.isArray(t)&&t.every(Ej)}function ame(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(ome(n))return pr(t,n);if(ime(n))return n.includes(t);if(eme(n))return sme(t,n);if(rme(n))return n.dayOfWeek.includes(t.getDay());if(Zpe(n)){var r=to(n.before,t),s=to(n.after,t),o=r>0,i=s<0,a=c1(n.before,n.after);return a?i&&o:o||i}return tme(n)?to(t,n.after)>0:nme(n)?to(n.before,t)>0:typeof n=="function"?n(t):!1})}function Mk(t,e,n){var r=Object.keys(e).reduce(function(o,i){var a=e[i];return ame(t,a)&&o.push(i),o},[]),s={};return r.forEach(function(o){return s[o]=!0}),n&&!Mj(t,n)&&(s.outside=!0),s}function lme(t,e){for(var n=yr(t[0]),r=_j(t[t.length-1]),s,o,i=n;i<=r;){var a=Mk(i,e),c=!a.disabled&&!a.hidden;if(!c){i=Kn(i,1);continue}if(a.selected)return i;a.today&&!o&&(o=i),s||(s=i),i=Kn(i,1)}return o||s}var cme=365;function Tz(t,e){var n=e.moveBy,r=e.direction,s=e.context,o=e.modifiers,i=e.retry,a=i===void 0?{count:0,lastFocused:t}:i,c=s.weekStartsOn,u=s.fromDate,d=s.toDate,f=s.locale,h={day:Kn,week:l1,month:Ps,year:Vne,startOfWeek:function(b){return s.ISOWeek?Kl(b):xo(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return s.ISOWeek?oF(b):Tj(b,{locale:f,weekStartsOn:c})}},p=h[n](t,r==="after"?1:-1);r==="before"&&u?p=Une([u,p]):r==="after"&&d&&(p=Hne([d,p]));var m=!0;if(o){var v=Mk(p,o);m=!v.disabled&&!v.hidden}return m?p:a.count>cme?a.lastFocused:Tz(p,{moveBy:n,direction:r,context:s,modifiers:o,retry:Ee(Ee({},a),{count:a.count+1})})}var Mz=g.createContext(void 0);function ume(t){var e=pp(),n=_z(),r=g.useState(),s=r[0],o=r[1],i=g.useState(),a=i[0],c=i[1],u=lme(e.displayMonths,n),d=s??(a&&e.isDateDisplayed(a))?a:u,f=function(){c(s),o(void 0)},h=function(b){o(b)},p=lt(),m=function(b,x){if(s){var y=Tz(s,{moveBy:b,direction:x,context:p,modifiers:n});pr(s,y)||(e.goToDate(y,s),h(y))}},v={focusedDay:s,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return l.jsx(Mz.Provider,{value:v,children:t.children})}function Ak(){var t=g.useContext(Mz);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function dme(t,e){var n=_z(),r=Mk(t,n,e);return r}var Pk=g.createContext(void 0);function fme(t){if(!Xy(t.initialProps)){var e={selected:void 0};return l.jsx(Pk.Provider,{value:e,children:t.children})}return l.jsx(hme,{initialProps:t.initialProps,children:t.children})}function hme(t){var e=t.initialProps,n=t.children,r=function(o,i,a){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,o,i,a),i.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,o,i,a);return}(d=e.onSelect)===null||d===void 0||d.call(e,o,o,i,a)},s={selected:e.selected,onDayClick:r};return l.jsx(Pk.Provider,{value:s,children:n})}function Az(){var t=g.useContext(Pk);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function pme(t,e){var n=lt(),r=Az(),s=Ek(),o=Tk(),i=Ak(),a=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,d=i.focusWeekBefore,f=i.blur,h=i.focus,p=i.focusMonthBefore,m=i.focusMonthAfter,v=i.focusYearBefore,b=i.focusYearAfter,x=i.focusStartOfWeek,y=i.focusEndOfWeek,w=function(R){var T,D,L,X;Xy(n)?(T=r.onDayClick)===null||T===void 0||T.call(r,t,e,R):fp(n)?(D=s.onDayClick)===null||D===void 0||D.call(s,t,e,R):hp(n)?(L=o.onDayClick)===null||L===void 0||L.call(o,t,e,R):(X=n.onDayClick)===null||X===void 0||X.call(n,t,e,R)},S=function(R){var T;h(t),(T=n.onDayFocus)===null||T===void 0||T.call(n,t,e,R)},j=function(R){var T;f(),(T=n.onDayBlur)===null||T===void 0||T.call(n,t,e,R)},C=function(R){var T;(T=n.onDayMouseEnter)===null||T===void 0||T.call(n,t,e,R)},k=function(R){var T;(T=n.onDayMouseLeave)===null||T===void 0||T.call(n,t,e,R)},N=function(R){var T;(T=n.onDayPointerEnter)===null||T===void 0||T.call(n,t,e,R)},E=function(R){var T;(T=n.onDayPointerLeave)===null||T===void 0||T.call(n,t,e,R)},A=function(R){var T;(T=n.onDayTouchCancel)===null||T===void 0||T.call(n,t,e,R)},$=function(R){var T;(T=n.onDayTouchEnd)===null||T===void 0||T.call(n,t,e,R)},H=function(R){var T;(T=n.onDayTouchMove)===null||T===void 0||T.call(n,t,e,R)},O=function(R){var T;(T=n.onDayTouchStart)===null||T===void 0||T.call(n,t,e,R)},V=function(R){var T;(T=n.onDayKeyUp)===null||T===void 0||T.call(n,t,e,R)},B=function(R){var T;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?a():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?c():a();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),d();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?v():p();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?b():m();break;case"Home":R.preventDefault(),R.stopPropagation(),x();break;case"End":R.preventDefault(),R.stopPropagation(),y();break}(T=n.onDayKeyDown)===null||T===void 0||T.call(n,t,e,R)},K={onClick:w,onFocus:S,onBlur:j,onKeyDown:B,onKeyUp:V,onMouseEnter:C,onMouseLeave:k,onPointerEnter:N,onPointerLeave:E,onTouchCancel:A,onTouchEnd:$,onTouchMove:H,onTouchStart:O};return K}function mme(){var t=lt(),e=Az(),n=Ek(),r=Tk(),s=Xy(t)?e.selected:fp(t)?n.selected:hp(t)?r.selected:void 0;return s}function gme(t){return Object.values(Rs).includes(t)}function vme(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var s=t.modifiersClassNames[r];if(s)n.push(s);else if(gme(r)){var o=t.classNames["day_".concat(r)];o&&n.push(o)}}),n}function yme(t,e){var n=Ee({},t.styles.day);return Object.keys(e).forEach(function(r){var s;n=Ee(Ee({},n),(s=t.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function xme(t,e,n){var r,s,o,i=lt(),a=Ak(),c=dme(t,e),u=pme(t,c),d=mme(),f=!!(i.onDayClick||i.mode!=="default");g.useEffect(function(){var C;c.outside||a.focusedDay&&f&&pr(a.focusedDay,t)&&((C=n.current)===null||C===void 0||C.focus())},[a.focusedDay,t,n,f,c.outside]);var h=vme(i,c).join(" "),p=yme(i,c),m=!!(c.outside&&!i.showOutsideDays||c.hidden),v=(o=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&o!==void 0?o:zpe,b=l.jsx(v,{date:t,displayMonth:e,activeModifiers:c}),x={style:p,className:h,children:b,role:"gridcell"},y=a.focusTarget&&pr(a.focusTarget,t)&&!c.outside,w=a.focusedDay&&pr(a.focusedDay,t),S=Ee(Ee(Ee({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||y?0:-1,r)),u),j={isButton:f,isHidden:m,activeModifiers:c,selectedDays:d,buttonProps:S,divProps:x};return j}function bme(t){var e=g.useRef(null),n=xme(t.date,t.displayMonth,e);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(Mv,Ee({name:"day",ref:e},n.buttonProps)):l.jsx("div",Ee({},n.divProps))}function wme(t){var e=t.number,n=t.dates,r=lt(),s=r.onWeekNumberClick,o=r.styles,i=r.classNames,a=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:a});if(!s)return l.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:d});var f=c(Number(e),{locale:a}),h=function(p){s(e,n,p)};return l.jsx(Mv,{name:"week-number","aria-label":f,className:i.weeknumber,style:o.weeknumber,onClick:h,children:d})}function Sme(t){var e,n,r=lt(),s=r.styles,o=r.classNames,i=r.showWeekNumber,a=r.components,c=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:bme,u=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:wme,d;return i&&(d=l.jsx("td",{className:o.cell,style:s.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:o.row,style:s.row,children:[d,t.dates.map(function(f){return l.jsx("td",{className:o.cell,style:s.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},Vre(f))})]})}function kM(t,e,n){for(var r=n!=null&&n.ISOWeek?oF(e):Tj(e,n),s=n!=null&&n.ISOWeek?Kl(t):xo(t,n),o=to(r,s),i=[],a=0;a<=o;a++)i.push(Kn(s,a));var c=i.reduce(function(u,d){var f=n!=null&&n.ISOWeek?lF(d):uF(d,n),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function Cme(t,e){var n=kM(yr(t),_j(t),e);if(e!=null&&e.useFixedWeeks){var r=Hre(t,e);if(r<6){var s=n[n.length-1],o=s.dates[s.dates.length-1],i=l1(o,6-r),a=kM(l1(o,1),i,e);n.push.apply(n,a)}}return n}function jme(t){var e,n,r,s=lt(),o=s.locale,i=s.classNames,a=s.styles,c=s.hideHead,u=s.fixedWeeks,d=s.components,f=s.weekStartsOn,h=s.firstWeekContainsDate,p=s.ISOWeek,m=Cme(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:o,weekStartsOn:f,firstWeekContainsDate:h}),v=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:$pe,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:Sme,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:Ipe;return l.jsxs("table",{id:t.id,className:i.table,style:a.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(v,{}),l.jsx("tbody",{className:i.tbody,style:a.tbody,children:m.map(function(y){return l.jsx(b,{displayMonth:t.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),l.jsx(x,{displayMonth:t.displayMonth})]})}function kme(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Nme=kme()?g.useLayoutEffect:g.useEffect,Y0=!1,Eme=0;function NM(){return"react-day-picker-".concat(++Eme)}function _me(t){var e,n=t??(Y0?NM():null),r=g.useState(n),s=r[0],o=r[1];return Nme(function(){s===null&&o(NM())},[]),g.useEffect(function(){Y0===!1&&(Y0=!0)},[]),(e=t??s)!==null&&e!==void 0?e:void 0}function Tme(t){var e,n,r=lt(),s=r.dir,o=r.classNames,i=r.styles,a=r.components,c=pp().displayMonths,u=_me(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[o.month],h=i.month,p=t.displayIndex===0,m=t.displayIndex===c.length-1,v=!p&&!m;s==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(f.push(o.caption_start),h=Ee(Ee({},h),i.caption_start)),m&&(f.push(o.caption_end),h=Ee(Ee({},h),i.caption_end)),v&&(f.push(o.caption_between),h=Ee(Ee({},h),i.caption_between));var b=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:Ope;return l.jsxs("div",{className:f.join(" "),style:h,children:[l.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(jme,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function Mme(t){var e=lt(),n=e.classNames,r=e.styles;return l.jsx("div",{className:n.months,style:r.months,children:t.children})}function Ame(t){var e,n,r=t.initialProps,s=lt(),o=Ak(),i=pp(),a=g.useState(!1),c=a[0],u=a[1];g.useEffect(function(){s.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[s.initialFocus,c,o.focus,o.focusTarget,o]);var d=[s.classNames.root,s.className];s.numberOfMonths>1&&d.push(s.classNames.multiple_months),s.showWeekNumber&&d.push(s.classNames.with_weeknumber);var f=Ee(Ee({},s.styles.root),s.style),h=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,v){var b;return Ee(Ee({},m),(b={},b[v]=r[v],b))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Mme;return l.jsx("div",Ee({className:d.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:l.jsx(p,{children:i.displayMonths.map(function(m,v){return l.jsx(Tme,{displayIndex:v,displayMonth:m},v)})})}))}function Pme(t){var e=t.children,n=npe(t,["children"]);return l.jsx(wpe,{initialProps:n,children:l.jsx(Ape,{children:l.jsx(fme,{initialProps:n,children:l.jsx(Bpe,{initialProps:n,children:l.jsx(Hpe,{initialProps:n,children:l.jsx(Xpe,{children:l.jsx(ume,{children:e})})})})})})})}function Dme(t){return l.jsx(Pme,Ee({},t,{children:l.jsx(Ame,{initialProps:t})}))}function K1({className:t,classNames:e,showOutsideDays:n=!0,...r}){return l.jsx(Dme,{showOutsideDays:n,className:ue("p-4 pointer-events-auto bg-background border border-border rounded-lg shadow-lg",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium text-foreground",nav:"space-x-1 flex items-center",nav_button:ue(ah({variant:"outline"}),"h-8 w-8 bg-background p-0 opacity-70 hover:opacity-100 border border-border"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-10 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-10 w-10 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ue(ah({variant:"ghost"}),"h-10 w-10 p-0 font-normal aria-selected:opacity-100 hover:bg-accent hover:text-accent-foreground"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground font-semibold",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>l.jsx(wJ,{className:"h-4 w-4"}),IconRight:({...s})=>l.jsx(vI,{className:"h-4 w-4"})},...r})}K1.displayName="Calendar";var Zy="Popover",[Pz,Pge]=nr(Zy,[Da]),mp=Da(),[Rme,Ua]=Pz(Zy),Dz=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:i=!1}=t,a=mp(e),c=g.useRef(null),[u,d]=g.useState(!1),[f,h]=ni({prop:r,defaultProp:s??!1,onChange:o,caller:Zy});return l.jsx(nC,{...a,children:l.jsx(Rme,{scope:e,contentId:Es(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:u,onCustomAnchorAdd:g.useCallback(()=>d(!0),[]),onCustomAnchorRemove:g.useCallback(()=>d(!1),[]),modal:i,children:n})})};Dz.displayName=Zy;var Rz="PopoverAnchor",Ome=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ua(Rz,n),o=mp(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=s;return g.useEffect(()=>(i(),()=>a()),[i,a]),l.jsx($h,{...o,...r,ref:e})});Ome.displayName=Rz;var Oz="PopoverTrigger",Iz=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ua(Oz,n),o=mp(n),i=Ue(e,s.triggerRef),a=l.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Bz(s.open),...r,ref:i,onClick:le(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?a:l.jsx($h,{asChild:!0,...o,children:a})});Iz.displayName=Oz;var Dk="PopoverPortal",[Ime,Lme]=Pz(Dk,{forceMount:void 0}),Lz=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,o=Ua(Dk,e);return l.jsx(Ime,{scope:e,forceMount:n,children:l.jsx(Or,{present:n||o.open,children:l.jsx(zh,{asChild:!0,container:s,children:r})})})};Lz.displayName=Dk;var ed="PopoverContent",Fz=g.forwardRef((t,e)=>{const n=Lme(ed,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,o=Ua(ed,t.__scopePopover);return l.jsx(Or,{present:r||o.open,children:o.modal?l.jsx($me,{...s,ref:e}):l.jsx(zme,{...s,ref:e})})});Fz.displayName=ed;var Fme=Sa("PopoverContent.RemoveScroll"),$me=g.forwardRef((t,e)=>{const n=Ua(ed,t.__scopePopover),r=g.useRef(null),s=Ue(e,r),o=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return my(i)},[]),l.jsx(Yh,{as:Fme,allowPinchZoom:!0,children:l.jsx($z,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),o.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0,u=a.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),zme=g.forwardRef((t,e)=>{const n=Ua(ed,t.__scopePopover),r=g.useRef(!1),s=g.useRef(!1);return l.jsx($z,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),$z=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=t,h=Ua(ed,n),p=mp(n);return py(),l.jsx(Gh,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:l.jsx(sd,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:l.jsx(Jv,{"data-state":Bz(h.open),role:"dialog",id:h.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),zz="PopoverClose",Bme=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ua(zz,n);return l.jsx(je.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});Bme.displayName=zz;var Vme="PopoverArrow",Ume=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=mp(n);return l.jsx(Xv,{...s,...r,ref:e})});Ume.displayName=Vme;function Bz(t){return t?"open":"closed"}var Hme=Dz,Wme=Iz,qme=Lz,Vz=Fz;const EM=Hme,_M=Wme,G1=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>l.jsx(qme,{children:l.jsx(Vz,{ref:s,align:e,sideOffset:n,className:ue("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));G1.displayName=Vz.displayName;const Kme=["Assessoria","Consultoria","Automao","CRM","E-mail Marketing","Identidade Visual","Trafego Pago","Gesto de Redes Sociais","Website"],Gme=[{value:"ativo",label:"Ativo"},{value:"pausado",label:"Pausado"},{value:"encerrado",label:"Encerrado"}],Yme=({open:t,onClose:e,cliente:n,onSave:r})=>{const[s,o]=g.useState({nome:"",descricao:"",decisores:"",status:"ativo",site:"",valor_projeto:"",frequencia_pagamento:"Mensal",servicos:[],tipo_contrato:"recorrente",data_inicio:void 0,data_encerramento:void 0}),[i,a]=g.useState("");g.useEffect(()=>{if(n){const C=Array.isArray(n.servicos)?n.servicos:[];let k=n.tipo_contrato;(!k||k!=="recorrente"&&k!=="unico")&&(k="recorrente"),o({nome:n.nome||"",descricao:n.descricao||"",decisores:n.nome_decisor||"",status:n.status||"ativo",site:n.site||"",valor_projeto:n.valor_projeto?String(Number(n.valor_projeto).toFixed(2)).replace(".",","):"",frequencia_pagamento:n.frequencia_pagamento||"Mensal",servicos:C,tipo_contrato:k,data_inicio:n.data_inicio?new Date(n.data_inicio):void 0,data_encerramento:n.data_encerramento?new Date(n.data_encerramento):void 0})}else o({nome:"",descricao:"",decisores:"",status:"ativo",site:"",valor_projeto:"",frequencia_pagamento:"Mensal",servicos:[],tipo_contrato:"recorrente",data_inicio:void 0,data_encerramento:void 0});f(!1)},[n,t]);const c=C=>{const k=C.replace(/\D/g,"");return k?(parseFloat(k)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},u=C=>{const k=c(C.target.value);o({...s,valor_projeto:k})},[d,f]=g.useState(!1),[h,p]=g.useState(!1),[m,v]=g.useState(!1);g.useEffect(()=>{if(!n||!t){f(!1);return}const C=Array.isArray(n.servicos)?n.servicos:[];let k=n.tipo_contrato;(!k||k!=="recorrente"&&k!=="unico")&&(k="recorrente");const N=JSON.stringify({nome:s.nome,descricao:s.descricao,decisores:s.decisores,status:s.status,site:s.site,valor_projeto:s.valor_projeto,frequencia_pagamento:s.frequencia_pagamento,servicos:s.servicos,tipo_contrato:s.tipo_contrato,data_inicio:s.data_inicio,data_encerramento:s.data_encerramento}),E=JSON.stringify({nome:n.nome||"",descricao:n.descricao||"",decisores:n.nome_decisor||"",status:n.status||"ativo",site:n.site||"",valor_projeto:n.valor_projeto?String(Number(n.valor_projeto).toFixed(2)).replace(".",","):"",frequencia_pagamento:n.frequencia_pagamento||"Mensal",servicos:C,tipo_contrato:k,data_inicio:n.data_inicio?new Date(n.data_inicio):void 0,data_encerramento:n.data_encerramento?new Date(n.data_encerramento):void 0});f(N!==E)},[s,n,t]);const b=C=>{if(C.preventDefault(),!s.nome.trim()){q.error("O nome  obrigatrio");return}if(s.servicos.length===0){q.error("Adicione pelo menos um servio contratado");return}if(!s.valor_projeto){q.error("O valor do projeto  obrigatrio");return}if(!s.decisores.trim()){q.error("O campo Decisores  obrigatrio");return}if(!s.data_inicio){q.error("A data de incio  obrigatria");return}if(!s.tipo_contrato||s.tipo_contrato!=="recorrente"&&s.tipo_contrato!=="unico"){q.error("Selecione um tipo de contrato vlido");return}if(s.data_inicio&&s.data_encerramento&&s.data_encerramento<s.data_inicio){q.error("A data de encerramento no pode ser anterior  data de incio");return}if(s.status==="ativo"&&s.data_encerramento){q.error("No  possvel definir data de encerramento para cliente com status Ativo");return}let k=s.site;k&&!k.match(/^https?:\/\//)&&(k="https://"+k);const N=s.valor_projeto?parseFloat(s.valor_projeto.replace(/\./g,"").replace(",",".")):0;if(n)if(d)v(!0);else{q.info("Nenhuma alterao foi realizada");return}else x(N,k)},x=(C,k)=>{r({...s,site:k,valor_projeto:C,data_inicio:s.data_inicio?wn(s.data_inicio,"yyyy-MM-dd"):null,data_encerramento:s.data_encerramento?wn(s.data_encerramento,"yyyy-MM-dd"):null}),v(!1)},y=()=>{d?p(!0):e()},w=()=>{p(!1),f(!1),e()},S=()=>{i&&!s.servicos.includes(i)&&(o(C=>({...C,servicos:[...C.servicos,i]})),a(""))},j=C=>{o(k=>({...k,servicos:k.servicos.filter(N=>N!==C)}))};return l.jsxs(l.Fragment,{children:[l.jsx(rr,{open:t,onOpenChange:y,children:l.jsxs(In,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:n?"Editar Cliente":"Novo Cliente"})}),l.jsxs("form",{onSubmit:b,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"nome",children:"Nome *"}),l.jsx(we,{id:"nome",value:s.nome,onChange:C=>o({...s,nome:C.target.value}),required:!0})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"descricao",children:"Descrio"}),l.jsx(ic,{id:"descricao",value:s.descricao,onChange:C=>o({...s,descricao:C.target.value}),rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"site",children:"Site da Empresa"}),l.jsx(we,{id:"site",type:"url",value:s.site,onChange:C=>o({...s,site:C.target.value})})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"decisores",children:"Decisores *"}),l.jsx(we,{id:"decisores",value:s.decisores,onChange:C=>o({...s,decisores:C.target.value}),placeholder:"Nome dos decisores",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"status",children:"Status"}),l.jsxs(Oe,{value:s.status,onValueChange:C=>o({...s,status:C}),children:[l.jsx(Pe,{children:l.jsx(Ie,{})}),l.jsx(De,{children:Gme.map(C=>l.jsx(z,{value:C.value,children:C.label},C.value))})]})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"valor_projeto",children:"Valor do Projeto (R$) *"}),l.jsx(we,{id:"valor_projeto",value:s.valor_projeto,onChange:u,placeholder:"0,00",required:!0})]})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"frequencia_pagamento",children:"Frequncia de Pagamento *"}),l.jsxs(Oe,{value:s.frequencia_pagamento,onValueChange:C=>o({...s,frequencia_pagamento:C}),children:[l.jsx(Pe,{id:"frequencia_pagamento",children:l.jsx(Ie,{placeholder:"Selecione a frequncia"})}),l.jsxs(De,{children:[l.jsx(z,{value:"Semanal",children:"Semanal"}),l.jsx(z,{value:"Quinzenal",children:"Quinzenal"}),l.jsx(z,{value:"Mensal",children:"Mensal"}),l.jsx(z,{value:"Trimestral",children:"Trimestral"}),l.jsx(z,{value:"Semestral",children:"Semestral"}),l.jsx(z,{value:"Anual",children:"Anual"})]})]})]}),l.jsxs("div",{children:[l.jsx(Q,{children:"Servios Contratados *"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsxs(Oe,{value:i,onValueChange:a,children:[l.jsx(Pe,{className:"flex-1",children:l.jsx(Ie,{placeholder:"Selecione um servio"})}),l.jsx(De,{children:Kme.map(C=>l.jsx(z,{value:C,children:C},C))})]}),l.jsx(G,{type:"button",onClick:S,variant:"outline",children:"Adicionar"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:s.servicos.map(C=>l.jsxs("div",{className:"flex items-center gap-1 bg-primary/10 text-primary px-3 py-1 rounded-full text-sm",children:[C,l.jsx("button",{type:"button",onClick:()=>j(C),className:"hover:text-destructive",children:l.jsx(CI,{className:"h-3 w-3"})})]},C))}),s.servicos.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Adicione pelo menos um servio"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"tipo_contrato",children:"Tipo de Contrato *"}),l.jsxs(Oe,{value:s.tipo_contrato,onValueChange:C=>{C!=="recorrente"&&C!=="unico"||o({...s,tipo_contrato:C})},required:!0,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Selecione o tipo"})}),l.jsxs(De,{children:[l.jsx(z,{value:"recorrente",children:"Recorrente"}),l.jsx(z,{value:"unico",children:"nico"})]})]})]}),l.jsxs("div",{children:[l.jsx(Q,{children:"Data de Incio *"}),l.jsxs(EM,{children:[l.jsx(_M,{asChild:!0,children:l.jsxs(G,{variant:"outline",className:ue("w-full justify-start text-left font-normal",!s.data_inicio&&"text-muted-foreground"),children:[l.jsx(yn,{className:"mr-2 h-4 w-4"}),s.data_inicio?wn(s.data_inicio,"dd/MM/yyyy"):l.jsx("span",{children:"Selecione a data"})]})}),l.jsx(G1,{className:"w-auto p-0",align:"start",children:l.jsx(K1,{mode:"single",selected:s.data_inicio,onSelect:C=>o({...s,data_inicio:C}),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),l.jsxs("div",{children:[l.jsx(Q,{children:"Data de Encerramento"}),l.jsxs(EM,{children:[l.jsx(_M,{asChild:!0,children:l.jsxs(G,{variant:"outline",disabled:s.status==="ativo",className:ue("w-full justify-start text-left font-normal",!s.data_encerramento&&"text-muted-foreground"),onClick:()=>{s.status==="ativo"&&q.info("No  possvel definir data de encerramento para cliente com status Ativo")},children:[l.jsx(yn,{className:"mr-2 h-4 w-4"}),s.data_encerramento?wn(s.data_encerramento,"dd/MM/yyyy"):l.jsx("span",{children:"Selecione a data"})]})}),s.status!=="ativo"&&l.jsx(G1,{className:"w-auto p-0",align:"start",children:l.jsx(K1,{mode:"single",selected:s.data_encerramento,onSelect:C=>o({...s,data_encerramento:C}),disabled:C=>s.data_inicio?C<s.data_inicio:!1,initialFocus:!0,className:"pointer-events-auto"})})]})]}),l.jsxs(Qh,{children:[l.jsx(G,{type:"button",variant:"outline",onClick:y,children:"Cancelar"}),l.jsx(G,{type:"submit",children:n?"Salvar Alteraes":"Criar Cliente"})]})]})]})}),l.jsx(ai,{open:h,onOpenChange:p,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Descartar Alteraes?"}),l.jsx(mo,{children:"Voc tem alteraes no salvas. Tem certeza que deseja sair sem salvar?"})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Continuar Editando"}),l.jsx(go,{onClick:w,children:"Sair sem Salvar"})]})]})}),l.jsx(ai,{open:m,onOpenChange:v,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar Alteraes"}),l.jsx(mo,{children:"Tem certeza que deseja salvar as alteraes realizadas?"})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Cancelar"}),l.jsx(go,{onClick:()=>{const C=s.valor_projeto?parseFloat(s.valor_projeto.replace(/\./g,"").replace(",",".")):0;let k=s.site;k&&!k.match(/^https?:\/\//)&&(k="https://"+k),x(C,k)},children:"Confirmar"})]})]})})]})},Uz=({open:t,onClose:e,email:n,password:r,title:s="Senha Temporria Gerada"})=>{const[o,i]=g.useState(!1),a=()=>{const c=n?`E-mail: ${n}
Senha: ${r}`:`Senha: ${r}`;navigator.clipboard.writeText(c),i(!0),q.success("Copiado para rea de transferncia!"),setTimeout(()=>i(!1),2e3)};return l.jsx(rr,{open:t,onOpenChange:e,children:l.jsxs(In,{className:"max-w-md",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:s})}),l.jsxs("div",{className:"space-y-4",children:[n&&l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"email",children:"E-mail"}),l.jsx(we,{id:"email",value:n,readOnly:!0,className:"bg-muted"})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"password",children:"Senha Temporria"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{id:"password",value:r,readOnly:!0,className:"bg-muted font-mono"}),l.jsx(G,{type:"button",variant:"outline",size:"icon",onClick:a,children:o?l.jsx(Ar,{className:"h-4 w-4 text-green-500"}):l.jsx(co,{className:"h-4 w-4"})})]})]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta senha  temporria e deve ser utilizada no primeiro acesso. O usurio poder alterar a senha aps o login."})]}),l.jsx(Qh,{children:l.jsx(G,{onClick:e,children:"Fechar"})})]})})},Qme=({open:t,onClose:e,cliente:n})=>{const r=ls(),[s,o]=g.useState(!1),[i,a]=g.useState(null),[c,u]=g.useState(""),[d,f]=g.useState(""),[h,p]=g.useState(!1),[m,v]=g.useState(null),[b,x]=g.useState(!1),[y,w]=g.useState(null),[S,j]=g.useState(!1),[C,k]=g.useState(""),[N,E]=g.useState(""),[A,$]=g.useState(!1),{data:H=[],isLoading:O}=jn({queryKey:["client-accesses",n.id],queryFn:async()=>{const{data:M,error:F}=await re.from("perfis").select("*").eq("empresa_id",n.id).in("funcao",["cliente_admin","cliente_membro"]);if(F)throw F;return M},enabled:t}),V=Qe({mutationFn:async({email:M,nomeCompleto:F,principal:Y})=>{const oe=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),{data:se,error:pe}=await re.functions.invoke("create-auth-users-v2",{body:{users:[{email:M,password:oe,empresa_id:n.id,nome_completo:F,funcao:"cliente_membro",principal:Y}]}});if(pe)throw pe;return{email:M,senha:oe}},onSuccess:M=>{r.invalidateQueries({queryKey:["client-accesses",n.id]}),E(M.email),k(M.senha),j(!0),o(!1),u(""),f(""),q.success("Acesso criado com sucesso!")},onError:M=>{q.error(M.message||"Erro ao criar acesso")}}),B=Qe({mutationFn:async({id:M,email:F,nomeCompleto:Y,principal:oe})=>{if(console.log("Atualizando acesso:",{id:M,email:F,nomeCompleto:Y,principal:oe}),oe){const{error:ke}=await re.from("perfis").update({principal:!1}).eq("empresa_id",n.id).eq("principal",!0).neq("id",M);ke&&console.error("Erro ao atualizar principal anterior:",ke)}const{data:se,error:pe}=await re.from("perfis").update({nome_completo:Y,principal:oe}).eq("id",M).select();if(pe)throw console.error("Erro ao atualizar perfil:",pe),pe;return console.log("Perfil atualizado com sucesso:",se),se},onSuccess:()=>{r.invalidateQueries({queryKey:["client-accesses",n.id]}),a(null),u(""),f(""),$(!1),o(!1),q.success("Acesso atualizado com sucesso!")},onError:M=>{q.error(M.message||"Erro ao atualizar acesso")}}),K=Qe({mutationFn:async M=>{console.log("Tentando excluir acesso:",M);const F=H.find(se=>se.id===M);if(!F)throw new Error("Acesso no encontrado");console.log("Deletando usurio do email:",F.email);const{data:Y,error:oe}=await re.functions.invoke("delete-auth-user",{body:{email:F.email}});if(oe)throw console.error("Erro ao deletar usurio:",oe),oe;return console.log("Usurio deletado com sucesso:",Y),Y},onSuccess:()=>{r.invalidateQueries({queryKey:["client-accesses",n.id]}),p(!1),v(null),q.success("Acesso excludo com sucesso!")},onError:M=>{q.error(M.message||"Erro ao excluir acesso"),p(!1),v(null)}}),R=Qe({mutationFn:async M=>{const F=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),{error:Y}=await re.functions.invoke("reset-user-password",{body:{email:M,newPassword:F}});if(Y)throw Y;return{email:M,senha:F}},onSuccess:M=>{r.invalidateQueries({queryKey:["client-accesses",n.id]}),E(M.email),k(M.senha),j(!0),x(!1),w(null),q.success("Senha resetada com sucesso!")},onError:M=>{q.error(M.message||"Erro ao resetar senha")}}),T=M=>{M.preventDefault(),i?B.mutate({id:i.id,email:c,nomeCompleto:d,principal:A}):V.mutate({email:c,nomeCompleto:d,principal:A})},D=M=>{a(M),u(M.email),f(M.nome_completo),$(!!M.principal),o(!0)},L=()=>{o(!1),a(null),u(""),f(""),$(!1)},X=M=>{if(M.principal){q.error("No  possvel excluir o usurio principal");return}v(M),p(!0)},I=async()=>{m&&(await K.mutateAsync(m.id),p(!1),v(null))},W=M=>{w(M),x(!0)},_=async()=>{y&&await R.mutateAsync(y.email)},ee=n.status==="encerrado";return l.jsxs(l.Fragment,{children:[l.jsx(rr,{open:t,onOpenChange:e,children:l.jsxs(In,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Ln,{children:l.jsxs(Fn,{children:["Gerenciar Acessos - ",n.nome]})}),ee&&l.jsx("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-lg",children:l.jsx("p",{className:"text-sm font-medium",children:"Este cliente est com status ENCERRADO. Todos os acessos esto bloqueados."})}),l.jsxs("div",{className:"space-y-4",children:[s?l.jsxs("form",{onSubmit:T,className:"space-y-4 border p-4 rounded-lg",children:[l.jsx("h3",{className:"font-semibold",children:i?"Editar Acesso":"Novo Acesso"}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"nome",children:"Nome Completo *"}),l.jsx(we,{id:"nome",value:d,onChange:M=>f(M.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"email",children:"E-mail *"}),l.jsx(we,{id:"email",type:"email",value:c,onChange:M=>u(M.target.value),required:!0,disabled:!!i})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"principal",checked:A,onChange:M=>$(M.target.checked),className:"h-4 w-4 rounded border-border"}),l.jsx(Q,{htmlFor:"principal",className:"cursor-pointer",children:"Usurio Principal"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(G,{type:"submit",disabled:V.isPending||B.isPending,children:V.isPending||B.isPending?"Salvando...":i?"Salvar":"Criar"}),l.jsx(G,{type:"button",variant:"outline",onClick:L,children:"Cancelar"})]})]}):l.jsxs(G,{onClick:()=>o(!0),disabled:ee,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Novo Acesso"]}),l.jsx("div",{className:"border rounded-lg",children:l.jsxs(np,{children:[l.jsx(rp,{children:l.jsxs(Er,{children:[l.jsx(ht,{children:"Nome"}),l.jsx(ht,{children:"E-mail"}),l.jsx(ht,{children:"Principal"}),l.jsx(ht,{className:"text-right",children:"Aes"})]})}),l.jsx(sp,{children:O?l.jsx(Er,{children:l.jsx(rt,{colSpan:4,className:"text-center py-8",children:"Carregando..."})}):H.length===0?l.jsx(Er,{children:l.jsx(rt,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:"Nenhum acesso cadastrado"})}):H.map(M=>l.jsxs(Er,{children:[l.jsx(rt,{children:M.nome_completo}),l.jsx(rt,{children:M.email}),l.jsx(rt,{children:M.principal?l.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:"Principal"}):"-"}),l.jsx(rt,{className:"text-right",children:l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>W(M),title:"Resetar Senha",disabled:ee||R.isPending,children:l.jsx(Qw,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>D(M),disabled:ee,children:l.jsx(Ul,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>X(M),className:"text-destructive hover:text-destructive",disabled:M.principal||ee||K.isPending,children:l.jsx(Ea,{className:"h-4 w-4"})})]})})]},M.id))})]})})]})]})}),l.jsx(ai,{open:h,onOpenChange:p,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar Excluso"}),l.jsxs(mo,{children:['Tem certeza que deseja excluir o acesso de "',m==null?void 0:m.nome_completo,'"? Esta ao no pode ser desfeita.']})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Cancelar"}),l.jsx(go,{onClick:I,children:"Excluir"})]})]})}),l.jsx(ai,{open:b,onOpenChange:x,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar Reset de Senha"}),l.jsxs(mo,{children:['Tem certeza que deseja resetar a senha do usurio "',y==null?void 0:y.nome_completo,'"? Uma nova senha temporria ser gerada.']})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Cancelar"}),l.jsx(go,{onClick:_,children:"Resetar Senha"})]})]})}),l.jsx(Uz,{open:S,onClose:()=>j(!1),email:N,password:C})]})},Jme=({open:t,onClose:e,onSubmit:n,clienteNome:r})=>{const[s,o]=g.useState(""),[i,a]=g.useState(""),c=d=>{if(d.preventDefault(),!s.trim()||!i.trim()){q.error("Preencha todos os campos");return}n(s.trim(),i.trim()),o(""),a("")},u=()=>{o(""),a(""),e()};return l.jsx(rr,{open:t,onOpenChange:u,children:l.jsxs(In,{className:"max-w-md",children:[l.jsx(Ln,{children:l.jsx(Fn,{children:"Definir Primeiro Acesso"})}),l.jsxs("form",{onSubmit:c,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cliente criado com sucesso! Agora defina o primeiro usurio de acesso para ",l.jsx("strong",{children:r}),"."]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"nome",children:"Nome Completo *"}),l.jsx(we,{id:"nome",value:i,onChange:d=>a(d.target.value),placeholder:"Nome completo do usurio",required:!0})]}),l.jsxs("div",{children:[l.jsx(Q,{htmlFor:"email",children:"E-mail *"}),l.jsx(we,{id:"email",type:"email",value:s,onChange:d=>o(d.target.value),placeholder:"email@exemplo.com",required:!0})]}),l.jsxs(Qh,{children:[l.jsx(G,{type:"button",variant:"outline",onClick:u,children:"Cancelar"}),l.jsx(G,{type:"submit",children:"Criar Acesso"})]})]})]})})},Xme={ativo:"bg-green-500/10 text-green-500 border-green-500/20",pausado:"bg-orange-500/10 text-orange-500 border-orange-500/20",encerrado:"bg-red-500/10 text-red-500 border-red-500/20"},Zme={ativo:"Ativo",pausado:"Pausado",encerrado:"Encerrado"},ege=()=>{const{clientes:t,isLoading:e,createCliente:n,updateCliente:r,deleteCliente:s}=tpe(),[o,i]=g.useState(""),[a,c]=g.useState(!1),[u,d]=g.useState(null),[f,h]=g.useState(!1),[p,m]=g.useState(null),[v,b]=g.useState(!1),[x,y]=g.useState(null),[w,S]=g.useState(!1),[j,C]=g.useState(""),[k,N]=g.useState(""),[E,A]=g.useState(!1),[$,H]=g.useState(null),[O,V]=g.useState(""),B=t.filter(W=>W.nome!=="DMM Services").filter(W=>W.nome.toLowerCase().includes(o.toLowerCase())),K=()=>{d(null),c(!0)},R=W=>{d(W),c(!0)},T=async W=>{if(u)await r.mutateAsync({id:u.id,cliente:W}),c(!1);else{const _=await n.mutateAsync(W);c(!1),H(_.id),V(_.nome),A(!0)}},D=async(W,_)=>{var ee,M;if($)try{const F=Math.random().toString(36).slice(-8)+Math.random().toString(36).slice(-8).toUpperCase(),{data:Y,error:oe}=await re.functions.invoke("create-auth-users-v2",{body:{users:[{email:W,password:F,empresa_id:$,nome_completo:_,funcao:"cliente_admin",principal:!0}]}});if(oe)throw oe;if(((M=(ee=Y==null?void 0:Y.results)==null?void 0:ee[0])==null?void 0:M.status)==="error")throw new Error(Y.results[0].message);A(!1),N(W),C(F),S(!0),H(null),V("")}catch(F){q.error(F.message||"Erro ao criar acesso")}},L=W=>{m(W),h(!0)},X=async()=>{p&&(await s.mutateAsync(p.id),h(!1),m(null))},I=W=>{y(W),b(!0)};return l.jsxs("div",{className:"flex min-h-screen w-full bg-background",children:[l.jsx("div",{className:"fixed top-0 left-0 h-screen z-50",children:l.jsx(Rn,{userType:"team"})}),l.jsx("main",{className:"flex-1 ml-64 p-8",children:l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Gesto de Clientes"}),l.jsx("p",{className:"text-muted-foreground mt-1",children:"Gerencie todos os clientes da DMM"})]}),l.jsxs(G,{onClick:K,children:[l.jsx(ii,{className:"h-4 w-4 mr-2"}),"Novo Cliente"]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar por nome ou slug...",value:o,onChange:W=>i(W.target.value),className:"pl-10"})]}),l.jsx("div",{className:"bg-card rounded-lg border",children:l.jsxs(np,{children:[l.jsx(rp,{children:l.jsxs(Er,{children:[l.jsx(ht,{children:"Nome"}),l.jsx(ht,{children:"Status"}),l.jsx(ht,{children:"Tipo Contrato"}),l.jsx(ht,{children:"Valor Projeto"}),l.jsx(ht,{children:"Servios"}),l.jsx(ht,{className:"text-right",children:"Aes"})]})}),l.jsx(sp,{children:e?l.jsx(Er,{children:l.jsx(rt,{colSpan:7,className:"text-center py-8",children:"Carregando..."})}):B.length===0?l.jsx(Er,{children:l.jsx(rt,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"Nenhum cliente encontrado"})}):B.map(W=>l.jsxs(Er,{children:[l.jsx(rt,{children:l.jsx("div",{className:"font-medium",children:W.nome})}),l.jsx(rt,{children:l.jsx(Be,{variant:"outline",className:Xme[W.status||"ativo"],children:Zme[W.status||"ativo"]})}),l.jsx(rt,{children:l.jsx(Be,{variant:"secondary",children:W.tipo_contrato==="recorrente"?"Recorrente":W.tipo_contrato==="unico"?"nico":"-"})}),l.jsx(rt,{children:W.valor_projeto?`R$ ${Number(W.valor_projeto).toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"-"}),l.jsx(rt,{children:l.jsx("div",{className:"text-xs",children:(()=>{try{const _=Array.isArray(W.servicos)?W.servicos:[];return _.length>0?_.slice(0,2).join(", ")+(_.length>2?` +${_.length-2}`:""):"-"}catch{return"-"}})()})}),l.jsx(rt,{className:"text-right",children:l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>I(W),title:"Gerenciar Acessos",children:l.jsx(sc,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>R(W),children:l.jsx(Ul,{className:"h-4 w-4"})}),l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>L(W),className:"text-destructive hover:text-destructive",children:l.jsx(Ea,{className:"h-4 w-4"})})]})})]},W.id))})]})})]})}),l.jsx(Yme,{open:a,onClose:()=>c(!1),cliente:u,onSave:T}),x&&l.jsx(Qme,{open:v,onClose:()=>{b(!1),y(null)},cliente:x}),l.jsx(Jme,{open:E,onClose:()=>{A(!1),H(null),V("")},onSubmit:D,clienteNome:O}),l.jsx(Uz,{open:w,onClose:()=>{S(!1),C(""),N("")},email:k,password:j,title:"Acesso Criado com Sucesso"}),l.jsx(ai,{open:f,onOpenChange:h,children:l.jsxs(uo,{children:[l.jsxs(fo,{children:[l.jsx(po,{children:"Confirmar Excluso"}),l.jsxs(mo,{children:['Tem certeza que deseja excluir o cliente "',p==null?void 0:p.nome,'"? Esta ao no pode ser desfeita e s ser permitida se no houver registros associados (acessos, tarefas, checklists ou usurios).']})]}),l.jsxs(ho,{children:[l.jsx(vo,{children:"Cancelar"}),l.jsx(go,{onClick:X,children:"Excluir"})]})]})})]})},tge=()=>{const t=ls(),{data:e=[],isLoading:n}=jn({queryKey:["despesas"],queryFn:async()=>{try{const{data:c,error:u}=await re.from("despesas").select("*").order("data_pagamento",{ascending:!1});if(u)throw console.error("Erro ao buscar despesas:",u),u;return c}catch(c){return console.error("Erro na query de despesas:",c),[]}}}),r=Qe({mutationFn:async c=>{const{data:{user:u}}=await re.auth.getUser();if(!u)throw new Error("Usurio no autenticado");const{data:d}=await re.from("perfis").select("id").eq("email",u.email).single();if(!d)throw new Error("Perfil no encontrado");const{data:f,error:h}=await re.from("despesas").insert([{...c,criado_por:d.id}]).select().single();if(h)throw h;return f},onSuccess:()=>{t.invalidateQueries({queryKey:["despesas"]}),q.success("Despesa adicionada com sucesso!")},onError:c=>{console.error("Erro ao criar despesa:",c),q.error("Erro ao adicionar despesa")}}),s=Qe({mutationFn:async({id:c,...u})=>{const{data:d,error:f}=await re.from("despesas").update(u).eq("id",c).select().single();if(f)throw f;return d},onSuccess:()=>{t.invalidateQueries({queryKey:["despesas"]}),q.success("Despesa atualizada com sucesso!")},onError:c=>{console.error("Erro ao atualizar despesa:",c),q.error("Erro ao atualizar despesa")}}),o=Qe({mutationFn:async c=>{const{error:u}=await re.from("despesas").delete().eq("id",c);if(u)throw u},onSuccess:()=>{t.invalidateQueries({queryKey:["despesas"]}),q.success("Despesa excluda com sucesso!")},onError:c=>{console.error("Erro ao excluir despesa:",c),q.error("Erro ao excluir despesa")}}),i=c=>{const u=new Date(c);for(;u.getDay()===0||u.getDay()===6;)u.getDay()===0?u.setDate(u.getDate()+1):u.getDay()===6&&u.setDate(u.getDate()+2);return u},a=Qe({mutationFn:async()=>{const{data:c,error:u}=await re.from("despesas").select("*").eq("recorrente",!0).not("data_inicio","is",null);if(u)throw u;if(!c||c.length===0)return{created:0,skipped:0};const{data:{user:d}}=await re.auth.getUser();if(!d)throw new Error("Usurio no autenticado");const{data:f}=await re.from("perfis").select("id").eq("email",d.email).single();if(!f)throw new Error("Perfil no encontrado");let h=0,p=0;for(const m of c){const v=new Date(m.data_inicio),b=new Date;let x;m.data_fim?x=new Date(m.data_fim):x=b;let y=new Date(v);for(;y<=x;){let w=i(new Date(y));if(m.data_fim){const C=new Date(m.data_fim);if(w>C)break}const S=w.toISOString().split("T")[0],{data:j}=await re.from("despesas").select("id").eq("nome",m.nome).eq("data_pagamento",S);if(!j||j.length===0){const{error:C}=await re.from("despesas").insert({nome:m.nome,tipo:m.tipo,data_pagamento:S,meio_pagamento:m.meio_pagamento,valor_unitario:m.valor_unitario,quantidade:m.quantidade,recorrente:!1,notas:"Despesa gerada automaticamente",criado_por:f.id});C?console.error("Erro ao criar despesa recorrente:",C):h++}else p++;switch(m.frequencia_recorrencia){case"Semanal":y.setDate(y.getDate()+7);break;case"Quinzenal":y.setDate(y.getDate()+15);break;case"Mensal":y.setMonth(y.getMonth()+1);break;case"Trimestral":y.setMonth(y.getMonth()+3);break;case"Semestral":y.setMonth(y.getMonth()+6);break;case"Anual":y.setFullYear(y.getFullYear()+1);break;default:y.setMonth(y.getMonth()+1)}}}return{created:h,skipped:p}},onSuccess:c=>{t.invalidateQueries({queryKey:["despesas"]}),c.created>0&&q.success(`${c.created} despesa(s) gerada(s) automaticamente`)},onError:c=>{console.error("Erro ao gerar despesas recorrentes:",c),q.error("Erro ao gerar despesas recorrentes")}});return{despesas:e,isLoading:n,createDespesa:r,updateDespesa:s,deleteDespesa:o,gerarDespesasRecorrentes:a}},nge=()=>{const{pagamentos:t,createPagamento:e,updatePagamento:n,deletePagamento:r,uploadComprovante:s,deleteComprovante:o,gerarCobrancasRecorrentes:i}=hF(),{empresas:a}=cn(),{despesas:c,createDespesa:u,updateDespesa:d,deleteDespesa:f,gerarDespesasRecorrentes:h}=tge(),[p,m]=g.useState(""),[v,b]=g.useState("all"),[x,y]=g.useState("all"),[w,S]=g.useState("all");g.useState("all"),g.useState("mes-atual"),g.useState(""),g.useState(""),g.useState("movimentacoes");const[j,C]=g.useState(!1);g.useState(!1),g.useState(!1),g.useState(!1),g.useState(null),g.useState(!1),g.useRef(null),g.useState(!1),g.useState(!1),g.useState(!1),g.useState(null),g.useState(!1),g.useState({empresa_id:"",valor:"",data_vencimento:"",status:"",forma_pagamento:"",notas:"",comprovante_file:null}),g.useState(null);const k=g.useRef(!1);g.useEffect(()=>{k.current||(k.current=!0,i.mutate(),h.mutate())},[]);const N=()=>{const R=new Date,T=R.getMonth(),D=R.getFullYear();return t.filter(L=>{const X=new Date(L.data_vencimento);return X.getMonth()===T&&X.getFullYear()===D})},E=R=>R.filter(T=>{var _;const L=(((_=T.empresas)==null?void 0:_.nome)||"").toLowerCase().includes(p.toLowerCase()),X=v==="all"||T.status===v,I=x==="all"||T.forma_pagamento===x,W=w==="all"||T.empresa_id===w;return L&&X&&I&&W}),A=R=>R.reduce((T,D)=>(D.status==="Pago"?T.totalPago+=D.valor:D.status==="Pendente"?T.totalPendente+=D.valor:D.status==="Atrasado"&&(T.totalAtrasado+=D.valor),T.faturamentoPrevisto+=D.valor,T),{totalPago:0,totalPendente:0,totalAtrasado:0,faturamentoPrevisto:0}),$=R=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R),H=R=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs(Me,{children:[l.jsx(Ge,{className:"pb-2",children:l.jsx(nt,{className:"text-sm font-medium text-muted-foreground",children:"Total Pago"})}),l.jsx(Ae,{children:l.jsx("div",{className:"text-2xl font-bold text-green-600",children:$(R.totalPago)})})]}),l.jsxs(Me,{children:[l.jsx(Ge,{className:"pb-2",children:l.jsx(nt,{className:"text-sm font-medium text-muted-foreground",children:"Total Pendente"})}),l.jsx(Ae,{children:l.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:$(R.totalPendente)})})]}),l.jsxs(Me,{children:[l.jsx(Ge,{className:"pb-2",children:l.jsx(nt,{className:"text-sm font-medium text-muted-foreground",children:"Total Atrasado"})}),l.jsx(Ae,{children:l.jsx("div",{className:"text-2xl font-bold text-red-600",children:$(R.totalAtrasado)})})]}),l.jsxs(Me,{children:[l.jsx(Ge,{className:"pb-2",children:l.jsx(nt,{className:"text-sm font-medium text-muted-foreground",children:"Faturamento Total"})}),l.jsx(Ae,{children:l.jsx("div",{className:"text-2xl font-bold text-primary",children:$(R.faturamentoPrevisto)})})]})]}),O=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Fa,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l.jsx(we,{placeholder:"Buscar...",value:p,onChange:R=>m(R.target.value),className:"pl-10"})]}),l.jsxs(Oe,{value:w,onValueChange:S,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Cliente"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os clientes"}),a.map(R=>l.jsx(z,{value:R.id,children:R.nome},R.id))]})]}),l.jsxs(Oe,{value:v,onValueChange:b,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Status"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todos os status"}),l.jsx(z,{value:"Pago",children:"Pago"}),l.jsx(z,{value:"Pendente",children:"Pendente"}),l.jsx(z,{value:"Atrasado",children:"Atrasado"})]})]}),l.jsxs(Oe,{value:x,onValueChange:y,children:[l.jsx(Pe,{children:l.jsx(Ie,{placeholder:"Forma de pagamento"})}),l.jsxs(De,{children:[l.jsx(z,{value:"all",children:"Todas as formas"}),l.jsx(z,{value:"Pix",children:"Pix"}),l.jsx(z,{value:"Boleto",children:"Boleto"}),l.jsx(z,{value:"Carto",children:"Carto"}),l.jsx(z,{value:"Transferncia",children:"Transferncia"})]})]})]}),V=N(),B=E(V),K=A(B);return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Rn,{userType:"admin"}),l.jsx("div",{className:"lg:pl-64",children:l.jsxs("div",{className:"p-6 lg:p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Movimentaes"}),l.jsx("p",{className:"text-muted-foreground mt-2",children:"Acompanhe suas movimentaes financeiras"})]}),O(),H(K),l.jsx("div",{className:"mb-4",children:l.jsxs(G,{onClick:()=>C(!0),children:[l.jsx(ii,{className:"mr-2"}),"Adicionar Movimentao"]})}),l.jsxs(np,{children:[l.jsx(rp,{children:l.jsxs(Er,{children:[l.jsx(ht,{children:"Cliente"}),l.jsx(ht,{children:"Valor"}),l.jsx(ht,{children:"Tipo"}),l.jsx(ht,{children:"Categoria"}),l.jsx(ht,{children:"Status"}),l.jsx(ht,{children:"Forma de Pagamento"}),l.jsx(ht,{children:"Data"}),l.jsx(ht,{children:"Comprovante"}),l.jsx(ht,{children:"Aes"})]})}),l.jsx(sp,{children:B.map(R=>{var T;return l.jsxs(Er,{children:[l.jsx(rt,{children:(T=R.empresas)==null?void 0:T.nome}),l.jsx(rt,{children:$(R.valor)}),l.jsx(rt,{children:R.tipo}),l.jsx(rt,{children:R.categoria}),l.jsx(rt,{children:l.jsx(Be,{className:getStatusColor(R.status),children:R.status})}),l.jsx(rt,{children:R.forma_pagamento}),l.jsx(rt,{children:new Date(R.data_vencimento).toLocaleDateString("pt-BR")}),l.jsx(rt,{children:R.comprovante_url?l.jsx(G,{variant:"ghost",size:"sm",onClick:()=>window.open(R.comprovante_url,"_blank"),children:"Visualizar"}):l.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),l.jsxs(rt,{children:[l.jsx(G,{variant:"outline",onClick:()=>handleEdit(R),children:"Editar"}),l.jsx(G,{variant:"outline",onClick:()=>handleDelete(R),children:"Excluir"})]})]},R.id)})})]})]})})]})},rge=()=>{const t=nc();return g.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},sge=new XH,oge=()=>l.jsx(rW,{client:sge,children:l.jsx(Oq,{children:l.jsx(Rq,{children:l.jsxs(OH,{children:[l.jsx(GV,{}),l.jsx(u9,{children:l.jsxs(n9,{children:[l.jsx(Vn,{path:"/",element:l.jsx(HJ,{})}),l.jsx(Vn,{path:"/login",element:l.jsx(UJ,{})}),l.jsx(Vn,{path:"/dashboard-client",element:l.jsx(fs,{requiredRole:"client",children:l.jsx(KJ,{})})}),l.jsx(Vn,{path:"/tasks-client",element:l.jsx(fs,{requiredRole:"client",children:l.jsx(HZ,{})})}),l.jsx(Vn,{path:"/checklist-client",element:l.jsx(fs,{requiredRole:"client",children:l.jsx(Fte,{})})}),l.jsx(Vn,{path:"/access-client",element:l.jsx(fs,{requiredRole:"client",children:l.jsx(wse,{})})}),l.jsx(Vn,{path:"/financial-client",element:l.jsx(fs,{requiredRole:"client",children:l.jsx(jse,{})})}),l.jsx(Vn,{path:"/dashboard-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(Ese,{})})}),l.jsx(Vn,{path:"/tasks-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(Rhe,{})})}),l.jsx(Vn,{path:"/checklist-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(Ihe,{})})}),l.jsx(Vn,{path:"/access-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(epe,{})})}),l.jsx(Vn,{path:"/clients-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(ege,{})})}),l.jsx(Vn,{path:"/financial-team",element:l.jsx(fs,{requiredRole:"dmm",children:l.jsx(nge,{})})}),l.jsx(Vn,{path:"*",element:l.jsx(rge,{})})]})})]})})})});JP(document.getElementById("root")).render(l.jsx(J.StrictMode,{children:l.jsx(oge,{})}));
